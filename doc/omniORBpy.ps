%!PS-Adobe-2.0
%%Creator: dvips(k) 5.86 Copyright 1999 Radical Eye Software
%%Title: omniORBpy.dvi
%%Pages: 61
%%PageOrder: Ascend
%%BoundingBox: 0 0 596 842
%%DocumentFonts: Palatino-Roman Palatino-Italic Palatino-Bold Courier
%%+ Courier-Oblique
%%DocumentPaperSizes: A4
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips omniORBpy
%DVIPSParameters: dpi=600, compressed
%DVIPSSource:  TeX output 2000.06.27:1542
%%BeginProcSet: texc.pro
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/id 0 N/rw 0 N/rc 0 N/gp 0 N/cp 0 N/G 0 N/CharBuilder{save 3
1 roll S A/base get 2 index get S/BitMaps get S get/Cd X pop/ctr 0 N Cdx
0 Cx Cy Ch sub Cx Cw add Cy setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx
sub Cy .1 sub]/id Ci N/rw Cw 7 add 8 idiv string N/rc 0 N/gp 0 N/cp 0 N{
rc 0 ne{rc 1 sub/rc X rw}{G}ifelse}imagemask restore}B/G{{id gp get/gp
gp 1 add N A 18 mod S 18 idiv pl S get exec}loop}B/adv{cp add/cp X}B
/chg{rw cp id gp 4 index getinterval putinterval A gp add/gp X adv}B/nd{
/cp 0 N rw exit}B/lsh{rw cp 2 copy get A 0 eq{pop 1}{A 255 eq{pop 254}{
A A add 255 and S 1 and or}ifelse}ifelse put 1 adv}B/rsh{rw cp 2 copy
get A 0 eq{pop 128}{A 255 eq{pop 127}{A 2 idiv S 128 and or}ifelse}
ifelse put 1 adv}B/clr{rw cp 2 index string putinterval adv}B/set{rw cp
fillstr 0 4 index getinterval putinterval adv}B/fillstr 18 string 0 1 17
{2 copy 255 put pop}for N/pl[{adv 1 chg}{adv 1 chg nd}{1 add chg}{1 add
chg nd}{adv lsh}{adv lsh nd}{adv rsh}{adv rsh nd}{1 add adv}{/rc X nd}{
1 add set}{1 add clr}{adv 2 chg}{adv 2 chg nd}{pop nd}]A{bind pop}
forall N/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "1 July 1998",
%   filename = "8r.enc",
%   email = "tex-fonts@@tug.org",
%   docstring = "Encoding for TrueType or Type 1 fonts
%                to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both 
% ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def

%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type/integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics/Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{
dup sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1
roll mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def
dup[exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}
if}forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}
def end

%%EndProcSet
%%BeginProcSet: special.pro
%!
TeXDict begin/SDict 200 dict N SDict begin/@SpecialDefaults{/hs 612 N
/vs 792 N/ho 0 N/vo 0 N/hsc 1 N/vsc 1 N/ang 0 N/CLIP 0 N/rwiSeen false N
/rhiSeen false N/letter{}N/note{}N/a4{}N/legal{}N}B/@scaleunit 100 N
/@hscale{@scaleunit div/hsc X}B/@vscale{@scaleunit div/vsc X}B/@hsize{
/hs X/CLIP 1 N}B/@vsize{/vs X/CLIP 1 N}B/@clip{/CLIP 2 N}B/@hoffset{/ho
X}B/@voffset{/vo X}B/@angle{/ang X}B/@rwi{10 div/rwi X/rwiSeen true N}B
/@rhi{10 div/rhi X/rhiSeen true N}B/@llx{/llx X}B/@lly{/lly X}B/@urx{
/urx X}B/@ury{/ury X}B/magscale true def end/@MacSetUp{userdict/md known
{userdict/md get type/dicttype eq{userdict begin md length 10 add md
maxlength ge{/md md dup length 20 add dict copy def}if end md begin
/letter{}N/note{}N/legal{}N/od{txpose 1 0 mtx defaultmatrix dtransform S
atan/pa X newpath clippath mark{transform{itransform moveto}}{transform{
itransform lineto}}{6 -2 roll transform 6 -2 roll transform 6 -2 roll
transform{itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll
curveto}}{{closepath}}pathforall newpath counttomark array astore/gc xdf
pop ct 39 0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}
if}N/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1
-1 scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3
get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip
yflip not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub
neg 0 TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{
noflips{TR pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop
90 rotate 1 -1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get
neg sub neg TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr
1 get neg sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr
2 get ppr 0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4
-1 roll add 2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S
TR}if}N/cp{pop pop showpage pm restore}N end}if}if}N/normalscale{
Resolution 72 div VResolution 72 div neg scale magscale{DVImag dup scale
}if 0 setgray}N/psfts{S 65781.76 div N}N/startTexFig{/psf$SavedState
save N userdict maxlength dict begin/magscale true def normalscale
currentpoint TR/psf$ury psfts/psf$urx psfts/psf$lly psfts/psf$llx psfts
/psf$y psfts/psf$x psfts currentpoint/psf$cy X/psf$cx X/psf$sx psf$x
psf$urx psf$llx sub div N/psf$sy psf$y psf$ury psf$lly sub div N psf$sx
psf$sy scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub
TR/showpage{}N/erasepage{}N/copypage{}N/p 3 def @MacSetUp}N/doclip{
psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll newpath 4 copy 4 2
roll moveto 6 -1 roll S lineto S lineto S lineto closepath clip newpath
moveto}N/endTexFig{end psf$SavedState restore}N/@beginspecial{SDict
begin/SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count/ocount X/dcount countdictstack N}N/@setspecial{
CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto
closepath clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx
sub div rhiSeen{rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR
}{rhiSeen{rhi ury lly sub div dup scale llx neg lly neg TR}if}ifelse
CLIP 2 eq{newpath llx lly moveto urx lly lineto urx ury lineto llx ury
lineto closepath clip}if/showpage{}N/erasepage{}N/copypage{}N newpath}N
/@endspecial{count ocount sub{pop}repeat countdictstack dcount sub{end}
repeat grestore SpecialSave restore end}N/@defspecial{SDict begin}N
/@fedspecial{end}B/li{lineto}B/rl{rlineto}B/rc{rcurveto}B/np{/SaveX
currentpoint/SaveY X N 1 setlinecap newpath}N/st{stroke SaveX SaveY
moveto}N/fil{fill SaveX SaveY moveto}N/ellipse{/endangle X/startangle X
/yrad X/xrad X/savematrix matrix currentmatrix N TR xrad yrad scale 0 0
1 startangle endangle arc savematrix setmatrix}N end

%%EndProcSet
TeXDict begin 39158280 55380996 1000 600 600 (omniORBpy.dvi)
@start
%DVIPSBitmapFont: Fa cmr8 8 2
/Fa 2 52 df<130C133C137CEA03FC12FFEAFC7C1200B3B113FE387FFFFEA2172C7AAB23
>49 D<EB3FC03801FFF03807C0FC380E007E487FEC1F80003F14C0A2EB800F1300A2000C
131FC7FC1580A2EC3F00143E5C5CEB03F0EBFFC014F0EB00FC143FEC1F8015C0140F15E0
A2EC07F0A21238127C12FEA3EC0FE012F8006014C00070131F6C1480001EEB3F00380780
FC3801FFF038007FC01C2D7DAB23>51 D E
%EndDVIPSBitmapFont
/Fb 135[45 45 45 1[45 45 45 1[45 45 45 4[45 2[45 45 3[45
1[45 12[45 1[45 45 5[45 4[45 1[45 45 19[45 3[45 45 40[{
TeXBase1Encoding ReEncodeFont}24 74.7198 /Courier rf
/Fc 130[50 50 50 1[50 50 50 50 50 50 50 50 1[50 50 50
50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 1[50 50
50 1[50 50 50 1[50 50 50 50 1[50 50 50 50 50 50 50 50
50 50 50 50 50 50 50 50 50 1[50 50 1[50 50 2[50 50 50
50 50 50 50 50 50 50 50 50 2[50 50 50 50 50 1[50 50 50
33[{TeXBase1Encoding ReEncodeFont}80 83.022 /Courier
rf /Fd 134[50 50 50 50 50 50 50 50 50 50 50 50 50 50
50 50 50 50 50 50 50 50 50 50 50 1[50 11[50 50 1[50 50
50 1[50 2[50 2[50 50 50 50 50 50 2[50 1[50 1[50 10[50
50 4[50 50 4[50 50 50 33[{TeXBase1Encoding ReEncodeFont}49
83.022 /Courier-Oblique rf /Fe 133[55 55 55 55 55 55
55 55 55 1[55 55 55 55 55 55 55 55 55 55 55 55 55 55
55 55 1[55 1[55 55 55 55 55 55 55 55 55 55 55 55 1[55
55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55
55 55 1[55 55 55 55 55 55 55 55 55 55 55 55 55 55 55
2[55 55 1[55 55 55 55 55 34[{TeXBase1Encoding ReEncodeFont}81
90.9091 /Courier rf /Ff 104[91 55[45 5[61 61 91 66 71
56 48 61 1[55 71 76 86 56 66 30 31 76 69 51 56 70 64
56 71 8[45 45 45 45 45 45 45 45 45 1[23 30 3[30 30 40[{
.167 SlantFont TeXBase1Encoding ReEncodeFont}39 90.9091
/Palatino-Roman rf /Fg 134[42 1[62 42 45 24 32 30 42
45 41 43 66 22 42 17 22 43 42 25 36 46 33 41 37 21 2[25
1[25 1[50 3[58 46 39 50 1[45 59 62 71 46 1[25 25 1[57
1[46 58 53 46 58 7[37 4[37 37 1[37 1[45 19 25 19 4[21
5[21 30[45 2[{TeXBase1Encoding ReEncodeFont}56 74.7198
/Palatino-Roman rf /Fh 198[25 25 25 25 25 25 25 25 25
25 48[{TeXBase1Encoding ReEncodeFont}10 49.8132 /Palatino-Roman
rf /Fi 202[33 33 33 33 33 49[{TeXBase1Encoding ReEncodeFont}5
66.4176 /Palatino-Roman rf /Fj 134[55 50 83 55 61 33
44 39 1[61 55 61 89 33 1[33 33 61 55 39 50 61 44 61 50
1[50 5[66 66 100 78 78 66 61 72 1[61 83 83 100 61 78
1[39 83 83 55 61 83 72 66 78 6[25 50 50 50 50 50 50 50
50 50 1[29 25 33 7[89 34[61 2[{TeXBase1Encoding ReEncodeFont}62
99.6264 /Palatino-Bold rf /Fk 135[86 3[57 1[67 1[105
1[105 4[57 105 2[86 105 2[86 29[124 1[134 9[86 86 86
86 86 86 86 49[{TeXBase1Encoding ReEncodeFont}19 172.188
/Palatino-Bold rf /Fl 105[45 28[51 2[51 56 30 40 35 1[56
51 56 81 30 1[30 30 56 51 35 45 56 40 56 45 1[45 10[61
56 66 1[56 76 76 91 56 2[35 4[76 66 61 71 7[45 45 45
45 45 45 45 45 45 45 6[30 30 40[{TeXBase1Encoding ReEncodeFont}48
90.9091 /Palatino-Bold rf /Fm 134[115 2[115 126 69 92
80 1[126 115 126 184 69 2[69 126 115 1[103 126 92 126
103 1[103 10[138 126 149 1[126 172 172 207 126 2[80 4[172
149 138 161 11[103 11[69 69 40[{TeXBase1Encoding ReEncodeFont}36
206.559 /Palatino-Bold rf
%DVIPSBitmapFont: Fn cmsy10 10.95 1
/Fn 1 16 df<EB0FFCEB3FFF90B512C0000314F04880488048804880A2481580A3B712C0
AA6C1580A36C1500A26C5C6C5C6C5C6C5CC614C0013F90C7FCEB0FFC22227BA72D>15
D E
%EndDVIPSBitmapFont
/Fo 104[120 28[60 66 60 100 66 73 40 53 47 1[73 66 73
106 40 73 40 40 73 66 47 60 73 53 73 60 1[60 5[80 3[93
80 73 86 1[73 100 100 120 73 1[47 47 100 100 66 73 100
86 80 93 7[60 60 60 60 60 60 60 60 60 60 1[30 40 30 41[73
2[{TeXBase1Encoding ReEncodeFont}61 119.552 /Palatino-Bold
rf /Fp 104[91 45 27[40 45 45 66 45 51 30 35 35 42 45
40 51 71 25 40 25 25 45 45 25 35 45 37 42 40 1[45 1[30
7[71 56 51 61 1[56 71 71 86 51 2[30 1[66 51 1[71 61 56
66 68 5[23 2[45 45 45 1[45 45 45 45 1[23 30 3[30 30 37[48
2[{TeXBase1Encoding ReEncodeFont}60 90.9091 /Palatino-Italic
rf /Fq 75[30 28[91 45 27[45 51 47 76 51 55 30 39 36 51
55 50 53 80 26 51 21 26 53 51 30 44 56 40 50 45 25 45
1[30 1[30 1[61 61 91 66 71 56 48 61 71 55 71 76 86 56
66 30 31 76 69 51 56 70 64 56 71 68 1[55 55 55 23 23
45 45 45 45 45 45 45 45 45 45 55 23 30 23 55 1[30 30
25 1[76 1[45 34 25 29[55 55 2[{TeXBase1Encoding ReEncodeFont}88
90.9091 /Palatino-Roman rf /Fr 134[66 3[72 39 51 47 2[65
70 106 3[35 1[66 1[57 73 53 66 60 12[73 7[73 4[91 2[93
85 1[93 26[93 38[{TeXBase1Encoding ReEncodeFont}22 119.552
/Palatino-Roman rf /Fs 134[115 2[117 125 1[88 82 1[124
113 120 182 3[60 120 2[99 126 14[161 127 1[138 2[162
7[158 4[126 16[103 103 1[52 6[57 39[{TeXBase1Encoding ReEncodeFont}23
206.559 /Palatino-Roman rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%PaperSize: A4

%%EndSetup
%%Page: 1 1
1 0 bop 418 597 a Fs(The)52 b(omniORBpy)g(version)f(1.0)1077
907 y(User)15 b('s)51 b(Guide)1306 1981 y Fr(Duncan)28
b(Grisby)1029 2130 y Fq(\()p Fp(email:)i(dgrisby@uk.r)n(esear)n
(ch.att.com)p Fq(\))885 2392 y Fr(A)-9 b(T&T)31 b(Laboratories)f
(Cambridge)1514 4353 y Fq(June)22 b(2000)p eop
%%Page: 2 2
2 1 bop 362 539 a Fo(Changes)31 b(and)e(Additions,)h(June)g(2000)358
726 y Fn(\017)45 b Fq(Brand)23 b(new)f(manual)p eop
%%Page: 3 3
3 2 bop 63 1207 a Fm(Contents)63 1752 y Fl(1)91 b(Introduction)2581
b(1)199 1871 y Fq(1.1)96 b(Featur)n(es)85 b(.)46 b(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)129 b(1)408
1989 y(1.1.1)110 b(CORBA)23 b(2.3)g(compliant)68 b(.)45
b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)h(.)129 b(1)408 2108 y(1.1.2)110 b(Multithr)n(eading)67
b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)129 b(1)408 2226
y(1.1.3)110 b(Missing)22 b(featur)n(es)87 b(.)45 b(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)129 b(2)199 2344 y(1.2)96 b(Setting)21 b(Up)h(Y)-8
b(our)22 b(Envir)n(onment)49 b(.)c(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)129
b(2)408 2463 y(1.2.1)110 b(omniORB)23 b(2.8)g(con\002guration)f(\002le)
h(entries)j(.)45 b(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)
129 b(3)63 2676 y Fl(2)91 b(The)22 b(Basics)2667 b(5)199
2794 y Fq(2.1)96 b(The)22 b(Echo)g(example)31 b(.)45
b(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)129 b(5)199
2913 y(2.2)96 b(Generating)22 b(the)g(Python)f(stubs)29
b(.)46 b(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)h(.)129 b(6)199 3031 y(2.3)96
b(Object)23 b(Refer)n(ences)e(and)i(Servants)58 b(.)45
b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)129 b(6)199 3149 y(2.4)96 b(Example)23
b(1)g(\227)f(Colocated)h(client)g(and)g(servant)89 b(.)45
b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)129
b(6)408 3268 y(2.4.1)110 b(Imports)88 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)h(.)129 b(7)408 3386 y(2.4.2)110
b(Servant)22 b(class)h(de\002nition)89 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)129
b(7)408 3505 y(2.4.3)110 b(ORB)22 b(initialisation)39
b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)129 b(8)408 3623
y(2.4.4)110 b(Obtaining)24 b(the)e(Root)f(POA)36 b(.)45
b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)129 b(8)408 3742 y(2.4.5)110 b(Object)23
b(initialisation)38 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)129
b(8)408 3860 y(2.4.6)110 b(Activating)23 b(the)f(POA)k(.)45
b(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)h(.)129 b(9)408 3978 y(2.4.7)110
b(Performing)22 b(a)h(call)62 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)129
b(9)199 4097 y(2.5)96 b(Example)23 b(2)g(\227)f(Dif)n(fer)n(ent)i(Addr)
n(ess)c(Spaces)85 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)h(.)129 b(9)408 4215 y(2.5.1)110 b(Object)25
b(Implementation:)31 b(Generating)23 b(a)i(Stringi\002ed)f(Object)h
(Ref-)699 4328 y(er)n(ence)82 b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)h(.)129 b(9)408 4446 y(2.5.2)110 b(Client:)28
b(Using)22 b(a)h(Stringi\002ed)f(Object)h(Refer)n(ence)29
b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)84 b(10)408
4565 y(2.5.3)110 b(System)21 b(exceptions)77 b(.)45 b(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)89 b(1)-5 b(1)408 4683 y(2.5.4)110 b(Lifetime)22
b(of)h(a)g(CORBA)g(object)49 b(.)c(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)84 b(12)199 4802
y(2.6)96 b(Example)23 b(3)g(\227)f(Using)g(the)g(Naming)h(Service)44
b(.)h(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)84
b(12)408 4920 y(2.6.1)110 b(Obtaining)24 b(the)e(Root)f(Context)g
(object)i(r)n(efer)n(ence)87 b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h
(.)84 b(13)408 5039 y(2.6.2)110 b(The)22 b(Naming)h(Service)f
(interface)39 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)h(.)84 b(13)408 5157 y(2.6.3)110 b(Server)22
b(code)74 b(.)46 b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)84
b(13)408 5275 y(2.6.4)110 b(Client)23 b(code)89 b(.)46
b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)84 b(15)199
5394 y(2.7)96 b(Global)24 b(IDL)f(de\002nitions)71 b(.)45
b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)84 b(16)1667 5622
y(iii)p eop
%%Page: 4 4
4 3 bop 221 539 a Fl(3)92 b(Python)20 b(language)j(mapping)e(issues)
1692 b(17)358 653 y Fq(3.1)96 b(Narr)n(owing)22 b(object)g(r)n(efer)n
(ences)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(17)567 768 y(3.1.1)110
b(The)21 b(gory)h(details)31 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
84 b(17)358 882 y(3.2)96 b(Support)20 b(for)j(Any)f(values)27
b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(19)358 997
y(3.3)96 b(Using)22 b(omniORBpy)f(with)i(omniORB)g(2.8)59
b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)
g(.)84 b(21)567 1111 y(3.3.1)110 b(POA)22 b(functions)86
b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(21)567 1225
y(3.3.2)110 b(Local)23 b(/)g(r)n(emote)e(transpar)n(ency)81
b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)84 b(22)221 1432 y Fl(4)92 b(Interoperable)24
b(Naming)e(Service)1810 b(23)358 1546 y Fq(4.1)96 b(Object)23
b(URIs)82 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)
g(.)84 b(23)567 1661 y(4.1.1)110 b(corbaloc)72 b(.)45
b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84
b(23)567 1775 y(4.1.2)110 b(corbaname)34 b(.)45 b(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)h(.)f(.)g(.)84 b(24)358 1890 y(4.2)96 b(Con\002guring)22
b(r)n(esolve_initial_r)n(efer)n(ences)54 b(.)45 b(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(25)567
2004 y(4.2.1)110 b(ORBInitRef)82 b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)g(.)84 b(25)567 2119 y(4.2.2)110 b(ORBDefaultInitRef)55
b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(25)567 2233 y(4.2.3)110
b(omniORB)22 b(con\002guration)g(\002le)49 b(.)c(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84
b(26)567 2348 y(4.2.4)110 b(Resolution)21 b(or)n(der)74
b(.)46 b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(26)358 2462
y(4.3)96 b(omniNames)70 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)84 b(27)567 2577 y(4.3.1)110 b(NamingContextExt)36
b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(27)567 2691 y(4.3.2)110
b(Use)21 b(with)i(corbaname)60 b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84
b(28)358 2806 y(4.4)96 b(omniMapper)33 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(28)358 2920 y(4.5)96
b(Cr)n(eating)23 b(objects)f(with)g(simple)h(object)f(keys)46
b(.)f(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84
b(29)221 3127 y Fl(5)92 b(The)22 b(IDL)g(compiler)2320
b(31)358 3241 y Fq(5.1)96 b(Common)23 b(options)65 b(.)45
b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(31)567
3356 y(5.1.1)110 b(Pr)n(epr)n(ocessor)20 b(interactions)78
b(.)46 b(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)84 b(32)567 3470 y(5.1.2)110 b(Forwar)n(d-declar)n(ed)
21 b(interfaces)28 b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(32)567 3585 y(5.1.3)110
b(Comments)37 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84
b(32)358 3699 y(5.2)96 b(Python)21 b(back-end)i(options)32
b(.)46 b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(33)358 3814
y(5.3)96 b(Examples)35 b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)h(.)f(.)g(.)84 b(34)221 4020 y Fl(6)92 b(The)22
b(omniORBpy)e(API)2167 b(35)358 4134 y Fq(6.1)96 b(ORB)22
b(initialisation)j(options)70 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84
b(35)358 4249 y(6.2)96 b(Hostname)21 b(and)i(port)50
b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(36)358
4363 y(6.3)96 b(Run-time)22 b(T)-8 b(racing)23 b(and)g(Diagnostic)g
(Messages)50 b(.)c(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g
(.)84 b(36)358 4478 y(6.4)96 b(Server)21 b(Name)38 b(.)45
b(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84
b(37)358 4592 y(6.5)96 b(GIOP)23 b(Message)e(Size)55
b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(37)358
4707 y(6.6)96 b(Object)23 b(table)g(size)49 b(.)c(.)g(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(37)358 4821 y(6.7)96
b(Obsolete)21 b(Initial)j(Object)f(Refer)n(ence)f(Bootstrapping)e(.)45
b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(38)358
4936 y(6.8)96 b(GIOP)23 b(Lowest)d(Common)j(Denominator)f(Mode)31
b(.)46 b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84
b(39)358 5050 y(6.9)96 b(System)21 b(Exception)g(Handlers)67
b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(40)567 5165 y(6.9.1)110
b(CORBA.TRANSIENT)19 b(handlers)47 b(.)e(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(40)567 5279
y(6.9.2)110 b(CORBA.COMM_F)-7 b(AILURE)21 b(and)i
(CORBA.SystemException)61 b(.)45 b(.)84 b(41)358 5394
y(6.10)51 b(Dynamic)24 b(importing)e(of)h(IDL)31 b(.)45
b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(41)p eop
%%Page: 5 5
5 4 bop 63 539 a Fl(7)91 b(Connection)21 b(Management)2015
b(43)199 652 y Fq(7.1)96 b(Backgr)n(ound)73 b(.)45 b(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)84 b(43)199 764
y(7.2)96 b(The)22 b(Model)59 b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)h(.)84 b(44)199 877 y(7.3)96
b(Idle)22 b(Connection)g(Shutdown)f(and)i(Remote)e(Call)j(T)-5
b(imeout)66 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)84
b(44)199 990 y(7.4)96 b(Inter)n(operability)22 b(Considerations)50
b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)h(.)84 b(45)199 1103 y(7.5)96 b(Connection)22
b(Acceptance)k(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)84
b(45)63 1307 y Fl(A)65 b(hosts_access\(5\))2445 b(47)p
eop
%%Page: 6 6
6 5 bop eop
%%Page: 1 7
1 6 bop 63 1164 a Fk(Chapter)44 b(1)63 1582 y Fm(Introduction)63
2030 y Fq(omniORBpy)29 b(is)h(an)g(Object)h(Request)d(Br)n(oker)g
(\(ORB\))j(that)e(implements)h(the)f(CORBA)h(2.3)63 2143
y(Python)22 b(mapping)j([OMG00)r(].)32 b(It)24 b(is)g(designed)e(for)i
(use)f(with)h(omniORB)g(3,)h(but)f(it)g(can)h(also)63
2256 y(be)f(used)f(with)i(omniORB)g(2.8.)34 b(If)25 b(you)f(use)f
(omniORB)i(3.0,)h(the)e(full)h(POA)g(functionality)g(is)63
2369 y(available;)g(with)e(omniORB)f(2.8)i(many)f(POA)f(functions)h(ar)
n(e)g(not)f(supported.)204 2485 y(This)32 b(user)f(guide)g(tells)h(you)
g(how)g(to)f(use)h(omniORBpy)f(to)h(develop)f(CORBA)i(appli-)63
2598 y(cations)h(using)g(Python.)62 b(It)33 b(assumes)g(a)i(basic)h
(understanding)c(of)i(CORBA,)h(and)f(of)g(the)63 2711
y(Python)21 b(mapping.)28 b(Unlike)23 b(most)f(CORBA)h(standar)n(ds,)e
(the)h(Python)g(mapping)h(document)63 2824 y(is)f(small,)i(and)f(quite)
f(easy)g(to)g(follow)-8 b(.)204 2940 y(This)33 b(manual)i(contains)e
(all)i(you)d(need)g(to)h(know)f(about)h(omniORB)h(in)g(or)n(der)e(to)h
(use)63 3053 y(omniORBpy)-10 b(.)27 b(Some)22 b(sections)f(ar)n(e)i(r)n
(epeated)e(fr)n(om)i(the)f(omniORB)h(manual.)204 3169
y(In)k(this)h(chapter)-7 b(,)28 b(we)f(give)h(an)h(overview)e(of)h(the)
f(main)i(featur)n(es)e(of)g(omniORBpy)h(and)63 3281 y(what)22
b(you)g(need)f(to)h(do)g(to)g(setup)f(your)h(envir)n(onment)g(to)g(r)o
(un)g(it.)63 3599 y Fo(1.1)119 b(Features)63 3819 y Fj(1.1.1)99
b(CORBA)24 b(2.3)h(compliant)63 4002 y Fq(omniORB)31
b(implements)f(the)g(Internet)f(Inter)n(-ORB)h(Pr)n(otocol)h(\(IIOP\).)
g(This)f(pr)n(otocol)h(pr)n(o-)63 4115 y(vides)39 b(omniORB)g(the)g
(means)g(of)g(achieving)i(inter)n(operability)e(with)g(the)g(ORBs)g
(imple-)63 4228 y(mented)31 b(by)i(other)e(vendors.)57
b(In)33 b(fact,)j(this)c(is)h(the)f(native)h(pr)n(otocol)f(used)g(by)g
(omniORB)63 4341 y(for)22 b(the)g(communication)i(amongst)e(its)g
(objects)g(r)n(esiding)g(in)h(dif)n(fer)n(ent)g(addr)n(ess)e(spaces.)
204 4457 y(Mor)n(eover)-7 b(,)19 b(the)h(IDL)g(to)f(Python)g(language)h
(mapping)g(pr)n(ovided)g(by)g(omniORBpy)f(con-)63 4570
y(forms)j(to)g(the)g(2.3)h(Python)e(mapping)i(speci\002cation)1911
4537 y Fi(1)1948 4570 y Fq(.)63 4843 y Fj(1.1.2)99 b(Multithreading)63
5026 y Fq(omniORBpy)24 b(is)h(fully)g(multithr)n(eaded)1472
4993 y Fi(2)1509 5026 y Fq(.)34 b(T)-8 b(o)24 b(achieve)i(low)f(IIOP)f
(call)j(over)n(head,)e(unneces-)63 5139 y(sary)d(call-multiplexing)k
(is)d(eliminated.)30 b(At)22 b(any)i(time,)f(ther)n(e)f(is)h(at)g(most)
g(one)f(call)j(in-\003ight)p 63 5212 1316 4 v 168 5268
a Fh(1)197 5300 y Fg(As)19 b(detailed)e(in)i(section)g(1.1.3,)g(a)g
(number)g(of)f(featur)o(es)g(ar)o(e)g(missing.)168 5362
y Fh(2)197 5394 y Fg(This)h(means)g(that)h(your)d(Python)j(interpr)o
(eter)d(must)i(have)g(been)g(built)g(with)h(thr)o(ead)e(support.)1684
5622 y Fq(1)p eop
%%Page: 2 8
2 7 bop 221 282 a Fq(2)1931 b Ff(CHAPTER)22 b(1.)51 b(INTRODUCTION)221
539 y Fq(in)18 b(each)g(communication)h(channel)f(between)e(two)h(addr)
n(ess)f(spaces.)25 b(T)-8 b(o)17 b(do)g(so)g(without)f(lim-)221
652 y(iting)21 b(the)g(level)g(of)h(concurr)n(ency)-10
b(,)20 b(new)h(channels)g(connecting)g(the)f(two)h(addr)n(ess)e(spaces)
i(ar)n(e)221 764 y(cr)n(eated)k(on)h(demand)f(and)h(cached)g(when)f
(ther)n(e)g(ar)n(e)h(mor)n(e)g(concurr)n(ent)f(calls)i(in)f(pr)n(ogr)n
(ess.)221 877 y(Each)20 b(channel)h(is)e(served)g(by)g(a)i(dedicated)d
(thr)n(ead.)26 b(This)20 b(arrangement)f(pr)n(ovides)g(maximal)221
990 y(concurr)n(ency)i(and)g(eliminates)g(any)g(thr)n(ead)g(switching)f
(in)i(either)e(of)h(the)f(addr)n(ess)g(spaces)g(to)221
1103 y(pr)n(ocess)28 b(a)i(call.)50 b(Furthermor)n(e,)28
b(to)h(maximise)h(the)f(thr)n(oughput)e(in)j(pr)n(ocessing)e(lar)n(ge)h
(call)221 1216 y(ar)n(guments,)j(lar)n(ge)f(data)g(elements)f(ar)n(e)h
(sent)f(as)h(soon)e(as)i(they)f(ar)n(e)h(pr)n(ocessed)e(while)i(the)221
1329 y(other)22 b(ar)n(guments)f(ar)n(e)i(being)g(marshalled.)221
1604 y Fj(1.1.3)99 b(Missing)26 b(features)221 1787 y
Fq(omniORBpy)20 b(is)i(not)e(a)i(complete)e(implementation)h(of)g(the)f
(CORBA)h(2.3)h(cor)n(e.)27 b(The)20 b(follow-)221 1900
y(ing)j(is)g(a)g(list)g(of)f(the)g(missing)g(featur)n(es.)358
2129 y Fn(\017)45 b Fq(omniORB)24 b(does)e(not)g(have)i(its)f(own)g
(Interface)g(Repository)-10 b(.)27 b(However)-7 b(,)22
b(it)i(can)g(act)g(as)448 2242 y(a)g(client)f(to)f(an)h(IR.)358
2443 y Fn(\017)45 b Fq(The)21 b(IDL)g(types)f(wchar)-7
b(,)22 b(wstring,)f(\002xed,)f(and)i(valuetype)e(ar)n(e)i(not)f
(supported)d(in)k(this)448 2556 y(r)n(elease.)358 2756
y Fn(\017)45 b Fq(The)22 b Fe(PortableServer.C)o(ur)o(re)o(nt)16
b Fq(interface)23 b(is)g(not)f(yet)f(supported.)358 2957
y Fn(\017)45 b Fq(DII)29 b(and)g(DSI)f(ar)n(e)i(not)e(supported.)43
b(However)-7 b(,)29 b(since)g(both)f(Python)g(code)g(and)g(IDL)448
3070 y(can)c(be)e(generated)f(and)h(used)g(at)g(r)o(un-time,)h(this)f
(is)h(not)f(a)h(signi\002cant)g(r)n(estriction.)362 3299
y(These)32 b(featur)n(es)g(may)h(be)g(implemented)e(in)j(the)e(short)g
(to)g(medium)h(term.)58 b(It)32 b(is)h(best)221 3412
y(to)39 b(check)g(out)f(the)g(latest)h(status)f(on)g(the)h(omniORB)g
(home)g(page)f(\()p Fe(http://www.uk.)221 3525 y(research.att.co)o(m/)o
(omn)o(iO)o(RB)o(/)p Fq(\).)221 3843 y Fo(1.2)119 b(Setting)30
b(Up)g(Y)-9 b(our)30 b(Environment)221 4061 y Fq(omniORBpy)21
b(r)n(elies)g(on)f(the)h(omniORB)g(C++)h(libraries.)28
b(If)21 b(you)f(ar)n(e)i(building)f(fr)n(om)h(sour)n(ce,)221
4174 y(you)g(must)g(\002rst)g(build)h(omniORB)g(itself,)f(as)h
(detailed)f(in)h(the)f(omniORB)g(documentation.)358 4403
y Fn(\017)45 b Fq(On)19 b(Unix)f(platforms,)g(the)g(omniORB)g(r)o
(untime)g(looks)e(for)i(the)g(envir)n(onment)f(variable)448
4516 y Fe(OMNIORB_CONFIG)p Fq(.)k(If)e(this)g(variable)i(is)e
(de\002ned,)e(it)j(contains)f(the)f(pathname)h(of)g(the)448
4628 y(omniORB)26 b(con\002guration)e(\002le.)36 b(If)25
b(the)g(variable)i(is)e(not)f(set,)h(omniORB)g(will)i(use)d(the)448
4741 y(compiled-in)g(pathname)e(to)g(locate)h(the)f(\002le.)358
4942 y Fn(\017)45 b Fq(On)29 b(W)-5 b(in32)30 b(platforms)e(\(W)-5
b(indows)28 b(NT)-7 b(,)27 b(2000,)32 b(95,)e(98\),)h(omniORB)e
(\002rst)e(checks)h(the)448 5055 y(envir)n(onment)23
b(variable)j Fe(OMNIORB_CONFIG)17 b Fq(to)23 b(obtain)h(the)e(pathname)
i(of)f(the)g(con-)448 5168 y(\002guration)i(\002le.)34
b(If)25 b(this)f(is)h(not)f(set,)g(it)h(then)f(attempts)f(to)h(obtain)i
(con\002guration)e(data)448 5281 y(in)j(the)e(system)f(r)n(egistry)-10
b(.)36 b(It)25 b(sear)n(ches)h(for)f(the)g(data)h(under)f(the)g(key)g
Fe(HKEY_LOCAL_)448 5394 y(MACHINE\\SOFTWARE)o(\\O)o(RL)o(\\o)o(mni)o
(OR)o(B\\)o(2.)o(0)p Fq(.)p eop
%%Page: 3 9
3 8 bop 63 282 a Ff(1.2.)51 b(SETTING)21 b(UP)h(YOUR)h(ENVIRONMENT)1497
b Fq(3)204 539 y(The)23 b(con\002guration)g(\002le)g(is)h(used)e(to)h
(obtain)h(an)g(object)g(r)n(efer)n(ence)e(for)i(the)f(Naming)h(Ser)n(-)
63 652 y(vice,)31 b(via)g(either)e(a)h(stringi\002ed)e(IOR)h(or)h(an)f
(Inter)n(operable)g(Naming)g(Service)h(URI.)e(When)63
764 y(using)34 b(omniORB)g(3,)k(the)c(entry)f(in)i(the)f
(con\002guration)f(\002le)i(should)f(be)g(speci\002ed)f(in)i(the)63
877 y(form:)226 1090 y Fe(ORBInitRef)50 b(NameService=<UR)o(I)f(for)k
(the)g(Naming)f(Service>)204 1302 y Fq(The)23 b(easiest)g(way)i(of)f
(specifying)f(the)h(Naming)g(Service)h(is)f(with)g(a)h
Fe(corbaname:)20 b Fq(URI,)63 1415 y(as)i(described)g(in)h(section)f
(4.1.2.)204 1528 y(Comments)g(in)h(the)f(con\002guration)g(\002le)g
(should)g(be)h(pr)n(e\002xed)e(with)h(a)h(`)p Fe(#)p
Fq(')g(character)-7 b(.)204 1641 y(On)24 b(W)-5 b(in32)25
b(platforms,)f(the)f(naming)i(service)e(r)n(efer)n(ence)h(can)g(be)g
(placed)g(in)g(the)f(system)63 1754 y(r)n(egistry)-10
b(,)16 b(in)i(the)e(\(string\))h(value)h Fe(ORBInitRef)p
Fq(,)13 b(under)j(the)h(key)f Fe(HKEY_LOCAL_MAC)o(HI)o(NE)o(\\)63
1867 y(SOFTWARE\\ORL\\o)o(mn)o(iO)o(RB\\)o(2.)o(0)p Fq(.)63
2122 y Fj(1.2.1)99 b(omniORB)25 b(2.8)f(con\002guration)i(\002le)f
(entries)63 2299 y Fe(ORBInitRef)k Fq(is)35 b(new)e(with)h(omniORB)h
(3.)63 b(Under)33 b(omniORB)h(2.8,)j(you)d(must)f(use)g(the)63
2412 y(older)21 b(format)i(\(which)h(is)f(still)g(supported)c(by)k
(omniORB)g(3\):)226 2624 y Fe(NAMESERVICE)50 b(<IOR)j(for)g(the)g
(Naming)f(Service>)204 2837 y Fq(T)-8 b(wo)26 b(other)g(entries)g(ar)n
(e)h(also)h(supported,)d(but)i(with)g(omniORB)g(3)h(ar)n(e)f(made)g
(obsolete)63 2950 y(by)22 b(the)g(Inter)n(operable)f(Naming)i(Service)g
(URIs:)226 3162 y Fe(ORBInitialHost)48 b(<hostname)j(string>)226
3275 y(ORBInitialPort)d(<port)53 b(number)f(\(1-65535\)>)204
3487 y Fq(The)18 b(corr)n(esponding)g(entries)g(under)g(the)h(W)-5
b(in32)20 b(system)e(r)n(egistry)g(ar)n(e)h(the)g(keys)f(named)63
3600 y Fe(ORBInitialHost)e Fq(and)23 b Fe(ORBInitialPort)o
Fq(.)204 3713 y(The)g(two)h(entries)e(pr)n(ovide)i(information)h(to)f
(the)f(ORB)h(to)f(locate)i(a)g(\(pr)n(oprietary\))e(boot-)63
3826 y(strap)29 b(service)h(at)g(r)o(untime.)50 b(The)30
b(bootstrap)e(service)i(is)h(able)g(to)e(r)n(eturn)g(the)h(initial)i
(object)63 3939 y(r)n(efer)n(ence)22 b(for)g(the)g(Naming)h(Service)g
(and)f(others.)p eop
%%Page: 4 10
4 9 bop 221 282 a Fq(4)1931 b Ff(CHAPTER)22 b(1.)51 b(INTRODUCTION)p
eop
%%Page: 5 11
5 10 bop 63 1168 a Fk(Chapter)44 b(2)63 1590 y Fm(The)52
b(Basics)63 2042 y Fq(In)31 b(this)h(chapter)-7 b(,)34
b(we)e(go)f(thr)n(ough)g(thr)n(ee)g(examples)g(to)h(illustrate)g(the)f
(practical)j(steps)c(to)63 2155 y(use)23 b(omniORBpy)-10
b(.)32 b(By)24 b(going)f(thr)n(ough)h(the)f(sour)n(ce)h(code)f(of)i
(each)f(example,)h(the)e(essential)63 2268 y(concepts)29
b(and)j(APIs)e(ar)n(e)h(intr)n(oduced.)52 b(If)31 b(you)g(have)g(no)g
(pr)n(evious)f(experience)g(with)h(us-)63 2381 y(ing)e(CORBA,)f(you)h
(should)f(study)f(this)h(chapter)h(in)g(detail.)48 b(Ther)n(e)28
b(ar)n(e)h(pointers)e(to)i(other)63 2494 y(essential)21
b(documents)g(you)h(should)g(be)g(familiar)k(with.)204
2614 y(If)c(you)f(have)h(experience)e(with)i(using)f(other)g(ORBs,)g
(you)g(should)g(still)h(go)f(thr)n(ough)g(this)63 2727
y(chapter)34 b(because)h(it)g(pr)n(ovides)f(important)h(information)g
(about)g(the)f(featur)n(es)h(and)g(APIs)63 2839 y(that)22
b(ar)n(e)h(necessarily)f(omniORB)h(speci\002c.)63 3181
y Fo(2.1)119 b(The)29 b(Echo)i(example)63 3406 y Fq(W)-8
b(e)24 b(use)h(an)g(example)h(which)g(is)f(similar)i(to)e(the)f(one)h
(used)f(in)i(the)e(omniORB)i(manual.)37 b(W)-8 b(e)63
3519 y(de\002ne)21 b(an)i(interface,)g(called)g Fe(Example::Echo)p
Fq(,)17 b(as)22 b(follows:)204 3682 y Fd(//)49 b(echo_example)n(.idl)
204 3782 y Fc(module)f(Example)h({)303 3881 y(interface)g(Echo)g({)403
3981 y(string)g(echoString)n(\(in)g(string)g(mesg)o(\);)303
4080 y(};)204 4180 y(};)204 4364 y Fq(The)31 b(important)h(dif)n(fer)n
(ence)g(fr)n(om)h(the)e(omniORB)h(Echo)g(example)g(is)g(that)g(our)f
Fe(Echo)63 4477 y Fq(interface)c(is)g(declar)n(ed)g(within)g(an)h(IDL)e
(module)h(named)f Fe(Example)p Fq(.)38 b(The)27 b(r)n(eason)f(for)h
(this)63 4589 y(will)d(become)e(clear)h(in)g(a)h(moment.)204
4709 y(If)18 b(you)f(ar)n(e)i(new)e(to)h(IDL,)g(you)f(can)i(learn)f
(about)h(its)e(syntax)h(in)g(Chapter)g(3)h(of)f(the)g(CORBA)63
4822 y(speci\002cation)27 b(2.3)h([OMG99a)s(].)42 b(For)27
b(the)f(moment,)i(you)e(only)h(need)f(to)h(know)f(that)h(the)g(in-)63
4935 y(terface)g(consists)g(of)g(a)h(single)g(operation,)f
Fe(echoString\(\))p Fq(,)d(which)k(takes)e(a)j(string)d(as)i(an)63
5048 y(ar)n(gument)22 b(and)g(r)n(eturns)g(a)h(copy)f(of)h(the)e(same)i
(string.)204 5168 y(The)k(interface)i(is)f(written)f(in)i(a)g(\002le,)g
(called)g Fe(echo_example.id)o(l)p Fq(.)38 b(It)28 b(is)g(part)g(of)g
(the)63 5281 y(CORBA)35 b(standar)n(d)h(that)f(all)i(IDL)f(\002les)f
(should)g(have)h(the)f(extension)f(`)p Fe(.idl)p Fq(',)j(although)63
5394 y(omniORB)22 b(does)f(not)h(enfor)n(ce)h(this.)1684
5622 y(5)p eop
%%Page: 6 12
6 11 bop 221 282 a Fq(6)2138 b Ff(CHAPTER)21 b(2.)51
b(THE)22 b(BASICS)221 539 y Fo(2.2)119 b(Generating)29
b(the)g(Python)i(stubs)221 753 y Fq(Fr)n(om)25 b(the)f(IDL)g(\002le,)h
(we)g(use)f(the)g(IDL)g(compiler)-7 b(,)26 b(omniidl,)g(to)e(pr)n
(oduce)g(the)g(Python)f(stubs)221 866 y(for)g(that)f(IDL.)g(The)g
(stubs)g(contain)h(Python)e(declarations)i(for)g(all)h(the)e
(interfaces)g(and)h(types)221 979 y(declar)n(ed)h(in)h(the)e(IDL,)h(as)
g(r)n(equir)n(ed)g(by)g(the)f(Python)g(mapping.)33 b(It)24
b(is)g(possible)f(to)h(generate)221 1092 y(stubs)g(dynamically)i(at)f
(r)o(un-time,)h(as)f(described)f(in)h(section)f(6.10,)i(but)f(it)g(is)g
(mor)n(e)g(ef)n(\002cient)221 1204 y(to)d(generate)f(them)h(statically)
-10 b(.)362 1319 y(T)i(o)22 b(generate)f(the)h(stubs,)f(we)h(use)g(a)h
(command)g(line)g(like)448 1539 y Fe(omniidl)52 b(-bpython)f
(echo_example.i)o(dl)221 1760 y Fq(As)20 b(r)n(equir)n(ed)h(by)g(the)f
(standar)n(d,)g(that)h(pr)n(oduces)e(two)i(Python)e(packages)h(derived)
g(fr)n(om)i(the)221 1873 y(module)32 b(name)g Fe(Example)p
Fq(.)54 b(Dir)n(ectory)32 b Fe(Example)d Fq(contains)j(the)f
(client-side)h(de\002nitions)221 1986 y(\(and)27 b(also)g(the)f(type)f
(declarations)i(if)g(ther)n(e)f(wer)n(e)g(any\);)j(dir)n(ectory)c
Fe(Example__POA)d Fq(con-)221 2099 y(tains)e(the)f(server)n(-side)f
(skeletons.)24 b(This)19 b(explains)h(the)f(dif)n(\002culty)h(with)f
(declarations)h(at)f(IDL)221 2212 y(global)24 b(scope;)d(section)h(2.7)
h(explains)g(how)f(to)g(access)g(global)i(declarations.)362
2326 y(If)19 b(you)g(look)f(at)h(the)g(Python)e(code)i(in)g(the)f(two)h
(packages,)f(you)h(will)h(see)e(that)g(they)g(ar)n(e)i(al-)221
2439 y(most)d(empty)-10 b(.)25 b(They)17 b(simply)h(import)f(the)g
Fe(echo_example_idl)o(.p)o(y)12 b Fq(\002le,)18 b(which)h(is)f(wher)n
(e)221 2552 y(both)29 b(the)f(client)i(and)g(server)e(side)g
(declarations)i(actually)g(live.)49 b(This)29 b(arrangement)f(is)i(so)
221 2665 y(that)e(omniidl)g(can)h(easily)f(extend)e(the)h(packages)g
(if)h(other)f(IDL)g(\002les)g(add)h(declarations)g(to)221
2778 y(the)22 b(same)h(IDL)f(modules.)221 3086 y Fo(2.3)119
b(Object)29 b(References)g(and)g(Servants)221 3301 y
Fq(W)-8 b(e)22 b(contact)h(a)g(CORBA)g(object)g(thr)n(ough)e(an)j
Fp(object)g(r)n(efer)n(ence)p Fq(.)31 b(The)22 b(actual)i
(implementation)221 3413 y(of)f(a)g(CORBA)g(object)f(is)h(termed)e(a)i
Fp(servant)p Fq(.)362 3528 y(Object)31 b(r)n(efer)n(ences)f(and)g
(servants)g(ar)n(e)h(quite)e(separate)h(entities,)h(and)f(it)h(is)f
(important)221 3641 y(not)19 b(to)f(confuse)h(the)f(two.)26
b(Client)20 b(code)e(deals)h(pur)n(ely)g(with)g(object)g(r)n(efer)n
(ences,)f(so)h(ther)n(e)f(can)221 3754 y(be)j(no)f(confusion;)g(object)
h(implementation)f(code)g(must)g(deal)g(with)h(both)f(object)g(r)n
(efer)n(ences)221 3867 y(and)30 b(servants.)48 b(Y)-8
b(ou)29 b(will)i(get)e(a)h(r)o(un-time)g(err)n(or)f(if)i(you)e(use)f(a)
j(servant)e(wher)n(e)g(an)h(object)221 3980 y(r)n(efer)n(ence)22
b(is)h(expected,)d(or)i(vice-versa.)221 4288 y Fo(2.4)119
b(Example)30 b(1)f(\227)h(Colocated)g(client)f(and)h(servant)221
4502 y Fq(In)k(the)g(\002rst)f(example,)k(both)d(the)f(client)i(and)f
(servant)g(ar)n(e)g(in)h(the)f(same)g(addr)n(ess)f(space.)221
4615 y(The)27 b(next)g(sections)f(show)h(how)g(the)f(client)i(and)g
(servant)f(can)h(be)g(split)f(between)f(dif)n(fer)n(ent)221
4728 y(addr)n(ess)21 b(spaces.)362 4843 y(First,)h(the)g(code:)254
4995 y Fh(1)83 b Fd(#!/usr)o(/bin)o(/env)49 b(python)254
5095 y Fh(2)254 5194 y(3)83 b Fc(import)49 b(sys)254
5294 y Fh(4)83 b Fc(from)49 b(omniORB)g(import)g(CORBA)o(,)g
(PortableServer)254 5394 y Fh(5)83 b Fc(import)49 b(Example)o(,)g
(Example__POA)p eop
%%Page: 7 13
7 12 bop 63 282 a Ff(2.4.)51 b(EXAMPLE)21 b(1)i(\227)f(COLOCA)-7
b(TED)24 b(CLIENT)d(AND)i(SER)-5 b(V)-10 b(ANT)798 b
Fq(7)96 539 y Fh(6)96 638 y(7)83 b Fc(class)49 b(Echo_i)f
(\(Example__POA)n(.Echo)o(\):)96 738 y Fh(8)282 b Fc(def)49
b(echoString)n(\(self,)g(mesg)o(\):)96 837 y Fh(9)481
b Fc(print)49 b("echoString)n(\(\))h(called)e(with)h(message)o(:",)g
(mesg)71 937 y Fh(10)481 b Fc(return)49 b(mesg)74 1037
y Fh(1)m(1)71 1136 y(12)83 b Fc(orb)49 b(=)h(CORBA)o(.ORB_init)n(\(sys)
o(.argv)o(,)g(CORBA)o(.ORB_ID)o(\))71 1236 y Fh(13)83
b Fc(poa)49 b(=)h(orb)o(.resolve_initial_references)-5
b(\("RootPOA)n("\))71 1336 y Fh(14)71 1435 y(15)83 b
Fc(ei)49 b(=)h(Echo_i)o(\(\))71 1535 y Fh(16)83 b Fc(eo)49
b(=)h(ei)o(._this)o(\(\))71 1634 y Fh(17)71 1734 y(18)83
b Fc(poaManager)48 b(=)h(poa._get_the_POAManager)l(\(\))71
1834 y Fh(19)83 b Fc(poaManager)n(.activate)n(\(\))71
1933 y Fh(20)71 2033 y(21)g Fc(message)48 b(=)i("Hello)o(")71
2133 y Fh(22)83 b Fc(result)98 b(=)50 b(eo.)o(echoString)o(\()o
(message)o(\))71 2232 y Fh(23)71 2332 y(24)83 b Fc(print)49
b(")o(I)h(said)f('\045s'.)g(The)g(object)g(said)g('\045s'.")g(\045)g
(\(message)o(,result)o(\))204 2501 y Fq(The)39 b(example)g(illustrates)
g(several)h(important)f(interactions)g(among)g(the)g(ORB,)g(the)63
2614 y(POA,)22 b(the)g(servant,)g(and)g(the)g(client.)29
b(Her)n(e)21 b(ar)n(e)i(the)f(details:)63 2881 y Fj(2.4.1)99
b(Imports)63 3062 y Fl(Line)22 b(3)290 3175 y Fq(Import)f(the)h
Fe(sys)g Fq(module)g(to)g(access)g Fe(sys.argv)p Fq(.)63
3371 y Fl(Line)g(4)290 3484 y Fq(Import)33 b(omniORB's)i
(implementations)f(of)h(the)f Fe(CORBA)e Fq(and)j Fe(PortableServer)290
3597 y Fq(modules.)j(The)25 b(standar)n(d)h(r)n(equir)n(es)g(that)g
(these)f(modules)g(ar)n(e)i(available)i(outside)c(of)290
3710 y(any)e(package,)f(so)f(you)h(can)i(also)e(do)290
3863 y Fc(import)49 b(CORBA)o(,)g(PortableServer)290
4072 y Fq(Explicitly)30 b(specifying)e(omniORB)i(is)f(useful)g(if)h
(you)e(have)i(mor)n(e)f(than)g(one)g(Python)290 4185
y(ORB)22 b(installed.)63 4381 y Fl(Line)g(5)290 4494
y Fq(Import)16 b(the)g(client-side)h(stubs)f(and)i(server)n(-side)d
(skeletons)g(generated)g(for)i(IDL)g(mod-)290 4606 y(ule)22
b Fe(Example)p Fq(.)63 4874 y Fj(2.4.2)99 b(Servant)24
b(class)i(de\002nition)63 5055 y Fl(Lines)d(7\22610)290
5168 y Fq(For)37 b(interface)h Fe(Example::Echo)p Fq(,)e(omniidl)j(pr)n
(oduces)e(a)h(skeleton)e(class)j(named)290 5281 y Fe(Example__POA.Ec)o
(ho)o Fq(.)47 b(Her)n(e)30 b(we)h(de\002ne)f(an)h(implementation)g
(class,)i Fe(Echo_i)p Fq(,)290 5394 y(which)23 b(derives)f(fr)n(om)h
(the)f(skeleton)e(class.)p eop
%%Page: 8 14
8 13 bop 221 282 a Fq(8)2138 b Ff(CHAPTER)21 b(2.)51
b(THE)22 b(BASICS)448 539 y Fq(Ther)n(e)28 b(is)g(little)h(constraint)f
(on)g(how)f(you)h(design)f(your)g(implementation)h(class,)i(ex-)448
652 y(cept)d(that)f(it)h(has)g(to)f(inherit)h(fr)n(om)h(the)e(skeleton)
f(class)i(and)g(must)f(implement)h(all)h(of)448 764 y(the)c(operations)
e(declar)n(ed)i(in)h(the)e(IDL.)g(Note)g(that)h(since)g(Python)e(is)j
(a)f(dynamic)h(lan-)448 877 y(guage,)k(err)n(ors)e(due)h(to)f(missing)i
(operations)d(and)j(operations)e(with)h(incorr)n(ect)h(type)448
990 y(signatur)n(es)22 b(ar)n(e)h(only)f(r)n(eported)f(when)g(someone)g
(tries)h(to)g(call)j(those)c(operations.)221 1239 y Fj(2.4.3)99
b(ORB)25 b(initialisation)221 1416 y Fl(Line)e(12)448
1529 y Fq(The)32 b(ORB)f(is)h(initialised)h(by)f(calling)i(the)d
Fe(CORBA.ORB_init\()o(\))26 b Fq(function.)56 b Fe(ORB_)448
1642 y(init\(\))34 b Fq(is)j(passed)d(a)j(list)g(of)f(command-line)i
(ar)n(guments,)h(and)d(an)h(ORB)f(identi-)448 1755 y(\002er)-7
b(.)79 b(The)39 b(ORB)g(identi\002er)g(should)f(be)i(`omniORB3')g(or)f
(`omniORB2',)45 b(depend-)448 1868 y(ing)33 b(on)f(which)h(version)f
(of)g(omniORB)h(you)e(ar)n(e)i(using.)57 b(It)32 b(is)g(usually)h(best)
e(to)h(use)448 1981 y Fe(CORBA.ORB_ID)p Fq(,)17 b(which)24
b(is)e(initialised)i(to)e(a)h(suitable)g(string.)448
2125 y Fe(ORB_init\(\))c Fq(pr)n(ocesses)j(any)h(command-line)i(ar)n
(guments)d(which)i(begin)f(with)h(the)448 2238 y(string)37
b(`)p Fe(-ORB)p Fq(',)f(and)i(r)n(emoves)f(them)g(fr)n(om)h(the)e(ar)n
(gument)h(list.)73 b(See)37 b(section)f(6.1)448 2351
y(for)28 b(details.)44 b(If)28 b(any)h(ar)n(guments)e(ar)n(e)h
(invalid,)j(or)d(other)f(initialisation)j(err)n(ors)d(occur)448
2464 y(\(such)d(as)f(err)n(ors)f(in)i(the)e(con\002guration)h
(\002le\),)g(the)f Fe(CORBA.INITIALIZ)o(E)17 b Fq(exception)448
2577 y(is)23 b(raised.)221 2826 y Fj(2.4.4)99 b(Obtaining)25
b(the)g(Root)h(POA)221 3003 y Fl(Line)d(13)448 3116 y
Fq(T)-8 b(o)21 b(activate)i(our)e(servant)g(object)h(and)f(make)h(it)g
(available)i(to)e(clients,)f(we)g(must)g(r)n(egis-)448
3229 y(ter)h(it)g(with)h(a)f(POA.)h(In)e(this)h(example,)g(we)g(use)f
(the)h Fp(Root)h(POA)p Fq(,)e(rather)g(than)i(cr)n(eating)448
3341 y(any)34 b(child)g(POAs.)60 b(The)33 b(Root)g(POA)g(is)h(found)f
(with)g Fe(orb.resolve_ini)o(ti)o(al)o(_)448 3454 y(references\(\))p
Fq(.)448 3599 y(A)f(POA)-7 b('s)31 b(behaviour)h(is)f(governed)f(by)h
(its)g Fp(policies)p Fq(.)56 b(The)31 b(Root)f(POA)h(has)h(suitable)448
3712 y(policies)25 b(for)e(many)i(simple)f(servers.)30
b(Chapter)23 b(1)-5 b(1)25 b(of)f(the)f(CORBA)h(2.3)h(speci\002cation)
448 3825 y([OMG99a)s(])e(has)g(details)f(of)h(all)h(the)d(POA)i
(policies)g(which)g(ar)n(e)g(available.)448 3969 y(When)d(omniORBpy)f
(is)i(used)d(with)i(omniORB)g(2.8,)i Fp(only)e Fq(the)g(Root)f(POA)h
(is)g(available)448 4082 y(\(and)g(is)g(mapped)f(to)g(the)g(omniORB)h
(BOA\).)f(Y)-8 b(ou)19 b(cannot)g(cr)n(eate)h(child)g(POAs)g(or)f
(alter)448 4195 y(policies.)221 4444 y Fj(2.4.5)99 b(Object)25
b(initialisation)221 4621 y Fl(Line)e(15)448 4734 y Fq(An)g(instance)f
(of)h(the)f(Echo)g(servant)g(object)g(is)h(cr)n(eated.)221
4910 y Fl(Line)g(16)448 5023 y Fq(The)h(object)h(is)f(implicitly)j
(activated)e(in)g(the)f(Root)f(POA,)i(and)f(an)i(object)e(r)n(efer)n
(ence)g(is)448 5136 y(r)n(eturned,)d(using)h(the)g Fe(_this\(\))d
Fq(method.)448 5281 y(One)30 b(of)g(the)f(important)h(characteristics)g
(of)g(an)h(object)e(r)n(efer)n(ence)h(is)g(that)f(it)h(is)g(com-)448
5394 y(pletely)20 b(location)i(transpar)n(ent.)27 b(A)21
b(client)g(can)h(invoke)f(on)g(the)f(object)h(using)f(its)h(object)p
eop
%%Page: 9 15
9 14 bop 63 282 a Ff(2.5.)51 b(EXAMPLE)21 b(2)i(\227)f(DIFFERENT)e
(ADDRESS)i(SP)-8 b(ACES)1105 b Fq(9)290 539 y(r)n(efer)n(ence)25
b(without)g(any)h(need)e(to)i(know)f(whether)f(the)h(servant)g(object)h
(is)g(colocated)290 652 y(in)d(the)f(same)g(addr)n(ess)g(space)g(or)g
(is)h(in)g(a)g(dif)n(fer)n(ent)g(addr)n(ess)e(space.)290
811 y(In)27 b(the)g(case)h(of)f(colocated)h(client)g(and)f(servant,)h
(omniORB)g(is)g(able)g(to)f(short-cir)n(cuit)290 924
y(the)35 b(client)i(calls)h(so)d(they)g(do)g(not)h(involve)h(IIOP)-12
b(.)36 b(The)f(calls)j(still)f(go)e(thr)n(ough)g(the)290
1037 y(POA,)22 b(however)-7 b(,)20 b(so)h(the)g(various)i(POA)f
(policies)f(af)n(fect)i(local)h(calls)f(in)f(the)f(same)h(way)290
1150 y(as)k(r)n(emote)f(ones.)36 b(This)25 b(optimisation)h(is)g
(applicable)h(not)e(only)h(to)f(object)h(r)n(efer)n(ences)290
1263 y(r)n(eturned)k(by)i Fe(_this\(\))p Fq(,)f(but)g(to)h(any)f
(object)h(r)n(efer)n(ences)f(that)g(ar)n(e)i(passed)d(ar)n(ound)290
1376 y(within)18 b(the)f(same)h(addr)n(ess)e(space)i(or)f(r)n(eceived)h
(fr)n(om)g(other)f(addr)n(ess)f(spaces)i(via)h(IIOP)290
1489 y(calls.)63 1773 y Fj(2.4.6)99 b(Activating)25 b(the)g(POA)63
1959 y Fl(Lines)e(18\22619)290 2072 y Fq(POAs)31 b(ar)n(e)i(initially)g
(in)f(the)f Fp(holding)j Fq(state,)f(meaning)f(that)f(incoming)i(r)n
(equests)c(ar)n(e)290 2185 y(blocked.)e(Lines)20 b(18)i(and)f(19)h
(acquir)n(e)g(a)f(r)n(efer)n(ence)g(to)f(the)g(POA)-7
b('s)22 b(POA)f(manager)-7 b(,)22 b(and)290 2298 y(use)e(it)i(to)f(put)
g(the)f(POA)i(into)f(the)g Fp(active)i Fq(state.)k(Incoming)21
b(r)n(equests)e(ar)n(e)j(now)f(served.)63 2582 y Fj(2.4.7)99
b(Performing)24 b(a)g(call)63 2768 y Fl(Line)e(22)290
2881 y Fq(At)e(long)h(last,)g(we)g(can)g(call)i(the)d(object's)h
Fe(echoString\(\))15 b Fq(operation.)27 b(Even)20 b(though)290
2994 y(the)37 b(object)h(is)h(local,)k(the)37 b(operation)g(goes)g(thr)
n(ough)g(the)g(ORB)i(and)f(POA,)g(so)f(the)290 3107 y(types)25
b(of)j(the)e(ar)n(guments)h(can)h(be)f(checked,)g(and)h(any)f(mutable)h
(ar)n(guments)e(can)j(be)290 3220 y(copied.)52 b(This)31
b(ensur)n(es)f(that)h(the)f(semantics)h(of)g(local)i(and)e(r)n(emote)f
(calls)i(ar)n(e)g(iden-)290 3333 y(tical.)67 b(If)35
b(any)g(of)h(the)e(ar)n(guments)g(\(or)i(r)n(eturn)e(values\))i(ar)n(e)
f(of)h(the)e(wr)n(ong)g(type,)j(a)290 3446 y Fe(CORBA.BAD_PARAM)16
b Fq(exception)21 b(is)i(raised.)63 3774 y Fo(2.5)119
b(Example)29 b(2)h(\227)f(Dif)n(ferent)e(Address)j(Spaces)63
3994 y Fq(In)g(this)g(example,)j(the)c(client)i(and)g(the)f(object)g
(implementation)h(r)n(eside)f(in)h(two)f(dif)n(fer)n(ent)63
4107 y(addr)n(ess)19 b(spaces.)27 b(The)21 b(code)f(of)h(this)g
(example)g(is)h(almost)f(the)f(same)i(as)f(the)f(pr)n(evious)h(exam-)63
4220 y(ple.)26 b(The)20 b(only)g(dif)n(fer)n(ence)g(is)g(the)g(extra)f
(work)h(which)g(needs)f(to)g(be)h(done)f(to)h(pass)f(the)h(object)63
4333 y(r)n(efer)n(ence)i(fr)n(om)h(the)f(object)g(implementation)h(to)f
(the)f(client.)204 4451 y(The)e(simplest)g(\(and)h(quite)g(primitive\))
h(way)f(to)f(pass)g(an)i(object)f(r)n(efer)n(ence)f(between)f(two)63
4564 y(addr)n(ess)i(spaces)g(is)i(to)f(pr)n(oduce)f(a)i
Fp(stringi\002ed)i Fq(version)d(of)g(the)g(object)g(r)n(efer)n(ence)g
(and)g(to)g(pass)63 4677 y(this)i(string)g(to)h(the)f(client)i(as)f(a)g
(command-line)i(ar)n(gument.)31 b(The)24 b(string)f(is)h(then)f
(converted)63 4790 y(by)d(the)g(client)h(into)g(a)g(pr)n(oper)e(object)
i(r)n(efer)n(ence.)26 b(This)21 b(method)e(is)i(used)e(in)i(this)g
(example.)27 b(In)63 4902 y(the)g(next)g(example,)i(we)e(shall)i(intr)n
(oduce)e(a)i(better)d(way)i(of)g(passing)f(the)g(object)h(r)n(efer)n
(ence)63 5015 y(using)22 b(the)f(CORBA)i(Naming)g(Service.)63
5299 y Fj(2.5.1)99 b(Object)19 b(Implementation:)27 b(Generating)18
b(a)h(Stringi\002ed)g(Object)g(Reference)p eop
%%Page: 10 16
10 15 bop 221 282 a Fq(10)2093 b Ff(CHAPTER)21 b(2.)51
b(THE)22 b(BASICS)254 539 y Fh(1)83 b Fd(#!/usr)o(/bin)o(/env)49
b(python)254 638 y Fh(2)254 738 y(3)83 b Fc(import)49
b(sys)254 837 y Fh(4)83 b Fc(from)49 b(omniORB)g(import)g(CORBA)o(,)g
(PortableServer)254 937 y Fh(5)83 b Fc(import)49 b(Example)o(,)g
(Example__POA)254 1037 y Fh(6)254 1136 y(7)83 b Fc(class)49
b(Echo_i)g(\(Example__POA)m(.Echo\):)254 1236 y Fh(8)283
b Fc(def)49 b(echoString)n(\(self)o(,)h(mesg)o(\):)254
1336 y Fh(9)482 b Fc(print)49 b(")o(echoString)o(\(\))g(called)g(with)g
(message)o(:")o(,)h(mesg)229 1435 y Fh(10)482 b Fc(return)48
b(mesg)232 1535 y Fh(1)m(1)229 1634 y(12)83 b Fc(orb)50
b(=)f(CORBA)o(.ORB_init)o(\()o(sys.argv)o(,)h(CORBA)o(.)o(ORB_ID)o(\))
229 1734 y Fh(13)83 b Fc(poa)50 b(=)f(orb.)o
(resolve_initial_references)l(\()o("RootPOA)o("\))229
1834 y Fh(14)229 1933 y(15)83 b Fc(ei)50 b(=)f(Echo_i)o(\(\))229
2033 y Fh(16)83 b Fc(eo)50 b(=)f(ei._this)o(\(\))229
2133 y Fh(17)229 2232 y(18)83 b Fc(print)49 b(orb.)o(object_to_string)m
(\(eo\))229 2332 y Fh(19)229 2431 y(20)83 b Fc(poaManager)48
b(=)i(poa)o(._get_the_POAManager)m(\(\))229 2531 y Fh(21)83
b Fc(poaManager)n(.activate)o(\(\))229 2631 y Fh(22)229
2730 y(23)g Fc(orb.run)o(\(\))362 2904 y Fq(Up)24 b(until)h(line)g(18,)
h(this)e(example)g(is)h(identical)g(to)f(the)g(colocated)g(case.)33
b(On)25 b(line)g(18,)h(the)221 3017 y(ORB's)d Fe(object_to_stri)o(ng)o
(\(\))16 b Fq(operation)22 b(is)h(called.)29 b(This)23
b(r)n(esults)e(in)j(a)f(string)f(starting)221 3130 y(with)29
b(the)f(signatur)n(e)h(`IOR:')g(and)g(followed)f(by)h(some)f
(hexadecimal)i(digits.)46 b(All)30 b(CORBA)221 3242 y(2)e(compliant)g
(ORBs)e(ar)n(e)i(able)g(to)e(convert)h(the)f(string)h(into)f(its)h
(internal)h(r)n(epr)n(esentation)d(of)221 3355 y(a)36
b(so-called)g(Inter)n(operable)d(Object)j(Refer)n(ence)e(\(IOR\).)i
(The)e(IOR)i(contains)f(the)f(location)221 3468 y(information)c(and)g
(a)g(key)e(to)h(uniquely)g(identify)g(the)g(object)g(implementation)g
(in)h(its)g(own)221 3581 y(addr)n(ess)21 b(space)778
3548 y Fi(1)815 3581 y Fq(.)28 b(Fr)n(om)23 b(the)e(IOR,)i(an)g(object)
f(r)n(efer)n(ence)g(can)i(be)e(constr)o(ucted.)362 3698
y(After)34 b(the)f(POA)h(has)g(been)g(activated,)j Fe(orb.run\(\))30
b Fq(is)k(called.)64 b(Since)34 b(omniORB)g(is)221 3811
y(fully)27 b(multi-thr)n(eaded,)g(it)g(is)g(not)f(actually)h(necessary)
f(to)g(call)i Fe(orb.run\(\))23 b Fq(for)j(operation)221
3923 y(dispatch)e(to)h(happen\227if)f(the)g(main)i(pr)n(ogram)e(had)h
(some)f(other)f(work)h(to)g(do,)g(it)h(could)g(do)221
4036 y(so,)34 b(and)e(r)n(emote)f(invocations)i(would)f(be)g
(dispatched)f(in)i(separate)e(thr)n(eads.)55 b(However)-7
b(,)221 4149 y(in)32 b(the)f(absence)g(of)g(anything)g(else)g(to)f(do,)
j Fe(orb.run\(\))27 b Fq(is)32 b(called)g(so)f(the)f(thr)n(ead)h
(blocks)221 4262 y(rather)20 b(than)h(exiting)f(immediately)h(when)f
(the)g(end-of-\002le)g(is)h(r)n(eached.)27 b Fe(orb.run\(\))16
b Fq(stays)221 4375 y(blocked)22 b(until)h(the)f(ORB)h(is)f(shut)g
(down.)221 4608 y Fj(2.5.2)99 b(Client:)31 b(Using)25
b(a)g(Stringi\002ed)g(Object)g(Reference)254 4832 y Fh(1)83
b Fd(#!/usr)o(/bin)o(/env)49 b(python)254 4931 y Fh(2)254
5031 y(3)83 b Fc(import)49 b(sys)254 5131 y Fh(4)83 b
Fc(from)49 b(omniORB)g(import)g(CORBA)254 5230 y Fh(5)83
b Fc(import)49 b(Example)p 221 5306 1316 4 v 327 5362
a Fh(1)356 5394 y Fg(Notice)18 b(that)j(the)e(object)g(key)f(is)g(not)h
(globally)f(unique)h(acr)o(oss)e(addr)o(ess)g(spaces.)p
eop
%%Page: 11 17
11 16 bop 63 282 a Ff(2.5.)51 b(EXAMPLE)21 b(2)i(\227)f(DIFFERENT)e
(ADDRESS)i(SP)-8 b(ACES)1065 b Fq(1)-5 b(1)96 539 y Fh(6)96
638 y(7)83 b Fc(orb)49 b(=)h(CORBA)o(.ORB_init)n(\(sys)o(.argv)o(,)g
(CORBA)o(.ORB_ID)o(\))96 738 y Fh(8)96 837 y(9)83 b Fc(ior)49
b(=)h(sys)o(.argv)o([1])71 937 y Fh(10)83 b Fc(obj)49
b(=)h(orb)o(.string_to_object)m(\(ior)o(\))74 1037 y
Fh(1)m(1)71 1136 y(12)83 b Fc(eo)49 b(=)h(obj)o(._narrow)o(\(Example)n
(.Echo)o(\))71 1236 y Fh(13)71 1336 y(14)83 b Fc(if)49
b(eo)h(is)f(None)o(:)71 1435 y Fh(15)282 b Fc(print)49
b("Object)f(reference)h(is)g(not)g(an)h(Example)n(::Echo)o(")71
1535 y Fh(16)282 b Fc(sys)o(.exit\(1\))71 1634 y Fh(17)71
1734 y(18)83 b Fc(message)48 b(=)i("Hello)f(from)g(Python)o(")71
1834 y Fh(19)83 b Fc(result)98 b(=)50 b(eo.)o(echoString)o(\()o
(message)o(\))71 1933 y Fh(20)71 2033 y(21)83 b Fc(print)49
b(")o(I)h(said)f('\045s'.)g(The)g(object)g(said)g('\045s'.")g(\045)g
(\(message)o(,result)o(\))204 2206 y Fq(The)23 b(stringi\002ed)f
(object)h(r)n(efer)n(ence)h(is)f(passed)f(to)h(the)g(client)h(as)g(a)g
(command-line)h(ar)n(gu-)63 2318 y(ment)270 2285 y Fi(2)306
2318 y Fq(.)38 b(The)25 b(client)h(uses)e(the)h(ORB's)h
Fe(string_to_obje)o(ct)o(\(\))19 b Fq(function)26 b(to)f(convert)g(the)
63 2431 y(string)c(into)i(a)g(generic)f(object)g(r)n(efer)n(ence)g(\()p
Fe(CORBA.Object)p Fq(\).)204 2548 y(On)31 b(line)g(12,)i(the)d
(object's)g Fe(_narrow\(\))c Fq(function)31 b(is)f(called)i(to)e
(convert)f(the)h Fe(CORBA.)63 2660 y(Object)18 b Fq(r)n(efer)n(ence)h
(into)i(an)f Fe(Example.Echo)c Fq(r)n(efer)n(ence.)26
b(If)21 b(the)e(IOR)i(was)f(not)g(actually)i(of)63 2773
y(type)f Fe(Example.Echo)p Fq(,)c(or)22 b(something)f(derived)h(fr)n
(om)h(it,)g Fe(_narrow\(\))18 b Fq(r)n(eturns)k Fe(None)p
Fq(.)204 2889 y(In)c(fact,)j(since)e(Python)e(is)i(a)h
(dynamically-typed)e(language,)i Fe(string_to_obje)o(ct)o(\(\))63
3002 y Fq(is)35 b(often)f(able)i(to)e(r)n(eturn)g(an)h(object)g(r)n
(efer)n(ence)g(of)g(a)g(mor)n(e)g(derived)f(type)f(than)i
Fe(CORBA.)63 3115 y(Object)p Fq(.)25 b(See)c(section)h(3.1)i(for)e
(details.)63 3348 y Fj(2.5.3)99 b(System)24 b(exceptions)63
3531 y Fq(The)d(keep)g(it)i(short,)e(the)g(client)i(code)f(shown)f
(above)i(performs)e(no)i(exception)e(handling.)28 b(A)63
3644 y(r)n(obust)19 b(client)i(\(and)f(server\))f(should)h(do,)f(since)
h(ther)n(e)g(ar)n(e)g(a)h(number)f(of)g(system)e(exceptions)63
3757 y(which)23 b(can)g(arise.)204 3873 y(As)17 b(alr)n(eady)i
(mentioned,)e Fe(ORB_init\(\))d Fq(can)19 b(raise)g(the)e
Fe(CORBA.INITIALIZ)o(E)12 b Fq(excep-)63 3986 y(tion)20
b(if)h(the)f(command)h(line)g(ar)n(guments)f(or)g(con\002guration)g
(\002le)g(ar)n(e)h(invalid.)29 b Fe(string_to_)63 4099
y(object\(\))g Fq(can)34 b(raise)g(two)e(exceptions:)47
b(if)34 b(the)f(string)f(is)h(not)g(an)h(IOR)f(\(or)g(a)h(valid)g(URI)
63 4212 y(with)21 b(omniORB)h(3\),)h(it)f(raises)f Fe(CORBA.BAD_PARAM)p
Fq(;)15 b(if)23 b(the)e(string)g(looks)g(like)h(an)g(IOR,)g(but)63
4325 y(contains)g(invalid)j(data,)d(is)h(raises)f Fe(CORBA.MARSHAL)p
Fq(.)204 4441 y(The)f(call)k(to)c Fe(echoString\(\))c
Fq(can)24 b(r)n(esult)d(in)i(any)g(of)f(the)g(CORBA)g(system)f
(exceptions,)63 4554 y(since)37 b(any)g(exceptions)f(not)g(caught)h(on)
g(the)g(server)f(side)g(ar)n(e)i(pr)n(opagated)e(back)i(to)e(the)63
4667 y(client.)49 b(Even)29 b(if)h(the)f(implementation)g(of)h
Fe(echoString\(\))24 b Fq(does)k(not)g(raise)i(any)f(system)63
4780 y(exceptions)c(itself,)j(failur)n(es)g(in)f(invoking)g(the)g
(operation)f(can)i(cause)f(a)g(number)g(of)g(excep-)63
4893 y(tions.)51 b(First,)31 b(if)g(the)f(server)g(pr)n(ocess)f(cannot)
i(be)f(contacted,)h(a)h Fe(CORBA.COMM_FAI)o(LU)o(RE)63
5006 y Fq(exception)i(is)i(raised.)66 b(Second,)37 b(if)g(the)d(server)
h(pr)n(ocess)f Fp(can)i Fq(be)f(contacted,)j(but)d(the)g(ob-)63
5118 y(ject)29 b(in)h(question)e(does)g(not)h(exist)g(ther)n(e,)h(a)g
Fe(CORBA.OBJECT_NOT)o(_E)o(XI)o(ST)23 b Fq(exception)28
b(is)63 5231 y(raised.)36 b(V)-8 b(arious)25 b(events)g(can)h(also)g
(cause)g Fe(CORBA.TRANSIEN)o(T)20 b Fq(to)25 b(be)g(raised.)37
b(If)26 b(that)f(oc-)p 63 5306 1316 4 v 168 5362 a Fh(2)197
5394 y Fg(The)19 b(code)f(does)g(not)h(check)g(that)h(ther)o(e)e(is)g
(actually)h(an)h(IOR)e(on)h(the)h(command)f(line!)p eop
%%Page: 12 18
12 17 bop 221 282 a Fq(12)2093 b Ff(CHAPTER)21 b(2.)51
b(THE)22 b(BASICS)221 539 y Fq(curs,)30 b(omniORB's)f(default)f
(behaviour)i(is)f(to)f(automatically)i(r)n(etry)e(the)g(invocation,)j
(with)221 652 y(exponential)22 b(back-of)n(f.)362 766
y(As)34 b(explained)f(later)h(in)h(section)e(3.1,)k(the)d(call)i(to)d
Fe(_narrow\(\))d Fq(may)k(also)h(involve)f(a)221 879
y(call)e(to)e(the)g(object)g(to)g(con\002rm)h(its)f(type.)50
b(This)30 b(means)g(that)h Fe(_narrow\(\))26 b Fq(can)31
b(also)g(raise)221 992 y Fe(CORBA.COMM_FAIL)o(UR)o(E)p
Fq(,)16 b Fe(CORBA.OBJECT_NO)o(T_)o(EX)o(IS)o(T)p Fq(,)g(and)22
b Fe(CORBA.TRANSIENT)o Fq(.)362 1106 y(Section)d(6.9)h(describes)e(how)
h(exception)f(handlers)h(can)h(be)g(installed)f(for)g(all)i(the)e
(various)221 1219 y(system)i(exceptions,)g(to)h(avoid)h(surr)n(ounding)
e(all)j(code)e(with)g Fe(try)p Fq(.)14 b(.)g(.)g Fe(except)j
Fq(blocks.)221 1483 y Fj(2.5.4)99 b(Lifetime)24 b(of)h(a)g(CORBA)g
(object)221 1663 y Fq(CORBA)h(objects)e(ar)n(e)i(either)f
Fp(transient)h Fq(or)g Fp(persistent)p Fq(.)38 b(The)25
b(majority)h(ar)n(e)g(transient,)e(mean-)221 1776 y(ing)19
b(that)g(the)f(lifetime)i(of)f(the)f(CORBA)h(object)g(\(as)h(contacted)
e(thr)n(ough)g(an)i(object)e(r)n(efer)n(ence\))221 1889
y(is)27 b(the)f(same)g(as)h(the)f(lifetime)h(of)g(its)f(servant)g
(object.)40 b(Persistent)24 b(objects)i(can)i(live)f(beyond)221
2002 y(the)33 b(destr)o(uction)f(of)i(their)g(servant)f(object,)j(the)d
(POA)h(they)f(wer)n(e)g(cr)n(eated)g(in,)k(and)d(even)221
2115 y(their)24 b(pr)n(ocess.)33 b(Persistent)23 b(objects)h(ar)n(e,)h
(of)g(course,)f(only)g(contactable)h(when)f(their)h(associ-)221
2228 y(ated)19 b(servants)g(ar)n(e)i(active,)g(or)f(can)h(be)e
(activated)i(by)f(their)g(POA)g(with)g(a)g(servant)g(manager)3450
2195 y Fi(3)3487 2228 y Fq(.)221 2341 y(A)28 b(r)n(efer)n(ence)f(to)h
(a)g(persistent)e(object)i(can)h(be)f(published,)g(and)g(will)h(r)n
(emain)g(valid)h(even)d(if)221 2454 y(the)22 b(server)g(pr)n(ocess)f
(is)i(r)n(estarted.)362 2568 y(A)f(POA)-7 b('s)22 b(Lifespan)f(Policy)h
(determines)e(whether)g(objects)h(cr)n(eated)g(within)h(it)g(ar)n(e)g
(tran-)221 2681 y(sient)d(or)h(persistent.)k(The)19 b(Root)g(POA)h(has)
g(the)f Fe(TRANSIENT)d Fq(policy)-10 b(.)27 b(\(Note)19
b(that)h(since)f(only)221 2794 y(the)32 b(Root)f(POA)i(is)g(available)j
(when)31 b(using)h(omniORBpy)g(with)h(omniORB)g(2.8,)i(it)e(is)g(not)
221 2907 y(possible)22 b(to)g(cr)n(eate)h(persistent)d(objects)i(in)h
(that)f(envir)n(onment.\))362 3021 y(An)33 b(alternative)g(to)e(cr)n
(eating)i(persistent)d(objects)i(is)h(to)f(r)n(egister)f(object)h(r)n
(efer)n(ences)g(in)221 3134 y(a)26 b Fp(naming)g(service)i
Fq(and)e(bind)g(them)f(to)g(\002xed)g(pathnames.)37 b(Clients)26
b(can)g(bind)g(to)f(the)g(object)221 3247 y(implementations)17
b(at)h(r)o(untime)g(by)f(asking)g(the)g(naming)h(service)g(to)f(r)n
(esolve)g(the)g(pathnames)221 3360 y(to)33 b(the)g(object)h(r)n(efer)n
(ences.)60 b(CORBA)34 b(de\002nes)d(a)k(standar)n(d)e(naming)h
(service,)i(which)f(is)e(a)221 3473 y(component)26 b(of)g(the)h(Common)
g(Object)g(Services)g(\(COS\))h([OMG98)r(],)g(that)e(can)i(be)f(used)e
(for)221 3586 y(this)17 b(purpose.)24 b(The)17 b(next)f(section)h
(describes)f(an)i(example)f(of)g(how)g(to)g(use)f(the)h(COS)h(Naming)
221 3699 y(Service.)221 4007 y Fo(2.6)119 b(Example)30
b(3)f(\227)h(Using)g(the)f(Naming)h(Service)221 4221
y Fq(In)e(this)g(example,)h(the)e(object)h(implementation)g(uses)f(the)
h(Naming)g(Service)g([OMG98)r(])h(to)221 4334 y(pass)g(on)h(the)f
(object)h(r)n(efer)n(ence)f(to)g(the)g(client.)50 b(This)30
b(method)e(is)i(far)h(mor)n(e)e(practical)j(than)221
4446 y(using)j(stringi\002ed)f(object)h(r)n(efer)n(ences.)66
b(The)34 b(full)j(listings)e(of)g(the)g(server)f(and)i(client)g(ar)n(e)
221 4559 y(below)-8 b(.)362 4674 y(The)30 b(names)g(used)f(by)h(the)f
(Naming)h(service)g(consist)g(of)g(a)h(sequence)d(of)i
Fp(name)h(compo-)221 4787 y(nents)p Fq(.)36 b(Each)26
b(name)g(component)e(has)h(an)h Fp(id)h Fq(and)e(a)h
Fp(kind)g Fq(\002eld,)g(both)f(of)g(which)h(ar)n(e)g(strings.)221
4900 y(All)f(name)g(components)d(except)h(the)g(last)i(one)e(ar)n(e)i
(bound)e(to)h Fp(naming)g(contexts)p Fq(.)34 b(A)24 b(naming)221
5013 y(context)i(is)i(analogous)f(to)g(a)h(dir)n(ectory)e(in)i(a)g
(\002ling)g(system:)36 b(it)28 b(can)g(contain)g(names)f(of)h(ob-)221
5125 y(ject)c(r)n(efer)n(ences)e(or)h(other)g(naming)h(contexts.)29
b(The)23 b(last)h(name)g(component)e(is)i(bound)f(to)g(an)221
5238 y(object)g(r)n(efer)n(ence.)p 221 5306 1316 4 v
327 5362 a Fh(3)356 5394 y Fg(The)18 b(POA)h(itself)f(can)i(be)e
(activated)i(on)f(demand)g(with)g(an)h(adapter)e(activator)-6
b(.)p eop
%%Page: 13 19
13 18 bop 63 282 a Ff(2.6.)51 b(EXAMPLE)21 b(3)i(\227)f(USING)g(THE)g
(NAMING)f(SER)-5 b(VICE)1034 b Fq(13)204 539 y(Sequences)23
b(of)i(name)g(components)f(can)i(be)f(r)n(epr)n(esented)d(as)j(a)h
(\003at)f(string,)g(using)f(`.')36 b(to)63 652 y(separate)29
b(the)g(id)h(and)h(kind)f(\002elds,)h(and)f(`/')h(to)e(separate)g(name)
i(components)d(fr)n(om)j(each)63 764 y(other)276 731
y Fi(4)312 764 y Fq(.)j(In)24 b(our)h(example,)g(the)f(Echo)g(object)h
(r)n(efer)n(ence)f(is)h(bound)f(to)g(the)g(stringi\002ed)f(name)63
877 y(`)p Fe(test.my_context)o(/E)o(xa)o(mp)o(le)o(Ech)o(o.)o(Ob)o(je)o
(ct)o Fq('.)204 992 y(The)j(kind)h(\002eld)g(is)g(intended)f(to)g
(describe)h(the)f(name)i(in)f(a)h(syntax-independent)c(way)-10
b(.)63 1105 y(The)24 b(naming)j(service)e(does)f(not)h(interpr)n(et,)f
(assign,)i(or)f(manage)h(these)d(values.)37 b(However)-7
b(,)63 1218 y(both)28 b(the)g(name)i(and)f(the)f(kind)g(attribute)h
(must)f(match)i(for)f(a)h(name)f(lookup)f(to)g(succeed.)63
1331 y(In)34 b(this)h(example,)j(the)c(kind)h(values)g(for)g
Fe(test)e Fq(and)j Fe(ExampleEcho)30 b Fq(ar)n(e)35 b(chosen)f(to)h(be)
63 1444 y(`)p Fe(my_context)p Fq(')17 b(and)22 b(`)p
Fe(Object)p Fq(')d(r)n(espectively)-10 b(.)26 b(This)21
b(is)h(an)g(arbitrary)g(choice)f(as)h(ther)n(e)e(is)i(no)63
1557 y(standar)n(dised)f(set)g(of)i(kind)f(values.)63
1822 y Fj(2.6.1)99 b(Obtaining)25 b(the)g(Root)g(Context)g(object)h
(reference)63 2002 y Fq(The)21 b(initial)j(contact)f(with)f(the)f
(Naming)i(Service)f(can)h(be)g(established)e(via)j(the)d
Fp(r)n(oot)j Fq(context.)63 2115 y(The)33 b(object)g(r)n(efer)n(ence)g
(to)g(the)g(r)n(oot)g(context)g(is)g(pr)n(ovided)g(by)h(the)f(ORB)g
(and)h(can)h(be)e(ob-)63 2228 y(tained)25 b(by)h(calling)i
Fe(resolve_initia)o(l_)o(re)o(fer)o(en)o(ce)o(s\()o(\))p
Fq(.)k(The)25 b(following)h(code)f(frag-)63 2341 y(ment)d(shows)f(how)h
(it)h(is)g(used:)204 2494 y Fc(import)48 b(CosNaming)204
2593 y(orb)h(=)h(CORBA)o(.ORB_init)n(\(sys)o(.argv)o(,)g(CORBA)o
(.ORB_ID)o(\))204 2693 y(obj)f(=)h(orb)o(.resolve_initial_references)-5
b(\("NameService)n(")o(\);)204 2793 y(cxt)49 b(=)h(obj)o(._narrow)o(\()
o(CosNaming)o(.NamingContext)m(\))204 2961 y Fq(Remember)-7
b(,)31 b(omniORB)e(constr)o(ucts)g(its)g(internal)h(list)g(of)g
(initial)i(r)n(efer)n(ences)c(at)i(initial-)63 3074 y(isation)j(time)g
(using)f(the)g(information)h(pr)n(ovided)f(in)i(the)e(con\002guration)g
(\002le)h Fe(omniORB.)63 3186 y(cfg)p Fq(,)k(or)f(given)f(on)h(the)f
(command)h(line.)67 b(If)36 b(this)g(\002le)f(is)h(not)f(pr)n(esent,)i
(the)e(internal)h(list)63 3299 y(will)21 b(be)g(empty)e(and)h
Fe(resolve_initial)o(_r)o(efe)o(re)o(nc)o(es)o(\(\))14
b Fq(will)22 b(raise)e(a)h Fe(CORBA.ORB.)63 3412 y(InvalidName)c
Fq(exception.)204 3527 y(Note)k(that,)h(like)g Fe(string_to_objec)o
(t\()o(\))p Fq(,)16 b Fe(resolve_initial)o(_r)o(efe)o(re)o(nc)o(es)o
(\(\))63 3640 y Fq(r)n(eturns)23 b(base)h Fe(CORBA.Object)p
Fq(,)19 b(so)k(we)h(should)f(narr)n(ow)i(it)f(to)g(the)f(interface)i
(we)e(want.)33 b(In)63 3753 y(this)22 b(case,)g(we)g(want)h
Fe(CosNaming.Namin)o(gC)o(on)o(te)o(xt)2075 3720 y Fi(5)2107
3753 y Fq(.)63 4018 y Fj(2.6.2)99 b(The)25 b(Naming)f(Service)h
(interface)63 4198 y Fq(It)h(is)h(beyond)e(the)h(scope)f(of)i(this)g
(chapter)f(to)g(describe)g(in)h(detail)g(the)f(Naming)h(Service)g(in-)
63 4311 y(terface.)49 b(Y)-8 b(ou)29 b(should)f(consult)i(the)f(CORBA)g
(services)h(speci\002cation)g([OMG98)r(])g(\(chapter)63
4424 y(3\).)63 4690 y Fj(2.6.3)99 b(Server)24 b(code)63
4870 y Fq(Hopefully)-10 b(,)21 b(the)h(server)f(code)h(is)h
(self-explanatory:)p 63 4938 1316 4 v 168 4994 a Fh(4)197
5026 y Fg(Ther)o(e)i(ar)o(e)h(escaping)f(r)o(ules)h(to)g(cope)g(with)h
(id)e(and)i(kind)e(\002elds)g(which)j(contain)f(`.')45
b(and)26 b(`/')g(characters.)63 5117 y(See)20 b(chapter)h(4)g(of)f
(this)g(manual,)i(and)f(chapter)g(3)g(of)f(the)h(CORBA)f(services)f
(speci\002cation,)i(as)f(updated)g(for)g(the)63 5209
y(Inter)o(operable)e(Naming)g(Service)h([OMG99b].)168
5271 y Fh(5)197 5302 y Fg(If)h(you)f(ar)o(e)g(on-the-ball,)h(you)g
(will)f(have)h(noticed)g(that)h(we)f(didn't)f(call)h
Fb(_narrow\(\))e Fg(when)j(r)o(esolving)d(the)63 5394
y(Root)g(POA.)h(The)f(r)o(eason)g(it)h(is)f(safe)h(to)f(miss)g(it)h
(out)g(is)f(given)g(in)h(section)g(3.1.)p eop
%%Page: 14 20
14 19 bop 221 282 a Fq(14)2093 b Ff(CHAPTER)21 b(2.)51
b(THE)22 b(BASICS)362 539 y Fd(#!/usr)o(/bin)o(/env)49
b(python)362 638 y Fc(import)g(sys)362 738 y(from)g(omniORB)g(import)g
(CORBA)o(,)g(PortableServer)362 837 y(import)g(CosNaming)n(,)h(Example)
o(,)f(Example__POA)362 1037 y Fd(#)h(Define)f(an)g(implementation)e(of)
j(the)f(Echo)g(interface)362 1136 y Fc(class)g(Echo_i)g(\(Example__POA)
m(.Echo\):)562 1236 y(def)g(echoString)n(\(self)o(,)h(mesg)o(\):)761
1336 y(print)f(")o(echoString)o(\(\))g(called)g(with)g(message)o(:")o
(,)h(mesg)761 1435 y(return)e(mesg)362 1634 y Fd(#)i(Initialise)e(the)h
(ORB)g(and)h(find)f(the)g(root)g(POA)362 1734 y Fc(orb)h(=)f(CORBA)o
(.ORB_init)o(\()o(sys.argv)o(,)h(CORBA)o(.)o(ORB_ID)o(\))362
1834 y(poa)g(=)f(orb.)o(resolve_initial_references)l(\()o("RootPOA)o
("\))362 2033 y Fd(#)h(Create)f(an)g(instance)f(of)i(Echo_i)f(and)g(an)
g(Echo)g(object)g(reference)362 2133 y Fc(ei)h(=)f(Echo_i)o(\(\))362
2232 y(eo)h(=)f(ei._this)o(\(\))362 2431 y Fd(#)h(Obtain)f(a)g
(reference)f(to)i(the)f(root)g(naming)g(context)362 2531
y Fc(obj)448 b(=)50 b(orb)o(.resolve_initial_references)-5
b(\("NameService)n(")o(\))362 2631 y(rootContext)48 b(=)i(obj)o
(._narrow)o(\()o(CosNaming)o(.NamingContext)m(\))362
2830 y(if)g(rootContext)d(is)j(None)o(:)562 2930 y(print)e("Failed)h
(to)g(narrow)g(the)g(root)g(naming)g(context)o(")562
3029 y(sys)o(.exit)o(\(1\))362 3229 y Fd(#)h(Bind)f(a)h(context)e
(named)h("test)o(.my_context)n(")h(to)f(the)g(root)g(context)362
3328 y Fc(name)g(=)h([CosNaming)n(.NameComponent)n(\()o("test)o(",)g
("my_context)n("\)])362 3428 y(try:)562 3527 y(testContext)d(=)j
(rootContext)n(.bind_new_context)m(\(name)o(\))562 3627
y(print)e("New)h(test)h(context)e(bound)o(")362 3826
y(except)h(CosNaming)n(.NamingContext)n(.AlreadyBound)m(,)h(ex:)562
3926 y(print)e("Test)h(context)g(already)f(exists)o(")562
4026 y(obj)h(=)g(rootContext)n(.resolve)o(\(name)o(\))562
4125 y(testContext)e(=)j(obj)o(._narrow)o(\(CosNaming)n(.NamingContext)
m(\))562 4225 y(if)f(testContext)f(is)h(None)o(:)761
4324 y(print)g(")o(test.mycontext)f(exists)g(but)i(is)f(not)g(a)h
(NamingContext)n(")761 4424 y(sys)o(.exit)o(\(1\))362
4623 y Fd(#)g(Bind)f(the)g(Echo)g(object)g(to)g(the)h(test)f(context)
362 4723 y Fc(name)g(=)h([CosNaming)n(.NameComponent)n(\()o
("ExampleEcho)n(",)g(")o(Object)o("\)])362 4823 y(try:)562
4922 y(testContext)m(.bind\()o(name,)f(eo\))562 5022
y(print)f("New)h(ExampleEcho)f(object)h(bound)o(")362
5221 y(except)g(CosNaming)n(.NamingContext)n(.AlreadyBound)m(:)562
5321 y(testContext)m(.rebind)o(\(name)o(,)h(eo\))p eop
%%Page: 15 21
15 20 bop 63 282 a Ff(2.6.)51 b(EXAMPLE)21 b(3)i(\227)f(USING)g(THE)g
(NAMING)f(SER)-5 b(VICE)1034 b Fq(15)403 539 y Fc(print)49
b("ExampleEcho)f(binding)g(already)h(existed)f(--)h(rebound)o(")204
738 y Fd(#)g(Activate)g(the)g(POA)204 837 y Fc(poaManager)f(=)h
(poa._get_the_POAManager)l(\(\))204 937 y(poaManager)n(.activate)n
(\(\))204 1136 y Fd(#)g(Block)g(for)h(ever)f(\()o(or)h(until)f(the)g
(ORB)g(is)h(shut)f(down)o(\))204 1236 y Fc(orb)o(.run)o(\(\))63
1567 y Fj(2.6.4)99 b(Client)25 b(code)63 1751 y Fq(Hopefully)c(the)h
(client)h(code)f(is)h(self-explanatory)f(too:)204 1907
y Fd(#!/)o(usr/)o(bin/env)49 b(python)204 2006 y Fc(import)f(sys)204
2106 y(from)h(omniORB)f(import)h(CORBA)204 2206 y(import)f(CosNaming)o
(,)h(Example)204 2405 y Fd(#)g(Initialise)f(the)i(ORB)204
2505 y Fc(orb)f(=)h(CORBA)o(.ORB_init)n(\(sys)o(.argv)o(,)g(CORBA)o
(.ORB_ID)o(\))204 2704 y Fd(#)f(Obtain)g(a)h(reference)e(to)h(the)h
(root)f(naming)f(context)204 2803 y Fc(obj)448 b(=)49
b(orb.)o(resolve_initial_references)l(\()o("NameService)n("\))204
2903 y(rootContext)f(=)h(obj.)o(_narrow)o(\(CosNaming)n(.NamingContext)
n(\))204 3102 y(if)g(rootContext)f(is)h(None:)403 3202
y(print)g("Failed)f(to)i(narrow)f(the)g(root)g(naming)g(context)n(")403
3302 y(sys)o(.exit\(1\))204 3501 y Fd(#)g(Resolve)g(the)g(name)g("test)
o(.my_context)n(/ExampleEcho)n(.Object)o(")204 3600 y
Fc(name)g(=)g([CosNaming)o(.)o(NameComponent)n(\("test)o(",)g
("my_context)n("\),)602 3700 y(CosNaming)o(.)o(NameComponent)n
(\("ExampleEcho)n(")o(,)h("Object)o("\)])204 3800 y(try)o(:)403
3899 y(obj)f(=)h(rootContext)n(.resolve)n(\(name)o(\))204
4099 y(except)e(CosNaming)o(.NamingContext)m(.NotFound)o(,)h(ex:)403
4198 y(print)g("Name)g(not)g(found)o(")403 4298 y(sys)o(.exit\(1\))204
4497 y Fd(#)g(Narrow)g(the)g(object)g(to)h(an)f(Example)o(::)o(Echo)204
4597 y Fc(eo)g(=)h(obj)o(._narrow)o(\(Example)n(.Echo)o(\))204
4796 y(if)f(\(eo)g(is)h(None)o(\):)403 4896 y(print)f("Object)f
(reference)h(is)g(not)g(an)h(Example)n(::Echo)o(")403
4995 y(sys)o(.exit\(1\))204 5194 y Fd(#)f(Invoke)g(the)g(echoString)f
(operation)204 5294 y Fc(message)g(=)i("Hello)f(from)g(Python)o(")204
5394 y(result)98 b(=)50 b(eo.)o(echoString)o(\()o(message)o(\))p
eop
%%Page: 16 22
16 21 bop 221 282 a Fq(16)2093 b Ff(CHAPTER)21 b(2.)51
b(THE)22 b(BASICS)362 638 y Fc(print)49 b("I)h(said)f('\045)o(s'.)h
(The)f(object)g(said)g('\045)o(s'.")g(\045)h(\(message)n(,result)o(\))
221 987 y Fo(2.7)119 b(Global)30 b(IDL)f(de\002nitions)221
1198 y Fq(As)18 b(we)f(have)h(seen,)g(the)f(Python)f(mapping)i(maps)g
(IDL)g(modules)f(to)g(Python)g(packages)g(with)221 1311
y(the)23 b(same)h(name.)31 b(This)23 b(poses)f(a)i(pr)n(oblem)g(for)f
(IDL)h(declarations)f(at)h(global)h(scope.)k(Global)221
1423 y(declarations)j(ar)n(e)g(generally)f(a)h(bad)h(idea)e(since)h
(they)e(make)i(name)g(clashes)g(mor)n(e)f(likely)-10
b(,)221 1536 y(but)23 b(they)e(must)h(be)h(supported.)362
1649 y(Since)35 b(Python)e(does)f(not)i(have)h(a)g(concept)e(of)h(a)h
(global)h(scope)d(\(only)h(a)h(per)n(-module)221 1762
y(global)26 b(scope,)f(which)h(is)f(danger)n(ous)f(to)g(modify\),)i
(global)g(declarations)g(ar)n(e)f(mapped)g(to)f(a)221
1875 y(specially)d(named)f(Python)f(package.)27 b(By)19
b(default,)h(this)g(package)g(is)h(named)f Fe(_GlobalIDL)p
Fq(,)221 1988 y(with)31 b(skeletons)d(in)j Fe(_GlobalIDL__POA)p
Fq(.)24 b(The)30 b(package)h(name)g(may)g(be)g(changed)f(with)221
2101 y(omniidl's)h Fe(-Wbglobal)26 b Fq(option,)k(described)f(in)h
(section)f(5.2.)51 b(The)29 b(omniORB)h(C++)g(Echo)221
2214 y(example,)22 b(with)h(IDL:)362 2363 y Fc(interface)48
b(Echo)h({)462 2463 y(string)g(echoString)n(\(in)g(string)g(mesg)o(\);)
362 2563 y(};)221 2725 y Fq(can)24 b(ther)n(efor)n(e)d(be)i(supported)c
(with)k(code)e(like)362 2875 y Fd(#!/usr)o(/bin)o(/env)49
b(python)362 3074 y Fc(import)g(sys)362 3174 y(from)g(omniORB)g(import)
g(CORBA)362 3273 y(import)g(_GlobalIDL)362 3472 y(orb)h(=)f(CORBA)o
(.ORB_init)o(\()o(sys.argv)o(,)h(CORBA)o(.)o(ORB_ID)o(\))362
3672 y(ior)g(=)f(sys.)o(argv[1])362 3771 y(obj)h(=)f(orb.)o
(string_to_object)m(\(ior\))362 3871 y(eo)100 b(=)49
b(obj.)o(_narrow)o(\(_GlobalIDL)n(.Echo)o(\))362 4070
y(message)g(=)g("Hello)g(from)g(Python)o(")362 4170 y(result)99
b(=)49 b(eo.echoString)n(\(message)o(\))362 4269 y(print)g("I)h(said)f
('\045)o(s'.)h(The)f(object)g(said)g('\045)o(s'")g(\045)h(\(message)o
(,)o(result)o(\))p eop
%%Page: 17 23
17 22 bop 63 1162 a Fk(Chapter)44 b(3)63 1578 y Fm(Python)51
b(language)i(mapping)f(issues)63 2038 y Fq(omniORBpy)34
b(adher)n(es)h(to)f(the)h(standar)n(d)g(Python)f(mapping)i([OMG00)r(],)
i(so)d(ther)n(e)f(is)i(no)63 2151 y(need)18 b(to)h(describe)f(the)h
(mapping)g(her)n(e.)27 b(This)19 b(chapter)g(outlines)f(a)i(number)g
(of)f(issues)f(which)63 2264 y(ar)n(e)25 b(not)g(addr)n(essed)e(by)i
(the)g(standar)n(d)g(\(or)g(ar)n(e)h(optional\),)g(and)f(how)g(they)f
(ar)n(e)i(r)n(esolved)e(in)63 2377 y(omniORBpy)-10 b(.)63
2682 y Fo(3.1)119 b(Narrowing)28 b(object)i(references)63
2895 y Fq(As)20 b(explained)h(in)h(chapter)f(2,)h(whenever)e(you)g(r)n
(eceive)i(an)g(object)f(r)n(efer)n(ence)g(declar)n(ed)g(to)g(be)63
3008 y(base)34 b Fe(CORBA::Object)p Fq(,)e(such)i(as)h(fr)n(om)g
Fe(NamingContext::r)o(es)o(ol)o(ve)o(\(\))28 b Fq(or)35
b Fe(ORB::)63 3120 y(string_to_obje)o(ct)o(\(\))o Fq(,)16
b(you)21 b(should)f(narr)n(ow)i(the)e(r)n(efer)n(ence)h(to)g(the)f
(type)g(you)h(r)n(equir)n(e.)63 3233 y(Y)-8 b(ou)32 b(might)h(think)f
(that)h(since)g(Python)f(is)i(a)f(dynamically)i(typed)c(language,)36
b(narr)n(owing)63 3346 y(should)27 b(never)h(be)h(necessary)-10
b(.)44 b(Unfortunately)-10 b(,)28 b(although)g(omniORBpy)g(often)g
(generates)63 3459 y(object)22 b(r)n(efer)n(ences)g(with)g(the)g(right)
g(types,)f(it)h(cannot)h(do)f(so)g(in)h(all)h(cir)n(cumstances.)204
3573 y(The)h(r)o(ules)g(which)i(govern)e(when)g(narr)n(owing)h(is)g(r)n
(equir)n(ed)f(ar)n(e)h(quite)f(complex.)38 b(T)-8 b(o)25
b(be)63 3686 y(totally)d(safe,)h(you)f(can)h Fp(always)i
Fq(narr)n(ow)d(object)h(r)n(efer)n(ences)f(to)g(the)g(type)f(you)h(ar)n
(e)h(expecting.)63 3799 y(The)28 b(advantages)g(of)h(this)f(appr)n
(oach)h(ar)n(e)g(that)g(it)g(is)f(simple)h(and)g(that)f(it)h(is)g
(guaranteed)e(to)63 3912 y(work)21 b(with)i(all)h(Python)d(ORBs.)204
4026 y(The)26 b(disadvantage)g(with)g(calling)i(narr)n(ow)f(for)f(all)i
(r)n(eceived)e(object)h(r)n(efer)n(ences)e(is)i(that)63
4139 y(much)c(of)h(the)e(time)h(it)h(is)f(guaranteed)f(not)g(to)h(be)g
(necessary)-10 b(.)28 b(If)23 b(you)g(understand)e(the)h(situa-)63
4251 y(tions)g(in)h(which)g(narr)n(owing)f Fp(is)i Fq(necessary)-10
b(,)21 b(you)g(can)j(avoid)f(spurious)e(narr)n(owing.)63
4512 y Fj(3.1.1)99 b(The)25 b(gory)g(details)63 4691
y Fq(When)20 b(object)g(r)n(efer)n(ences)g(ar)n(e)h(transmitted)e(\(or)
i(stor)n(ed)e(in)i(stringi\002ed)e(IORs\),)i(they)e(contain)63
4804 y(a)24 b(single)g(type)f(identi\002er)g(string,)h(termed)f(the)g
Fp(r)n(epository)29 b(id)p Fq(.)k(Normally)-10 b(,)25
b(the)e(r)n(epository)f(id)63 4917 y(r)n(epr)n(esents)c(the)i(most)f
(derived)h(interface)h(of)g(the)e(object.)27 b(However)-7
b(,)20 b(it)h(is)f(also)h(permitted)e(to)63 5030 y(be)k(the)g(empty)f
(string,)h(or)g(to)g(r)n(efer)h(to)f(an)h(interface)g(higher)f(up)g
(the)g(inheritance)g(hierar)n(chy)-10 b(.)63 5143 y(T)i(o)21
b(give)i(a)g(concr)n(ete)f(example,)g(suppose)f(ther)n(e)g(ar)n(e)i
(two)f(IDL)g(\002les:)204 5294 y Fd(//)49 b(a.idl)204
5394 y Fc(module)f(M1)i({)1662 5622 y Fq(17)p eop
%%Page: 18 24
18 23 bop 221 282 a Fq(18)878 b Ff(CHAPTER)21 b(3.)51
b(PYTHON)22 b(LANGUAGE)f(MAPPING)h(ISSUES)462 539 y Fc(interface)48
b(A)i({)562 638 y(void)f(opA)o(\(\);)462 738 y(};)362
837 y(};)362 1034 y Fd(//)h(b.)o(idl)362 1133 y Fc(#include)f(")o
(a.idl)o(")362 1233 y(module)g(M2)g({)462 1333 y(interface)f(B)i(:)f
(M1::A)g({)562 1432 y(void)g(opB)o(\(\);)462 1532 y(};)362
1632 y(};)221 1793 y Fq(A)31 b(r)n(efer)n(ence)g(to)g(an)h(object)g
(with)f(interface)h Fe(B)f Fq(will)i(normally)f(contain)g(the)f(r)n
(epository)e(id)221 1906 y(`)p Fe(IDL:M2/B:1.0)p Fq(')931
1873 y Fi(1)964 1906 y Fq(.)47 b(It)28 b(is)h(also)g(permitted)f(to)g
(have)h(an)h(empty)e(r)n(epository)f(id,)j(or)f(the)f(id)221
2019 y(`)p Fe(IDL:M1/A:1.0)p Fq('.)h(`)p Fe(IDL:M1/A:1.0)p
Fq(')19 b(is)25 b(unlikely)f(unless)g(the)f(server)h(is)g(being)h
(deliber)n(-)221 2132 y(ately)e(obtuse.)362 2245 y(Whenever)32
b(omniORBpy)g(r)n(eceives)g(an)i(object)e(r)n(efer)n(ence)h(fr)n(om)g
(somewher)n(e\227either)221 2357 y(as)27 b(a)h(r)n(eturn)e(value)h(or)g
(as)g(an)g(operation)f(ar)n(gument\227it)h(has)g(a)g(particular)h
Fp(tar)n(get)i Fq(interface)221 2470 y(in)24 b(mind,)f(which)h(it)g
(compar)n(es)f(with)g(the)g(r)n(epository)e(id)j(it)f(has)g(r)n
(eceived.)30 b(A)23 b(tar)n(get)g(of)g(base)221 2583
y Fe(CORBA::Object)17 b Fq(is)23 b(just)f(one)g(\(common\))h(case.)28
b(For)21 b(example,)i(in)g(the)f(following)h(IDL:)362
2731 y Fd(//)50 b(c.)o(idl)362 2831 y Fc(#include)f(")o(a.idl)o(")362
2930 y(module)g(M3)g({)462 3030 y(interface)f(C)i({)562
3130 y(Object)e(getObj)o(\(\);)562 3229 y(M1)o(::A)99
b(getA)o(\(\);)462 3329 y(};)362 3429 y(};)221 3590 y
Fq(the)20 b(tar)n(get)g(interface)h(for)f Fe(getObj)p
Fq('s)e(r)n(eturn)i(value)h(is)g Fe(CORBA::Object)p Fq(;)15
b(the)20 b(tar)n(get)g(inter)n(-)221 3703 y(face)k(for)e
Fe(getA)p Fq('s)f(r)n(eturn)h(value)h(is)g Fe(M1::A)p
Fq(.)362 3816 y(omniORBpy)33 b(uses)f(the)h(r)n(esult)g(of)g(comparing)
h(the)f(r)n(eceived)g(and)g(tar)n(get)g(r)n(epository)221
3929 y(ids)22 b(to)g(determine)f(the)h(type)f(of)h(the)g(object)g(r)n
(efer)n(ence)g(it)h(cr)n(eates.)k(The)22 b(object)g(r)n(efer)n(ence)g
(has)221 4042 y(either)g(the)g(type)f(of)h(the)g(r)n(eceived)h(r)n
(efer)n(ence,)e(or)i(the)e(tar)n(get)h(type,)f(accor)n(ding)i(to)f
(this)h(table:)494 4250 y Fl(Case)p 2847 4284 4 113 v
2209 w(Objref)g(T)-8 b(ype)p 444 4287 2844 4 v 494 4366
a Fq(1.)99 b(The)22 b(r)n(eceived)h(id)f(is)h(the)f(same)h(as)f(the)g
(tar)n(get)g(id)p 2847 4400 4 113 v 536 w(r)n(eceived)p
444 4403 2844 4 v 494 4482 a(2.)99 b(The)31 b(r)n(eceived)h(id)f(is)h
(not)f(the)g(same)g(as)h(the)f(tar)n(get)g(id,)i(but)661
4595 y(the)26 b(ORB)g(knows)e(that)i(the)f(r)n(eceived)h(interface)g
(is)g(derived)661 4708 y(fr)n(om)e(the)d(tar)n(get)h(interface)p
2847 4742 4 339 v 2899 4482 a(r)n(eceived)p 444 4745
2844 4 v 494 4824 a(3.)99 b(The)22 b(r)n(eceived)h(id)f(is)h(unknown)e
(to)h(the)g(ORB)p 2847 4858 4 113 v 658 w(tar)n(get)p
444 4861 2844 4 v 494 4941 a(4.)99 b(The)30 b(r)n(eceived)f(id)h(is)g
(not)g(the)f(same)g(as)h(the)g(tar)n(get)f(id,)i(and)661
5053 y(the)f(ORB)f(knows)g(that)h(the)f(r)n(eceived)g(interface)i(is)f
Fp(not)g Fq(de-)661 5166 y(rived)23 b(fr)n(om)g(the)f(tar)n(get)g
(interface)p 2847 5200 4 339 v 2899 4941 a(tar)n(get)p
221 5215 1316 4 v 327 5271 a Fh(1)356 5302 y Fg(It)h(is)g(possible)f
(to)i(change)g(the)g(r)o(epository)c(id)j(strings)f(associated)h(with)h
(particular)f(interfaces)g(using)g(the)221 5394 y Fb(ID)p
Fg(,)18 b Fb(version)g Fg(and)h Fb(prefix)f Fg(pragmas.)p
eop
%%Page: 19 25
19 24 bop 63 282 a Ff(3.2.)51 b(SUPPOR)m(T)21 b(FOR)i(ANY)f(V)-10
b(ALUES)1782 b Fq(19)204 539 y(Cases)28 b(1)i(and)f(2)h(ar)n(e)f(the)f
(most)g(common.)47 b(Case)30 b(2)f(explains)g(why)g(it)g(is)g(not)f
(necessary)63 652 y(to)g(narr)n(ow)g(the)g(r)n(esult)g(of)h(calling)i
Fe(resolve_initia)o(l_)o(re)o(fe)o(ren)o(ce)o(s\()o("R)o(oo)o(tPO)o(A")
o(\))p Fq(:)63 764 y(the)23 b(r)n(eturn)h(is)g(always)h(of)f(the)f
(known)h(type)e Fe(PortableServer.P)o(OA)o Fq(,)c(which)25
b(is)g(derived)63 877 y(fr)n(om)e(the)f(tar)n(get)f(type)h(of)g
Fe(CORBA.Object)p Fq(.)204 991 y(Case)28 b(3)h(is)f(also)g(quite)g
(common.)45 b(Suppose)25 b(a)k(client)g(knows)d(about)i(IDL)g(modules)f
Fe(M1)63 1104 y Fq(and)h Fe(M3)g Fq(fr)n(om)h(above,)h(but)e(not)g
(module)g Fe(M2)p Fq(.)45 b(When)28 b(it)g(calls)i Fe(getA\(\))c
Fq(on)i(an)h(instance)g(of)63 1217 y Fe(M3::C)p Fq(,)18
b(the)h(r)n(eturn)h(value)h(may)g(validly)h(be)e(of)h(type)d
Fe(M2::B)p Fq(,)g(which)j(it)g(does)e(not)h(know)-8 b(.)25
b(By)63 1330 y(cr)n(eating)e(an)h(object)f(r)n(efer)n(ence)g(of)h(type)
d Fe(M1::A)h Fq(in)h(this)g(case,)h(the)e(client)i(is)g(still)g(able)g
(to)f(call)63 1443 y(the)e(object's)h Fe(opA\(\))d Fq(operation.)27
b(On)22 b(the)g(other)e(hand,)i(if)h Fe(getObj\(\))18
b Fq(r)n(eturns)j(an)i(object)f(of)63 1556 y(type)e Fe(M2::B)p
Fq(,)f(the)i(ORB)h(will)h(cr)n(eate)e(a)i(r)n(efer)n(ence)e(to)g(base)g
Fe(CORBA::Object)p Fq(,)16 b(since)22 b(that)f(is)63
1669 y(the)g(tar)n(get)h(type.)204 1783 y(Note)i(that)i(the)g(ORB)f
Fp(never)j Fq(r)n(ejects)d(an)i(object)f(r)n(efer)n(ence)f(due)g(to)h
(it)g(having)h(the)e(wr)n(ong)63 1896 y(type.)33 b(Even)25
b(if)h(it)f(knows)f(that)h(the)f(r)n(eceived)h(id)g(is)g(not)g(derived)
f(fr)n(om)i(the)e(tar)n(get)g(interface)63 2009 y(\(case)i(4\),)i(it)f
(might)f(be)g(the)g(case)g(that)g(the)g(object)g(actually)i(has)e(a)h
(mor)n(e)f(derived)g(interface,)63 2121 y(which)c(is)f(derived)f(fr)n
(om)i(both)f(the)g(type)e(it)j(is)f(claiming)j(to)d(be)g
Fp(and)h Fq(the)e(tar)n(get)h(type.)26 b(That)21 b(is,)63
2234 y(of)h(course,)g(extr)n(emely)f(unlikely)-10 b(.)204
2348 y(In)17 b(cases)g(3)h(and)g(4,)g(the)f(ORB)h(con\002rms)f(the)f
(type)g(of)i(the)f(object)g(by)g(calling)j Fe(_is_a\(\))14
b Fq(just)63 2461 y(befor)n(e)25 b(the)h(\002rst)f(invocation)i(on)e
(the)h(object.)38 b(If)26 b(it)g(turns)f(out)g(that)h(the)f(object)h
(is)g(not)f(of)h(the)63 2574 y(right)i(type)f(after)i(all,)i(the)d
Fe(CORBA.INV_OBJRE)o(F)22 b Fq(exception)28 b(is)h(raised.)45
b(The)28 b(alternative)63 2687 y(to)d(this)g(appr)n(oach)h(would)f(be)h
(to)f(check)g(the)g(types)e(of)j(object)f(r)n(efer)n(ences)g(when)g
(they)f(wer)n(e)63 2800 y(r)n(eceived,)j(rather)f(than)h(waiting)g
(until)g(the)f(\002rst)g(invocation.)42 b(That)26 b(would)h(be)f(inef)n
(\002cient,)63 2913 y(however)-7 b(,)35 b(since)f(it)g(is)g(quite)f
(possible)h(that)f(a)i(r)n(eceived)e(object)h(r)n(efer)n(ence)f(will)i
(never)f(be)63 3026 y(used.)26 b(It)c(may)h(also)g(cause)f(objects)g
(to)g(be)h(activated)g(earlier)g(than)g(expected.)204
3140 y(In)e(summary)-10 b(,)21 b(whenever)e(your)i(code)f(r)n(eceives)h
(an)g(object)g(r)n(efer)n(ence,)g(you)f(should)g(bear)63
3253 y(in)27 b(mind)h(what)f(omniORBpy's)f(idea)i(of)f(the)f(tar)n(get)
h(type)e(is.)42 b(Y)-8 b(ou)26 b(must)h(not)f(assume)h(that)63
3366 y(the)c(ORB)g(will)i(always)f(corr)n(ectly)g(\002gur)n(e)e(out)h
(a)i(mor)n(e)e(derived)g(type)f(than)i(the)e(tar)n(get.)31
b(One)63 3479 y(consequence)21 b(of)j(this)f(is)h(that)f(you)g(must)g
(always)h(narr)n(ow)g(a)g(plain)g Fe(CORBA::Object)18
b Fq(to)23 b(a)63 3591 y(mor)n(e)f(speci\002c)h(type)e(befor)n(e)h
(invoking)h(on)f(it)1655 3558 y Fi(2)1693 3591 y Fq(.)28
b(Y)-8 b(ou)22 b Fp(can)g Fq(assume)g(that)h(the)f(object)g(r)n(efer)n
(ence)63 3704 y(you)g(r)n(eceive)h(is)h(of)f(the)f(tar)n(get)h(type,)f
(or)g(something)g(derived)g(fr)n(om)i(it,)g(although)e(the)h(object)63
3817 y(it)36 b(r)n(efers)f(to)g(may)i(turn)e(out)g(to)g(be)h(invalid.)
70 b(The)35 b(fact)i(that)f(omniORBpy)f(often)g Fp(is)i
Fq(able)63 3930 y(\002gur)n(e)17 b(out)h(a)g(mor)n(e)g(derived)g(type)e
(than)j(the)e(tar)n(get)g(is)i(only)f(useful)f(when)h(using)f(the)h
(Python)63 4043 y(interactive)23 b(command)g(line.)63
4348 y Fo(3.2)119 b(Support)29 b(for)h(Any)g(values)63
4562 y Fq(In)h(statically)h(typed)e(languages,)i(such)f(as)h(C++,)i
(Anys)c(can)j(only)e(be)g(used)f(with)h(built-in)63 4674
y(types)15 b(and)j(IDL-declar)n(ed)f(types)f(for)i(which)g(stubs)f
(have)h(been)f(generated.)24 b(If,)18 b(for)g(example,)63
4787 y(a)h(C++)g(pr)n(ogram)f(r)n(eceives)h(an)g(Any)f(containing)g(a)i
(str)o(uct)d(for)i(which)g(it)g(does)e(not)g(have)i(static)63
4900 y(knowledge,)j(it)j(cannot)g(easily)g(extract)f(the)g(str)o(uct)g
(contents.)32 b(The)24 b(only)h(solution)f(is)g(to)h(use)63
5013 y(the)c(inconvenient)i(DynAny)f(interface.)204 5127
y(Since)k(Python)e(is)i(a)h(dynamically)g(typed)d(language,)i(it)g
(does)e(not)i(have)g(this)f(dif)n(\002culty)-10 b(.)63
5240 y(When)22 b(omniORBpy)g(r)n(eceives)h(an)g(Any)g(containing)g
(types)e(it)i(does)e(not)i(know)-8 b(,)21 b(it)i(is)g(able)h(to)p
63 5306 1316 4 v 168 5362 a Fh(2)197 5394 y Fg(Unless)18
b(you)g(ar)o(e)g(invoking)h(pseudo)e(operations)h(like)g
Fb(_is_a\(\))f Fg(and)j Fb(_non_existent\(\))p Fg(.)p
eop
%%Page: 20 26
20 25 bop 221 282 a Fq(20)878 b Ff(CHAPTER)21 b(3.)51
b(PYTHON)22 b(LANGUAGE)f(MAPPING)h(ISSUES)221 539 y Fq(cr)n(eate)f(new)
f(Python)g(types)f(which)i(behave)g(exactly)g(as)g(if)h(ther)n(e)e(wer)
n(e)g(statically)i(generated)221 652 y(stubs)27 b(available.)48
b(Note)27 b(that)h(this)f(behaviour)i(is)f(not)g(r)n(equir)n(ed)g(by)g
(the)f(Python)g(mapping)221 764 y(speci\002cation,)c(so)f(other)f
(Python)g(ORBs)h(may)h(not)f(be)h(so)e(accommodating.)362
883 y(The)32 b(equivalent)h(of)g(DynAny)f(cr)n(eation)h(can)h(be)f
(achieved)g(by)g(dynamically)h(writing)221 996 y(and)23
b(importing)f(new)g(IDL,)g(as)h(described)e(in)i(section)f(6.10.)362
1115 y(Ther)n(e)38 b(is,)43 b(however)-7 b(,)41 b(a)e(minor)g(\003y)g
(in)g(the)f(ointment)g(when)f(it)i(comes)f(to)g(r)n(eceiving)221
1228 y(Anys.)47 b(When)28 b(an)i(Any)e(is)i(transmitted,)f(it)g(is)h
(sent)e(as)h(a)h(T)-8 b(ypeCode)27 b(followed)h(by)h(the)g(ac-)221
1341 y(tual)23 b(value.)28 b(Normally)-10 b(,)22 b(the)f(T)-8
b(ypeCodes)19 b(for)j(entities)f(with)h(names\227members)f(of)g(str)o
(ucts,)221 1454 y(for)27 b(example\227contain)f(those)f(names)h(as)h
(strings.)38 b(That)26 b(permits)g(omniORBpy)f(to)h(cr)n(eate)221
1566 y(types)i(with)h(the)g(corr)n(esponding)f(names.)49
b(Unfortunately)-10 b(,)29 b(the)g(GIOP)h(speci\002cation)g(per)n(-)221
1679 y(mits)f(T)-8 b(ypeCodes)26 b(to)i(be)g(sent)g(with)g(empty)g
(strings)f(wher)n(e)h(the)g(names)g(would)g(normally)221
1792 y(be)315 1759 y Fi(3)352 1792 y Fq(.)63 b(In)34
b(this)g(situation,)i(the)d(types)g(which)h(omniORBpy)g(cr)n(eates)f
(cannot)i(be)f(given)g(the)221 1905 y(corr)n(ect)29 b(names.)46
b(The)28 b(contents)f(of)i(all)h(types)d(except)g(str)o(ucts)h(and)h
(exceptions)e(can)i(be)g(ac-)221 2018 y(cessed)23 b(without)g(having)i
(to)f(know)f(their)h(names,)h(thr)n(ough)e(the)g(standar)n(d)h
(interfaces.)33 b(Un-)221 2131 y(known)c(str)o(ucts)g(and)i(exceptions)
d(r)n(eceived)i(by)h(omniORBpy)e(have)i(an)f(attribute)g(named)221
2244 y(`)p Fe(_values)p Fq(')35 b(which)k(contains)e(a)i(sequence)d(of)
h(the)g(member)h(values.)73 b(This)38 b(attribute)f(is)221
2357 y(omniORBpy)22 b(speci\002c.)362 2476 y(Similarly)-10
b(,)21 b(T)-8 b(ypeCodes)15 b(for)j(constr)o(ucted)f(types)f(such)i(as)
g(str)o(ucts)f(and)i(unions)e(normally)221 2588 y(contain)34
b(the)f(r)n(epository)e(ids)i(of)g(those)f(types.)58
b(This)33 b(means)g(that)g(omniORBpy)g(can)h(use)221
2701 y(types)g(statically)j(declar)n(ed)e(in)h(the)f(stubs)g(when)g
(they)f(ar)n(e)i(available.)70 b(Once)36 b(again,)k(the)221
2814 y(speci\002cation)25 b(permits)f(the)g(r)n(epository)f(id)h
(strings)g(to)g(be)h(empty)2559 2781 y Fi(4)2595 2814
y Fq(.)34 b(This)24 b(means)h(that)g(even)221 2927 y(if)j(stubs)f(for)g
(a)h(type)e(r)n(eceived)h(in)h(an)g(Any)f(ar)n(e)h(available,)j(it)d
(may)g(not)f(be)g(able)h(to)f(cr)n(eate)g(a)221 3040
y(Python)21 b(value)j(with)e(the)g(right)g(type.)27 b(For)21
b(example,)i(with)f(a)h(str)o(uct)f(de\002nition)g(such)g(as:)362
3201 y Fc(module)49 b(M)h({)462 3301 y(struct)f(S)g({)562
3400 y(string)f(str;)562 3500 y(long)148 b(l;)462 3600
y(};)362 3699 y(};)221 3880 y Fq(The)26 b(transmitted)f(T)-8
b(ypeCode)23 b(for)k Fe(M::S)d Fq(may)j(contain)f(only)g(the)g
(information)h(that)f(it)g(is)g(a)221 3992 y(str)o(uctur)n(e)f
(containing)i(a)g(string)e(followed)h(by)g(a)h(long,)f(not)g(that)g(it)
g(is)g(type)f Fe(M::S)p Fq(,)f(or)i(what)221 4105 y(the)c(member)h
(names)f(ar)n(e.)362 4224 y(T)-8 b(o)29 b(cope)g(with)h(this)f
(situation,)i(omniORBpy)e(has)h(an)g(extension)e(to)h(the)g(standar)n
(d)g(in-)221 4337 y(terface)38 b(which)g(allows)g(you)f(to)f
Fp(coer)n(ce)k Fq(an)e(Any)f(value)h(to)f(a)h(known)f(type.)71
b(Calling)40 b(an)221 4450 y(Any's)27 b Fe(value\(\))d
Fq(method)i(with)i(a)g(T)-8 b(ypeCode)25 b(ar)n(gument)i(r)n(eturns)f
(either)h(a)h(value)g(of)g(the)221 4563 y(r)n(equested)f(type,)i(or)g
Fe(None)e Fq(if)j(the)e(r)n(equested)f(T)-8 b(ypeCode)27
b(is)i(not)f Fp(equivalent)j Fq(to)e(the)f(Any's)221
4676 y(T)-8 b(ypeCode.)26 b(The)21 b(following)i(code)f(is)h
(guaranteed)e(to)h(be)g(safe,)h(but)f(is)h(not)f(standar)n(d:)362
4837 y Fc(a)50 b(=)g Fd(#)f(Acquire)g(an)g(Any)g(from)g(somewhere)362
4937 y Fc(v)h(=)g(a)o(.value)o(\(CORBA)o(.TypeCode)n(\(CORBA)o(.id\(M)o
(.S\)\)\))362 5036 y(if)g(v)f(is)h(not)f(None)o(:)p 221
5121 1316 4 v 327 5177 a Fh(3)356 5209 y Fg(This)21 b(is)g(now)i(depr)o
(ecated,)d(but)j(some)e(ORBs)f(may)i(still)f(send)g(empty)h(strings.)31
b(No)21 b(version)g(of)h(omniORB)221 5300 y(has)d(ever)f(sent)h(empty)g
(strings.)327 5362 y Fh(4)356 5394 y Fg(And)g(once)g(again,)f(this)h
(practice)g(is)f(depr)o(ecated.)p eop
%%Page: 21 27
21 26 bop 63 282 a Ff(3.3.)51 b(USING)22 b(OMNIORBPY)f(WITH)h(OMNIORB)g
(2.8)1242 b Fq(21)403 539 y Fc(print)49 b(v.str)204 638
y(else)o(:)403 738 y(print)g("The)g(Any)g(does)g(not)h(contain)e(a)i
(value)f(compatible)f(with)h(M)o(::S.")63 1121 y Fo(3.3)119
b(Using)30 b(omniORBpy)h(with)e(omniORB)h(2.8)63 1340
y Fq(omniORBpy)20 b(is)h(designed)d(to)i(work)g(with)h(omniORB)g(3.)27
b(When)21 b(it)g(is)f(used)g(with)g(omniORB)63 1453 y(2.8,)j(many)g
(facilities)h(ar)n(e)f(not)f(available.)31 b(This)22
b(section)g(describes)f(the)h(limitations.)204 1570 y(If)36
b(you)e(r)n(equir)n(e)i(facilities)i(which)e(ar)n(e)g(not)f(available)k
(with)d(omniORB)f(2.8,)40 b(you)35 b(can)63 1683 y(cause)d(your)f(pr)n
(ogram)i(to)f(bail-out)h(gracefully)g(by)f(detecting)f(the)h(omniORB)g
(version)g(at)63 1796 y(start-up.)62 b(The)34 b Fe(omniORB.coreVer)o
(si)o(on\()o(\))28 b Fq(function)35 b(r)n(eturns)e(a)i(string)f(of)h
(the)e(form)63 1909 y Fp(major)-7 b(.minor)g(.micr)n(o)37
b Fq(which)f(indicates)f(what)g(version)g(of)g(omniORB)g(is)g(in)h
(use.)64 b(The)34 b(two)63 2022 y(possible)26 b(values)i(ar)n(e)g(curr)
n(ently)e(`)p Fe(2.8.0)p Fq(')g(and)i(`)p Fe(3.0.0)p
Fq('.)40 b(V)-10 b(ersions)25 b(which)j(dif)n(fer)g(only)f(in)63
2135 y(micr)n(o)c(version)f(number)h(ar)n(e)g(guaranteed)e(to)h(be)h
(compatible)g(with)g(each)g(other)-7 b(.)63 2415 y Fj(3.3.1)99
b(POA)24 b(functions)63 2601 y Fq(Under)19 b(2.8,)i(only)e(the)h(r)n
(oot)f(POA)h(is)h(available.)30 b(It)19 b(supports)f(only)h(the)h
(following)g(functions:)199 2834 y Fn(\017)46 b Fe(destroy\(\))199
2993 y Fn(\017)g Fe(_get_the_name\(\))199 3152 y Fn(\017)g
Fe(_get_the_POAMan)o(ag)o(er)o(\(\))199 3310 y Fn(\017)g
Fe(activate_object)o(\(\))199 3469 y Fn(\017)g Fe(deactivate_obje)o(ct)
o(\(\))199 3628 y Fn(\017)g Fe(servant_to_id\(\))199
3787 y Fn(\017)g Fe(servant_to_refe)o(re)o(nc)o(e\()o(\))199
3945 y Fn(\017)g Fe(reference_to_se)o(rv)o(an)o(t\()o(\))199
4104 y Fn(\017)g Fe(reference_to_id)o(\(\))199 4263 y
Fn(\017)g Fe(id_to_servant\(\))199 4421 y Fn(\017)g Fe(id_to_reference)
o(\(\))63 4655 y Fq(The)22 b Fe(POAManager)c Fq(interface)23
b(only)f(supports:)199 4889 y Fn(\017)46 b Fe(activate\(\))199
5047 y Fn(\017)g Fe(get_state\(\))63 5281 y Fq(For)30
b(both)h(interfaces,)j(all)f(other)d(operations)g(fail,)35
b(raising)d(the)f Fe(CORBA.NO_IMPLE)o(ME)o(NT)63 5394
y Fq(exception.)p eop
%%Page: 22 28
22 27 bop 221 282 a Fq(22)878 b Ff(CHAPTER)21 b(3.)51
b(PYTHON)22 b(LANGUAGE)f(MAPPING)h(ISSUES)221 539 y Fj(3.3.2)99
b(Local)25 b(/)h(remote)e(transparency)221 715 y Fq(omniORB)k(3)h(goes)
e(to)g(gr)n(eat)h(lengths)f(to)g(make)h(sur)n(e)g(that)g(the)f
(semantics)h(of)g(local)i(objects)221 828 y(ar)n(e)25
b(identical)h(to)e(those)f(for)i(r)n(emote)f(objects.)33
b(omniORB)25 b(2.8)g(does)e(not.)34 b(omniORBpy)24 b(also)221
941 y(tries)c(very)h(har)n(d)g(to)f(keep)g(local)i(and)f(r)n(emote)f
(semantics)h(identical,)h(but)f(on)f(the)h(foundation)221
1054 y(of)i(omniORB)g(2.8)g(it)g(is)f(not)g(always)h(possible.)362
1167 y(In)i(most)g(cases,)g(you)g(will)i(not)d(notice)h(a)h(dif)n(fer)n
(ence)g(between)e(local)j(and)e(r)n(emote)g(oper)n(-)221
1280 y(ations.)36 b(The)25 b(cases)g(wher)n(e)g(local/r)n(emote)g
(transpar)n(ency)g(is)h(br)n(oken)e(under)h(omniORB)g(2.8)221
1393 y(ar)n(e:)358 1605 y Fn(\017)45 b Fq(An)22 b(object)g(is)g(not)f
(deactivated)g(until)h(all)i(local)f(r)n(efer)n(ences)e(to)g(it)h(have)
g(been)f(r)n(eleased.)358 1793 y Fn(\017)45 b Fq(When)34
b(invoking)f(on)h(an)g(object)g(r)n(efer)n(ence)f(to)g(a)h(local)h
(object)f(of)g(the)f(wr)n(ong)g(type,)448 1906 y(as)i(described)e(in)h
(section)g(3.1,)j Fe(CORBA.INV_OBJRE)o(F)28 b Fq(is)35
b(not)e(raised.)62 b(Instead,)35 b(if)448 2019 y(the)28
b(operation)g(name)g(does)f(not)h(exist)g(on)g(the)g(object,)h
Fe(CORBA.NO_IMPLEME)o(NT)22 b Fq(is)448 2132 y(raised;)35
b(if)d(the)f(operation)f(name)h Fp(does)i Fq(exist)e(but)g(the)f(ar)n
(gument)h(types)e(ar)n(e)j(wr)n(ong,)448 2245 y Fe(CORBA.BAD_PARAM)16
b Fq(is)23 b(raised;)f(if)i(the)d(operation)h(exists)f(and)i(the)f(ar)n
(gument)g(types)448 2358 y(ar)n(e)h(corr)n(ect,)g(the)e(operation)h(is)
h(executed.)358 2545 y Fn(\017)45 b Fq(Exception)23 b(handlers)g
(\(described)f(later)i(in)g(section)f(6.9\))h(ar)n(e)g(not)f(executed)f
(when)h(lo-)448 2658 y(cal)i(objects)e(raise)h(system)e(exceptions.)28
b(Exceptions)22 b(ar)n(e)i(always)g(pr)n(opagated)e(to)h(the)448
2771 y(caller)-7 b(.)362 2984 y(In)21 b(all)h(of)f(these)f(cases,)g
(omniORB)h(3)h(pr)n(operly)e(pr)n(eserves)f(local/r)n(emote)i(transpar)
n(ency)-10 b(.)p eop
%%Page: 23 29
23 28 bop 63 1166 a Fk(Chapter)44 b(4)63 1587 y Fm(Interoperable)53
b(Naming)f(Service)63 2051 y Fq(omniORB)27 b(3)h(supports)d(the)i
(Inter)n(operable)f(Naming)i(Service)f(\(INS\),)g(which)h(will)g(be)g
(part)63 2164 y(of)f(CORBA)h(2.4.)44 b(The)27 b(following)h(is)g(a)g
(summary)g(of)g(the)f(new)g(facilities)j(described)c(in)i(the)63
2276 y(INS)d(edited)f(chapters)h(document)g([OMG99b)r(].)38
b(These)24 b(facilities)k(ar)n(e)e(not)f(available)k(when)63
2389 y(using)22 b(omniORBpy)g(with)g(omniORB)h(2.8.)63
2719 y Fo(4.1)119 b(Object)29 b(URIs)63 2940 y Fq(As)22
b(well)i(as)f(accepting)g(IOR-format)h(strings,)e Fe(ORB::string_to)o
(_ob)o(je)o(ct)o(\(\))17 b Fq(now)22 b(also)63 3053 y(supports)29
b(two)h(new)h(Uniform)h(Resour)n(ce)e(Identi\002er)g(\(URI\))h
([BLFIM98])h(formats,)h(which)63 3166 y(can)25 b(be)g(used)f(to)g
(specify)h(objects)f(in)i(a)f(convenient)g(human-r)n(eadable)h(form.)35
b(The)24 b(existing)63 3279 y(IOR-format)f(strings)e(ar)n(e)i(now)f
(also)h(consider)n(ed)e(URIs.)63 3565 y Fj(4.1.1)99 b(corbaloc)63
3752 y Fe(corbaloc)21 b Fq(URIs)j(allow)i(you)e(to)g(specify)h(object)f
(r)n(efer)n(ences)g(which)i(can)g(be)e(contacted)h(by)63
3865 y(IIOP)-12 b(,)33 b(or)h(found)f(thr)n(ough)g Fe(ORB::resolve_in)o
(it)o(ia)o(l_)o(ref)o(er)o(en)o(ce)o(s\()o(\))p Fq(.)56
b(T)-8 b(o)33 b(specify)63 3978 y(an)23 b(IIOP)f(object)h(r)n(efer)n
(ence,)e(you)h(use)g(a)h(URI)f(of)g(the)g(form:)290 4216
y Fe(corbaloc:iiop:)p Fq(<)p Fp(host)p Fq(>)p Fe(:)p
Fq(<)p Fp(port)p Fq(>)p Fe(/)p Fq(<)p Fp(object)e(key)p
Fq(>)63 4454 y(for)i(example:)290 4692 y Fe(corbaloc:iiop:m)o(yh)o(os)o
(t.)o(ex)o(amp)o(le)o(.c)o(om)o(:1)o(234)o(/M)o(yO)o(bj)o(ec)o(tKe)o(y)
63 4930 y Fq(which)36 b(speci\002es)f(an)h(object)g(with)g(key)e
(`MyObjectKey')i(within)g(a)h(pr)n(ocess)d(r)o(unning)i(on)63
5043 y(myhost.example.com)d(listening)h(on)h(port)e(1234.)67
b(Object)35 b(keys)e(containing)j(non-ASCII)63 5156 y(characters)22
b(can)i(use)e(the)f(standar)n(d)h(URI)g(\045)h(escapes:)290
5394 y Fe(corbaloc:iiop:m)o(yh)o(os)o(t.)o(ex)o(amp)o(le)o(.c)o(om)o
(:1)o(234)o(/M)o(y\045)o(ef)o(Ob)o(jec)o(tK)o(ey)1662
5622 y Fq(23)p eop
%%Page: 24 30
24 29 bop 221 282 a Fq(24)1033 b Ff(CHAPTER)21 b(4.)51
b(INTEROPERABLE)19 b(NAMING)j(SER)-5 b(VICE)221 539 y
Fq(denotes)20 b(an)j(object)g(key)e(with)i(the)e(value)j(239)g(\(hex)e
(ef\))h(in)g(the)f(thir)n(d)h(octet.)362 652 y(The)g(pr)n(otocol)g
(name)h(`)p Fe(iiop)p Fq(')e(can)j(be)e(abbr)n(eviated)i(to)d(the)h
(empty)f(string,)h(so)g(the)g(origi-)221 764 y(nal)h(URI)e(can)h(be)g
(written:)448 974 y Fe(corbaloc::myhost)o(.e)o(xa)o(mp)o(le.)o(co)o(m:)
o(12)o(34)o(/My)o(Ob)o(je)o(ct)o(Ke)o(y)221 1184 y Fq(The)f(IANA)e(has)
j(assigned)d(port)h(number)h(2089)i(for)f(use)e(by)h
Fe(corbaloc)p Fq(,)c(so)k(if)h(the)e(server)g(is)221
1297 y(listening)h(on)g(that)g(port,)f(you)g(can)i(leave)g(the)e(port)g
(number)h(out.)27 b(The)21 b(following)i(two)e(URIs)221
1410 y(r)n(efer)h(to)g(the)g(same)h(object:)448 1620
y Fe(corbaloc::myhost)o(.e)o(xa)o(mp)o(le.)o(co)o(m:)o(20)o(89)o(/My)o
(Ob)o(je)o(ct)o(Ke)o(y)448 1733 y(corbaloc::myhost)o(.e)o(xa)o(mp)o
(le.)o(co)o(m/)o(My)o(Ob)o(jec)o(tK)o(ey)221 1943 y Fq(Y)-8
b(ou)17 b(can)h(specify)f(an)h(object)f(which)h(is)g(available)j(at)c
(mor)n(e)h(than)f(one)g(location)h(by)g(separating)221
2056 y(the)k(locations)h(with)f(commas:)448 2266 y Fe(corbaloc::myhost)
o(.e)o(xa)o(mp)o(le.)o(co)o(m,)s(:l)o(oca)o(lh)o(os)o(t:)o(12)o(34/)o
(My)o(Ob)o(je)o(ct)o(Key)221 2476 y Fq(Note)37 b(that)h(you)f(must)g(r)
n(estate)g(the)h(pr)n(otocol)f(for)h(each)h(addr)n(ess,)h(hence)e(the)f
(`)p Fe(:)p Fq(')h(befor)n(e)221 2589 y(`)p Fe(localhost)p
Fq('.)25 b(It)d(could)g(equally)h(have)g(been)f(written)g(`)p
Fe(iiop:localhost)o Fq('.)362 2702 y(Y)-8 b(ou)17 b(can)h(also)g
(specify)f(an)g(IIOP)h(version)f(number)-7 b(,)18 b(although)f(omniORB)
g(only)h(supports)221 2815 y(IIOP)23 b(1.0)g(at)g(pr)n(esent:)448
3025 y Fe(corbaloc::1.2@my)o(ho)o(st)o(.e)o(xam)o(pl)o(e.)o(co)o(m/)o
(MyO)o(bj)o(ec)o(tK)o(ey)221 3348 y Fq(Alternatively)-10
b(,)31 b(to)e(use)g Fe(resolve_initia)o(l_r)o(ef)o(er)o(en)o(ce)o
(s\(\))o Fq(,)c(you)k(use)g(a)h(URI)f(of)h(the)221 3461
y(form:)448 3671 y Fe(corbaloc:rir:/Na)o(me)o(Se)o(rv)o(ice)221
3925 y Fj(4.1.2)99 b(corbaname)221 4102 y Fe(corbaname)24
b Fq(URIs)j(cause)h Fe(string_to_objec)o(t\()o(\))22
b Fq(to)28 b(look-up)f(a)h(name)h(in)f(a)h(CORBA)221
4215 y(Naming)23 b(service.)28 b(They)21 b(ar)n(e)i(an)g(extension)e
(of)i(the)e Fe(corbaloc)f Fq(syntax:)448 4425 y Fe(corbaname:)p
Fq(<)p Fp(corbaloc)h(location)p Fq(>)p Fe(/)p Fq(<)p
Fp(object)k(key)p Fq(>)p Fe(#)p Fq(<)p Fp(stringi\002ed)h(name)p
Fq(>)221 4635 y(for)d(example:)448 4845 y Fe(corbaname::myhos)o(t/)o
(Na)o(me)o(Ser)o(vi)o(ce)o(#p)o(ro)o(jec)o(t/)o(ex)o(am)o(pl)o(e/e)o
(ch)o(o.)o(ob)o(j)448 4958 y(corbaname:rir:/N)o(am)o(eS)o(er)o(vic)o
(e#)o(pr)o(oj)o(ec)o(t/e)o(xa)o(mp)o(le)o(/e)o(cho)o(.o)o(bj)221
5168 y Fq(Note)e(that)h(the)f(object)h(found)g(with)g(the)f
Fe(corbaloc)p Fq(-style)d(portion)j(must)h(be)g(of)g(type)f
Fe(Cos-)221 5281 y(Naming::NamingC)o(on)o(tex)o(t)p Fq(,)27
b(or)32 b(something)e(derived)g(fr)n(om)j(it.)55 b(If)31
b(the)g(object)h(key)e(\(or)221 5394 y Fe(rir)22 b Fq(name\))h(is)f(`)p
Fe(NameService)p Fq(',)c(it)23 b(can)h(be)e(left)h(out:)p
eop
%%Page: 25 31
25 30 bop 63 282 a Ff(4.2.)51 b(CONFIGURING)22 b(RESOL)-8
b(VE_INITIAL_REFERE)o(NCES)887 b Fq(25)290 539 y Fe(corbaname::myho)o
(st)o(#p)o(ro)o(je)o(ct/)o(ex)o(am)o(pl)o(e/)o(ech)o(o.)o(ob)o(j)290
652 y(corbaname:rir:#)o(pr)o(oj)o(ec)o(t/)o(exa)o(mp)o(le)o(/e)o(ch)o
(o.o)o(bj)63 835 y Fq(The)19 b(stringi\002ed)f(name)i(portion)f(can)h
(also)g(be)g(left)g(out,)f(in)h(which)g(case)g(the)f(URI)g(denotes)e
(the)63 948 y Fe(CosNaming::Nam)o(in)o(gC)o(ont)o(ex)o(t)f
Fq(which)24 b(would)e(have)h(been)f(used)f(for)h(a)i(look-up:)290
1131 y Fe(corbaname::myho)o(st)o(.e)o(xa)o(mp)o(le.)o(co)o(m)290
1244 y(corbaname:rir:)63 1427 y Fq(The)19 b(\002rst)h(of)g(these)f
(examples)h(is)g(the)g(easiest)f(way)h(of)g(specifying)g(the)g
(location)h(of)f(a)h(naming)63 1540 y(service.)63 1833
y Fo(4.2)119 b(Con\002guring)31 b(resolve_initial_references)63
2044 y Fq(The)20 b(INS)h(adds)f(two)h(new)g(command)h(line)g(ar)n
(guments)e(which)i(pr)n(ovide)f(a)h(portable)f(way)h(of)63
2157 y(con\002guring)f Fe(ORB::resolve_ini)o(ti)o(al)o(_r)o(efe)o(re)o
(nc)o(es)o(\(\))o Fq(:)63 2407 y Fj(4.2.1)99 b(ORBInitRef)63
2584 y Fe(-ORBInitRef)28 b Fq(takes)33 b(an)h(ar)n(gument)g(of)f(the)g
(form)h(<)p Fp(ObjectId)p Fq(>)p Fe(=)p Fq(<)p Fp(ObjectURI)r
Fq(>.)63 b(So,)36 b(for)63 2697 y(example,)22 b(with)g(command)i(line)f
(ar)n(guments)e(of:)290 2880 y Fe(-ORBInitRef)49 b(NameService=corb)o
(an)o(am)o(e:)o(:my)o(ho)o(st)o(.e)o(xa)o(mpl)o(e.)o(co)o(m)63
3063 y(resolve_initia)o(l_)o(re)o(fer)o(en)o(ce)o(s\()o("N)o(ame)o(Se)o
(rv)o(ic)o(e")o(\))25 b Fq(will)32 b(r)n(eturn)e(a)i(r)n(efer)n(ence)e
(to)63 3176 y(the)h(object)i(with)f(key)f(`NameService')i(available)j
(on)c(myhost.example.com,)h(port)e(2089.)63 3289 y(Since)22
b(IOR-format)h(strings)f(ar)n(e)h(consider)n(ed)e(URIs,)g(you)h(can)h
(also)g(say)f(things)g(like:)290 3472 y Fe(-ORBInitRef)49
b(NameService=IOR:)o(00)o(ff)o(..)o(.)63 3722 y Fj(4.2.2)99
b(ORBDefaultInitRef)63 3898 y Fe(-ORBDefaultIni)o(tR)o(ef)26
b Fq(pr)n(ovides)32 b(a)h(pr)n(e\002x)f(string)f(which)j(is)e(used)f
(to)h(r)n(esolve)g(other)n(-)63 4011 y(wise)f(unknown)f(names.)55
b(When)31 b Fe(resolve_initial)o(_r)o(ef)o(ere)o(nc)o(es)o(\(\))25
b Fq(is)32 b(unable)g(to)63 4124 y(r)n(esolve)i(a)h(name)g(which)g(has)
f(been)g(speci\002cally)i(con\002gur)n(ed)d(\(with)i
Fe(-ORBInitRef)p Fq(\),)d(it)63 4237 y(constr)o(ucts)d(a)j(string)e
(consisting)g(of)g(the)h(default)f(pr)n(e\002x,)i(a)g(`)p
Fe(/)p Fq(')f(character)-7 b(,)33 b(and)e(the)f(name)63
4350 y(r)n(equested.)24 b(The)c(string)g(is)h(then)f(fed)g(to)h
Fe(string_to_obje)o(ct)o(\(\))o Fq(.)h(So,)e(for)h(example,)g(with)63
4463 y(a)i(command)g(line)g(of:)290 4646 y Fe(-ORBDefaultInit)o(Re)o(f)
48 b(corbaloc::myhos)o(t.e)o(xa)o(mp)o(le)o(.c)o(om)63
4829 y Fq(a)19 b(call)h(to)e Fe(resolve_initial)o(_re)o(fe)o(re)o(nc)o
(es)o(\("M)o(yS)o(er)o(vi)o(ce)o("\))12 b Fq(will)20
b(r)n(eturn)e(the)g(object)63 4942 y(r)n(efer)n(ence)k(denoted)e(by)i
(`)p Fe(corbaloc::myhost)o(.e)o(xa)o(mpl)o(e.)o(co)o(m/)o(My)o(Ser)o
(vi)o(ce)o Fq('.)204 5055 y(Similarly)-10 b(,)37 b(a)d
Fe(corbaname)29 b Fq(pr)n(e\002x)k(can)h(be)f(used)f(to)h(cause)g
(look-ups)f(in)h(the)g(naming)63 5168 y(service.)40 b(Note,)26
b(however)-7 b(,)27 b(that)g(since)g(a)g(`)p Fe(/)p Fq(')g(character)h
(is)f(always)g(added)f(to)g(the)g(pr)n(e\002x,)h(it)63
5281 y(is)h(impossible)f(to)g(specify)h(a)g(look-up)f(in)h(the)f(r)n
(oot)g(context)g(of)g(the)g(naming)i(service\227you)63
5394 y(have)23 b(to)f(use)f(a)i(sub-context,)e(like:)p
eop
%%Page: 26 32
26 31 bop 221 282 a Fq(26)1033 b Ff(CHAPTER)21 b(4.)51
b(INTEROPERABLE)19 b(NAMING)j(SER)-5 b(VICE)448 539 y
Fe(-ORBDefaultInitR)o(ef)48 b(corbaname::myh)o(ost)o(.e)o(xa)o(mp)o(le)
o(.co)o(m#)o(se)o(rv)o(ic)o(es)221 799 y Fj(4.2.3)99
b(omniORB)25 b(con\002guration)h(\002le)221 978 y Fq(As)h(an)h
(extension)e(to)h(the)f(standar)n(d)h(facilities)i(of)f(the)f(INS,)f
(omniORB)h(supports)e(con\002gu-)221 1091 y(ration)h(\002le)g(entries)e
(named)i Fe(ORBInitRef)21 b Fq(and)26 b Fe(ORBDefaultInitR)o(ef)o
Fq(.)32 b(The)25 b(syntax)g(is)221 1204 y(identical)f(to)e(the)g
(command)h(line)g(ar)n(guments.)k Fe(omniORB.cfg)17 b
Fq(might)23 b(contain:)448 1422 y Fe(ORBInitRef)50 b(NameService=corb)o
(an)o(am)o(e:)o(:my)o(ho)o(st)o(.e)o(xa)o(mpl)o(e.)o(co)o(m)448
1535 y(ORBDefaultInitRe)o(f)e(corbaname:rir:#)o(ser)o(vi)o(ce)o(s)221
1796 y Fj(4.2.4)99 b(Resolution)26 b(order)221 1974 y
Fq(W)-5 b(ith)21 b(all)i(these)d(options)f(for)i(specifying)g(object)g
(r)n(efer)n(ences)f(to)h(be)g(r)n(eturned)e(by)j Fe(resolve_)221
2087 y(initial_referen)o(ce)o(s\(\))o Fq(,)k(it)31 b(is)f(important)g
(to)g(understand)e(the)i(or)n(der)f(in)i(which)g(the)221
2200 y(options)20 b(ar)n(e)i(tried.)27 b(The)21 b(r)n(esolution)f(or)n
(der)-7 b(,)21 b(as)h(r)n(equir)n(ed)f(by)g(the)g(CORBA)h
(speci\002cation,)f(is:)335 2418 y(1.)45 b(Check)23 b(for)g(special)g
(names)f(such)h(as)f(`)p Fe(RootPOA)p Fq(')2194 2385
y Fi(1)2229 2418 y Fq(.)335 2609 y(2.)45 b(Resolve)22
b(with)h(an)g Fe(-ORBInitRef)17 b Fq(ar)n(gument.)335
2801 y(3.)45 b(Resolve)22 b(with)h(the)e Fe(-ORBDefaultInitR)o(ef)16
b Fq(pr)n(e\002x,)22 b(if)h(pr)n(esent.)335 2993 y(4.)45
b(Resolve)22 b(with)h(an)h Fe(ORBInitRef)18 b Fq(\(or)23
b(old-style)f Fe(NAMESERVICE)p Fq(\))c(entry)k(in)i(the)e(con-)448
3105 y(\002guration)h(\002le.)335 3297 y(5.)45 b(Resolve)37
b(with)h(the)e Fe(ORBDefaultInitRe)o(f)c Fq(entry)k(in)i(the)f
(con\002guration)g(\002le,)k(if)448 3410 y(pr)n(esent.)335
3602 y(6.)k(Resolve)22 b(with)h(the)e(depr)n(ecated)g
Fe(ORBInitialHost)16 b Fq(boot)22 b(agent.)221 3819 y(This)17
b(or)n(der)f(mostly)h(has)g(the)g(expected)e(consequences\227in)g
(particular)k(that)e(command)h(line)221 3932 y(ar)n(guments)h(override)
h(entries)f(in)h(the)g(con\002guration)f(\002le.)27 b(However)-7
b(,)20 b(you)f(must)h(be)g(car)n(eful)221 4045 y(with)h(the)f(default)g
(pr)n(e\002xes.)26 b(Suppose)19 b(you)h(have)h(con\002gur)n(ed)e(a)j(`)
p Fe(NameService)p Fq(')16 b(entry)k(in)221 4158 y(the)i
(con\002guration)g(\002le,)g(and)h(you)f(specify)g(a)h(default)f(pr)n
(e\002x)h(on)f(the)g(command)h(line)g(with:)448 4375
y Fe(-ORBDefaultInitR)o(ef)48 b(corbaname:rir:)o(#se)o(rv)o(ic)o(es)221
4593 y Fq(expecting)33 b(unknown)h(services)g(to)f(be)i(looked)e(up)h
(in)h(the)f(con\002gur)n(ed)f(naming)i(service.)221 4706
y(Now)-8 b(,)17 b(step)f(3)h(above)h(means)f(that)g Fe(resolve_initia)o
(l_)o(ref)o(er)o(en)o(ce)o(s\()o("My)o(Se)o(rv)o(ic)o(e")o(\))221
4819 y Fq(should)22 b(be)g(pr)n(ocessed)f(with)h(the)g(steps:)335
5036 y(1.)45 b(Constr)o(uct)24 b(the)f(URI)h(`)p Fe(corbaname:rir:#)o
(se)o(rv)o(ic)o(es)o(/My)o(Se)o(rv)o(ic)o(e)p Fq(')18
b(and)25 b(give)f(it)448 5149 y(to)e Fe(string_to_object)o(\(\))o
Fq(.)p 221 5215 1316 4 v 327 5271 a Fh(1)356 5302 y Fg(In)e(fact,)g(a)g
(strict)g(r)o(eading)e(of)h(the)h(speci\002cation)g(says)f(that)j(it)d
(should)g(be)h(possible)e(to)i(override)e(`)p Fb(RootPOA)p
Fg(')221 5394 y(etc.)h(with)g Fb(-ORBInitRef)p Fg(,)e(but)i(since)g
(POAs)f(ar)o(e)g(locality)g(constrained)h(that)h(is)e(ridiculous.)p
eop
%%Page: 27 33
27 32 bop 63 282 a Ff(4.3.)51 b(OMNINAMES)2410 b Fq(27)176
539 y(2.)46 b(Resolve)21 b(the)h(\002rst)g(part)g(of)h(the)f
Fe(corbaname)d Fq(URI)i(by)i(calling)290 652 y Fe(resolve_initial)o(_r)
o(ef)o(er)o(en)o(ces)o(\(")o(Na)o(me)o(Se)o(rvi)o(ce)o("\))o
Fq(.)176 857 y(3.)46 b(Constr)o(uct)18 b(the)f(URI)h(`)p
Fe(corbaname:rir:#)o(se)o(rvi)o(ce)o(s/)o(Na)o(me)o(Ser)o(vi)o(ce)o
Fq(')13 b(and)19 b(give)290 970 y(it)k(to)f Fe(string_to_obje)o(ct)o
(\(\))p Fq(.)176 1175 y(4.)46 b(Resolve)21 b(the)h(\002rst)g(part)g(of)
h(the)f Fe(corbaname)d Fq(URI)i(by)i(calling)290 1288
y Fe(resolve_initial)o(_r)o(ef)o(er)o(en)o(ces)o(\(")o(Na)o(me)o(Se)o
(rvi)o(ce)o("\))o Fq(.)176 1493 y(5.)46 b(.)14 b(.)g(.)35
b(and)22 b(so)g(on)h(for)f(ever.)14 b(.)g(.)63 1728 y(omniORB)25
b(detects)e(loops)i(like)g(this)g(and)g(thr)n(ows)f(either)h
Fe(CORBA.ORB.Inva)o(lid)o(Na)o(me)19 b Fq(if)63 1841
y(the)31 b(loop)h(started)e(with)i(a)h(call)h(to)e Fe(resolve_initia)o
(l_)o(re)o(fer)o(en)o(ce)o(s\()o(\))p Fq(,)c(or)k Fe(CORBA.)63
1954 y(BAD_PARAM)19 b Fq(if)k(it)h(started)d(with)i(a)g(call)i(to)e
Fe(string_to_obje)o(ct)o(\(\))p Fq(.)g(T)-8 b(o)22 b(avoid)h(the)f(pr)n
(ob-)63 2067 y(lem)h(you)g(must)f(either)h(specify)f(the)h
Fe(NameService)18 b Fq(r)n(efer)n(ence)23 b(on)g(the)f(command)i(line,)
g(or)63 2179 y(put)d(the)h Fe(DefaultInitRef)17 b Fq(in)23
b(the)f(con\002guration)g(\002le.)63 2505 y Fo(4.3)119
b(omniNames)63 2728 y Fj(4.3.1)99 b(NamingContextExt)63
2914 y Fq(omniNames)22 b(now)g(supports)e(the)i Fe(CosNaming::Nami)o
(ng)o(Co)o(nt)o(ext)o(Ex)o(t)16 b Fq(interface:)204 3072
y Fc(module)48 b(CosNaming)h({)303 3172 y(interface)g(NamingContextExt)
d(:)k(NamingContext)d({)403 3272 y(typedef)i(string)f(StringName)n(;)
403 3371 y(typedef)h(string)f(Address)o(;)403 3471 y(typedef)h(string)f
(URLString)o(;)403 3670 y(StringName)98 b(to_string)n(\(in)49
b(Name)g(n\))399 b(raises)n(\(InvalidName)n(\);)403 3770
y(Name)f(to_name)98 b(\(in)49 b(StringName)f(sn\))i(raises)n
(\(InvalidName)n(\);)403 3969 y(exception)e(InvalidAddress)f({};)403
4168 y(URLString)148 b(to_url)o(\(in)49 b(Address)f(addr,)h(in)h
(StringName)e(sn)o(\))503 4268 y(raises)o(\()o(InvalidAddress)n(,)h
(InvalidName)n(\);)403 4467 y(Object)298 b(resolve_str)n(\(in)49
b(StringName)f(n\))503 4567 y(raises)o(\()o(NotFound)o(,)i
(CannotProceed)m(,)g(InvalidName)n(,)f(AlreadyBound)n(\);)303
4666 y(};)204 4766 y(};)204 4942 y Fe(to_string\(\))25
b Fq(and)30 b Fe(to_name\(\))c Fq(convert)j(fr)n(om)i
Fe(CosNaming::Nam)o(e)24 b Fq(sequences)63 5055 y(to)g(\003attened)g
(strings)g(and)i(vice-versa.)36 b(Note)24 b(that)h(calling)i(these)d
(operations)g(involves)h(r)n(e-)63 5168 y(mote)f(calls)i(to)e(the)f
(naming)j(service,)e(so)g(they)g(ar)n(e)h(not)f(particularly)i(ef)n
(\002cient.)34 b(The)24 b Fe(omni-)63 5281 y(ORB.URI)e
Fq(module)j(contains)h(equivalent)g Fe(nameToString\(\))19
b Fq(and)26 b Fe(stringToName\(\))63 5394 y Fq(functions,)c(which)h(do)
f(not)g(involve)h(r)n(emote)f(calls.)p eop
%%Page: 28 34
28 33 bop 221 282 a Fq(28)1033 b Ff(CHAPTER)21 b(4.)51
b(INTEROPERABLE)19 b(NAMING)j(SER)-5 b(VICE)362 539 y
Fq(A)28 b Fe(CosNaming::Name)21 b Fq(is)28 b(stringi\002ed)e(by)i
(separating)f(name)h(components)e(with)i(`)p Fe(/)p Fq(')221
652 y(characters.)39 b(The)25 b Fe(kind)f Fq(and)i Fe(id)g
Fq(\002elds)f(of)h(each)g(component)f(ar)n(e)i(separated)d(by)i(`)p
Fe(.)p Fq(')39 b(char)n(-)221 764 y(acters.)45 b(If)29
b(the)f Fe(kind)f Fq(\002eld)h(is)h(empty)-10 b(,)28
b(the)g(r)n(epr)n(esentation)f(has)h(no)h(trailing)g(`)p
Fe(.)p Fq(';)j(if)d(the)f Fe(id)221 877 y Fq(is)j(empty)-10
b(,)31 b(the)f(r)n(epr)n(esentation)f(starts)g(with)i(a)g(`)p
Fe(.)p Fq(')52 b(character;)35 b(if)d(both)e Fe(id)g
Fq(and)h Fe(kind)e Fq(ar)n(e)221 990 y(empty)-10 b(,)19
b(the)f(r)n(epr)n(esentation)g(is)i(just)f(a)h(`)p Fe(.)p
Fq('.)27 b(The)18 b(backslash)j(`)p Fe(\\)p Fq(')e(is)h(used)e(to)h
(escape)g(the)f(mean-)221 1103 y(ing)23 b(of)f(`)p Fe(/)p
Fq(',)h(`)p Fe(.)p Fq(')28 b(and)23 b(`)p Fe(\\)p Fq(')g(itself.)362
1216 y Fe(to_url\(\))31 b Fq(takes)i(a)i Fe(corbaloc)c
Fq(style)i(addr)n(ess)g(and)h(key)g(string)f(\(but)h(without)g(the)221
1329 y Fe(corbaloc:)24 b Fq(part\),)30 b(and)e(a)h(stringi\002ed)e
(name,)i(and)f(r)n(eturns)f(a)i Fe(corbaname)24 b Fq(URI)k(\(incor)n(-)
221 1442 y(r)n(ectly)h(called)h(a)f(URL\))g(string,)g(having)h(pr)n
(operly)d(escaped)h(any)h(invalid)i(characters.)47 b(The)221
1555 y(speci\002cation)26 b(does)e(not)h(make)h(it)g(clear)h(whether)d
(or)i(not)f(the)g(addr)n(ess)f(string)h(should)g(also)221
1668 y(be)c(escaped)e(by)i(the)f(operation;)g(omniORB)h(does)e(not)h
(escape)g(it.)27 b(For)20 b(this)h(r)n(eason,)f(it)h(is)g(best)221
1781 y(to)26 b(avoid)i(calling)g Fe(to_url\(\))23 b Fq(if)28
b(the)e(addr)n(ess)f(part)i(contains)f(escapable)h(characters.)41
b(The)221 1894 y(local)24 b(function)f Fe(omniORB.URI.add)o(rA)o(nd)o
(Na)o(meT)o(oU)o(RI)o(\(\))16 b Fq(is)23 b(equivalent.)362
2006 y Fe(resolve_str\(\))12 b Fq(is)18 b(equivalent)f(to)g(calling)i
Fe(to_name\(\))14 b Fq(followed)j(by)g(the)g(inherited)221
2119 y Fe(resolve\(\))22 b Fq(operation.)38 b(Ther)n(e)26
b(ar)n(e)g(no)g(string-based)f(equivalents)h(of)h(the)e(various)i(bind)
221 2232 y(operations.)221 2486 y Fj(4.3.2)99 b(Use)24
b(with)i(corbaname)221 2663 y Fq(T)-8 b(o)25 b(make)h(it)g(easy)g(to)f
(use)g(omniNames)h(with)g Fe(corbaname)c Fq(URIs,)j(it)i(now)e(starts)g
(with)h(the)221 2776 y(default)36 b(port)f(of)h(2089,)41
b(and)36 b(an)h(object)e(key)g(of)h(`)p Fe(NameService)p
Fq(')c(for)k(the)f(r)n(oot)g(naming)221 2889 y(context.)40
b(This)27 b(is)g(only)g(possible)f(when)h(it)g(is)g(started)f(`fr)n
(esh',)i(rather)e(than)h(with)g(a)h(log)f(\002le)221
3002 y(fr)n(om)c(an)g(older)f(omniNames)h(version.)362
3115 y(If)k(you)f(have)i(a)f(pr)n(evious)g(omniNames)g(log,)g
(con\002gur)n(ed)f(to)g(r)o(un)h(on)g(a)g(dif)n(fer)n(ent)g(port,)221
3228 y(and)18 b(with)h(a)g(dif)n(fer)n(ent)f(object)g(key)f(for)h(its)g
(r)n(oot)g(context,)g(all)h(is)g(not)e(lost.)26 b(If)18
b(the)g(r)n(oot)f(context's)221 3341 y(object)h(key)f(is)i(not)f(`)p
Fe(NameService)p Fq(',)c(omniNames)k(cr)n(eates)g(a)h(forwar)n(ding)f
(agent)g(with)g(that)221 3453 y(key)-10 b(.)45 b(Ef)n(fectively)-10
b(,)30 b(this)e(means)h(that)f(ther)n(e)g(ar)n(e)h(two)f(object)g(keys)
f(which)j(r)n(efer)e(to)g(the)g(r)n(oot)221 3566 y(context\227`)p
Fe(NameService)p Fq(')17 b(and)23 b(whatever)e(the)h(original)i(key)d
(was.)362 3679 y(For)f(the)g(port)g(number)-7 b(,)21
b(ther)n(e)f(ar)n(e)h(two)f(options.)26 b(The)20 b(\002rst)g(is)h(to)f
(r)o(un)h(omniNames)f(with)221 3792 y(a)j(command)h(line)f(ar)n(gument)
f(like:)448 4000 y Fe(omniNames)51 b(-logdir)g(/the/log/dir)e
(-ORBpoa_iiop_por)o(t)f(2089)221 4207 y Fq(This)28 b(causes)g(it)h(to)f
(listen)g(on)h(both)f(port)f(2089)k Fp(and)e Fq(whatever)f(port)f(it)i
(listened)e(on)i(befor)n(e.)221 4320 y(The)18 b(disadvantage)h(with)f
(this)h(is)g(that)g(the)f(IORs)g(to)g(all)j(naming)e(contexts)e(now)i
(contain)g(two)221 4433 y(IIOP)24 b(pr)n(o\002les,)f(one)g(for)h(each)g
(port,)f(which,)h(amongst)f(other)g(things,)f(incr)n(eases)i(the)f
(size)h(of)221 4546 y(the)e(omniNames)g(log.)362 4659
y(The)g(second)f(option)h(is)h(to)f(use)f(omniMapper)-7
b(,)23 b(as)f(described)g(below)-8 b(.)221 4957 y Fo(4.4)119
b(omniMapper)221 5168 y Fq(omniMapper)30 b(is)g(a)h(simple)f(daemon)g
(which)g(listens)g(on)g(port)f(2089)j(\(or)e(any)g(other)f(port\),)221
5281 y(and)17 b(r)n(edir)n(ects)g(IIOP)g(r)n(equests)e(for)i
(con\002gur)n(ed)f(object)h(keys)e(to)i(associated)f(persistent)f
(IORs.)221 5394 y(It)30 b(can)h(be)f(used)f(to)h(make)g(a)h(naming)g
(service)f(\(even)g(an)h(old)f(non-INS)f(awar)n(e)i(version)f(of)p
eop
%%Page: 29 35
29 34 bop 63 282 a Ff(4.5.)51 b(CREA)-7 b(TING)22 b(OBJECTS)g(WITH)g
(SIMPLE)f(OBJECT)i(KEYS)893 b Fq(29)63 539 y(omniNames)28
b(or)h(other)f(ORB's)g(naming)i(service\))f(appear)g(on)g(port)f(2089)j
(with)e(the)f(object)63 652 y(key)19 b(`)p Fe(NameService)p
Fq('.)j(The)e(same)g(goes)f(for)h(any)g(other)f(service)h(you)f(may)i
(wish)f(to)f(specify)-10 b(,)63 764 y(such)22 b(as)h(an)g(interface)g
(r)n(epository)-10 b(.)25 b(omniMapper)d(is)h(started)e(with)i(a)g
(command)g(line)g(of:)290 977 y Fe(omniMapper)50 b([-port)i
Fq(<)p Fp(port)p Fq(>)p Fe(])j([-config)c Fq(<)p Fp(con\002g)24
b(\002le)p Fq(>)p Fe(])54 b([-v])63 1189 y Fq(The)26
b Fe(-port)g Fq(option)g(allows)i(you)f(to)f(choose)h(a)h(port)e(other)
g(than)i(2089)h(to)e(listen)g(on)3097 1156 y Fi(2)3134
1189 y Fq(.)42 b(The)63 1302 y Fe(-config)19 b Fq(option)j(speci\002es)
f(a)j(location)f(for)g(the)f(con\002guration)g(\002le.)28
b(The)22 b(default)g(name)h(is)63 1415 y Fe(/etc/omniMappe)o(r.)o(cf)o
(g)p Fq(,)k(or)j Fe(C:\\omniMapper.)o(cfg)24 b Fq(on)30
b(W)-5 b(indows.)51 b(omniMapper)63 1528 y(does)22 b(not)h(normally)i
(print)e(anything;)h(the)f Fe(-v)g Fq(option)g(makes)h(it)g(verbose)f
(so)g(it)h(prints)f(con-)63 1641 y(\002guration)k(information)h(and)f
(a)h(r)n(ecor)n(d)g(of)f(the)g(r)n(edir)n(ections)g(it)g(makes,)h(to)f
(standar)n(d)g(out-)63 1754 y(put.)204 1867 y(The)e(con\002guration)h
(\002le)g(is)g(very)g(simple.)38 b(Each)27 b(line)f(contains)g(a)h
(string)e(to)h(be)g(used)e(as)63 1980 y(an)e(object)h(key)-10
b(,)20 b(some)i(white)g(space,)f(and)i(an)f(IOR)h(\(or)f(any)g(valid)i
(URI\))e(that)g(it)g(will)i(r)n(edir)n(ect)63 2093 y(that)c(object)h
(key)e(to.)27 b(Comments)20 b(should)g(be)g(pr)n(e\002xed)g(with)h(a)g
(`)p Fe(#)p Fq(')g(character)-7 b(.)28 b(For)20 b(example:)290
2305 y Fe(#)54 b(Example)d(omniMapper.cfg)290 2418 y(NameService)486
b(IOR:000f...)290 2531 y(InterfaceReposi)o(to)o(ry)48
b(IOR:0100...)204 2744 y Fq(omniMapper)25 b(can)i(either)d(be)i(r)o(un)
g(on)f(a)h(single)g(machine,)h(in)f(much)g(the)f(same)h(way)f(as)63
2857 y(omniNames,)f(or)g(it)g(can)h(be)g(r)o(un)f(on)g
Fp(every)i Fq(machine,)g(with)e(a)h(common)f(con\002guration)g(\002le.)
63 2969 y(That)e(way)-10 b(,)22 b(each)h(machine's)h(omniORB)e
(con\002guration)g(\002le)h(could)g(contain)g(the)f(line:)290
3182 y Fe(ORBDefaultInitR)o(ef)48 b(corbaloc::loca)o(lh)o(ost)63
3481 y Fo(4.5)119 b(Creating)29 b(objects)h(with)f(simple)h(object)g
(keys)63 3692 y Fq(In)k(normal)g(use,)i(omniORB)f(cr)n(eates)e(object)h
(keys)f(containing)h(various)h(information)g(in-)63 3805
y(cluding)24 b(POA)h(names)f(and)g(various)g(non-ASCII)g(characters.)33
b(Since)24 b(object)g(keys)f(ar)n(e)h(sup-)63 3917 y(posed)c(to)h(be)h
(opaque,)f(this)g(is)h(not)f(usually)h(a)h(pr)n(oblem.)28
b(The)21 b(INS)g(br)n(eaks)g(this)h(opacity)g(and)63
4030 y(r)n(equir)n(es)g(servers)f(to)h(cr)n(eate)g(objects)g(with)h
(human-friendly)g(keys.)204 4143 y(If)33 b(you)e(wish)i(to)f(make)h
(your)e(objects)h(available)k(with)d(human-friendly)g(URIs,)h(ther)n(e)
63 4256 y(ar)n(e)21 b(two)f(options.)25 b(The)20 b(\002rst)g(is)h(to)f
(use)g(omniMapper)g(as)h(described)e(above,)i(in)h(conjunction)63
4369 y(with)28 b(a)h Fe(PERSISTENT)23 b Fq(POA.)29 b(The)e(second)g(is)
h(to)g(cr)n(eate)g(objects)g(with)g(the)g(r)n(equir)n(ed)f(keys)63
4482 y(yourself.)35 b(Y)-8 b(ou)25 b(do)g(this)g(with)h(a)g(special)g
(POA)g(with)g(the)f(name)h(`)p Fe(omniINSPOA)p Fq(',)21
b(acquir)n(ed)63 4595 y(fr)n(om)e Fe(resolve_initia)o(l_)o(re)o(fer)o
(en)o(ce)o(s\()o(\))p Fq(.)h(This)f(POA)f(has)h(the)e
Fe(USER_ID)f Fq(and)i Fe(PER-)63 4708 y(SISTENT)25 b
Fq(policies,)k(and)f(the)f(special)i(pr)n(operty)d(that)i(the)f(object)
h(keys)e(it)j(cr)n(eates)e(contain)63 4821 y(only)e(the)g(object)g(ids)
h(given)f(to)g(the)g(POA,)g(and)h(no)f(other)g(data.)37
b(It)25 b(is)h(a)g(normal)g(POA)g(in)g(all)63 4934 y(other)d(r)n
(espects,)h(so)g(you)g(can)i(activate/deactivate)g(it,)f(cr)n(eate)g
(childr)n(en,)h(and)f(so)f(on,)h(in)g(the)63 5047 y(usual)d(way)-10
b(.)p 63 5306 1316 4 v 168 5362 a Fh(2)197 5394 y Fg(Y)j(ou)19
b(can)g(also)g(play)f(the)h Fb(-ORBpoa_iiop_port)d Fg(trick)i(to)h
(make)f(it)h(listen)f(on)h(mor)o(e)f(than)i(one)f(port.)p
eop
%%Page: 30 36
30 35 bop 221 282 a Fq(30)1033 b Ff(CHAPTER)21 b(4.)51
b(INTEROPERABLE)19 b(NAMING)j(SER)-5 b(VICE)p eop
%%Page: 31 37
31 36 bop 63 1164 a Fk(Chapter)44 b(5)63 1581 y Fm(The)52
b(IDL)g(compiler)63 2042 y Fq(omniORBpy)17 b(uses)g(a)h(new)g(IDL)g
(compiler)-7 b(,)19 b(named)f(omniidl,)i(which)f(is)f(also)g(used)f(by)
h(omni-)63 2155 y(ORB)27 b(3.)45 b(It)27 b(consists)g(of)h(a)g(generic)
g(fr)n(ont-end)f(parser)g(written)g(in)h(C++,)i(and)e(a)h(number)f(of)
63 2268 y(back-ends)22 b(written)f(in)i(Python.)k(omniidl)c(is)g(very)f
(strict)g(about)g(IDL)h(validity)-10 b(,)23 b(so)f(you)f(may)63
2381 y(\002nd)f(that)h(it)g(r)n(eports)e(err)n(ors)h(in)h(IDL)f(which)i
(compiles)f(\002ne)f(with)h(earlier)g(versions)f(of)h(omni-)63
2494 y(ORB,)h(and)g(with)h(other)e(ORBs.)204 2609 y(The)h(general)g
(form)h(of)f(an)h(omniidl)h(command)f(line)g(is:)290
2833 y Fe(omniidl)51 b Fq([)p Fp(options)p Fq(])57 b
Fe(-b)p Fq(<)p Fp(back-end)p Fq(>)e([)p Fp(back-end)19
b(options)p Fq(])57 b(<)p Fp(\002le)18 b(1)p Fq(>)55
b(<)p Fp(\002le)18 b(2)p Fq(>)55 b(.)14 b(.)g(.)63 3145
y Fo(5.1)119 b(Common)31 b(options)63 3361 y Fq(The)22
b(following)g(options)g(ar)n(e)h(common)f(to)g(all)j(back-ends:)63
3587 y Fe(-D)p Fp(name)p Fq([)p Fe(=)p Fp(value)p Fq(])68
b(De\002ne)22 b Fp(name)h Fq(for)f(the)g(pr)n(epr)n(ocessor)-7
b(.)63 3700 y Fe(-U)p Fp(name)379 b Fq(Unde\002ne)21
b Fp(name)i Fq(for)f(the)g(pr)n(epr)n(ocessor)-7 b(.)63
3813 y Fe(-I)p Fp(dir)471 b Fq(Include)22 b Fp(dir)i
Fq(in)f(the)f(pr)n(epr)n(ocessor)e(sear)n(ch)j(path.)63
3926 y Fe(-E)576 b Fq(Only)23 b(r)o(un)g(the)f(pr)n(epr)n(ocessor)-7
b(,)20 b(sending)h(its)h(output)f(to)h(stdout.)63 4039
y Fe(-Y)p Fp(cmd)423 b Fq(Use)22 b Fp(cmd)g Fq(as)h(the)f(pr)n(epr)n
(ocessor)-7 b(,)20 b(rather)i(than)h(the)f(normal)h(C)g(pr)n(epr)n
(ocessor)-7 b(.)63 4152 y Fe(-N)576 b Fq(Do)23 b(not)f(r)o(un)g(the)g
(pr)n(epr)n(ocessor)-7 b(.)63 4265 y Fe(-Wp)p Fp(ar)n(g)p
Fq([,)p Fp(ar)n(g)p Fq(.)14 b(.)g(.)g(])91 b(Send)21
b(ar)n(guments)h(to)g(the)g(pr)n(epr)n(ocessor)-7 b(.)63
4378 y Fe(-b)p Fp(back-end)256 b Fq(Run)22 b(the)g(speci\002ed)f
(back-end.)28 b(For)22 b(omniORBpy)-10 b(,)22 b(use)f
Fe(-bpython)p Fq(.)63 4490 y Fe(-Wb)p Fp(ar)n(g)p Fq([,)p
Fp(ar)n(g)p Fq(.)14 b(.)g(.)g(])91 b(Send)21 b(ar)n(guments)h(to)g(the)
g(back-end.)63 4603 y Fe(-nf)521 b Fq(Do)23 b(not)f(warn)g(about)h(unr)
n(esolved)e(forwar)n(d)i(declarations.)63 4716 y Fe(-k)576
b Fq(Keep)21 b(comments)h(after)h(declarations,)f(to)g(be)h(used)e(by)i
(some)e(back-ends.)63 4829 y Fe(-K)576 b Fq(Keep)21 b(comments)h(befor)
n(e)h(declarations,)f(to)g(be)h(used)e(by)h(some)g(back-ends.)63
4942 y Fe(-C)p Fp(dir)471 b Fq(Change)23 b(dir)n(ectory)e(to)h
Fp(dir)i Fq(befor)n(e)e(writing)h(output)e(\002les.)63
5055 y Fe(-d)576 b Fq(Dump)23 b(the)f(parsed)f(IDL)h(then)g(exit,)g
(without)g(r)o(unning)g(a)h(back-end.)63 5168 y Fe(-p)p
Fp(dir)471 b Fq(Use)22 b Fp(dir)h Fq(as)g(a)g(path)g(to)f(\002nd)g
(omniidl)h(back-ends.)63 5281 y Fe(-V)576 b Fq(Print)23
b(version)f(information)h(then)f(exit.)63 5394 y Fe(-u)576
b Fq(Print)23 b(usage)e(information.)1662 5622 y(31)p
eop
%%Page: 32 38
32 37 bop 221 282 a Fq(32)1751 b Ff(CHAPTER)22 b(5.)51
b(THE)21 b(IDL)i(COMPILER)221 539 y Fe(-v)577 b Fq(V)-10
b(erbose:)25 b(trace)e(compilation)h(stages.)221 850
y(Most)e(of)g(these)f(options)g(ar)n(e)i(self)g(explanatory)-10
b(,)21 b(but)i(some)f(ar)n(e)h(not)e(so)h(obvious.)221
1103 y Fj(5.1.1)99 b(Preprocessor)25 b(interactions)221
1280 y Fq(IDL)18 b(is)h(pr)n(ocessed)d(by)j(the)f(C)h(pr)n(epr)n
(ocessor)d(befor)n(e)i(omniidl)i(parses)d(it.)27 b(Unlike)18
b(the)g(old)g(IDL)221 1393 y(compiler)-7 b(,)40 b(which)c(used)f(dif)n
(fer)n(ent)g(C)i(pr)n(epr)n(ocessors)c(on)j(dif)n(fer)n(ent)f
(platforms,)k(omniidl)221 1506 y(always)32 b(uses)d(the)i(GNU)g(C)g(pr)
n(epr)n(ocessor)e(\(which)j(it)g(builds)f(with)g(the)g(name)g
(omnicpp\).)221 1618 y(The)23 b Fe(-D)p Fq(,)g Fe(-U)p
Fq(,)f(and)i Fe(-I)f Fq(options)f(ar)n(e)i(just)f(sent)f(to)h(the)g(pr)
n(epr)n(ocessor)-7 b(.)29 b(Note)22 b(that)i(the)e(curr)n(ent)221
1731 y(dir)n(ectory)j(is)h(not)f(on)g(the)g(include)h(sear)n(ch)g(path)
f(by)h(default\227use)e(`)p Fe(-I.)p Fq(')h(for)h(that.)37
b(The)25 b Fe(-Y)221 1844 y Fq(option)19 b(can)h(be)g(used)e(to)h
(specify)g(a)h(dif)n(fer)n(ent)f(pr)n(epr)n(ocessor)f(to)h(omnicpp.)26
b(Bewar)n(e)19 b(that)h(line)221 1957 y(dir)n(ectives)j(inserted)d(by)j
(other)e(pr)n(epr)n(ocessors)f(ar)n(e)j(likely)g(to)f(confuse)g
(omniidl.)221 2210 y Fj(5.1.2)99 b(Forward-declared)24
b(interfaces)221 2386 y Fq(If)f(you)f(have)h(an)g(IDL)f(\002le)h(like:)
362 2531 y Fc(interface)48 b(I;)362 2631 y(interface)g(J)i({)462
2731 y(attribute)e(I)i(the_I)o(;)362 2830 y(};)221 2988
y Fq(then)22 b(omniidl)h(will)h(normally)g(issue)d(a)i(warning:)321
3174 y Fc(test.idl:1:)48 b(Warning:)g(Forward)g(declared)h(interface)f
(`::I')h(was)g(never)321 3274 y(fully)g(defined)221 3472
y Fq(It)24 b(is)h(illegal)h(to)e(declar)n(e)h(such)f(IDL)g(in)h
(isolation,)h(but)e(it)h Fp(is)g Fq(valid)h(to)e(de\002ne)f(interface)i
Fe(I)f Fq(in)h(a)221 3585 y(separate)i(\002le.)44 b(If)29
b(you)e(have)h(a)h(lot)f(of)g(IDL)g(with)g(this)g(sort)f(of)h(constr)o
(uct,)g(you)f(will)j(dr)n(own)221 3698 y(under)22 b(the)f(warning)i
(messages.)j(Use)c(the)f Fe(-nf)h Fq(option)f(to)h(suppr)n(ess)f(them.)
221 3951 y Fj(5.1.3)99 b(Comments)221 4128 y Fq(By)17
b(default,)i(omniidl)g(discar)n(ds)f(comments)f(in)i(the)e(input)h
(IDL.)f(However)-7 b(,)18 b(with)g(the)f Fe(-k)g Fq(and)221
4241 y Fe(-K)i Fq(options,)g(it)h(pr)n(eserves)e(the)h(comments)h(for)g
(use)f(by)g(the)h(back-ends.)26 b(The)19 b(C++)i(back-end)221
4353 y(ignor)n(es)j(this)h(information,)h(but)f(it)g(is)g(r)n
(elatively)h(easy)e(to)g(write)h(new)f(back-ends)h(which)g
Fp(do)221 4466 y Fq(make)e(use)e(of)i(comments.)362 4579
y(The)g(two)g(dif)n(fer)n(ent)h(options)f(r)n(elate)g(to)h(how)f
(comments)g(ar)n(e)h(attached)g(to)f(declarations)221
4692 y(within)g(the)f(IDL.)g(Given)h(IDL)g(like:)362
4837 y Fc(interface)48 b(I)i({)462 4937 y(void)f(op1)o(\(\);)462
5036 y Fd(//)g(A)h(comment)462 5136 y Fc(void)f(op2)o(\(\);)362
5236 y(};)221 5394 y Fq(the)22 b Fe(-k)g Fq(\003ag)h(will)h(attach)f
(the)f(comment)g(to)g Fe(op1\(\))p Fq(;)e(the)i Fe(-K)g
Fq(\003ag)h(will)h(attach)f(it)g(to)f Fe(op2\(\))p Fq(.)p
eop
%%Page: 33 39
33 38 bop 63 282 a Ff(5.2.)51 b(PYTHON)22 b(BACK-END)g(OPTIONS)1675
b Fq(33)63 539 y Fo(5.2)119 b(Python)30 b(back-end)g(options)63
753 y Fq(When)d(you)f(specify)i(the)e(Python)h(back-end)g(\(with)h
Fe(-bpython)p Fq(\),)e(the)h(following)g Fe(-Wb)g Fq(op-)63
866 y(tions)18 b(ar)n(e)h(available.)29 b(Note)18 b(that)g(the)g
Fe(-Wb)g Fq(options)f(must)h(be)h(speci\002ed)f Fp(after)i
Fq(the)e Fe(-bpython)63 978 y Fq(option,)j(so)h(omniidl)h(knows)f
(which)h(back-end)f(to)g(give)h(the)f(ar)n(guments)g(to.)63
1200 y Fe(-Wbstdout)218 b Fq(Send)22 b(the)g(generated)e(stubs)h(to)h
(standar)n(d)h(output,)d(rather)i(than)h(to)f(a)h(\002le.)63
1313 y Fe(-Wbinline)218 b Fq(Output)22 b(stubs)g(for)g(#included)h
(\002les)f(in)h(line)g(with)g(the)f(main)i(\002le.)63
1426 y Fe(-Wbglobal=)p Fp(g)118 b Fq(Use)22 b Fp(g)h
Fq(as)g(the)f(name)g(for)h(the)f(global)h(IDL)g(scope)e(\(default)i
Fe(_GlobalIDL)p Fq(\).)63 1539 y Fe(-Wbpackage=)p Fp(p)63
b Fq(Put)22 b(both)h(Python)e(modules)g(and)i(stub)f(\002les)g(in)h
(package)g Fp(p)p Fq(.)63 1652 y Fe(-Wbmodules=)p Fp(p)63
b Fq(Put)22 b(Python)g(modules)f(in)i(package)g Fp(p)p
Fq(.)63 1765 y Fe(-Wbstubs=)p Fp(p)173 b Fq(Put)22 b(stub)g(\002les)h
(in)g(package)f Fp(p)p Fq(.)204 2097 y(The)27 b Fe(-Wbstdout)d
Fq(option)j(is)h(not)f(r)n(eally)i(useful)e(if)i(you)e(ar)n(e)h
(invoking)g(omniidl)h(your)n(-)63 2210 y(self.)e(It)22
b(is)h(used)e(by)i Fe(omniORB.import)o(IDL)o(\(\))o Fq(,)17
b(described)k(in)i(section)f(6.10.)204 2325 y(When)30
b(you)h(compile)h(an)f(IDL)g(\002le)h(which)g(#includes)f(other)f(IDL)h
(\002les,)i(omniidl)f(nor)n(-)63 2438 y(mally)e(only)f(generates)e
(code)h(for)h(the)f(main)i(\002le,)h(assuming)e(that)f(code)h(for)g
(the)f(included)63 2551 y(\002les)e(will)j(be)d(generated)f(separately)
-10 b(.)40 b(Instead,)26 b(you)g(can)i(use)e(the)g Fe(-Wbinline)d
Fq(option)j(to)63 2664 y(generate)20 b(code)i(for)h(the)f(main)h(IDL)g
(\002le)f Fp(and)i Fq(all)g(included)e(\002les)g(in)h(a)h(single)e
(stub)g(\002le.)204 2778 y(De\002nitions)f(declar)n(ed)h(at)g(IDL)f
(global)i(scope)d(ar)n(e)i(normally)h(placed)f(in)g(a)g(Python)f(mod-)
63 2891 y(ule)h(named)h(`)p Fe(_GlobalIDL)p Fq('.)18
b(The)k Fe(-Wbglobal)d Fq(allows)k(you)e(to)h(change)h(that.)204
3005 y(As)f(explained)g(in)h(section)f(2.2,)h(when)f(you)g(compile)h
(an)g(IDL)f(\002le)h(like:)204 3158 y Fd(//)49 b(echo_example)n(.idl)
204 3257 y Fc(module)f(Example)h({)303 3357 y(interface)g(Echo)g({)403
3457 y(string)g(echoString)n(\(in)g(string)g(mesg)o(\);)303
3556 y(};)204 3656 y(};)63 3823 y Fq(omniidl)32 b(generates)d(dir)n
(ectories)i(named)g Fe(Example)e Fq(and)i Fe(Example__POA)p
Fq(,)e(which)j(pr)n(o-)63 3936 y(vide)g(the)g(standar)n(d)f(Python)g
(mapping)i(modules,)g(and)g(also)f(the)g(\002le)g Fe(example_echo_)63
4049 y(idl.py)23 b Fq(which)j(contains)f(the)g(actual)i(de\002nitions.)
36 b(The)25 b(latter)g(\002le)h(contains)f(code)g(which)63
4162 y(inserts)e(the)g(de\002nitions)g(in)i(the)f(standar)n(d)g
(modules.)32 b(This)24 b(arrangement)f(means)i(that)f(it)g(is)63
4275 y(not)29 b(possible)h(to)g(move)g(all)i(of)e(the)g(generated)e
(code)i(into)g(a)h(Python)e(package)h(by)h(simply)63
4388 y(placing)d(the)f(\002les)h(in)g(a)g(suitably)g(named)f(dir)n
(ectory)-10 b(.)42 b(Y)-8 b(ou)27 b(may)h(wish)g(to)f(do)g(this)g(to)g
(avoid)63 4501 y(clashes)22 b(with)h(names)f(in)h(use)f(elsewher)n(e)f
(in)i(your)f(softwar)n(e.)204 4615 y(Y)-8 b(ou)32 b(can)i(place)g(all)h
(generated)d(code)g(in)i(a)g(package)f(using)g(the)g
Fe(-Wbpackage)c Fq(com-)63 4728 y(mand)23 b(line)g(option.)j(For)c
(example,)290 4948 y Fe(omniidl)51 b(-bpython)g(-Wbpackage=gene)o(ra)o
(ted)d(echo_example.i)o(dl)63 5168 y Fq(cr)n(eates)25
b(a)h(dir)n(ectory)e(named)i(`)p Fe(generated)p Fq(',)c(containing)k
(the)f(generated)e(code.)36 b(The)25 b(stub)63 5281 y(module)f(is)g
(now)g(called)i(`)p Fe(generated.Examp)o(le)o Fq(',)20
b(and)k(the)g(actual)i(stub)e(de\002nitions)f(ar)n(e)63
5394 y(in)28 b(`)p Fe(generated.exampl)o(e_)o(ec)o(ho)o(_id)o(l)p
Fq('.)38 b(If)28 b(you)g(wish)g(to)f(split)h(the)f(modules)g(and)h(the)
p eop
%%Page: 34 40
34 39 bop 221 282 a Fq(34)1751 b Ff(CHAPTER)22 b(5.)51
b(THE)21 b(IDL)i(COMPILER)221 539 y Fq(stub)e(de\002nitions)g(into)h
(dif)n(fer)n(ent)g(Python)e(packages,)h(you)h(can)g(use)f(the)h
Fe(-Wbmodules)17 b Fq(and)221 652 y Fe(-Wbstubs)i Fq(options.)362
764 y(Note)j(that)h(if)h(you)f(use)f(these)g(options)f(to)i(change)g
(the)g(module)f(package,)h(the)g(interface)221 877 y(to)e(the)g
(generated)f(code)h(is)h(not)f(strictly-speaking)f(CORBA)i(compliant.)
29 b(Y)-8 b(ou)20 b(may)i(have)h(to)221 990 y(change)g(your)e(code)h
(if)i(you)d(ever)h(use)g(a)h(Python)e(ORB)i(other)e(than)i(omniORBpy)
-10 b(.)221 1289 y Fo(5.3)119 b(Examples)221 1500 y Fq(Generate)22
b(the)g(Python)f(stubs)g(for)i(a)g(\002le)g Fe(a.idl)p
Fq(:)448 1712 y Fe(omniidl)52 b(-bpython)f(a.idl)221
1925 y Fq(As)22 b(above,)h(but)f(put)g(the)g(stubs)f(in)j(a)f(package)f
(called)i(`)p Fe(stubs)p Fq(':)448 2137 y Fe(omniidl)52
b(-bpython)f(-Wbstubs=stubs)d(a.idl)221 2350 y Fq(Generate)22
b(both)g(Python)f(and)i(C++)g(stubs)f(for)g(two)g(IDL)g(\002les)h(\(r)n
(equir)n(es)f(omniORB)h(3\):)448 2563 y Fe(omniidl)52
b(-bpython)f(-bcxx)h(a.idl)g(b.idl)221 2775 y Fq(Just)22
b(check)h(the)e(IDL)i(\002les)f(for)h(validity)-10 b(,)23
b(generating)e(no)h(output:)448 2988 y Fe(omniidl)52
b(a.idl)g(b.idl)p eop
%%Page: 35 41
35 40 bop 63 1164 a Fk(Chapter)44 b(6)63 1581 y Fm(The)52
b(omniORBpy)f(API)63 2042 y Fq(In)29 b(this)g(chapter)-7
b(,)30 b(we)f(intr)n(oduce)g(the)f(omniORBpy)h(API.)f(The)h(purpose)e
(of)i(this)g(API)g(is)g(to)63 2155 y(pr)n(ovide)23 b(access)g(points)g
(to)g(omniORB)g(speci\002c)h(functionality)g(that)f(is)h(not)f(cover)n
(ed)g(by)g(the)63 2268 y(CORBA)g(speci\002cation.)30
b(Obviously)-10 b(,)23 b(if)h(you)f(use)f(this)h(API)g(in)g(your)g
(application,)h(that)f(part)63 2381 y(of)d(your)f(code)h(is)g(not)g
(going)f(to)h(be)g(portable)g(to)g(r)o(un)g(unchanged)f(on)h(other)f
(vendors')g(ORBs.)63 2494 y(T)-8 b(o)25 b(make)h(it)g(easier)g(to)f
(identify)g(omniORB)i(dependent)c(code,)i(this)h(API)f(is)i(de\002ned)d
(in)i(the)63 2607 y(`)p Fe(omniORB)p Fq(')20 b(module.)63
2920 y Fo(6.1)119 b(ORB)29 b(initialisation)g(options)63
3136 y Fe(CORBA::ORB_ini)o(t\()o(\))17 b Fq(accepts)22
b(the)g(following)h(standar)n(d)f(command-line)i(ar)n(guments:)63
3362 y Fe(-ORBid)51 b(omniORB3)1367 b Fq(The)22 b(identi\002er)f(must)h
(be)h(`omniORB3'.)63 3475 y Fe(-ORBInitRef)49 b Fq(<)p
Fp(ObjectId)p Fq(>=<)p Fp(ObjectURI)r Fq(>)540 b(See)21
b(section)h(4.2.)63 3588 y Fe(-ORBDefaultIni)o(tR)o(ef)48
b Fq(<)p Fp(Default)24 b(URI)r Fq(>)577 b(See)21 b(section)h(4.2.)63
3812 y(and)g(the)g(following)h(omniORB-speci\002c)g(ar)n(guments:)63
4039 y Fe(-ORBtraceLevel)48 b Fq(<)p Fp(level)p Fq(>)1095
b(See)21 b(section)h(6.3.)63 4152 y Fe(-ORBtraceInvoc)o(at)o(io)o(ns)
1091 b Fq(See)21 b(section)h(6.3.)63 4265 y Fe(-ORBstrictIIOP)1418
b Fq(See)21 b(section)h(6.8.)63 4378 y Fe(-ORBgiopMaxMsg)o(Si)o(ze)48
b Fq(<)p Fp(size)24 b(in)f(bytes)p Fq(>)597 b(See)21
b(section)h(6.5.)63 4490 y Fe(-ORBobjectTabl)o(eS)o(iz)o(e)49
b Fq(<)p Fp(number)22 b(of)h(entries)p Fq(>)346 b(See)21
b(section)h(6.6.)63 4603 y Fe(-ORBserverName)48 b Fq(<)p
Fp(string)p Fq(>)1039 b(See)21 b(section)h(6.4.)63 4716
y Fe(-ORBno_bootstr)o(ap)o(_a)o(gen)o(t)982 b Fq(See)21
b(section)h(6.7.)63 4829 y Fe(-ORBverifyObje)o(ct)o(Ex)o(ist)o(sA)o(nd)
o(Ty)o(pe)48 b Fq(<)p Fp(0)23 b(or)h(1)p Fq(>)230 b(See)21
b(section)h(6.8.)63 4942 y Fe(-ORBinConScanP)o(er)o(io)o(d)49
b Fq(<)p Fp(0\226max)24 b(integer)p Fq(>)461 b(See)21
b(section)h(7.3.)63 5055 y Fe(-ORBoutConScan)o(Pe)o(ri)o(od)48
b Fq(<)p Fp(0\226max)24 b(integer)p Fq(>)407 b(See)21
b(section)h(7.3.)63 5168 y Fe(-ORBclientCall)o(Ti)o(me)o(Out)o(Pe)o(ri)
o(od)48 b Fq(<)p Fp(0\226max)24 b(integer)p Fq(>)h(See)c(section)h
(7.3.)63 5281 y Fe(-ORBserverCall)o(Ti)o(me)o(Out)o(Pe)o(ri)o(od)48
b Fq(<)p Fp(0\226max)24 b(integer)p Fq(>)h(See)c(section)h(7.3.)63
5394 y Fe(-ORBscanGranul)o(ar)o(it)o(y)49 b Fq(<)p Fp(0\226max)24
b(integer)p Fq(>)461 b(See)21 b(section)h(7.3.)1662 5622
y(35)p eop
%%Page: 36 42
36 41 bop 221 282 a Fq(36)1664 b Ff(CHAPTER)21 b(6.)51
b(THE)22 b(OMNIORBPY)g(API)221 539 y Fe(-ORBlcdMode)1583
b Fq(See)22 b(section)f(6.8.)221 652 y Fe(-ORBpoa_iiop_po)o(rt)48
b Fq(<)p Fp(port)24 b(no.)p Fq(>)808 b(See)22 b(section)f(6.2.)221
764 y Fe(-ORBpoa_iiop_na)o(me)o(_po)o(rt)48 b Fq(<)p
Fp(hostname)p Fq([)p Fp(:port)25 b(no.])p Fq(>)104 b(See)22
b(section)f(6.2.)221 877 y Fe(-ORBhelp)1748 b Fq(Lists)22
b(all)i(ORB)e(command)h(line)g(options.)221 1109 y(and)g(these)e(two)h
(obsolete)f(omniORB-speci\002c)h(ar)n(guments:)221 1345
y Fe(-ORBInitialHost)48 b Fq(<)p Fp(string)p Fq(>)984
b(See)22 b(section)f(6.7.)221 1458 y Fe(-ORBInitialPort)48
b Fq(<)p Fp(1\22665535)p Fq(>])860 b(See)22 b(section)f(6.7.)221
1690 y(As)g(de\002ned)e(in)i(the)g(CORBA)g(speci\002cation,)g(any)g
(command-line)h(ar)n(guments)e(understood)221 1803 y(by)29
b(the)g(ORB)f(will)j(be)e(r)n(emoved)f(fr)n(om)i Fe(argv)d
Fq(when)i(the)f(initialisation)j(functions)e(r)n(eturn.)221
1916 y(Ther)n(efor)n(e,)d(an)h(application)h(is)f(not)f(r)n(equir)n(ed)
g(to)g(handle)g(any)h(command-line)h(ar)n(guments)221
2029 y(it)23 b(does)e(not)h(understand.)221 2351 y Fo(6.2)119
b(Hostname)30 b(and)g(port)221 2570 y Fq(Normally)-10
b(,)30 b(omniORB)e(lets)g(the)f(operating)g(system)f(pick)j(which)f
(port)g(number)g(it)g(should)221 2683 y(use)34 b(to)h(listen)g(for)g
(IIOP)g(calls.)68 b(Alternatively)-10 b(,)37 b(you)e(can)h(specify)f(a)
h(particular)g(port)e(us-)221 2796 y(ing)22 b Fe(-ORBpoa_iiop_po)o(rt)p
Fq(.)f(If)h(you)g(specify)f Fe(-ORBpoa_iiop_po)o(rt)16
b Fq(mor)n(e)22 b(than)g(once,)221 2909 y(omniORB)h(will)h(listen)e(on)
g(all)i(the)e(ports)f(you)h(specify)-10 b(.)362 3026
y(By)23 b(default,)h(the)f(ORB)g(can)i(work)d(out)h(the)g(IP)h(addr)n
(ess)e(of)i(the)f(host)f(machine.)32 b(This)24 b(ad-)221
3139 y(dr)n(ess)i(is)i(r)n(ecor)n(ded)f(in)h(the)f(object)g(r)n(efer)n
(ences)g(of)h(the)f(local)i(objects.)42 b(However)-7
b(,)28 b(when)f(the)221 3252 y(host)18 b(has)g(multiple)h(network)e
(interfaces)h(and)g(multiple)h(IP)f(addr)n(esses,)f(it)i(may)g(be)f
(desirable)221 3364 y(for)25 b(the)f(application)i(to)e(contr)n(ol)h
(what)f(addr)n(ess)g(the)g(ORB)g(should)g(use.)33 b(This)25
b(can)h(be)e(done)221 3477 y(by)c(de\002ning)f(the)g(envir)n(onment)h
(variable)i Fe(OMNIORB_USEHOS)o(TN)o(AME)13 b Fq(to)20
b(contain)g(the)f(pr)n(e-)221 3590 y(ferr)n(ed)g(host)f(name)h(or)g(IP)
g(addr)n(ess)f(in)i(dot-numeric)f(form.)27 b(Alternatively)-10
b(,)19 b(the)g(same)g(can)h(be)221 3703 y(achieved)i(using)f(the)g
Fe(-ORBpoa_iiop_na)o(me)o(_p)o(or)o(t)16 b Fq(option.)26
b(Y)-8 b(ou)21 b(can)h(optionally)g(spec-)221 3816 y(ify)k(a)g(port)f
(number)g(too.)36 b(Again,)27 b(you)d(can)j(specify)e(mor)n(e)g(than)h
(one)f(host)f(name)i(by)g(using)221 3929 y Fe(-ORBpoa_iiop_na)o(me)o
(_po)o(rt)16 b Fq(mor)n(e)22 b(than)h(once.)362 4046
y(When)f(using)f(omniORB)h(2.8,)h(these)d(two)i(options)e(ar)n(e)j
(named)f Fe(-BOAiiop_port)16 b Fq(and)221 4159 y Fe(-BOAiiop_name_p)o
(or)o(t)p Fq(.)221 4481 y Fo(6.3)119 b(Run-time)30 b(T)-13
b(racing)29 b(and)h(Diagnostic)g(Messages)221 4700 y
Fq(omniORB)18 b(can)g(output)e(tracing)i(and)f(diagnostic)g(messages)f
(to)h(the)g(standar)n(d)g(err)n(or)f(str)n(eam.)221 4813
y(Y)-8 b(ou)35 b(can)j(vary)e(the)g(amount)g(of)h(tracing)f(using)g
(the)g Fe(-ORBtraceLevel)48 b Fq(<)p Fp(level)p Fq(>)38
b(com-)221 4926 y(mand)23 b(line)g(ar)n(gument.)28 b(For)21
b(instance:)221 5162 y Fe($)54 b(example_echo_sr)o(v.p)o(y)48
b(-ORBtraceLevel)g(5)221 5394 y Fq(At)22 b(the)g(moment,)g(the)g
(following)g(trace)h(levels)g(ar)n(e)g(de\002ned:)p eop
%%Page: 37 43
37 42 bop 63 282 a Ff(6.4.)51 b(SER)-5 b(VER)21 b(NAME)2358
b Fq(37)254 526 y(level)23 b(0)282 b(turn)22 b(of)n(f)h(all)h(tracing)f
(and)g(informational)h(messages)254 639 y(level)f(1)282
b(informational)24 b(messages)c(only)254 752 y(level)j(2)282
b(the)21 b(above)i(plus)g(con\002guration)f(information)254
865 y(level)h(5)282 b(the)26 b(above)h(plus)f(noti\002cations)h(when)f
(server)g(thr)n(eads)795 978 y(ar)n(e)18 b(cr)n(eated)g(or)g
(communication)h(endpoints)d(ar)n(e)j(shut-)795 1091
y(down)254 1204 y(level)k(10\22620)102 b(the)21 b(above)i(plus)g
(execution)e(and)i(exception)e(traces)254 1317 y(level)i(25)237
b(the)21 b(above)i(plus)f(hex)f(dumps)h(of)g(all)i(data)e(sent)f(and)i
(r)n(e-)795 1430 y(ceived)f(by)h(the)e(ORB)i(via)h(its)e(network)f
(connections.)63 1657 y(W)-5 b(ith)28 b(omniORB)h(3,)h(you)d(can)i
(also)g(use)e Fe(-ORBtraceInvocat)o(io)o(ns)22 b Fq(to)28
b(trace)g(all)i(opera-)63 1770 y(tion)22 b(invocations.)63
2111 y Fo(6.4)119 b(Server)29 b(Name)63 2336 y Fq(Applications)f(can)g
(optionally)g(specify)f(a)i(name)f(to)f(identify)h(the)f(server)g(pr)n
(ocess.)42 b(At)27 b(the)63 2449 y(moment,)22 b(this)h(name)h(is)f
(only)g(used)f(by)h(the)g(host-based)f(access)h(contr)n(ol)g(module.)29
b(See)23 b(sec-)63 2562 y(tion)i(7.5)h(for)f(details.)35
b(The)24 b(server)g(name)i(can)g(be)f(changed)g(by)g(specifying)f(the)h
(command-)63 2675 y(line)e(option:)k Fe(-ORBserverName)48
b Fq(<)p Fp(string)p Fq(>.)63 3015 y Fo(6.5)119 b(GIOP)28
b(Message)i(Size)63 3240 y Fq(omniORB)c(sets)e(a)j(limit)g(on)f(the)f
(GIOP)h(message)f(size)h(that)g(can)g(be)g(sent)f(or)h(r)n(eceived.)37
b(The)63 3353 y(maximum)25 b(size)f(can)g(be)g(set)e(with)i(the)e
(command-line)j(option)e Fe(-ORBgiopMaxMsgS)o(iz)o(e)p
Fq(.)63 3466 y(The)g(exact)g(value)h(is)g(somewhat)f(arbitrary)-10
b(.)31 b(The)23 b(r)n(eason)g(such)g(a)h(limit)h(exists)d(is)i(to)f(pr)
n(ovide)63 3579 y(some)31 b(way)h(to)g(pr)n(otect)f(the)h(server)f
(side)g(fr)n(om)i(r)n(esour)n(ce)e(exhaustion.)56 b(Think)32
b(about)g(the)63 3692 y(case)c(when)g(the)g(server)g(r)n(eceives)g(a)i
(r)n(ogue)d(GIOP\(IIOP\))j(r)n(equest)d(message)g(that)i(contains)63
3805 y(a)c(sequence)d(length)i(\002eld)g(set)f(to)h(2)1296
3772 y Fa(31)1371 3805 y Fq(.)33 b(W)-5 b(ith)25 b(a)g(r)n(easonable)g
(message)e(size)h(limit,)i(the)e(server)63 3918 y(can)f(r)n(eject)f
(this)h(r)n(ogue)e(message)g(straight)h(away)-10 b(.)63
4259 y Fo(6.6)119 b(Object)29 b(table)g(size)63 4484
y Fq(omniORB)f(uses)f(a)i(hash)g(table)g(to)f(stor)n(e)f(the)h(mapping)
g(fr)n(om)h(object)g(keys)d(to)i(servant)g(ob-)63 4596
y(jects.)35 b(Normally)-10 b(,)26 b(it)f(dynamically)i(r)n(e-sizes)e
(the)g(hash)g(table)h(when)e(it)i(becomes)e(too)h(full)h(or)63
4709 y(too)g(empty)-10 b(.)39 b(This)26 b(is)h(the)g(most)f(ef)n
(\002cient)h(trade-of)n(f)g(between)e(performance)h(and)h(memory)63
4822 y(usage.)38 b(However)-7 b(,)25 b(since)i(all)g(POA)g(operations)e
(which)i(add)f(or)g(r)n(emove)g(objects)f(fr)n(om)i(the)63
4935 y(table)22 b(can)g(\(very)g(occasionally\))h(cause)f(the)f(object)
g(table)i(to)e(r)n(esize,)g(the)g(time)h(spent)e(in)i(POA)63
5048 y(operations)f(is)h(much)i(less)d(pr)n(edictable)i(than)g(if)g
(the)f(table)h(size)g(was)g(\002xed.)204 5168 y(The)k
Fe(-ORBobjectTable)o(Si)o(ze)21 b Fq(ar)n(gument)28 b(allows)g(you)f
(to)g(choose)g(a)i(\002xed)e(size)h(for)63 5281 y(the)20
b(object)i(table.)27 b(This)22 b(pr)n(events)e(omniORB)h(fr)n(om)h(r)n
(esizing)g(it.)27 b(Note)20 b(that)h(omniORB)h(uses)63
5394 y(an)j(open)f(hash)h(table)h(so)e(you)h(can)g(have)h(any)f(number)
g(of)g(objects)g(active,)h(no)f(matter)g(what)p eop
%%Page: 38 44
38 43 bop 221 282 a Fq(38)1664 b Ff(CHAPTER)21 b(6.)51
b(THE)22 b(OMNIORBPY)g(API)221 539 y Fq(size)d(table)g(you)f(specify)
-10 b(.)26 b(If)19 b(you)f(have)h(many)g(mor)n(e)f(active)i(objects)e
(than)h(hash)f(table)i(entries,)221 652 y(object)j(look-up)e
(performance)h(will)i(become)f(linear)g(with)g(the)f(number)g(of)h
(objects.)221 974 y Fo(6.7)119 b(Obsolete)29 b(Initial)g(Object)g
(Reference)f(Bootstrapping)221 1193 y Fq(Starting)c(fr)n(om)g(2.6.0,)h
(but)f(superseded)d(by)j(the)f(Inter)n(operable)f(Naming)j(Service)f
(in)g(omni-)221 1306 y(ORB)30 b(3,)i(a)e(mechanism)h(is)e(available)k
(for)d(the)f(ORB)g(r)o(untime)h(to)f(obtain)i(the)e(initial)i(object)
221 1419 y(r)n(efer)n(ences)f(to)g(CORBA)h(services.)52
b(The)30 b(bootstrap)g(service)g(is)h(a)h(special)f(object)g(with)g
(the)221 1532 y(object)23 b(key)e(`INIT')h(and)g(the)g(following)h
(interface)1996 1499 y Fi(1)2034 1532 y Fq(:)462 1689
y Fd(//)49 b(IDL)462 1788 y Fc(module)g(CORBA)f({)562
1888 y(interface)g(InitialReferences)e({)661 1988 y(Object)j(get)o
(\(in)h(ORB)o(::ObjectId)e(id\);)661 2087 y Fd(//)i(returns)e(the)h
(initial)g(object)g(reference)f(of)h(the)g(service)661
2187 y(//)h(identified)e(by)h(<id)o(>.)h(For)f(example)g(the)g(id)g
(for)h(the)661 2287 y(//)g(Naming)e(service)h(is)g("NameService)n(".)
661 2486 y Fc(ORB::)o(ObjectIdList)f(list)o(\(\);)661
2585 y Fd(//)i(returns)e(the)h(list)g(of)h(service)e(ids)i(that)f(this)
g(agent)g(knows)512 2685 y Fc(};)412 2785 y(};)362 2959
y Fq(By)24 b(default,)g(all)i(omniORB)f(servers)e(contain)i(an)g
(instance)f(of)h(this)f(object)g(and)g(ar)n(e)h(able)221
3072 y(to)h(r)n(espond)f(to)h(r)n(emote)g(invocations.)40
b(T)-8 b(o)26 b(pr)n(event)f(the)h(ORB)h(fr)n(om)g(instantiating)f
(this)h(ob-)221 3185 y(ject,)22 b(the)g(command-line)i(option)e
Fe(-ORBno_bootstr)o(ap)o(_a)o(gen)o(t)16 b Fq(should)22
b(be)h(speci\002ed.)362 3302 y(In)34 b(particular)-7
b(,)38 b(the)c(Naming)g(Service)h(omniNames)f(is)g(able)h(to)e(r)n
(espond)g(to)g(a)i(query)221 3415 y(thr)n(ough)26 b(this)g(interface)h
(and)f(r)n(eturn)g(the)g(object)g(r)n(efer)n(ence)g(of)h(its)f(r)n(oot)
g(context.)39 b(In)26 b(ef)n(fect,)221 3527 y(the)e(bootstrap)f(agent)h
(pr)n(ovides)g(a)h(level)g(of)g(indir)n(ection.)34 b(All)25
b(omniORB)g(clients)f(still)i(have)221 3640 y(to)33 b(be)h(supplied)e
(with)i(the)f(addr)n(ess)f(of)i(the)f(bootstrap)f(agent.)60
b(However)-7 b(,)35 b(the)e(informa-)221 3753 y(tion)g(is)g(much)g
(easier)f(to)h(specify)f(than)h(a)g(stringi\002ed)f(IOR!)h(Another)e
(advantage)i(of)f(this)221 3866 y(appr)n(oach)27 b(is)g(that)g(it)g(is)
g(completely)f(compatible)i(with)e(JavaIDL.)i(This)f(makes)f(it)h
(possible)221 3979 y(for)c(pr)n(ograms)f(written)f(for)i(JavaIDL)h(to)e
(shar)n(e)g(a)h(Naming)g(Service)g(with)f(omniORB.)362
4096 y(The)39 b(addr)n(ess)g(of)g(the)g(bootstrap)g(agent)f(is)i(given)
g(by)g(the)f Fe(ORBInitialHost)33 b Fq(and)221 4209 y
Fe(ORBInitialPort)17 b Fq(parameter)22 b(in)h(the)e(omniORB)i
(con\002guration)f(\002le)h(\(section)f(1.2\).)29 b(The)221
4322 y(parameters)g(can)j(also)e(be)g(speci\002ed)f(as)i(command-line)g
(options)e(\(section)h(6.1\).)52 b(The)30 b(pa-)221 4435
y(rameter)25 b Fe(ORBInitialPort)19 b Fq(is)25 b(optional.)35
b(If)26 b(it)f(is)g(not)g(speci\002ed,)f(port)g(number)h(900)i(will)221
4548 y(be)c(used.)362 4664 y(During)34 b(initialisation,)k(the)33
b(ORB)g(r)n(eads)g(the)g(parameters)g(in)h(the)f(omniORB)g(con\002g-)
221 4777 y(uration)j(\002le.)68 b(If)36 b(the)f(parameter)g
Fe(NAMESERVICE)c Fq(is)36 b(speci\002ed,)i(the)d(stringi\002ed)f(IOR)i
(is)221 4890 y(used)24 b(as)h(the)g(object)g(r)n(efer)n(ence)f(of)i
(the)e(r)n(oot)h(naming)g(context.)35 b(If)25 b(the)g(parameter)f(is)i
(absent)221 5003 y(and)k(the)e(parameter)h Fe(ORBInitialHost)23
b Fq(is)29 b(pr)n(esent,)g(the)g(ORB)g(contacts)g(the)g(bootstrap)221
5116 y(agent)g(at)g(the)g(addr)n(ess)f(speci\002ed)g(to)h(obtain)g(the)
g(r)n(oot)g(naming)h(context)e(when)g(the)h(appli-)221
5229 y(cation)21 b(calls)h Fe(resolve_initia)o(l_)o(re)o(fer)o(en)o(ce)
o(s\()o(\))p Fq(.)f(If)f(neither)g(is)g(pr)n(esent,)f
Fe(resolve_)p 221 5306 1316 4 v 327 5362 a Fh(1)356 5394
y Fg(This)f(interface)h(was)g(\002rst)f(de\002ned)h(by)f(Sun's)h(NEO)f
(and)h(is)f(in)h(used)f(in)h(Sun's)g(JavaIDL.)p eop
%%Page: 39 45
39 44 bop 63 282 a Ff(6.8.)51 b(GIOP)23 b(LOWEST)f(COMMON)h(DENOMINA)-7
b(T)n(OR)22 b(MODE)864 b Fq(39)63 539 y Fe(initial_refere)o(nc)o(es)o
(\(\))28 b Fq(r)n(eturns)34 b(a)h(nil)h(object)e(r)n(efer)n(ence.)64
b(Finally)-10 b(,)38 b(the)c(command)63 652 y(line)25
b(ar)n(gument)f Fe(-ORBInitialHost)18 b Fq(overrides)24
b(any)g(parameters)g(in)h(the)f(con\002guration)63 764
y(\002le.)i(The)19 b(ORB)g(always)g(contacts)g(the)f(bootstrap)f(agent)
i(at)g(the)f(addr)n(ess)g(speci\002ed)g(to)g(obtain)63
877 y(the)j(r)n(oot)h(naming)i(context.)204 991 y(Now)e(we)g(ar)n(e)h
(r)n(eady)f(to)g(describe)g(a)h(simple)f(way)h(to)f(set)f(up)i
(omniNames.)176 1208 y(1.)46 b(Start)22 b(omniNames)g(for)h(the)f
(\002rst)g(time)g(on)g(a)i(machine)f(\(e.g.)k(wobble\):)290
1360 y Fe($)54 b(omniNames)c(-start)i(1234)176 1551 y
Fq(2.)46 b(Add)21 b(to)h(omniORB.cfg:)290 1703 y Fe(ORBInitialHost)48
b(wobble)290 1856 y(ORBInitialPort)g(1234)176 2047 y
Fq(3.)e(All)23 b(omniORB)g(applications)g(will)h(now)e(be)h(able)g(to)f
(contact)h(omniNames.)290 2199 y(Alternatively)-10 b(,)22
b(the)g(command)h(line)g(options)e(can)j(be)e(used,)f(for)i(example:)
290 2351 y Fe($)54 b(eg3_impl)d(-ORBInitialHost)d(wobble)j
(-ORBInitialPort)d(1234)53 b(&)290 2503 y($)h(eg3_clt)d
(-ORBInitialHost)d(wobble)k(-ORBInitialPort)c(1234)63
2807 y Fo(6.8)119 b(GIOP)28 b(Lowest)i(Common)i(Denominator)d(Mode)63
3020 y Fq(Sometimes,)i(to)f(cope)g(with)g(bugs)g(in)h(another)f(ORB,)g
(it)h(is)g(necessary)e(to)h(disable)h(various)63 3133
y(GIOP)c(and)g(IIOP)g(featur)n(es)f(in)i(or)n(der)e(to)g(achieve)i
(inter)n(operability)-10 b(.)41 b(If)27 b(the)f(command)i(line)63
3246 y(option)34 b Fe(-ORBlcdMode)d Fq(is)k(pr)n(esent,)i(the)d(ORB)i
(enters)d(the)i(so-called)h(`lowest)e(common)63 3359
y(denominator)22 b(mode'.)28 b(It)23 b(bends)f(over)h(backwar)n(ds)g
(to)f(cope)h(with)g(bugs)f(in)i(the)e(ORB)h(at)g(the)63
3472 y(other)18 b(end.)26 b(This)19 b(is)h(pur)n(ely)f(a)h
(transitional)g(measur)n(e.)26 b(The)19 b(long)g(term)g(solution)g(is)h
(to)f(r)n(eport)63 3584 y(the)i(bugs)h(to)g(the)g(other)g(vendors)f
(and)h(ask)h(them)f(to)g(\002x)g(them)g(expediently)-10
b(.)204 3698 y(In)35 b(some)f(\(sloppy\))g(IIOP)h(implementations,)j
(the)c(message)g(size)h(value)h(in)f(the)g(IIOP)63 3811
y(header)24 b(can)i(be)g(lar)n(ger)f(than)h(the)e(actual)j(body)e
(size,)h(i.e.)e(ther)n(e)h(is)g(garbage)h(at)f(the)g(end.)35
b(As)63 3924 y(the)30 b(spec)g(does)f(not)h(say)g(the)g(message)f(size)
i(must)f(match)i(the)e(body)g(size)h(exactly)-10 b(,)32
b(this)e(is)63 4037 y(not)d(a)h(clear)h(violation)g(of)e(the)g(spec.)43
b(omniORB's)28 b(default)f(policy)h(is)g(to)f(expect)g(incoming)63
4150 y(messages)i(to)h(be)h(formatted)f(pr)n(operly)-10
b(.)52 b(Any)30 b(messages)f(that)i(have)g(garbage)g(at)g(the)f(end)63
4263 y(will)24 b(be)e(r)n(ejected.)204 4377 y Fe(-ORBlcdMode)j
Fq(sets)j(omniORB)h(to)g(silently)g(skip)g(the)g(unr)n(ead)g(part)h(of)
f(such)h(invalid)63 4490 y(messages.)36 b(Alternatively)-10
b(,)27 b(you)e(can)i(change)f(just)f(this)h(policy)g(with)g(a)h
(command)g(line)f(ar)n(-)63 4602 y(gument)g(of)h Fe(-ORBstrictIIOP)48
b(0)p Fq(.)42 b(The)27 b(pr)n(oblem)g(with)h(doing)e(this)h(is)h(that)f
(the)g(header)63 4715 y(message)d(size)h(may)h(actually)h(be)e
(garbage,)h(caused)f(by)g(a)i(bug)e(in)h(the)e(sender)7
b('s)24 b(code.)35 b(The)63 4828 y(r)n(eceiving)28 b(thr)n(ead)f(may)h
(block)g(for)n(ever)g(as)f(it)h(tries)f(to)g(r)n(ead)h(mor)n(e)f(data)h
(fr)n(om)h(the)d(connec-)63 4941 y(tion.)35 b(In)25 b(this)g(case)h
(the)e(sender)g(won't)g(send)g(any)i(mor)n(e)f(as)g(it)h(thinks)e(it)i
(has)f(marshalled)h(in)63 5054 y(all)e(the)e(data.)204
5168 y(By)34 b(default,)k(omniORB)d(uses)f(the)g(GIOP)i(LOCA)-7
b(TE_REQUEST)34 b(message)g(to)g(verify)63 5281 y(the)25
b(existence)h(of)g(an)h(object)g(prior)f(to)g(the)f(\002rst)h
(invocation.)41 b(If)26 b(another)g(vendor)7 b('s)25
b(ORB)h(is)63 5394 y(known)j(not)h(to)g(be)h(able)h(to)e(handle)g(this)
h(GIOP)g(message,)g(you)f(can)h(disable)h(this)e(featur)n(e)p
eop
%%Page: 40 46
40 45 bop 221 282 a Fq(40)1664 b Ff(CHAPTER)21 b(6.)51
b(THE)22 b(OMNIORBPY)g(API)221 539 y Fq(with)29 b(the)e
Fe(-ORBverifyObject)o(Ex)o(is)o(ts)o(And)o(Ty)o(pe)22
b Fq(option,)29 b(and)g(hence)f(achieve)h(inter)n(-)221
652 y(operability)-10 b(.)221 973 y Fo(6.9)119 b(System)30
b(Exception)g(Handlers)221 1191 y Fq(By)21 b(default,)h(all)h(system)d
(exceptions)g(which)j(ar)n(e)f(raised)f(during)g(an)i(operation)d
(invocation,)221 1304 y(with)h(the)g(exception)f(of)h
Fe(CORBA.TRANSIENT)o Fq(,)15 b(ar)n(e)22 b(pr)n(opagated)e(to)g(the)h
(application)h(code.)221 1417 y(Some)i(applications)h(may)f(pr)n(efer)g
(to)f(trap)h(these)f(exceptions)f(within)j(the)e(pr)n(oxy)g(objects)h
(so)221 1530 y(that)29 b(the)f(application)i(logic)f(does)e(not)i(have)
g(to)f(deal)h(with)g(the)f(err)n(or)g(condition.)46 b(For)28
b(ex-)221 1643 y(ample,)f(when)e(a)i Fe(CORBA.COMM_FAI)o(LUR)o(E)20
b Fq(is)26 b(r)n(eceived,)g(an)g(application)h(may)g(just)e(want)221
1756 y(to)f(r)n(etry)g(the)f(invocation)j(until)f(it)g(\002nally)g
(succeeds.)32 b(This)24 b(appr)n(oach)h(is)g(useful)f(for)h(objects)221
1869 y(that)e(ar)n(e)g(persistent)d(and)i(their)g(operations)f(ar)n(e)i
(idempotent.)362 1985 y(omniORBpy)18 b(pr)n(ovides)f(a)h(set)f(of)h
(functions)f(to)h(install)h(exception)d(handlers.)26
b(Once)18 b(they)221 2098 y(ar)n(e)36 b(installed,)i(pr)n(oxy)c
(objects)g(will)i(call)h(these)d(handlers)g(when)g(the)h(associated)f
(system)221 2211 y(exceptions)25 b(ar)n(e)j(raised)e(by)h(the)f(ORB)h
(r)o(untime.)41 b(Handlers)26 b(can)i(be)f(installed)g(for)g
Fe(CORBA.)221 2324 y(TRANSIENT)p Fq(,)d Fe(CORBA.COMM_FAIL)o(UR)o(E)e
Fq(and)28 b Fe(CORBA.SystemExc)o(ep)o(tio)o(n)p Fq(.)38
b(This)28 b(last)221 2437 y(handler)h(covers)f(all)j(system)c
(exceptions)g(other)h(than)h(the)f(two)g(cover)n(ed)h(by)g(the)f
(\002rst)g(two)221 2550 y(handlers.)k(An)24 b(exception)g(handler)g
(can)h(be)f(installed)h(for)f(individual)i(pr)n(oxy)d(objects,)h(or)g
(it)221 2663 y(can)g(be)e(installed)h(for)f(all)j(pr)n(oxy)c(objects)h
(in)h(the)f(addr)n(ess)f(space.)221 2940 y Fj(6.9.1)99
b(CORBA.TRANSIENT)24 b(handlers)221 3125 y Fq(When)k(a)h
Fe(CORBA.TRANSIEN)o(T)23 b Fq(exception)k(is)h(raised)g(by)g(the)g(ORB)
g(r)o(untime,)i(the)d(default)221 3237 y(behaviour)d(of)f(the)f(pr)n
(oxy)h(objects)f(is)i(to)e(r)n(etry)h(inde\002nitely)f(until)h(the)g
(operation)f(succeeds,)221 3350 y(with)h(an)g(exponentially)f(incr)n
(easing)h(delay)f(\(up)g(to)g(a)i(limit\))g(between)d(r)n(etries.)362
3467 y(The)34 b(ORB)g(r)o(untime)g(will)i(raise)e Fe(CORBA.TRANSIENT)28
b Fq(under)33 b(the)g(following)i(condi-)221 3580 y(tions:)335
3811 y(1.)45 b(When)27 b(a)h Fp(cached)i Fq(network)25
b(connection)i(is)h(br)n(oken)f(while)h(an)g(operation)e(invocation)448
3924 y(is)c(in)g(pr)n(ogr)n(ess.)k(The)21 b(ORB)g(will)i(try)e(to)g
(open)g(a)h(new)f(connection)g(at)h(the)f(next)f(invoca-)448
4037 y(tion.)335 4239 y(2.)45 b(When)21 b(the)f(pr)n(oxy)h(object)g
(has)g(been)f(r)n(edir)n(ected)g(by)i(a)f(location)h(forwar)n(d)f
(message)f(by)448 4352 y(the)j(r)n(emote)f(object)g(to)h(a)g(new)f
(location)i(and)f(the)f(object)h(at)g(the)f(new)g(location)i(cannot)448
4465 y(be)34 b(contacted.)61 b(In)34 b(addition)f(to)g(the)h
Fe(CORBA.TRANSIEN)o(T)28 b Fq(exception,)35 b(the)e(pr)n(oxy)448
4578 y(object)23 b(also)g(r)n(esets)e(its)h(internal)h(state)f(so)g
(that)g(the)g(next)g(invocation)h(will)h(be)f(dir)n(ected)448
4691 y(at)g(the)f(original)i(location)f(of)f(the)g(r)n(emote)g(object.)
335 4893 y(3.)45 b(When)22 b(the)g(r)n(emote)g(object)g(r)n(eports)f
Fe(CORBA.TRANSIENT)o Fq(.)362 5124 y(Y)-8 b(ou)24 b(can)h(override)f
(the)g(default)h(behaviour)g(by)f(installing)i(your)e(own)g(exception)f
(han-)221 5237 y(dler)-7 b(.)28 b(The)22 b(function)g(to)g(call)j(has)d
(signatur)n(e:)362 5394 y Fc(omniORB)o
(.installTransientExceptionHandler)-6 b(\(cookie)o(,)49
b(function)f([,)i(object)o(]\))p eop
%%Page: 41 47
41 46 bop 63 282 a Ff(6.10.)51 b(DYNAMIC)22 b(IMPOR)m(TING)g(OF)h(IDL)
1628 b Fq(41)204 539 y(The)27 b(ar)n(guments)h(ar)n(e)g(a)h(cookie,)g
(which)f(is)h(any)f(Python)f(object,)i(a)g(call-back)i(function,)63
652 y(and)25 b(optionally)g(an)h(object)f(r)n(efer)n(ence.)34
b(If)26 b(the)e(object)h(r)n(efer)n(ence)f(is)i(pr)n(esent,)d(the)i
(exception)63 764 y(handler)32 b(is)h(installed)g(for)g(just)f(that)g
(object;)37 b(otherwise)31 b(the)h(handler)h(is)g(installed)f(for)h
(all)63 877 y(objects)22 b(with)g(no)g(handler)h(of)g(their)f(own.)204
990 y(The)g(call-back)j(function)e(must)f(have)h(the)f(signatur)n(e)204
1138 y Fc(function)n(\(cookie)o(,)50 b(retries)n(,)g(exc)o(\))g(->)f
(boolean)204 1298 y Fq(When)19 b(a)h Fe(TRANSIENT)c Fq(exception)i
(occurs,)i(the)f(function)h(is)g(called,)g(passing)f(the)g(cookie)63
1411 y(object,)24 b(a)h(count)g(of)f(how)g(many)h(times)f(the)g
(operation)g(has)g(been)g(r)n(etried,)g(and)h(the)e(TRAN-)63
1524 y(SIENT)g(exception)h(object)h(itself.)35 b(If)25
b(the)f(function)i(r)n(eturns)e(tr)o(ue,)g(the)h(operation)f(is)h(r)n
(etried;)63 1637 y(if)e(it)g(r)n(eturns)e(false,)i(the)f(TRANSIENT)d
(exception)j(is)h(raised)f(in)h(the)f(application.)63
1891 y Fj(6.9.2)99 b(CORBA.COMM_F)-5 b(AILURE)21 b(and)k
(CORBA.SystemException)63 2068 y Fq(Ther)n(e)g(ar)n(e)h(two)f(other)f
(functions)i(for)g(r)n(egistering)e(exception)h(handlers:)33
b(one)25 b(for)h Fe(CORBA.)63 2181 y(COMM_FAILURE)p Fq(,)16
b(and)22 b(one)f(for)g(all)j(other)c(exceptions.)26 b(For)21
b(both)g(these)f(cases,)i(the)f(default)63 2294 y(is)h(for)h(ther)n(e)f
(to)g(be)g(no)g(handler)-7 b(,)23 b(so)f(exceptions)f(ar)n(e)i(pr)n
(opagated)e(to)h(the)g(application.)204 2441 y Fc(omniORB)n
(.installCommFailureExceptionHandler)-6 b(\(cookie)o(,)49
b(function)g([,)g(object)o(]\))204 2541 y(omniORB)n
(.installSystemExceptionHandler)-5 b(\(cookie)o(,)49
b(function)g([,)g(object)o(]\))63 2701 y Fq(In)35 b(both)h(cases,)j
(the)c(call-back)k(function)d(has)g(the)f(same)h(signatur)n(e)f(as)i
(for)f Fe(TRANSIENT)63 2814 y Fq(handlers.)63 3112 y
Fo(6.10)118 b(Dynamic)30 b(importing)g(of)g(IDL)63 3323
y Fq(omniORBpy)24 b(is)h(usually)g(used)f(with)g(pr)n(e-generated)f
(stubs.)34 b(Since)25 b(Python)e(is)i(a)h(dynamic)63
3436 y(language,)c(however)-7 b(,)21 b(it)i(is)g(possible)f(to)g
(compile)h(and)f(import)h(new)f(stubs)f(at)i(r)o(un-time.)204
3549 y(Dynamic)e(importing)e(is)h(achieved)g(with)g Fe(omniORB.importI)
o(DL)o(\(\))13 b Fq(and)20 b Fe(omniORB.)63 3662 y(importIDLStrin)o
(g\()o(\))p Fq(.)i(Their)g(signatur)n(es)g(ar)n(e:)204
3809 y Fc(importIDL)n(\(filename)48 b([,)i(args)f(]\))g(->)h(tuple)204
3909 y(importIDLString)m(\(string)f([,)g(args)g(]\))g(->)h(tuple)204
4069 y Fq(The)37 b(\002rst)g(function)h(compiles)g(and)f(imports)g(the)
g(speci\002ed)g(\002le;)45 b(the)37 b(second)g(takes)63
4182 y(a)c(string)g(containing)g(the)f(IDL)h(de\002nitions.)58
b(The)32 b(functions)h(work)f(by)h(forking)g(omniidl)63
4295 y(and)f(importing)f(its)h(output;)j(they)c(both)h(take)f(an)i
(optional)f(ar)n(gument)f(containing)i(a)f(list)63 4408
y(of)e(strings)f(which)i(ar)n(e)g(used)d(as)j(ar)n(guments)e(for)i
(omniidl.)51 b(For)30 b(example,)i(the)d(following)63
4521 y(command)23 b(r)o(uns)f(omniidl)h(with)g(an)g(include)g(path)f
(set:)204 4668 y Fc(m)49 b(=)h(omniORB)o(.importIDL)n(\("test)o(.idl)o
(",)f(["-I/my)o(/include)o(/)o(path"]\))63 4829 y Fq(Instead)33
b(of)h(specifying)g(omniidl)i(ar)n(guments)d(on)i(each)g(import,)i(you)
c(can)j(set)d(the)h(ar)n(gu-)63 4942 y(ments)c(to)g(be)h(used)e(for)i
(all)i(calls)f(using)e(the)h Fe(omniORB.omniid)o(lA)o(rg)o(um)o(ent)o
(s\()o(\))25 b Fq(func-)63 5055 y(tion.)204 5168 y(Both)d(import)g
(functions)h(r)n(eturn)f(a)h(tuple)f(containing)h(the)f(names)h(of)g
(the)f(Python)g(mod-)63 5281 y(ules)e(which)i(have)g(been)f(imported.)
26 b(The)21 b(modules)f(themselves)g(can)i(be)f(accessed)g(thr)n(ough)
63 5394 y Fe(sys.modules)p Fq(.)i(For)e(example:)p eop
%%Page: 42 48
42 47 bop 221 282 a Fq(42)1664 b Ff(CHAPTER)21 b(6.)51
b(THE)22 b(OMNIORBPY)g(API)362 539 y Fd(//)50 b(test)o(.idl)362
638 y Fc(const)f(string)g(s)g(=)h("Hello)o(";)362 738
y(module)f(M1)g({)462 837 y(module)g(M2)g({)562 937 y(const)f(long)h(l)
h(=)g(42;)462 1037 y(};)362 1136 y(};)362 1236 y(module)f(M3)g({)462
1336 y(const)g(short)g(s)g(=)h(5;)362 1435 y(};)221 1598
y Fq(Fr)n(om)23 b(Python:)362 1747 y Fc(>>>)50 b(import)e(sys,)h
(omniORB)362 1847 y(>>>)h(omniORB)n(.importIDL)n(\("test)o(.idl")o(\))
362 1947 y(\('M1')o(,)g('M1)o(.M2',)f('M3',)g('_GlobalIDL)n('\))362
2046 y(>>>)h(sys)o(.modules)n(["M1.M2)o("].l)362 2146
y(42)362 2246 y(>>>)g(sys)o(.modules)n(["M3"].)o(s)362
2345 y(5)362 2445 y(>>>)g(sys)o(.modules)n(["_GlobalIDL)n("].s)362
2544 y('Hello)o(')p eop
%%Page: 43 49
43 48 bop 63 1177 a Fk(Chapter)44 b(7)63 1608 y Fm(Connection)51
b(Management)63 2082 y Fq(This)22 b(chapter)g(describes)g(how)g
(omniORB)g(manages)h(network)e(connections.)63 2477 y
Fo(7.1)119 b(Background)63 2720 y Fq(In)20 b(CORBA,)h(the)f(ORB)g(is)h
(the)f(`middlewar)n(e')h(that)g(allows)g(a)h(client)f(to)f(invoke)g(an)
i(operation)63 2833 y(on)27 b(an)g(object)g(without)f(r)n(egar)n(d)h
(to)g(its)g(implementation)g(or)g(location.)42 b(In)27
b(or)n(der)f(to)h(invoke)63 2946 y(an)d(operation)e(on)i(an)g(object,)f
(a)i(client)f(needs)e(to)h(`bind')h(to)f(the)g(object)h(by)f(acquiring)
i(its)e(ob-)63 3059 y(ject)29 b(r)n(efer)n(ence.)46 b(Such)30
b(a)f(r)n(efer)n(ence)g(may)g(be)g(obtained)g(as)g(the)g(r)n(esult)f
(of)h(an)h(operation)e(on)63 3172 y(another)18 b(object)i(\(such)f(as)h
(a)g(naming)h(service\))e(or)h(by)f(conversion)g(fr)n(om)h(a)h
(stringi\002ed)d(r)n(epr)n(e-)63 3285 y(sentation.)27
b(If)c(the)f(object)g(is)h(in)g(a)h(dif)n(fer)n(ent)e(addr)n(ess)g
(space,)g(the)g(binding)h(pr)n(ocess)e(involves)63 3398
y(the)27 b(ORB)h(building)g(a)h(pr)n(oxy)e(object)h(in)g(the)g
(client's)g(addr)n(ess)e(space.)44 b(The)27 b(ORB)h(arranges)63
3511 y(for)20 b(invocations)h(on)f(the)g(pr)n(oxy)g(object)g(to)g(be)h
(transpar)n(ently)e(mapped)h(to)g(equivalent)h(invo-)63
3623 y(cations)h(on)h(the)e(implementation)i(object.)204
3752 y(For)17 b(the)g(sake)f(of)i(inter)n(operability)-10
b(,)18 b(CORBA)g(mandates)f(that)h(all)h(ORBs)e(should)g(support)63
3865 y(IIOP)23 b(as)h(the)e(means)i(to)f(communicate)h(r)n(emote)f
(invocations)h(over)f(a)h(TCP/IP)f(connection.)63 3978
y(IIOP)33 b(is)h(asymmetric)h(with)e(r)n(espect)g(to)h(the)f(r)n(oles)g
(of)h(the)f(parties)h(at)g(the)f(two)g(ends)g(of)h(a)63
4091 y(connection.)27 b(At)22 b(one)f(end)h(is)g(the)g(client)h(which)g
(can)g(only)f(initiate)h(r)n(emote)f(invocations.)28
b(At)63 4204 y(the)21 b(other)h(end)g(is)g(the)g(server)g(which)h(can)g
(only)g(r)n(eceive)f(r)n(emote)g(invocations.)204 4332
y(Notice)34 b(that)h(in)h(CORBA,)f(as)g(in)h(most)e(distributed)g
(systems,)i(r)n(emote)e(bindings)h(ar)n(e)63 4445 y(established)23
b(implicitly)j(without)e(application)i(intervention.)32
b(This)24 b(pr)n(ovides)g(the)g(illusion)63 4558 y(that)34
b(all)j(objects)d(ar)n(e)i(local,)j(a)d(pr)n(operty)d(known)h(as)h
(`location)h(transpar)n(ency'.)65 b(CORBA)63 4671 y(does)20
b(not)h(specify)g(when)g(such)h(bindings)f(should)g(be)h(established)f
(or)g(how)g(they)g(should)g(be)63 4784 y(multiplexed)28
b(over)g(the)g(underlying)f(network)g(connections.)45
b(Instead,)29 b(ORBs)f(ar)n(e)h(fr)n(ee)f(to)63 4897
y(implement)22 b(implicit)j(binding)d(by)h(a)g(variety)g(of)f(means.)
204 5025 y(The)d(r)n(est)g(of)h(this)f(chapter)h(describes)f(how)g
(omniORB)h(manages)g(network)e(connections)63 5138 y(and)k(the)g(pr)n
(ogramming)h(interface)g(to)f(\002ne)g(tune)f(the)h(management)g
(policy)-10 b(.)1662 5622 y(43)p eop
%%Page: 44 50
44 49 bop 221 282 a Fq(44)1256 b Ff(CHAPTER)21 b(7.)51
b(CONNECTION)22 b(MANAGEMENT)221 539 y Fo(7.2)119 b(The)30
b(Model)221 758 y Fq(omniORB)e(is)g(designed)e(fr)n(om)i(the)f(gr)n
(ound)g(up)h(to)f(be)h(fully)g(multi-thr)n(eaded.)43
b(The)28 b(objec-)221 871 y(tive)e(is)h(to)e(maximise)i(the)e(degr)n
(ee)g(of)h(concurr)n(ency)f(and)h(at)h(the)e(same)h(time)g(eliminate)h
(any)221 984 y(unnecessary)k(thr)n(ead)h(over)n(head.)56
b(Another)31 b(objective)i(is)f(to)g(minimise)h(the)f(interfer)n(ence)
221 1097 y(by)27 b(the)f(activities)i(of)f(other)e(thr)n(eads)h(on)g
(the)g(pr)n(ogr)n(ess)f(of)i(a)h(r)n(emote)d(invocation.)42
b(In)26 b(other)221 1210 y(wor)n(ds,)i(thr)n(ead)e(`cr)n(oss-talk')i
(should)f(be)g(minimised)h(within)g(the)f(ORB.)g(T)-8
b(o)27 b(achieve)h(these)221 1323 y(objectives,)22 b(the)g(degr)n(ee)f
(of)h(multiplexing)h(at)g(every)f(level)h(is)f(kept)g(to)g(a)h
(minimum.)362 1440 y(On)33 b(the)e(client)h(side)f(of)h(a)h
(connection,)g(the)e(thr)n(ead)h(that)f(invokes)g(on)h(a)g(pr)n(oxy)f
(object)221 1553 y(drives)22 b(the)g(IIOP)g(pr)n(otocol)g(dir)n(ectly)h
(and)g(blocks)f(on)g(the)g(connection)g(to)g(r)n(eceive)h(the)f(r)n
(eply)-10 b(.)221 1666 y(On)26 b(the)e(server)g(side,)g(a)i(dedicated)d
(thr)n(ead)i(blocks)g(on)f(the)g(connection.)35 b(When)24
b(it)h(r)n(eceives)221 1779 y(a)c(r)n(equest,)e(it)i(performs)e(the)g
(up-call)j(to)e(the)g(object)g(and)g(sends)f(the)g(r)n(eply)h(when)g
(the)f(up-call)221 1892 y(r)n(eturns.)27 b(Ther)n(e)21
b(is)i(no)f(thr)n(ead)h(switching)f(along)h(the)e(call)k(chain.)362
2009 y(W)-5 b(ith)33 b(this)g(design,)h(ther)n(e)f(is)g(at)g(most)g
(one)f(call)j(in-\003ight)f(at)f(any)g(time)g(on)g(a)h(connec-)221
2122 y(tion.)53 b(If)31 b(ther)n(e)f(is)i(only)e(one)h(connection,)h
(concurr)n(ent)f(invocations)g(to)g(the)f(same)h(r)n(emote)221
2235 y(addr)n(ess)24 b(space)h(would)g(have)g(to)g(be)g(serialised.)35
b(T)-8 b(o)25 b(eliminate)h(this)f(limitation,)i(omniORB)221
2348 y(implements)g(a)i(dynamic)f(policy\227multiple)h(connections)d
(to)i(the)f(same)h(r)n(emote)e(addr)n(ess)221 2461 y(space)21
b(ar)n(e)g(cr)n(eated)g(on)f(demand)h(and)g(cached)g(when)f(ther)n(e)g
(ar)n(e)i(concurr)n(ent)e(invocations)i(in)221 2573 y(pr)n(ogr)n(ess.)
362 2691 y(T)-8 b(o)26 b(be)g(mor)n(e)g(pr)n(ecise,)g(a)h(network)d
(connection)i(to)f(another)h(addr)n(ess)f(space)g(is)i(only)f(es-)221
2804 y(tablished)f(when)g(a)h(r)n(emote)f(invocation)h(is)g(about)f(to)
g(be)g(made.)36 b(Ther)n(efor)n(e,)25 b(ther)n(e)f(may)i(be)221
2917 y(one)f(or)f(mor)n(e)h(object)g(r)n(efer)n(ences)f(in)i(one)e
(addr)n(ess)g(space)h(that)g(r)n(efer)g(to)f(objects)h(in)g(a)h(dif)n
(fer)n(-)221 3029 y(ent)e(addr)n(ess)g(space)g(but)h(unless)f(the)g
(application)i(invokes)e(on)h(these)e(objects,)h(no)h(network)221
3142 y(connection)d(is)h(made.)362 3260 y(It)33 b(is)h(wasteful)f(to)g
(leave)h(a)g(connection)f(open)f(when)h(it)g(has)h(been)f(left)g
(unused)f(for)h(a)221 3372 y(considerable)23 b(time.)31
b(T)-8 b(oo)22 b(many)i(idle)f(connections)g(could)g(block)h(out)e(new)
h(connections)g(to)221 3485 y(a)32 b(server)e(when)g(it)h(r)o(uns)g
(out)f(of)h(spar)n(e)g(communication)h(channels.)54 b(For)30
b(example,)j(most)221 3598 y(Unix)27 b(platforms)f(have)g(a)h(limit)h
(on)e(the)f(number)h(of)h(\002le)f(handles)g(a)g(pr)n(ocess)f(can)i
(open.)38 b(64)221 3711 y(is)23 b(the)f(usual)h(default)g(limit.)29
b(The)22 b(value)i(can)f(be)g(incr)n(eased)g(to)f(a)h(maximum)h(of)f(a)
g(thousand)221 3824 y(or)f(mor)n(e)h(by)f(changing)h(the)f(`ulimit')i
(in)f(the)f(shell.)221 4149 y Fo(7.3)119 b(Idle)29 b(Connection)i
(Shutdown)f(and)g(Remote)g(Call)g(T)-7 b(imeout)221 4369
y Fq(Inside)19 b(the)g(ORB,)g(a)h(thr)n(ead)f(is)h(dedicated)e(to)i
(scan)g(for)f(idle)h(connections.)26 b(The)19 b(thr)n(ead)g(looks)221
4482 y(after)k(both)f(the)g(outgoing)f(connections)g(and)i(the)f
(incoming)h(connections.)362 4599 y(When)33 b(a)h(connection)e(is)h
(idle)h(for)f(a)g(period)f(of)i(time,)h(the)e(connection)f(is)h
(shutdown.)221 4712 y(Similarly)-10 b(,)32 b(if)d(a)h(r)n(emote)d(call)
k(has)d(not)g(completed)g(within)h(a)g(de\002ned)e(period)g(of)i(time,)
h(the)221 4825 y(connection)22 b(is)h(shutdown)e(and)h(the)g(ORB)g
(will)i(r)n(eturn)e Fe(COMM_FAILURE)17 b Fq(to)22 b(the)g(client.)362
4942 y(How)d(often)g(the)h(internal)g(thr)n(ead)f(scans)h(the)f
(connections)g(is)h(determined)e(by)i(the)f(value)221
5055 y(of)31 b(the)f Fp(scan)h(granularity)p Fq(.)55
b(This)31 b(value)h(is)f(defaulted)e(to)i(5)g(seconds)e(and)i(can)h(be)
f(changed)221 5168 y(using)d(the)f(command-line)i(option)e
Fe(-ORBscanGranula)o(ri)o(ty)o Fq(.)39 b(Notice)27 b(that)h(this)f
(value)221 5281 y(determines)18 b(the)i(pr)n(ecision)g(the)g(ORB)g(is)g
(able)i(to)d(keep)g(to)h(the)f(value)i(of)g(the)e(idle)i(connection)221
5394 y(or)h(r)n(emote)g(call)j(timeout.)p eop
%%Page: 45 51
45 50 bop 63 282 a Ff(7.4.)51 b(INTEROPERABILITY)18 b(CONSIDERA)-7
b(TIONS)1285 b Fq(45)204 539 y(How)26 b(long)g(the)g(ORB)g(will)i(wait)
f(befor)n(e)f(it)h(shuts)e(down)h(an)h(idle)g(connection)f(is)h(deter)n
(-)63 652 y(mined)e(by)g(the)f(idleConnectionPeriods.)33
b(Ther)n(e)24 b(ar)n(e)i(separate)d(values)j(for)f(incoming)h(and)63
764 y(outgoing)j(connections.)51 b(The)30 b(default)h(values)g(ar)n(e)h
(180)g(and)f(120)h(seconds)d(for)i(incoming)63 877 y(and)k(outgoing)e
(connections)h(r)n(espectively)-10 b(.)63 b(These)34
b(values)h(can)h(be)f(changed)f(using)g(the)63 990 y(command-line)23
b(options)f Fe(-ORBinConScanP)o(er)o(io)o(d)17 b Fq(and)22
b Fe(-ORBoutConScanPe)o(ri)o(od)o Fq(.)204 1103 y(Similarly)-10
b(,)34 b(how)c(long)h(the)f(ORB)h(will)h(wait)f(for)g(a)g(r)n(emote)f
(call)j(to)d(complete)g(is)h(deter)n(-)63 1216 y(mined)18
b(by)g(the)f(parameter)h(clientCallT)-5 b(imeOutPeriod)19
b(for)f(the)f(client)i(side)e(and)i(the)e(server)n(-)63
1329 y(CallT)-5 b(imeOutPer)n(oid)27 b(for)e(the)g(server)g(side.)36
b(By)25 b(default)h(calls)h(will)g(not)e(timeout)g(on)g(either)63
1442 y(the)c(client)j(or)e(server)f(side.)204 1555 y(The)f(timeout)g
(can)i(be)g(changed)e(with)h(the)g Fe(-ORBclientCall)o(Ti)o(me)o(Ou)o
(tPe)o(ri)o(od)15 b Fq(and)63 1668 y Fe(-ORBserverCall)o(Ti)o(me)o(Out)
o(Pe)o(ri)o(od)e Fq(options.)25 b(The)18 b(scan)i(can)g(be)f(disabled)g
(completely)63 1781 y(by)j(setting)f(the)h(scan)h(granularity)g(to)f
(0.)63 2078 y Fo(7.4)119 b(Interoperability)27 b(Considerations)63
2289 y Fq(The)k(IIOP)h(speci\002cation)g(allows)h(both)e(the)h(client)g
(and)h(the)e(server)g(to)h(shutdown)e(a)i(con-)63 2402
y(nection)27 b(unilaterally)-10 b(.)45 b(When)27 b(one)g(end)g(is)h
(about)g(to)g(shutdown)d(a)k(connection,)f(it)h(should)63
2515 y(send)18 b(a)j(closeConnection)d(message)h(to)g(the)g(other)g
(end.)26 b(It)19 b(should)g(also)h(make)g(sur)n(e)f(that)g(the)63
2627 y(message)i(will)j(r)n(each)f(the)f(other)f(end)h(befor)n(e)g(it)h
(pr)n(oceeds)e(to)h(shutdown)e(the)i(connection.)204
2740 y(The)35 b(client)i(should)e(distinguish)g(between)g(an)i(or)n
(derly)e(and)h(an)h(abnormal)g(connec-)63 2853 y(tion)23
b(shutdown.)30 b(When)24 b(a)g(client)h(r)n(eceives)e(a)i
(closeConnection)e(message)f(befor)n(e)i(the)f(con-)63
2966 y(nection)28 b(is)g(closed,)h(the)e(condition)h(is)h(an)g(or)n
(derly)e(shutdown.)43 b(If)29 b(the)e(message)g(is)i(not)e(r)n(e-)63
3079 y(ceived,)34 b(the)e(condition)g(is)g(an)h(abnormal)h(shutdown.)54
b(In)32 b(an)h(abnormal)h(shutdown,)e(the)63 3192 y(ORB)e(should)f
(raise)i(a)g Fe(COMM_FAILURE)25 b Fq(exception)k(wher)n(eas)h(in)h(an)f
(or)n(derly)g(shutdown,)63 3305 y(the)19 b(ORB)h(should)f
Fp(not)i Fq(raise)f(an)h(exception)e(and)h(should)g(try)f(to)h(r)n
(e-establish)g(a)h(new)e(connec-)63 3418 y(tion)j(transpar)n(ently)-10
b(.)204 3531 y(omniORB)27 b(implements)g(these)e(semantics)i
(completely)-10 b(.)40 b(However)-7 b(,)27 b(it)h(is)f(known)f(that)63
3644 y(some)34 b(ORBs)h(ar)n(e)h(not)f(\(yet\))g(able)i(to)e
(distinguish)f(between)g(an)i(or)n(derly)f(and)h(an)g(abnor)n(-)63
3757 y(mal)g(shutdown.)63 b(Usually)35 b(this)g(is)g(manifested)g(as)g
(the)f(client)i(in)f(these)f(ORBs)g(seeing)g(a)63 3869
y Fe(COMM_FAILURE)23 b Fq(occasionally)30 b(when)d(connected)g(to)h(an)
h(omniORB)g(server)-7 b(.)44 b(The)28 b(work-)63 3982
y(ar)n(ound)23 b(is)g(either)g(to)f(catch)j(the)d(exception)g(in)i(the)
f(application)h(code)f(and)g(r)n(etry)-10 b(,)22 b(or)h(to)g(turn)63
4095 y(of)n(f)g(the)f(idle)g(connection)h(shutdown)d(inside)i(the)g
(omniORB)h(server)-7 b(.)63 4392 y Fo(7.5)119 b(Connection)30
b(Acceptance)63 4603 y Fq(omniORB)25 b(pr)n(ovides)f(the)h(hook)f(to)g
(implement)h(a)h(connection)f(acceptance)g(policy)-10
b(.)36 b(Inside)63 4716 y(the)e(ORB)i(r)o(untime,)i(a)e(thr)n(ead)f(is)
h(dedicated)e(to)h(r)n(eceive)g(new)g(connections.)65
b(When)35 b(the)63 4829 y(thr)n(ead)20 b(is)i(given)f(the)f(handle)h
(of)g(a)h(new)f(connection)f(by)i(the)e(operating)g(system,)f(it)j
(calls)g(the)63 4942 y(policy)f(module)g(to)g(decide)g(if)h(the)f
(connection)g(can)h(be)g(accepted.)k(If)c(the)f(answer)f(is)i(yes,)e
(the)63 5055 y(ORB)31 b(will)i(start)e(serving)g(r)n(equests)e(coming)j
(in)g(fr)n(om)g(that)g(connection.)54 b(Otherwise,)32
b(the)63 5168 y(connection)22 b(is)g(shutdown)f(immediately)-10
b(.)204 5281 y(Ther)n(e)26 b(can)i(be)f(a)h(number)f(of)h(policy)f
(module)g(implementations.)41 b(The)27 b(basic)h(one)f(is)g(a)63
5394 y(dummy)22 b(module)g(which)h(just)f(accepts)g(every)g
(connection.)p eop
%%Page: 46 52
46 51 bop 221 282 a Fq(46)1256 b Ff(CHAPTER)21 b(7.)51
b(CONNECTION)22 b(MANAGEMENT)362 539 y Fq(In)g(addition,)f(a)h
(host-based)f(access)g(contr)n(ol)h(module)f(is)h(available)j(on)d
(Unix)f(platforms.)221 652 y(The)33 b(module)g(uses)f(the)h(IP)g(addr)n
(ess)f(of)h(the)g(client)h(to)f(decide)g(if)h(the)f(connection)g(can)h
(be)221 764 y(accepted.)66 b(The)35 b(module)g(is)h(implemented)e
(using)h Fp(tcp_wrappers)40 b(7.6)p Fq(.)67 b(The)35
b(access)h(con-)221 877 y(tr)n(ol)28 b(policy)g(can)h(be)f(de\002ned)e
(as)i(r)o(ules)g(in)g(two)f(access)h(contr)n(ol)g(\002les:)38
b Fe(hosts.allow)23 b Fq(and)221 990 y Fe(hosts.deny)p
Fq(.)52 b(The)32 b(syntax)f(of)i(the)e(r)o(ules)h(is)g(described)f(in)i
(the)e(manual)j(page)e Fe(hosts_)221 1103 y(access\(5\))24
b Fq(which)29 b(can)g(be)f(found)g(in)g(appendix)g(A.)44
b(The)27 b(syntax)h(de\002nes)e(a)j(simple)f(ac-)221
1216 y(cess)23 b(contr)n(ol)g(language)g(that)h(is)f(based)g(on)g
(client)h(\(host)f(name/addr)n(ess,)f(user)g(name\),)i(and)221
1329 y(server)i(\(pr)n(ocess)g(name,)i(host)e(name/addr)n(ess\))g
(patterns.)40 b(When)26 b(sear)n(ching)i(for)f(a)g(match)221
1442 y(on)f(the)g(server)f(pr)n(ocess)g(name,)i(the)e(ORB)h(uses)f(the)
h(value)h(of)f Fe(omniORB::serve)o(rNa)o(me)o Fq(.)221
1555 y Fe(ORB_init\(\))18 b Fq(uses)j(the)g(ar)n(gument)h
Fe(argv[0])d Fq(to)j(set)f(the)h(default)g(value)h(of)f(this)g
(variable.)221 1668 y(This)32 b(can)h(be)g(overridden)d(by)j(the)e
(application)j(with)e(the)f Fe(-ORBserverName)48 b Fq(<)p
Fp(string)p Fq(>)221 1781 y(command)23 b(line)g(ar)n(gument)362
1894 y(The)h(default)g(location)h(of)g(the)e(access)i(contr)n(ol)f
(\002les)g(is)g Fe(/etc)p Fq(.)32 b(This)24 b(can)h(be)g(overridden)221
2006 y(by)e(the)f(extra)g(options)f(in)i Fe(omniORB.cfg)p
Fq(.)g(For)f(instance:)221 2206 y Fc(#)50 b(omniORB)e(configuration)g
(file)h(-)g(extra)g(options)221 2405 y(GATEKEEPER_ALLOWFILE)146
b(/project/omni/var/hosts.allow)221 2604 y(GATEKEEPER_DENYFILE)196
b(/project/omni/var/hosts.deny)362 2916 y Fq(As)18 b(each)g(policy)h
(module)e(is)i(implemented)e(as)h(a)h(separate)e(library)-10
b(,)20 b(the)d(choice)i(of)f(policy)221 3029 y(module)34
b(is)h(determined)e(at)i(pr)n(ogram)g(linkage)f(time.)65
b(For)34 b(instance,)j(if)f(the)e(host-based)221 3142
y(access)23 b(contr)n(ol)f(module)g(is)h(in)g(use:)221
3341 y Fc(\045)50 b(eg1)f(-ORBtraceLevel)e(2)221 3441
y(omniORB)i(gateKeeper)f(is)h(tcpwrapGK)f(1.0)h(-)h(based)f(on)g
(tcp_wrappers_7.6)221 3541 y(I)h(said,"Hello!".)d(The)i(Object)g
(said,"Hello!")221 3753 y Fq(Wher)n(eas)22 b(if)i(the)d(dummy)i(module)
f(is)g(in)h(use:)221 3952 y Fc(\045)50 b(eg1)f(-ORBtraceLevel)e(2)221
4052 y(omniORB)i(gateKeeper)f(is)h(not)g(installed.)f(All)h(incoming)g
(are)g(accepted.)221 4152 y(I)h(said,"Hello!".)d(The)i(Object)g
(said,"Hello!")p eop
%%Page: 47 53
47 52 bop 63 1163 a Fk(Appendix)44 b(A)63 1579 y Fm(hosts_access\(5\))
63 2029 y Fj(DESCRIPTION)63 2209 y Fq(This)19 b(manual)h(page)f
(describes)f(a)h(simple)g(access)g(contr)n(ol)h(language)f(that)f(is)i
(based)e(on)h(client)63 2322 y(\(host)27 b(name/addr)n(ess,)i(user)e
(name\),)j(and)f(server)e(\(pr)n(ocess)g(name,)j(host)d(name/addr)n
(ess\))63 2435 y(patterns.)48 b(Examples)30 b(ar)n(e)h(given)f(at)g
(the)g(end.)49 b(The)30 b(impatient)g(r)n(eader)f(is)i(encouraged)d(to)
63 2548 y(skip)22 b(to)g(the)f(EXAMPLES)g(section)h(for)g(a)h(quick)g
(intr)n(oduction.)204 2662 y(An)k(extended)e(version)i(of)h(the)f
(access)h(contr)n(ol)g(language)f(is)h(described)f(in)h(the)f(hosts_)63
2775 y(options\(5\))37 b(document.)74 b(The)38 b(extensions)e(ar)n(e)i
(turned)f(on)h(at)g(pr)n(ogram)g(build)h(time)g(by)63
2888 y(building)23 b(with)f(-DPROCESS_OPTIONS.)204 3002
y(In)32 b(the)f(following)h(text,)i Fp(daemon)f Fq(is)f(the)f(pr)n
(ocess)g(name)i(of)f(a)h(network)d(daemon)i(pr)n(o-)63
3115 y(cess,)25 b(and)g Fp(client)h Fq(is)g(the)f(name)g(and/or)g(addr)
n(ess)f(of)i(a)g(host)e(r)n(equesting)g(service.)36 b(Network)63
3228 y(daemon)22 b(pr)n(ocess)f(names)h(ar)n(e)h(speci\002ed)f(in)h
(the)f(inetd)g(con\002guration)g(\002le.)63 3492 y Fj(ACCESS)i(CONTROL)
h(FILES)63 3672 y Fq(The)d(access)g(contr)n(ol)h(softwar)n(e)f
(consults)f(two)h(\002les.)28 b(The)21 b(sear)n(ch)i(stops)e(at)i(the)f
(\002rst)f(match:)199 3892 y Fn(\017)46 b Fq(Access)25
b(will)j(be)e(granted)f(when)h(a)h(\(daemon,client\))f(pair)h(matches)f
(an)h(entry)e(in)h(the)290 4004 y Fe(/etc/hosts.allo)o(w)16
b Fq(\002le.)199 4198 y Fn(\017)46 b Fq(Otherwise,)37
b(access)e(will)h(be)f(denied)f(when)h(a)g(\(daemon,client\))g(pair)h
(matches)f(an)290 4311 y(entry)21 b(in)i(the)f Fe(/etc/hosts.deny)16
b Fq(\002le.)199 4504 y Fn(\017)46 b Fq(Otherwise,)21
b(access)i(will)h(be)e(granted.)204 4724 y(A)30 b(non-existing)g
(access)g(contr)n(ol)h(\002le)g(is)f(tr)n(eated)g(as)g(if)i(it)f(wer)n
(e)e(an)j(empty)d(\002le.)52 b(Thus,)63 4837 y(access)22
b(contr)n(ol)h(can)g(be)g(turned)e(of)n(f)i(by)g(pr)n(oviding)f(no)h
(access)f(contr)n(ol)h(\002les.)63 5101 y Fj(ACCESS)h(CONTROL)h(RULES)
63 5281 y Fq(Each)i(access)g(contr)n(ol)h(\002le)f(consists)f(of)h(zer)
n(o)g(or)g(mor)n(e)g(lines)h(of)f(text.)40 b(These)26
b(lines)h(ar)n(e)h(pr)n(o-)63 5394 y(cessed)20 b(in)k(or)n(der)d(of)i
(appearance.)28 b(The)22 b(sear)n(ch)g(terminates)g(when)g(a)h(match)g
(is)g(found.)1662 5622 y(47)p eop
%%Page: 48 54
48 53 bop 221 282 a Fq(48)1764 b Ff(APPENDIX)21 b(A.)45
b(HOSTS_ACCESS\(5\))358 539 y Fn(\017)g Fq(A)24 b(newline)f(character)h
(is)g(ignor)n(ed)f(when)f(it)i(is)g(pr)n(eceded)e(by)h(a)h(backslash)g
(character)-7 b(.)448 652 y(This)23 b(permits)f(you)f(to)h(br)n(eak)h
(up)f(long)g(lines)h(so)f(that)g(they)g(ar)n(e)h(easier)f(to)g(edit.)
358 883 y Fn(\017)45 b Fq(Blank)29 b(lines)g(or)f(lines)h(that)f(begin)
h(with)f(a)i Fe(#)e Fq(character)h(ar)n(e)g(ignor)n(ed.)46
b(This)28 b(permits)448 996 y(you)22 b(to)g(insert)g(comments)g(and)g
(whitespace)g(so)g(that)g(the)g(tables)h(ar)n(e)g(easier)f(to)g(r)n
(ead.)358 1227 y Fn(\017)45 b Fq(All)30 b(other)d(lines)i(should)f
(satisfy)g(the)g(following)h(format,)h(things)e(between)f([])i(being)
448 1340 y(optional:)f Fe(daemon_list)50 b(:)108 b(client_list)50
b([)k(:)109 b(shell_command)48 b(])362 1607 y(daemon_list)20
b Fq(is)25 b(a)h(list)f(of)g(one)f(or)h(mor)n(e)g(daemon)f(pr)n(ocess)g
(names)h(\(ar)n(gv[0])h(values\))221 1720 y(or)c(wildcar)n(ds)i(\(see)d
(below\).)362 1844 y Fe(client_list)g Fq(is)26 b(a)h(list)f(of)g(one)f
(or)g(mor)n(e)h(host)f(names,)h(host)f(addr)n(esses,)f(patterns)g(or)
221 1957 y(wildcar)n(ds)c(\(see)f(below\))h(that)f(will)i(be)f(matched)
f(against)h(the)f(client)h(host)e(name)i(or)g(addr)n(ess.)362
2081 y(The)k(mor)n(e)g(complex)g(forms)g Fe(daemon@host)19
b Fq(and)24 b Fe(user@host)c Fq(ar)n(e)25 b(explained)e(in)i(the)221
2194 y(sections)20 b(on)g(server)g(endpoint)f(patterns)g(and)i(on)f
(client)h(username)f(lookups,)f(r)n(espectively)-10 b(.)362
2318 y(List)22 b(elements)f(should)h(be)h(separated)e(by)h(blanks)h
(and/or)f(commas.)362 2442 y(W)-5 b(ith)25 b(the)e(exception)g(of)i
(NIS)e(\(YP\))i(netgr)n(oup)d(lookups,)h(all)j(access)e(contr)n(ol)h
(checks)f(ar)n(e)221 2554 y(case)f(insensitive.)221 2876
y Fj(P)-7 b(A)e(TTERNS)221 3075 y Fq(The)22 b(access)h(contr)n(ol)f
(language)h(implements)f(the)f(following)i(patterns:)358
3343 y Fn(\017)45 b Fq(A)29 b(string)f(that)g(begins)g(with)h(a)g
Fe(.)46 b Fq(character)-7 b(.)47 b(A)29 b(host)e(name)i(is)g(matched)f
(if)i(the)e(last)448 3456 y(components)17 b(of)h(its)f(name)i(match)f
(the)f(speci\002ed)g(pattern.)25 b(For)17 b(example,)i(the)e(pattern)
448 3569 y Fe(.tue.nl)j Fq(matches)i(the)g(host)g(name)h
Fe(wzv.win.tue.nl)o Fq(.)358 3800 y Fn(\017)45 b Fq(A)29
b(string)e(that)h(ends)f(with)i(a)g Fe(.)45 b Fq(character)-7
b(.)46 b(A)28 b(host)g(addr)n(ess)f(is)h(matched)g(if)i(its)e(\002rst)
448 3913 y(numeric)h(\002elds)e(match)i(the)e(given)h(string.)43
b(For)27 b(example,)i(the)e(pattern)g Fe(131.155.)448
4026 y Fq(matches)22 b(the)e(addr)n(ess)g(of)h(\(almost\))h(every)e
(host)g(on)h(the)g(Eindhoven)f(University)h(net-)448
4139 y(work)h(\()p Fe(131.155.x.x)p Fq(\).)358 4370 y
Fn(\017)45 b Fq(A)34 b(string)f(that)g(begins)g(with)h(an)68
b(character)34 b(is)g(tr)n(eated)e(as)i(an)g(NIS)f(\(formerly)g(YP\))
448 4483 y(netgr)n(oup)16 b(name.)27 b(A)18 b(host)e(name)j(is)f
(matched)f(if)i(it)f(is)g(a)h(host)d(member)i(of)g(the)f(speci\002ed)
448 4596 y(netgr)n(oup.)43 b(Netgr)n(oup)25 b(matches)j(ar)n(e)h(not)e
(supported)e(for)j(daemon)g(pr)n(ocess)e(names)448 4709
y(or)d(for)f(client)h(user)f(names.)358 4940 y Fn(\017)45
b Fq(An)20 b(expr)n(ession)e(of)h(the)g(form)h Fe(n.n.n.n/m.m.m.m)13
b Fq(is)20 b(interpr)n(eted)d(as)j(a)g(`net/mask')448
5053 y(pair)-7 b(.)29 b(A)21 b(host)f(addr)n(ess)g(is)h(matched)g(if)h
(`net')f(is)g(equal)h(to)e(the)h(bitwise)g(AND)g(of)g(the)g(ad-)448
5166 y(dr)n(ess)26 b(and)h(the)g(`mask'.)41 b(For)27
b(example,)g(the)g(net/mask)f(pattern)g Fe(131.155.72.0/)448
5279 y(255.255.254.0)34 b Fq(matches)40 b(every)e(addr)n(ess)g(in)j
(the)d(range)h Fe(131.155.72.0)c Fq(to)448 5392 y Fe(131.155.73.255)p
Fq(.)p eop
%%Page: 49 55
49 54 bop 3261 282 a Fq(49)63 539 y Fj(WILDCARDS)63 723
y Fq(The)22 b(access)g(contr)n(ol)h(language)f(supports)e(explicit)j
(wildcar)n(ds:)63 953 y Fe(ALL)290 1066 y Fq(The)f(universal)h(wildcar)
n(d,)g(always)g(matches.)63 1268 y Fe(LOCAL)290 1381
y Fq(Matches)f(any)h(host)e(whose)g(name)i(does)e(not)h(contain)h(a)g
(dot)f(character)-7 b(.)63 1583 y Fe(UNKNOWN)290 1696
y Fq(Matches)34 b(any)g(user)f(whose)f(name)j(is)f(unknown,)h(and)f
(matches)g(any)g(host)f(whose)290 1809 y(name)26 b(or)g(addr)n(ess)f
(ar)n(e)h(unknown.)37 b(This)26 b(pattern)f(should)g(be)h(used)e(with)i
(car)n(e:)36 b(host)290 1922 y(names)26 b(may)h(be)f(unavailable)j(due)
d(to)g(temporary)f(name)i(server)e(pr)n(oblems.)39 b(A)26
b(net-)290 2035 y(work)e(addr)n(ess)f(will)j(be)f(unavailable)j(when)c
(the)g(softwar)n(e)g(cannot)h(\002gur)n(e)g(out)f(what)290
2148 y(type)d(of)i(network)d(it)j(is)g(talking)g(to.)63
2350 y Fe(KNOWN)290 2463 y Fq(Matches)e(any)h(user)f(whose)g(name)h(is)
g(known,)e(and)i(matches)g(any)g(host)f(whose)f(name)290
2576 y(and)26 b(addr)n(ess)f(ar)n(e)h(known.)37 b(This)26
b(pattern)f(should)g(be)h(used)f(with)h(car)n(e:)36 b(host)25
b(names)290 2689 y(may)36 b(be)f(unavailable)j(due)c(to)g(temporary)g
(name)i(server)e(pr)n(oblems.)65 b(A)35 b(network)290
2802 y(addr)n(ess)26 b(will)k(be)e(unavailable)i(when)d(the)h(softwar)n
(e)f(cannot)h(\002gur)n(e)f(out)g(what)h(type)290 2914
y(of)23 b(network)d(it)j(is)g(talking)g(to.)63 3117 y
Fe(PARANOID)290 3229 y Fq(Matches)34 b(any)g(host)f(whose)g(name)h
(does)f(not)g(match)i(its)f(addr)n(ess.)61 b(When)34
b(tcpd)f(is)290 3342 y(built)24 b(with)f(-DP)-8 b(ARANOID)22
b(\(default)i(mode\),)e(it)h(dr)n(ops)f(r)n(equests)f(fr)n(om)j(such)f
(clients)290 3455 y(even)17 b(befor)n(e)h(looking)f(at)i(the)e(access)h
(contr)n(ol)g(tables.)26 b(Build)18 b(without)f(-DP)-8
b(ARANOID)290 3568 y(when)22 b(you)g(want)g(mor)n(e)h(contr)n(ol)f
(over)g(such)h(r)n(equests.)63 3845 y Fj(OPERA)-9 b(TORS)63
4029 y Fe(EXCEPT)290 4142 y Fq(Intended)16 b(use)i(is)h(of)g(the)f
(form:)26 b Fe(list_1)16 b(EXCEPT)g(list_2)p Fq(;)h(this)i(constr)o
(uct)f(matches)290 4255 y(anything)h(that)g(matches)g
Fe(list_1)d Fq(unless)i(it)i(matches)f Fe(list_2)p Fq(.)24
b(The)18 b Fe(EXCEPT)f Fq(oper)n(-)290 4368 y(ator)i(can)g(be)g(used)f
(in)h Fe(daemon_lists)14 b Fq(and)19 b(in)g Fe(client_lists)p
Fq(.)i(The)e Fe(EXCEPT)d Fq(op-)290 4481 y(erator)24
b(can)h(be)g(nested:)30 b(if)25 b(the)f(contr)n(ol)h(language)g(would)f
(permit)g(the)g(use)g(of)g(par)n(en-)290 4594 y(theses,)30
b Fe(a)54 b(EXCEPT)e(b)i(EXCEPT)e(c)30 b Fq(would)g(parse)f(as)i
Fe(\(a)54 b(EXCEPT)e(\(b)h(EXCEPT)290 4707 y(c\)\))p
Fq(.)63 4984 y Fj(SHELL)24 b(COMMANDS)63 5168 y Fq(If)k(the)g
(\002rst-matched)g(access)g(contr)n(ol)h(r)o(ule)f(contains)h(a)g
(shell)f(command,)j(that)d(command)63 5281 y(is)d(subjected)f(to)h
Fe(\045<letter>)c Fq(substitutions)j(\(see)g(next)g(section\).)36
b(The)24 b(r)n(esult)h(is)h(executed)63 5394 y(by)34
b(a)g(/bin/sh)h(child)f(pr)n(ocess)f(with)h(standar)n(d)g(input,)i
(output)c(and)i(err)n(or)g(connected)e(to)p eop
%%Page: 50 56
50 55 bop 221 282 a Fq(50)1764 b Ff(APPENDIX)21 b(A.)45
b(HOSTS_ACCESS\(5\))221 539 y Fq(/dev/null.)54 b(Specify)31
b(an)h Fe(&)f Fq(at)g(the)g(end)f(of)i(the)e(command)i(if)g(you)f(do)f
(not)h(want)g(to)g(wait)221 652 y(until)23 b(it)g(has)g(completed.)362
765 y(Shell)35 b(commands)g(should)e(not)h(r)n(ely)h(on)f(the)f(P)-8
b(A)h(TH)34 b(setting)f(of)h(the)g(inetd.)63 b(Instead,)221
878 y(they)20 b(should)h(use)f(absolute)h(path)g(names,)g(or)g(they)f
(should)g(begin)h(with)h(an)f(explicit)h Fe(PATH=)221
991 y(whatever)d Fq(statement.)362 1104 y(The)i(hosts_options\(5\))f
(document)h(describes)f(an)i(alternative)h(language)e(that)h(uses)e
(the)221 1217 y(shell)j(command)g(\002eld)f(in)h(a)h(dif)n(fer)n(ent)e
(and)h(incompatible)g(way)-10 b(.)221 1475 y Fj(\045)25
b(EXP)-7 b(ANSIONS)221 1653 y Fq(The)22 b(following)h(expansions)e(ar)n
(e)i(available)j(within)d(shell)f(commands:)21 1868 y
Fe(\045a)54 b(\(\045A\))43 b Fq(The)22 b(client)h(\(server\))g(host)e
(addr)n(ess.)294 2058 y Fe(\045c)44 b Fq(Client)37 b(information:)54
b(user@host,)36 b(user@addr)n(ess,)g(a)h(host)d(name,)39
b(or)c(just)h(an)g(ad-)448 2171 y(dr)n(ess,)21 b(depending)g(on)h(how)g
(much)h(information)g(is)g(available.)294 2361 y Fe(\045d)44
b Fq(The)22 b(daemon)g(pr)n(ocess)g(name)h(\(ar)n(gv[0])h(value\).)21
2551 y Fe(\045h)54 b(\(\045H\))43 b Fq(The)22 b(client)h(\(server\))g
(host)e(name)i(or)f(addr)n(ess,)f(if)i(the)f(host)g(name)h(is)f
(unavailable.)21 2740 y Fe(\045n)54 b(\(\045N\))43 b
Fq(The)22 b(client)h(\(server\))g(host)e(name)i(\(or)f("unknown")f(or)h
("paranoid"\).)294 2930 y Fe(\045p)44 b Fq(The)22 b(daemon)g(pr)n
(ocess)g(id.)294 3120 y Fe(\045s)44 b Fq(Server)17 b(information:)25
b(daemon@host,)16 b(daemon@addr)n(ess,)g(or)h(just)g(a)g(daemon)g
(name,)448 3233 y(depending)k(on)h(how)g(much)h(information)g(is)g
(available.)294 3423 y Fe(\045u)44 b Fq(The)22 b(client)h(user)f(name)h
(\(or)f("unknown"\).)294 3612 y Fe(\045\045)44 b Fq(Expands)22
b(to)g(a)h(single)f Fe(\045)g Fq(character)-7 b(.)362
3828 y(Characters)27 b(in)f(\045)g(expansions)f(that)h(may)g(confuse)f
(the)g(shell)h(ar)n(e)h(r)n(eplaced)f(by)g(under)n(-)221
3940 y(scor)n(es.)221 4199 y Fj(SER)-7 b(VER)24 b(ENDPOINT)g(P)-7
b(A)e(TTERNS)221 4376 y Fq(In)33 b(or)n(der)f(to)h(distinguish)f
(clients)i(by)f(the)g(network)e(addr)n(ess)h(that)h(they)f(connect)h
(to,)i(use)221 4489 y(patterns)21 b(of)i(the)f(form:)362
4603 y Fe(process_name@ho)o(st_)o(pa)o(tt)o(er)o(n)48
b(:)109 b(client_list)50 b(...)362 4716 y Fq(Patterns)34
b(like)g(these)f(can)i(be)g(used)e(when)h(the)g(machine)h(has)g(dif)n
(fer)n(ent)f(internet)g(ad-)221 4829 y(dr)n(esses)28
b(with)i(dif)n(fer)n(ent)f(internet)g(hostnames.)48 b(Service)30
b(pr)n(oviders)f(can)i(use)e(this)g(facility)221 4942
y(to)e(of)n(fer)h(FTP)-12 b(,)27 b(GOPHER)g(or)h(WWW)f(ar)n(chives)i
(with)e(internet)g(names)g(that)h(may)g(even)f(be-)221
5055 y(long)g(to)g(dif)n(fer)n(ent)h(or)n(ganisations.)42
b(See)27 b(also)g(the)g(`twist')g(option)g(in)h(the)f
(hosts_options\(5\))221 5168 y(document.)38 b(Some)26
b(systems)f(\(Solaris,)i(Fr)n(eeBSD\))f(can)h(have)g(mor)n(e)f(than)h
(one)f(internet)f(ad-)221 5281 y(dr)n(ess)36 b(on)h(one)f(physical)i
(interface;)44 b(with)38 b(other)e(systems)f(you)h(may)i(have)f(to)g(r)
n(esort)f(to)221 5394 y(SLIP)g(or)h(PPP)g(pseudo)e(interfaces)h(that)h
(live)h(in)g(a)f(dedicated)f(network)f(addr)n(ess)h(space.)p
eop
%%Page: 51 57
51 56 bop 3261 282 a Fq(51)63 539 y(The)34 b Fe(host_pattern)c
Fq(obeys)k(the)h(same)g(syntax)g(r)o(ules)g(as)g(host)f(names)i(and)f
(addr)n(esses)63 652 y(in)28 b Fe(client_list)23 b Fq(context.)42
b(Usually)-10 b(,)29 b(server)e(endpoint)f(information)j(is)f
(available)j(only)63 764 y(with)22 b(connection-oriented)f(services.)63
1029 y Fj(CLIENT)j(USERNAME)g(LOOKUP)63 1209 y Fq(When)37
b(the)h(client)h(host)e(supports)f(the)i(RFC)g(931)i(pr)n(otocol)e(or)g
(one)f(of)i(its)f(descendants)63 1322 y(\(T)-7 b(AP)-12
b(,)18 b(IDENT)-7 b(,)16 b(RFC)i(1413\))i(the)d(wrapper)g(pr)n(ograms)g
(can)i(r)n(etrieve)e(additional)i(information)63 1435
y(about)24 b(the)f(owner)g(of)h(a)g(connection.)32 b(Client)24
b(username)f(information,)i(when)e(available,)k(is)63
1548 y(logged)21 b(together)f(with)i(the)g(client)h(host)f(name,)g(and)
h(can)g(be)g(used)e(to)h(match)h(patterns)e(like:)204
1662 y Fe(daemon_list)49 b(:)109 b(...)f(user_pattern@h)o(os)o(t_p)o
(at)o(te)o(rn)48 b(...)204 1777 y Fq(The)39 b(daemon)g(wrappers)f(can)j
(be)f(con\002gur)n(ed)e(at)i(compile)g(time)g(to)f(perform)g(r)o(ule-)
63 1890 y(driven)e(username)f(lookups)g(\(default\))i(or)f(to)f(always)
i(interr)n(ogate)e(the)g(client)i(host.)71 b(In)63 2002
y(the)27 b(case)h(of)g(r)o(ule-driven)g(username)f(lookups,)h(the)f
(above)h(r)o(ule)g(would)g(cause)f(username)63 2115 y(lookup)21
b(only)h(when)g(both)g(the)g Fe(daemon_list)c Fq(and)23
b(the)e Fe(host_pattern)d Fq(match.)204 2230 y(A)27 b(user)f(pattern)g
(has)i(the)e(same)h(syntax)g(as)g(a)h(daemon)f(pr)n(ocess)f(pattern,)h
(so)f(the)h(same)63 2343 y(wildcar)n(ds)35 b(apply)g(\(netgr)n(oup)f
(membership)h(is)g(not)f(supported\).)63 b(One)35 b(should)f(not)h(get)
63 2456 y(carried)23 b(away)g(with)f(username)g(lookups,)f(though.)199
2676 y Fn(\017)46 b Fq(The)27 b(client)g(username)g(information)h
(cannot)f(be)h(tr)o(usted)d(when)i(it)g(is)h(needed)d(most,)290
2789 y(i.e.)65 b(when)34 b(the)h(client)g(system)e(has)i(been)g(compr)n
(omised.)64 b(In)35 b(general,)j(ALL)c(and)290 2902 y(\(UN\)KNOWN)22
b(ar)n(e)h(the)f(only)g(user)g(name)g(patterns)f(that)i(make)f(sense.)
199 3096 y Fn(\017)46 b Fq(Username)16 b(lookups)g(ar)n(e)h(possible)g
(only)f(with)h(TCP-based)g(services,)h(and)f(only)g(when)290
3209 y(the)33 b(client)h(host)e(r)o(uns)h(a)h(suitable)g(daemon;)k(in)c
(all)h(other)d(cases)h(the)g(r)n(esult)g(is)g(`un-)290
3322 y(known'.)199 3516 y Fn(\017)46 b Fq(A)29 b(well-known)h(UNIX)e
(kernel)h(bug)g(may)h(cause)g(loss)f(of)h(service)f(when)g(username)290
3628 y(lookups)34 b(ar)n(e)i(blocked)f(by)g(a)i(\002r)n(ewall.)68
b(The)34 b(wrapper)h(README)g(document)f(de-)290 3741
y(scribes)22 b(a)h(pr)n(ocedur)n(e)f(to)g(\002nd)g(out)g(if)h(your)f
(kernel)g(has)g(this)g(bug.)199 3935 y Fn(\017)46 b Fq(Username)33
b(lookups)f(may)i(cause)g(noticeable)g(delays)f(for)h(non-UNIX)e
(users.)60 b(The)290 4048 y(default)27 b(timeout)g(for)g(username)g
(lookups)f(is)h(10)i(seconds:)35 b(too)27 b(short)f(to)h(cope)g(with)
290 4161 y(slow)22 b(networks,)e(but)j(long)f(enough)f(to)h(irritate)h
(PC)g(users.)204 4382 y(Selective)g(username)f(lookups)g(can)i
(alleviate)h(the)e(last)g(pr)n(oblem.)31 b(For)22 b(example,)h(a)h(r)o
(ule)63 4494 y(like:)204 4609 y Fe(daemon_list)49 b(:)109
b(@pcnetgroup)50 b(ALL@ALL)204 4723 y Fq(would)29 b(match)h(members)f
(of)h(the)f(pc)g(netgr)n(oup)f(without)h(doing)g(username)f(lookups,)63
4836 y(but)22 b(would)g(perform)g(username)g(lookups)f(with)h(all)i
(other)e(systems.)63 5101 y Fj(DETECTING)j(ADDRESS)f(SPOOFING)h(A)-9
b(TT)g(ACKS)63 5281 y Fq(A)17 b(\003aw)h(in)h(the)d(sequence)g(number)i
(generator)e(of)h(many)h(TCP/IP)g(implementations)f(allows)63
5394 y(intr)o(uders)23 b(to)h(easily)g(impersonate)g(tr)o(usted)e
(hosts)h(and)i(to)e(br)n(eak)i(in)g(via,)h(for)f(example,)f(the)p
eop
%%Page: 52 58
52 57 bop 221 282 a Fq(52)1764 b Ff(APPENDIX)21 b(A.)45
b(HOSTS_ACCESS\(5\))221 539 y Fq(r)n(emote)25 b(shell)g(service.)37
b(The)24 b(IDENT)h(\(RFC931)i(etc.\))36 b(service)26
b(can)g(be)f(used)g(to)f(detect)g(such)221 652 y(and)f(other)e(host)h
(addr)n(ess)f(spoo\002ng)f(attacks.)362 764 y(Befor)n(e)29
b(accepting)i(a)f(client)h(r)n(equest,)f(the)f(wrappers)g(can)i(use)e
(the)h(IDENT)f(service)h(to)221 877 y(\002nd)f(out)f(that)h(the)f
(client)i(did)e(not)h(send)e(the)i(r)n(equest)e(at)i(all.)49
b(When)28 b(the)h(client)g(host)f(pr)n(o-)221 990 y(vides)38
b(IDENT)f(service,)k(a)e(negative)e(IDENT)g(lookup)g(r)n(esult)g(\(the)
h(client)g(matches)g Fe(UN-)221 1103 y(KNOWN@host)p Fq(\))19
b(is)j(str)n(ong)g(evidence)g(of)g(a)h(host)f(spoo\002ng)e(attack.)362
1216 y(A)i(positive)g(IDENT)f(lookup)f(r)n(esult)i(\(the)f(client)i
(matches)f Fe(KNOWN@host)p Fq(\))17 b(is)23 b(less)e(tr)o(ust-)221
1329 y(worthy)-10 b(.)47 b(It)28 b(is)i(possible)f(for)g(an)h(intr)o
(uder)e(to)h(spoof)f(both)h(the)g(client)h(connection)e(and)i(the)221
1442 y(IDENT)24 b(lookup,)h(although)g(doing)f(so)h(is)h(much)f(har)n
(der)h(than)f(spoo\002ng)e(just)i(a)h(client)g(con-)221
1555 y(nection.)i(It)22 b(may)h(also)f(be)h(that)f(the)g(client's)h
(IDENT)e(server)h(is)h(lying.)362 1668 y(Note:)k(IDENT)21
b(lookups)g(don't)h(work)f(with)i(UDP)g(services.)221
1920 y Fj(EXAMPLES)221 2097 y Fq(The)f(language)h(is)f(\003exible)h
(enough)f(that)g(dif)n(fer)n(ent)g(types)f(of)i(access)f(contr)n(ol)h
(policy)g(can)g(be)221 2210 y(expr)n(essed)17 b(with)j(a)h(minimum)h
(of)e(fuss.)26 b(Although)19 b(the)g(language)h(uses)f(two)g(access)h
(contr)n(ol)221 2323 y(tables,)i(the)f(most)g(common)h(policies)g(can)g
(be)g(implemented)f(with)h(one)f(of)g(the)g(tables)h(being)221
2435 y(trivial)j(or)d(even)g(empty)-10 b(.)362 2548 y(When)21
b(r)n(eading)h(the)e(examples)h(below)h(it)f(is)h(important)f(to)g(r)n
(ealise)h(that)f(the)g(allow)i(table)221 2661 y(is)d(scanned)g(befor)n
(e)f(the)g(deny)g(table,)i(that)e(the)g(sear)n(ch)i(terminates)e(when)g
(a)h(match)h(is)f(found,)221 2774 y(and)j(that)f(access)h(is)f(granted)
g(when)g(no)g(match)h(is)g(found)f(at)h(all.)362 2887
y(The)c(examples)g(use)f(host)h(and)g(domain)h(names.)27
b(They)18 b(can)i(be)g(impr)n(oved)f(by)g(including)221
3000 y(addr)n(ess)g(and/or)i(network/netmask)c(information,)22
b(to)e(r)n(educe)f(the)h(impact)i(of)e(temporary)221
3113 y(name)j(server)f(lookup)f(failur)n(es.)221 3365
y Fj(MOSTL)-9 b(Y)25 b(CLOSED)221 3542 y Fq(In)i(this)f(case,)i(access)
f(is)g(denied)f(by)h(default.)41 b(Only)27 b(explicitly)h(authorised)d
(hosts)h(ar)n(e)h(per)n(-)221 3655 y(mitted)22 b(access.)362
3768 y(The)g(default)h(policy)f(\(no)h(access\))g(is)g(implemented)e
(with)i(a)g(trivial)h(deny)e(\002le:)221 3952 y Fc(/etc/hosts.deny:)420
4051 y(ALL:)49 b(ALL)362 4249 y Fq(This)27 b(denies)f(all)i(service)f
(to)f(all)j(hosts,)d(unless)g(they)g(ar)n(e)h(permitted)f(access)g(by)h
(entries)221 4362 y(in)c(the)f(allow)i(\002le.)362 4474
y(The)e(explicitly)h(authorised)f(hosts)f(ar)n(e)i(listed)e(in)j(the)d
(allow)j(\002le.)k(For)22 b(example:)221 4658 y Fc(/etc/hosts.allow:)
371 4758 y(ALL:)49 b(LOCAL)g(@some_netgroup)371 4858
y(ALL:)g(.foobar.edu)e(EXCEPT)i(terminalserver.foobar.edu)362
5055 y Fq(The)30 b(\002rst)g(r)o(ule)h(permits)e(access)i(fr)n(om)g
(hosts)e(in)i(the)e(local)j(domain)f(\(no)g(.)51 b(in)31
b(the)f(host)221 5168 y(name\))23 b(and)f(fr)n(om)h(members)f(of)g(the)
g Fe(some_netgroup)16 b Fq(netgr)n(oup.)26 b(The)c(second)f(r)o(ule)h
(per)n(-)221 5281 y(mits)35 b(access)f(fr)n(om)h(all)h(hosts)d(in)i
(the)f Fe(foobar.edu)c Fq(domain)35 b(\(notice)g(the)f(leading)g
(dot\),)221 5394 y(with)23 b(the)f(exception)f(of)i Fe(terminalserver)o
(.f)o(oo)o(ba)o(r.)o(edu)o Fq(.)p eop
%%Page: 53 59
53 58 bop 3261 282 a Fq(53)63 539 y Fj(MOSTL)-9 b(Y)25
b(OPEN)63 715 y Fq(Her)n(e,)j(access)h(is)f(granted)f(by)h(default;)j
(only)d(explicitly)h(speci\002ed)e(hosts)g(ar)n(e)i(r)n(efused)e(ser)n
(-)63 828 y(vice.)204 941 y(The)k(default)g(policy)h(\(access)g
(granted\))e(makes)i(the)e(allow)j(\002le)f(r)n(edundant)e(so)h(that)g
(it)63 1054 y(can)25 b(be)f(omitted.)31 b(The)23 b(explicitly)i
(non-authorised)e(hosts)f(ar)n(e)j(listed)e(in)i(the)e(deny)g(\002le.)
32 b(For)63 1167 y(example:)63 1323 y Fc(/etc/hosts.deny:)212
1422 y(ALL:)49 b(some.host.name,)e(.some.domain)212 1522
y(ALL)i(EXCEPT)g(in.fingerd:)f(other.host.name,)f(.other.domain)204
1691 y Fq(The)25 b(\002rst)g(r)o(ule)h(denies)e(some)h(hosts)f(and)i
(domains)g(all)h(services;)g(the)e(second)f(r)o(ule)i(still)63
1804 y(permits)21 b(\002nger)h(r)n(equests)f(fr)n(om)i(other)e(hosts)g
(and)i(domains.)63 2051 y Fj(BOOBY)j(TRAPS)63 2228 y
Fq(The)e(next)g(example)i(permits)e(tftp)g(r)n(equests)g(fr)n(om)h
(hosts)f(in)i(the)e(local)j(domain)e(\(notice)g(the)63
2341 y(leading)i(dot\).)40 b(Requests)25 b(fr)n(om)i(any)g(other)f
(hosts)g(ar)n(e)h(denied.)40 b(Instead)26 b(of)h(the)f(r)n(equested)63
2454 y(\002le,)i(a)g(\002nger)f(pr)n(obe)g(is)g(sent)f(to)h(the)g(of)n
(fending)g(host.)41 b(The)27 b(r)n(esult)f(is)i(mailed)g(to)f(the)g
(supe-)63 2566 y(r)o(user)-7 b(.)63 2722 y Fc(/etc/hosts.allow:)212
2822 y(in.tftpd:)48 b(LOCAL,)h(.my.domain)63 3021 y(/etc/hosts.deny:)
212 3120 y(in.tftpd:)f(ALL:)h(\(/some/where/safe\\_finger)c(-l)50
b(@\045h)f(|)h(\\)411 3220 y(/usr/ucb/mail)e(-s)h(\045d-\045h)g(root\))
g(&)204 3389 y Fq(The)23 b Fe(safe_finger)c Fq(command)25
b(comes)f(with)g(the)f(tcpd)g(wrapper)h(and)g(should)f(be)h(in-)63
3502 y(stalled)h(in)h(a)g(suitable)g(place.)37 b(It)25
b(limits)h(possible)f(damage)g(fr)n(om)h(data)g(sent)e(by)i(the)f(r)n
(emote)63 3615 y(\002nger)c(server)-7 b(.)27 b(It)22
b(gives)g(better)g(pr)n(otection)f(than)i(the)f(standar)n(d)g(\002nger)
f(command.)204 3728 y(The)26 b(expansion)g(of)g(the)g(\045h)i(\(client)
f(host\))f(and)h(\045d)f(\(service)h(name\))h(sequences)c(is)j(de-)63
3840 y(scribed)22 b(in)h(the)f(section)g(on)g(shell)h(commands.)204
3953 y(W)-8 b(arning:)35 b(do)25 b(not)h(booby-trap)g(your)f(\002nger)g
(daemon,)i(unless)e(you)h(ar)n(e)g(pr)n(epar)n(ed)g(for)63
4066 y(in\002nite)c(\002nger)g(loops.)204 4179 y(On)i(network)e(\002r)n
(ewall)j(systems)d(this)h(trick)h(can)h(be)f(carried)g(even)g(further)
-7 b(.)31 b(The)23 b(typical)63 4292 y(network)31 b(\002r)n(ewall)j
(only)f(pr)n(ovides)f(a)i(limited)f(set)f(of)h(services)g(to)f(the)g
(outer)g(world.)59 b(All)63 4405 y(other)29 b(services)g(can)i(be)f
("bugged")f(just)g(like)h(the)g(above)h(tftp)e(example.)51
b(The)29 b(r)n(esult)h(is)g(an)63 4518 y(excellent)22
b(early-warning)h(system.)63 4765 y Fj(DIAGNOSTICS)63
4942 y Fq(An)33 b(err)n(or)g(is)g(r)n(eported)f(when)g(a)j(syntax)d
(err)n(or)h(is)h(found)e(in)i(a)g(host)f(access)g(contr)n(ol)h(r)o
(ule;)63 5055 y(when)19 b(the)h(length)f(of)h(an)h(access)f(contr)n(ol)
g(r)o(ule)h(exceeds)d(the)h(capacity)j(of)e(an)h(internal)f(buf)n(fer;)
63 5168 y(when)31 b(an)i(access)f(contr)n(ol)g(r)o(ule)g(is)g(not)g
(terminated)f(by)h(a)h(newline)f(character;)37 b(when)31
b(the)63 5281 y(r)n(esult)i(of)h(expansion)e(would)h(over\003ow)h(an)g
(internal)g(buf)n(fer;)39 b(when)33 b(a)i(system)d(call)j(fails)63
5394 y(that)22 b(shouldn)575 5382 y(\264)575 5394 y(t.)k(All)e(pr)n
(oblems)e(ar)n(e)h(r)n(eported)e(via)j(the)d(syslog)g(daemon.)p
eop
%%Page: 54 60
54 59 bop 221 282 a Fq(54)1764 b Ff(APPENDIX)21 b(A.)45
b(HOSTS_ACCESS\(5\))221 539 y Fj(FILES)221 715 y Fe(/etc/hosts.allo)o
(w)p Fq(,)16 b(\(daemon,client\))23 b(pairs)g(that)f(ar)n(e)h(granted)e
(access.)221 828 y Fe(/etc/hosts.deny)o Fq(,)c(\(daemon,client\))23
b(pairs)f(that)h(ar)n(e)g(denied)e(access.)221 1083 y
Fj(SEE)k(ALSO)221 1260 y Fq(tcpd\(8\))e(tcp/ip)g(daemon)f(wrapper)f(pr)
n(ogram.)221 1373 y(tcpdchk\(8\),)i(tcpdmatch\(8\),)g(test)e(pr)n
(ograms.)221 1628 y Fj(BUGS)221 1805 y Fq(If)g(a)h(name)f(server)f
(lookup)g(times)g(out,)g(the)g(host)g(name)h(will)i(not)d(be)h
(available)j(to)c(the)g(access)221 1918 y(contr)n(ol)j(softwar)n(e,)e
(even)i(though)e(the)g(host)h(is)h(r)n(egister)n(ed.)362
2030 y(Domain)h(name)g(server)d(lookups)h(ar)n(e)h(case)g(insensitive;)
f(NIS)g(\(formerly)h(YP\))g(netgr)n(oup)221 2143 y(lookups)e(ar)n(e)i
(case)g(sensitive.)221 2398 y Fj(AUTHOR)221 2575 y Fq(W)-5
b(ietse)22 b(V)-10 b(enema)22 b(\(wietse@wzv)-10 b(.win.tue.nl\))221
2688 y(Department)22 b(of)g(Mathematics)h(and)g(Computing)f(Science)221
2801 y(Eindhoven)g(University)g(of)g(T)-8 b(echnology)221
2914 y(Den)23 b(Dolech)g(2,)g(P)-12 b(.O.)22 b(Box)g(513,)221
3027 y(5600)j(MB)d(Eindhoven,)f(The)h(Netherlands)p eop
%%Page: 55 61
55 60 bop 63 1203 a Fm(Bibliography)63 1662 y Fq([BLFIM98])45
b(T)-7 b(.)28 b(Berners-Lee,)e(R.)h(Fielding,)i(U.C.)e(Irvine,)i(and)f
(L.)g(Masinter)-7 b(.)49 b Fp(Uniform)28 b(Re-)538 1775
y(sour)n(ce)c(Identi\002ers)h(\(URI\):)e(Generic)g(Syntax)p
Fq(.)33 b(RFC)22 b(2396,)j(August)20 b(1998.)63 1962
y([OMG98])99 b(Object)32 b(Management)f(Gr)n(oup.)60
b Fp(CORBAServices:)45 b(Common)31 b(Object)h(Services)538
2075 y(Speci\002cation)p Fq(,)24 b(December)e(1998.)63
2263 y([OMG99a])54 b(Object)27 b(Management)f(Gr)n(oup.)44
b Fp(The)27 b(Common)f(Object)i(Request)f(Br)n(oker:)37
b(Ar)n(chi-)538 2376 y(tectur)n(e)24 b(and)f(Speci\002cation)p
Fq(,)h(2.3.1)g(edition,)d(October)i(1999.)63 2563 y([OMG99b])49
b(Object)27 b(Management)g(Gr)n(oup.)46 b Fp(INS)27 b(Naming)g(edited)i
(chapters)h(document)p Fq(,)e(De-)538 2676 y(cember)43
b(1999.)102 b(Fr)n(om)43 b Fe(http://www.omg.)o(or)o(g/c)o(gi)o(-)t(b)o
(in/)o(do)o(c?)o(pt)o(c/)538 2789 y(99-)t(12-)t(03)p
Fq(.)63 2977 y([OMG00])99 b(Object)32 b(Management)f(Gr)n(oup.)61
b Fp(Python)33 b(Language)f(Mapping)h(Speci\002cation\227)538
3090 y(FTF)49 b(Recommendation)p Fq(,)58 b(April)51 b(2000.)124
b(Fr)n(om)50 b Fe(http://www.omg.)o(or)o(g/)538 3203
y(cgi-)t(bin/doc?ptc)o(/0)o(0-)s(04-)s(08)o Fq(.)1662
5622 y(55)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
