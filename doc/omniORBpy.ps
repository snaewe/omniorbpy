%!PS-Adobe-2.0
%%Creator: dvips(k) 5.86 Copyright 1999 Radical Eye Software
%%Title: omniORBpy.dvi
%%Pages: 67
%%PageOrder: Ascend
%%BoundingBox: 0 0 596 842
%%DocumentFonts: Palatino-Roman Palatino-Italic Palatino-Bold Courier
%%+ Courier-Oblique
%%DocumentPaperSizes: A4
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips omniORBpy
%DVIPSParameters: dpi=600, compressed
%DVIPSSource:  TeX output 2004.07.26:1224
%%BeginProcSet: texc.pro
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/id 0 N/rw 0 N/rc 0 N/gp 0 N/cp 0 N/G 0 N/CharBuilder{save 3
1 roll S A/base get 2 index get S/BitMaps get S get/Cd X pop/ctr 0 N Cdx
0 Cx Cy Ch sub Cx Cw add Cy setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx
sub Cy .1 sub]/id Ci N/rw Cw 7 add 8 idiv string N/rc 0 N/gp 0 N/cp 0 N{
rc 0 ne{rc 1 sub/rc X rw}{G}ifelse}imagemask restore}B/G{{id gp get/gp
gp 1 add N A 18 mod S 18 idiv pl S get exec}loop}B/adv{cp add/cp X}B
/chg{rw cp id gp 4 index getinterval putinterval A gp add/gp X adv}B/nd{
/cp 0 N rw exit}B/lsh{rw cp 2 copy get A 0 eq{pop 1}{A 255 eq{pop 254}{
A A add 255 and S 1 and or}ifelse}ifelse put 1 adv}B/rsh{rw cp 2 copy
get A 0 eq{pop 128}{A 255 eq{pop 127}{A 2 idiv S 128 and or}ifelse}
ifelse put 1 adv}B/clr{rw cp 2 index string putinterval adv}B/set{rw cp
fillstr 0 4 index getinterval putinterval adv}B/fillstr 18 string 0 1 17
{2 copy 255 put pop}for N/pl[{adv 1 chg}{adv 1 chg nd}{1 add chg}{1 add
chg nd}{adv lsh}{adv lsh nd}{adv rsh}{adv rsh nd}{1 add adv}{/rc X nd}{
1 add set}{1 add clr}{adv 2 chg}{adv 2 chg nd}{pop nd}]A{bind pop}
forall N/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "22 June 1996",
%   filename = "8r.enc",
%   email = "kb@@mail.tug.org",
%   address = "135 Center Hill Rd. // Plymouth, MA 02360",
%   codetable = "ISO/ASCII",
%   checksum = "119     662    4424",
%   docstring = "Encoding for TrueType or Type 1 fonts to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there down to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def

%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type/integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics/Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{
dup sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1
roll mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def
dup[exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}
if}forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}
def end

%%EndProcSet
%%BeginProcSet: special.pro
%!
TeXDict begin/SDict 200 dict N SDict begin/@SpecialDefaults{/hs 612 N
/vs 792 N/ho 0 N/vo 0 N/hsc 1 N/vsc 1 N/ang 0 N/CLIP 0 N/rwiSeen false N
/rhiSeen false N/letter{}N/note{}N/a4{}N/legal{}N}B/@scaleunit 100 N
/@hscale{@scaleunit div/hsc X}B/@vscale{@scaleunit div/vsc X}B/@hsize{
/hs X/CLIP 1 N}B/@vsize{/vs X/CLIP 1 N}B/@clip{/CLIP 2 N}B/@hoffset{/ho
X}B/@voffset{/vo X}B/@angle{/ang X}B/@rwi{10 div/rwi X/rwiSeen true N}B
/@rhi{10 div/rhi X/rhiSeen true N}B/@llx{/llx X}B/@lly{/lly X}B/@urx{
/urx X}B/@ury{/ury X}B/magscale true def end/@MacSetUp{userdict/md known
{userdict/md get type/dicttype eq{userdict begin md length 10 add md
maxlength ge{/md md dup length 20 add dict copy def}if end md begin
/letter{}N/note{}N/legal{}N/od{txpose 1 0 mtx defaultmatrix dtransform S
atan/pa X newpath clippath mark{transform{itransform moveto}}{transform{
itransform lineto}}{6 -2 roll transform 6 -2 roll transform 6 -2 roll
transform{itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll
curveto}}{{closepath}}pathforall newpath counttomark array astore/gc xdf
pop ct 39 0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}
if}N/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1
-1 scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3
get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip
yflip not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub
neg 0 TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{
noflips{TR pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop
90 rotate 1 -1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get
neg sub neg TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr
1 get neg sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr
2 get ppr 0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4
-1 roll add 2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S
TR}if}N/cp{pop pop showpage pm restore}N end}if}if}N/normalscale{
Resolution 72 div VResolution 72 div neg scale magscale{DVImag dup scale
}if 0 setgray}N/psfts{S 65781.76 div N}N/startTexFig{/psf$SavedState
save N userdict maxlength dict begin/magscale true def normalscale
currentpoint TR/psf$ury psfts/psf$urx psfts/psf$lly psfts/psf$llx psfts
/psf$y psfts/psf$x psfts currentpoint/psf$cy X/psf$cx X/psf$sx psf$x
psf$urx psf$llx sub div N/psf$sy psf$y psf$ury psf$lly sub div N psf$sx
psf$sy scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub
TR/showpage{}N/erasepage{}N/copypage{}N/p 3 def @MacSetUp}N/doclip{
psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll newpath 4 copy 4 2
roll moveto 6 -1 roll S lineto S lineto S lineto closepath clip newpath
moveto}N/endTexFig{end psf$SavedState restore}N/@beginspecial{SDict
begin/SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count/ocount X/dcount countdictstack N}N/@setspecial{
CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto
closepath clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx
sub div rhiSeen{rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR
}{rhiSeen{rhi ury lly sub div dup scale llx neg lly neg TR}if}ifelse
CLIP 2 eq{newpath llx lly moveto urx lly lineto urx ury lineto llx ury
lineto closepath clip}if/showpage{}N/erasepage{}N/copypage{}N newpath}N
/@endspecial{count ocount sub{pop}repeat countdictstack dcount sub{end}
repeat grestore SpecialSave restore end}N/@defspecial{SDict begin}N
/@fedspecial{end}B/li{lineto}B/rl{rlineto}B/rc{rcurveto}B/np{/SaveX
currentpoint/SaveY X N 1 setlinecap newpath}N/st{stroke SaveX SaveY
moveto}N/fil{fill SaveX SaveY moveto}N/ellipse{/endangle X/startangle X
/yrad X/xrad X/savematrix matrix currentmatrix N TR xrad yrad scale 0 0
1 startangle endangle arc savematrix setmatrix}N end

%%EndProcSet
TeXDict begin 39158280 55380996 1000 600 600 (omniORBpy.dvi)
@start /Fa 144[55 55 8[55 101[{TeXBase1Encoding ReEncodeFont}3
90.9091 /Courier-Oblique rf /Fb 135[45 45 45 1[45 45
45 1[45 45 45 4[45 2[45 45 3[45 1[45 12[45 1[45 45 5[45
4[45 1[45 45 19[45 3[45 45 40[{TeXBase1Encoding ReEncodeFont}24
74.7198 /Courier rf /Fc 11[41 122[42 1[62 42 45 24 32
30 42 45 41 43 66 22 42 17 22 43 42 25 36 46 33 41 37
21 2[25 1[25 1[50 3[58 46 39 50 1[45 59 62 71 3[25 1[57
3[53 46 58 7[37 37 1[37 2[37 37 37 37 45 19 25 19 4[21
5[21 30[45 2[{TeXBase1Encoding ReEncodeFont}56 74.7198
/Palatino-Roman rf /Fd 202[33 33 33 33 33 49[{
TeXBase1Encoding ReEncodeFont}5 66.4176 /Palatino-Roman
rf /Fe 198[25 25 25 25 25 25 25 25 25 25 48[{
TeXBase1Encoding ReEncodeFont}10 49.8132 /Palatino-Roman
rf /Ff 130[50 1[50 1[50 50 50 50 50 50 50 50 1[50 50
50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 1[50
1[50 3[50 50 50 50 50 50 1[50 50 50 50 50 1[50 50 50
50 50 50 50 50 50 50 2[50 50 1[50 50 4[50 50 50 50 50
50 50 50 50 50 1[50 50 50 50 1[50 1[50 50 34[{
TeXBase1Encoding ReEncodeFont}72 83.022 /Courier rf /Fg
134[50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50
50 50 50 50 50 50 50 50 1[50 11[50 50 1[50 50 50 50 3[50
3[50 50 50 50 50 2[50 1[50 1[50 10[50 50 1[50 50 1[50
50 4[50 50 50 33[{TeXBase1Encoding ReEncodeFont}50 83.022
/Courier-Oblique rf /Fh 133[55 55 55 55 55 55 55 55 55
55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 1[55
1[55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55
55 55 55 55 55 55 55 55 55 55 55 55 55 55 1[55 1[55 55
55 55 55 55 55 55 55 55 55 55 55 55 55 55 1[55 55 55
2[55 55 55 55 34[{TeXBase1Encoding ReEncodeFont}82 90.9091
/Courier rf /Fi 104[91 55[45 5[61 61 91 66 71 56 48 61
1[55 71 76 86 56 66 30 31 76 69 51 56 70 64 56 71 7[45
45 45 45 45 45 45 45 45 45 1[23 30 1[55 43[{
.167 SlantFont TeXBase1Encoding ReEncodeFont}39 90.9091
/Palatino-Roman rf /Fj 134[55 50 83 55 61 33 44 39 1[61
55 61 89 33 1[33 33 61 55 39 50 61 44 61 50 1[50 7[100
1[78 66 61 72 1[61 83 83 100 61 2[39 1[83 55 61 83 72
66 78 6[25 2[50 50 50 50 50 50 50 2[25 33 42[61 2[{
TeXBase1Encoding ReEncodeFont}53 99.6264 /Palatino-Bold
rf /Fk 139[57 1[67 1[105 7[105 2[86 3[86 29[124 10[86
86 86 86 86 86 86 86 49[{TeXBase1Encoding ReEncodeFont}15
172.188 /Palatino-Bold rf /Fl 105[45 28[51 45 76 51 56
30 40 35 1[56 51 56 81 30 56 30 30 56 51 35 45 56 40
56 45 9[91 2[61 56 66 1[56 76 76 91 56 2[35 2[51 1[76
66 61 71 7[45 45 45 45 45 45 45 45 45 45 1[23 30 23 10[25
30[56 2[{TeXBase1Encoding ReEncodeFont}55 90.9091 /Palatino-Bold
rf /Fm 134[115 2[115 126 69 92 80 1[126 115 126 184 69
2[69 126 115 1[103 126 92 126 103 12[138 126 149 1[126
172 172 207 126 2[80 4[172 149 138 161 62[126 2[{
TeXBase1Encoding ReEncodeFont}33 206.559 /Palatino-Bold
rf
%DVIPSBitmapFont: Fn cmsy10 10.95 1
/Fn 1 16 df<EB0FFCEB3FFF90B512C0000314F04880488048804880A2481580A3B712C0
AA6C1580A36C1500A26C5C6C5C6C5C6C5CC614C0013F90C7FCEB0FFC22227BA72D>15
D E
%EndDVIPSBitmapFont
/Fo 104[120 29[66 60 100 66 73 40 53 47 1[73 66 73 106
40 73 40 40 73 66 47 60 73 53 73 60 1[60 9[93 80 73 86
1[73 100 100 120 73 1[47 47 100 100 66 73 100 86 80 93
7[60 60 60 60 60 60 60 60 60 60 1[30 40 30 72 40[73 2[{
TeXBase1Encoding ReEncodeFont}60 119.552 /Palatino-Bold
rf /Fp 133[40 45 45 66 45 51 30 35 35 42 45 40 51 71
25 40 25 25 45 45 25 35 45 37 42 40 3[30 1[30 5[71 56
51 61 1[56 71 71 86 51 2[30 1[66 3[61 56 66 68 1[55 1[55
1[23 5[45 45 45 45 2[23 30 1[55 1[30 30 37[48 2[{
TeXBase1Encoding ReEncodeFont}56 90.9091 /Palatino-Italic
rf /Fq 104[91 28[45 51 47 76 51 55 30 39 36 51 55 50
53 80 26 51 21 26 53 51 30 44 56 40 50 45 25 45 1[30
1[30 61 61 1[91 66 71 56 48 61 1[55 71 76 86 56 66 30
31 76 69 51 56 70 64 56 71 2[55 55 55 23 23 45 45 45
45 45 45 45 45 45 45 55 23 30 23 55 1[30 30 25 1[76 1[45
1[25 29[55 55 2[{TeXBase1Encoding ReEncodeFont}83 90.9091
/Palatino-Roman rf /Fr 134[66 3[72 39 51 47 1[72 1[70
4[35 70 2[57 73 53 66 60 20[73 4[91 2[93 2[93 18[30 46[{
TeXBase1Encoding ReEncodeFont}19 119.552 /Palatino-Roman
rf /Fs 134[115 2[117 125 1[88 82 1[124 113 120 182 3[60
120 2[99 126 14[161 127 1[138 2[162 7[158 4[126 15[103
10[57 39[{TeXBase1Encoding ReEncodeFont}21 206.559 /Palatino-Roman
rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%PaperSize: A4

%%EndSetup
%%Page: 1 1
1 0 bop 496 597 a Fs(The)51 b(omniORBpy)i(version)d(2)1077
907 y(User)15 b('s)51 b(Guide)1306 1979 y Fr(Duncan)28
b(Grisby)1118 2128 y Fq(\()p Fp(email:)h(dgrisby@apaspher)n(e.com)p
Fq(\))1296 2390 y Fr(Apaspher)n(e)h(Ltd.)1524 4346 y
Fq(July)23 b(2004)p eop
%%Page: 2 2
2 1 bop 362 539 a Fo(Changes)31 b(and)e(Additions,)h(July)g(2004)358
726 y Fn(\017)45 b Fq(Minor)23 b(updates.)362 1027 y
Fo(Changes)31 b(and)e(Additions,)h(November)g(2002)358
1214 y Fn(\017)45 b Fq(Per)23 b(thr)n(ead)f(timeouts.)358
1402 y Fn(\017)45 b Fq(Minor)23 b(\002xes.)362 1703 y
Fo(Changes)31 b(and)e(Additions,)h(August)h(2002)358
1890 y Fn(\017)45 b Fq(Updated)21 b(to)h(omniORBpy)g(2.)p
eop
%%Page: 3 3
3 2 bop 63 1204 a Fm(Contents)63 1743 y Fl(1)91 b(Introduction)2581
b(1)199 1858 y Fq(1.1)96 b(Featur)n(es)85 b(.)46 b(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)129 b(1)408
1973 y(1.1.1)110 b(Multithr)n(eading)67 b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)h(.)129 b(1)408 2088 y(1.1.2)110 b(Portability)52
b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)129
b(2)408 2203 y(1.1.3)110 b(Missing)22 b(featur)n(es)87
b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)129 b(2)199 2318
y(1.2)96 b(Setting)21 b(up)h(your)g(envir)n(onment)79
b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)h(.)129 b(2)408 2433 y(1.2.1)110
b(Paths)51 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
h(.)129 b(2)408 2547 y(1.2.2)110 b(Con\002guration)22
b(\002le)35 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)129 b(3)63
2754 y Fl(2)91 b(The)22 b(Basics)2667 b(5)199 2869 y
Fq(2.1)96 b(The)22 b(Echo)g(example)31 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)h(.)129 b(5)199 2984 y(2.2)96 b(Generating)22
b(the)g(Python)f(stubs)29 b(.)46 b(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)129
b(6)199 3099 y(2.3)96 b(Object)23 b(Refer)n(ences)e(and)i(Servants)58
b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)h(.)129 b(6)199 3214 y(2.4)96 b(Example)23
b(1)g(\227)f(Colocated)h(client)g(and)g(servant)89 b(.)45
b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)129
b(6)408 3329 y(2.4.1)110 b(Imports)88 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)h(.)129 b(7)408 3443 y(2.4.2)110
b(Servant)22 b(class)h(de\002nition)89 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)129
b(7)408 3558 y(2.4.3)110 b(ORB)22 b(initialisation)39
b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)129 b(8)408 3673
y(2.4.4)110 b(Obtaining)24 b(the)e(Root)f(POA)36 b(.)45
b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)129 b(8)408 3788 y(2.4.5)110 b(Object)23
b(initialisation)38 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)129
b(8)408 3903 y(2.4.6)110 b(Activating)23 b(the)f(POA)k(.)45
b(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)h(.)129 b(9)408 4018 y(2.4.7)110
b(Performing)22 b(a)h(call)62 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)129
b(9)199 4132 y(2.5)96 b(Example)23 b(2)g(\227)f(Dif)n(fer)n(ent)i(Addr)
n(ess)c(Spaces)85 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)h(.)129 b(9)408 4247 y(2.5.1)110 b(Object)25
b(Implementation:)31 b(Generating)23 b(a)i(Stringi\002ed)f(Object)h
(Ref-)699 4360 y(er)n(ence)82 b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)h(.)129 b(9)408 4475 y(2.5.2)110 b(Client:)28
b(Using)22 b(a)h(Stringi\002ed)f(Object)h(Refer)n(ence)29
b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)84 b(10)408
4590 y(2.5.3)110 b(System)21 b(exceptions)77 b(.)45 b(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)84 b(11)408 4705 y(2.5.4)110 b(Lifetime)22 b(of)h(a)g(CORBA)g
(object)49 b(.)c(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)h(.)84 b(12)199 4820 y(2.6)96 b(Example)23
b(3)g(\227)f(Using)g(the)g(Naming)h(Service)44 b(.)h(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)84 b(12)408
4934 y(2.6.1)110 b(Obtaining)24 b(the)e(Root)f(Context)g(object)i(r)n
(efer)n(ence)87 b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)84
b(13)408 5049 y(2.6.2)110 b(The)22 b(Naming)h(Service)f(interface)39
b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)84 b(13)408 5164 y(2.6.3)110 b(Server)22 b(code)74
b(.)46 b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)84 b(13)408
5279 y(2.6.4)110 b(Client)23 b(code)89 b(.)46 b(.)f(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)h(.)84 b(15)199 5394 y(2.7)96 b(Global)24
b(IDL)f(de\002nitions)71 b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)84
b(16)1667 5622 y(iii)p eop
%%Page: 4 4
4 3 bop 221 539 a Fl(3)92 b(Python)20 b(language)j(mapping)e(issues)
1692 b(17)358 653 y Fq(3.1)96 b(Narr)n(owing)22 b(object)g(r)n(efer)n
(ences)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(17)567 768 y(3.1.1)110
b(The)21 b(gory)h(details)31 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
84 b(17)358 882 y(3.2)96 b(Support)20 b(for)j(Any)f(values)27
b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(19)567 997
y(3.2.1)110 b(Any)21 b(helper)h(module)31 b(.)45 b(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)
g(.)84 b(21)358 1111 y(3.3)96 b(Interface)22 b(Repository)e(stubs)59
b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(21)221 1317 y Fl(4)92
b(omniORB)20 b(con\002guration)i(and)g(API)1700 b(23)358
1432 y Fq(4.1)96 b(Setting)21 b(parameters)79 b(.)45
b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(23)567
1546 y(4.1.1)110 b(Command)23 b(line)g(ar)n(guments)36
b(.)46 b(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)84 b(23)567 1661 y(4.1.2)110 b(Envir)n(onment)22
b(variables)40 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(23)567 1775
y(4.1.3)110 b(Con\002guration)22 b(\002le)34 b(.)46 b(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)g(.)84 b(24)567 1890 y(4.1.4)110 b(W)-5 b(indows)21
b(r)n(egistry)31 b(.)46 b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84
b(24)358 2004 y(4.2)96 b(T)-8 b(racing)23 b(options)75
b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84
b(24)567 2119 y(4.2.1)110 b(T)-8 b(racing)22 b(API)67
b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(25)358
2233 y(4.3)96 b(Miscellaneous)22 b(global)i(options)75
b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)h(.)f(.)g(.)84 b(25)358 2348 y(4.4)96 b(Client)23
b(side)f(options)80 b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84
b(26)358 2462 y(4.5)96 b(Server)21 b(side)h(options)66
b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(28)358
2577 y(4.6)96 b(GIOP)23 b(and)f(inter)n(operability)h(options)73
b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)g(.)84 b(30)358 2691 y(4.7)96 b(System)21 b(Exception)g
(Handlers)67 b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(32)567
2806 y(4.7.1)110 b(Minor)22 b(codes)43 b(.)i(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)84 b(32)567 2920 y(4.7.2)110 b(CORBA::TRANSIENT)19
b(handlers)24 b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)84 b(32)567 3035 y(4.7.3)110 b(CORBA.COMM_F)-7
b(AILURE)21 b(and)i(CORBA.SystemException)61 b(.)45 b(.)84
b(33)358 3149 y(4.8)96 b(Location)22 b(forwar)n(ding)75
b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(33)358
3264 y(4.9)96 b(Dynamic)24 b(importing)e(of)h(IDL)31
b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(34)358 3378 y(4.10)51
b(C++)23 b(API)73 b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)h(.)f(.)g(.)84 b(35)221 3585 y Fl(5)92 b(The)22
b(IDL)g(compiler)2320 b(37)358 3699 y Fq(5.1)96 b(Common)23
b(options)65 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84
b(37)567 3814 y(5.1.1)110 b(Pr)n(epr)n(ocessor)20 b(interactions)78
b(.)46 b(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)84 b(38)858 3928 y(5.1.1.1)123 b(W)-5
b(indows)22 b(9x)82 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(38)567
4042 y(5.1.2)110 b(Forwar)n(d-declar)n(ed)21 b(interfaces)28
b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)g(.)84 b(38)567 4157 y(5.1.3)110 b(Comments)37
b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84
b(38)358 4271 y(5.2)96 b(Python)21 b(back-end)i(options)32
b(.)46 b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(39)358 4386
y(5.3)96 b(Examples)35 b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)h(.)f(.)g(.)84 b(40)221 4592 y Fl(6)92 b(Interoperable)24
b(Naming)e(Service)1810 b(41)358 4707 y Fq(6.1)96 b(Object)23
b(URIs)82 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)
g(.)84 b(41)567 4821 y(6.1.1)110 b(corbaloc)72 b(.)45
b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84
b(41)567 4936 y(6.1.2)110 b(corbaname)34 b(.)45 b(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)h(.)f(.)g(.)84 b(42)358 5050 y(6.2)96 b(Con\002guring)22
b(r)n(esolve_initial_r)n(efer)n(ences)54 b(.)45 b(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(43)567
5165 y(6.2.1)110 b(ORBInitRef)82 b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)g(.)84 b(43)567 5279 y(6.2.2)110 b(ORBDefaultInitRef)55
b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84 b(43)567 5394 y(6.2.3)110
b(omniORB)22 b(con\002guration)g(\002le)49 b(.)c(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)84
b(44)p eop
%%Page: 5 5
5 4 bop 408 539 a Fq(6.2.4)110 b(Resolution)21 b(or)n(der)75
b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)84 b(44)199 652 y(6.3)96
b(omniNames)71 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)84 b(45)408 764 y(6.3.1)110 b(NamingContextExt)36
b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)84 b(45)408 877 y(6.3.2)110
b(Use)22 b(with)g(corbaname)60 b(.)46 b(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)84
b(46)199 990 y(6.4)96 b(omniMapper)34 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)84 b(46)199 1103 y(6.5)96
b(Cr)n(eating)23 b(objects)f(with)h(simple)f(object)h(keys)46
b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)84
b(47)63 1307 y Fl(7)91 b(Connection)21 b(and)i(Thread)f(Management)1515
b(49)199 1420 y Fq(7.1)96 b(Backgr)n(ound)73 b(.)45 b(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)84 b(49)199 1533
y(7.2)96 b(The)22 b(model)65 b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)h(.)84 b(50)199 1646 y(7.3)96
b(Client)23 b(side)f(behaviour)42 b(.)j(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
h(.)84 b(50)408 1759 y(7.3.1)110 b(Client)23 b(side)f(timeouts)79
b(.)46 b(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)h(.)84 b(51)199 1872 y(7.4)96
b(Server)22 b(side)g(behaviour)27 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)84 b(51)408 1984 y(7.4.1)110 b(Thr)n(ead)22 b(per)g(connection)
g(mode)69 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)h(.)84 b(51)408 2097 y(7.4.2)110 b(Thr)n(ead)22
b(pool)g(mode)75 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)84
b(52)408 2210 y(7.4.3)110 b(Policy)23 b(transition)g(.)45
b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)84 b(52)199 2323 y(7.5)96
b(Idle)22 b(connection)g(shutdown)57 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)
84 b(53)408 2436 y(7.5.1)110 b(Inter)n(operability)22
b(Considerations)31 b(.)46 b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)h(.)84 b(53)199 2549 y(7.6)96 b(T)-8
b(ransports)21 b(and)h(endpoints)75 b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)84
b(54)408 2662 y(7.6.1)110 b(End)22 b(point)g(publishing)29
b(.)46 b(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)h(.)84 b(54)199 2775 y(7.7)96
b(Connection)22 b(selection)g(and)h(acceptance)46 b(.)f(.)h(.)f(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)84
b(55)408 2888 y(7.7.1)110 b(Client)23 b(transport)e(r)o(ules)26
b(.)46 b(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)h(.)84 b(55)408 3001 y(7.7.2)110
b(Server)22 b(transport)f(r)o(ules)80 b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)84
b(56)199 3114 y(7.8)96 b(Bidir)n(ectional)24 b(GIOP)74
b(.)46 b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)84 b(56)199
3226 y(7.9)96 b(SSL)22 b(transport)84 b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)h(.)84 b(57)63 3430 y Fl(8)91
b(Code)22 b(set)i(conversion)2228 b(59)199 3543 y Fq(8.1)96
b(Native)23 b(code)f(set)80 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)84 b(59)199 3656 y(8.2)96 b(Code)22 b(set)f(library)60
b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)84
b(59)199 3769 y(8.3)96 b(Implementing)22 b(new)g(code)f(sets)j(.)46
b(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)h(.)84 b(60)p eop
%%Page: 6 6
6 5 bop eop
%%Page: 1 7
1 6 bop 63 1166 a Fk(Chapter)44 b(1)63 1586 y Fm(Introduction)63
2036 y Fq(omniORBpy)29 b(is)h(an)g(Object)h(Request)d(Br)n(oker)g
(\(ORB\))j(that)e(implements)h(the)f(CORBA)h(2.6)63 2149
y(Python)22 b(mapping)h([OMG01b)s(].)30 b(It)23 b(works)f(in)i
(conjunction)g(with)f(omniORB)g(for)h(C++,)g(ver)n(-)63
2262 y(sion)e(4.0.)204 2380 y(This)32 b(user)f(guide)g(tells)h(you)g
(how)g(to)f(use)h(omniORBpy)f(to)h(develop)f(CORBA)i(appli-)63
2493 y(cations)h(using)g(Python.)62 b(It)33 b(assumes)g(a)i(basic)h
(understanding)c(of)i(CORBA,)h(and)f(of)g(the)63 2606
y(Python)21 b(mapping.)28 b(Unlike)23 b(most)f(CORBA)h(standar)n(ds,)e
(the)h(Python)g(mapping)h(document)63 2719 y(is)f(small,)i(and)f(quite)
f(easy)g(to)g(follow)-8 b(.)204 2837 y(This)33 b(manual)i(contains)e
(all)i(you)d(need)g(to)h(know)f(about)h(omniORB)h(in)g(or)n(der)e(to)h
(use)63 2950 y(omniORBpy)-10 b(.)27 b(Some)22 b(sections)f(ar)n(e)i(r)n
(epeated)e(fr)n(om)i(the)f(omniORB)h(manual.)204 3067
y(In)k(this)h(chapter)-7 b(,)28 b(we)f(give)h(an)h(overview)e(of)h(the)
f(main)i(featur)n(es)e(of)g(omniORBpy)h(and)63 3180 y(what)22
b(you)g(need)f(to)h(do)g(to)g(setup)f(your)h(envir)n(onment)g(to)g(r)o
(un)g(it.)63 3510 y Fo(1.1)119 b(Features)63 3734 y Fj(1.1.1)99
b(Multithreading)63 3921 y Fq(omniORB)26 b(is)h(fully)g(multithr)n
(eaded.)39 b(T)-8 b(o)26 b(achieve)h(low)g(call)h(over)n(head,)f
(unnecessary)d(call-)63 4034 y(multiplexing)k(is)g(eliminated.)43
b(W)-5 b(ith)28 b(the)f(default)h(policies,)h(ther)n(e)d(is)i(at)g
(most)f(one)g(call)j(in-)63 4147 y(\003ight)19 b(in)g(each)g
(communication)i(channel)e(between)f(two)g(addr)n(ess)f(spaces)h(at)i
(any)f(one)f(time.)63 4260 y(T)-8 b(o)24 b(do)g(this)h(without)g
(limiting)h(the)f(level)g(of)g(concurr)n(ency)-10 b(,)26
b(new)e(channels)i(connecting)e(the)63 4373 y(two)f(addr)n(ess)g
(spaces)g(ar)n(e)i(cr)n(eated)e(on)h(demand)f(and)i(cached)f(when)f
(ther)n(e)h(ar)n(e)g(concurr)n(ent)63 4485 y(calls)h(in)g(pr)n(ogr)n
(ess.)30 b(Each)25 b(channel)f(is)h(served)d(by)i(a)h(dedicated)e(thr)n
(ead.)32 b(This)23 b(arrangement)63 4598 y(pr)n(ovides)31
b(maximal)k(concurr)n(ency)d(and)h(eliminates)f(any)h(thr)n(ead)f
(switching)g(in)h(either)f(of)63 4711 y(the)25 b(addr)n(ess)h(spaces)f
(to)h(pr)n(ocess)f(a)j(call.)41 b(Furthermor)n(e,)25
b(to)h(maximise)i(the)e(thr)n(oughput)e(in)63 4824 y(pr)n(ocessing)k
(lar)n(ge)i(call)h(ar)n(guments,)f(lar)n(ge)g(data)f(elements)f(ar)n(e)
i(sent)e(as)i(soon)e(as)i(they)e(ar)n(e)63 4937 y(pr)n(ocessed)d(while)
j(the)e(other)g(ar)n(guments)h(ar)n(e)h(being)f(marshalled.)43
b(W)-5 b(ith)27 b(GIOP)h(1.2,)h(lar)n(ge)63 5050 y(messages)20
b(ar)n(e)i(fragmented,)f(so)g(the)g(marshaller)i(can)g(start)e
(transmission)g(befor)n(e)h(it)g(knows)63 5163 y(how)g(lar)n(ge)h(the)f
(entir)n(e)g(message)f(will)j(be.)204 5281 y(New)31 b(in)h(version)g
(4.0,)i(omniORB)e(also)h(supports)c(a)j(\003exible)h(thr)n(ead)e
(pooling)h(policy)-10 b(,)63 5394 y(and)18 b(supports)f(sending)g
(multiple)i(interleaved)f(calls)i(on)e(a)i(single)e(connection.)26
b(This)18 b(policy)1684 5622 y(1)p eop
%%Page: 2 8
2 7 bop 221 282 a Fq(2)1931 b Fi(CHAPTER)22 b(1.)51 b(INTRODUCTION)221
539 y Fq(leads)18 b(to)f(a)i(small)g(amount)f(of)g(additional)h(call)h
(over)n(head,)e(compar)n(ed)g(to)f(the)h(default)g(thr)n(ead)221
652 y(per)j(connection)f(model,)h(but)g(allows)h(omniORB)f(to)g(scale)g
(to)g(extr)n(emely)f(lar)n(ge)h(numbers)g(of)221 764
y(concurr)n(ent)h(clients.)221 1019 y Fj(1.1.2)99 b(Portability)221
1196 y Fq(omniORB)29 b(has)h(always)f(been)g(designed)e(to)h(be)i
(portable.)47 b(It)29 b(r)o(uns)f(on)h(many)h(\003avours)f(of)221
1309 y(Unix,)24 b(W)-5 b(indows,)23 b(several)h(embedded)e(operating)g
(systems,)g(and)i(r)n(elatively)h(obscur)n(e)e(sys-)221
1421 y(tems)i(such)g(as)g(OpenVMS,)f(Fujitsu-Siemens)g(BS2000.)37
b(It)25 b(is)h(designed)d(to)i(be)g(easy)f(to)h(port)221
1534 y(to)d(new)g(platforms.)28 b(The)22 b(IDL)g(to)g(C++)h(mapping)g
(for)g(all)h(tar)n(get)d(platforms)i(is)g(the)f(same.)221
1789 y Fj(1.1.3)99 b(Missing)26 b(features)221 1966 y
Fq(omniORB)f(is)g(not)f(\(yet\))g(a)h(complete)f(implementation)h(of)g
(the)f(CORBA)h(2.6)g(cor)n(e.)34 b(The)24 b(fol-)221
2079 y(lowing)f(is)f(a)i(list)e(of)h(the)f(missing)g(featur)n(es.)358
2289 y Fn(\017)45 b Fq(omniORB)24 b(does)e(not)g(have)i(its)f(own)g
(Interface)g(Repository)-10 b(.)27 b(However)-7 b(,)22
b(it)i(can)g(act)g(as)448 2402 y(a)31 b(client)g(to)f(an)h(IfR.)f(The)g
(omniifr)h(pr)n(oject)f(\()p Fh(http://omniifr.)o(so)o(urc)o(ef)o(or)o
(ge)o(.)448 2515 y(net/)p Fq(\))22 b(aims)h(to)f(cr)n(eate)h(an)g(IfR)f
(for)h(omniORB.)358 2701 y Fn(\017)45 b Fq(Objects)23
b(by)g(value)g(\(IDL)g(valuetype\))f(is)g(not)g(supported)e(in)j(this)f
(r)n(elease.)358 2888 y Fn(\017)45 b Fq(Inter)n(ceptors)20
b(ar)n(e)j(not)f(available)k(to)c(Python)f(code.)362
3098 y(These)32 b(featur)n(es)g(may)h(be)g(implemented)e(in)j(the)e
(short)g(to)g(medium)h(term.)58 b(It)32 b(is)h(best)221
3211 y(to)h(check)g(out)f(the)g(latest)h(status)f(on)h(the)f(omniORB)h
(home)g(page)f(\()p Fh(http://omniorb.)221 3324 y(sourceforge.net)o(/)p
Fq(\).)221 3622 y Fo(1.2)119 b(Setting)30 b(up)g(your)g(environment)221
3833 y Fq(omniORBpy)21 b(r)n(elies)g(on)f(the)h(omniORB)g(C++)h
(libraries.)28 b(If)21 b(you)f(ar)n(e)i(building)f(fr)n(om)h(sour)n
(ce,)221 3946 y(you)k(must)g(\002rst)g(build)i(omniORB)f(itself,)g(as)g
(detailed)f(in)h(the)f(omniORB)h(documentation.)221 4059
y(After)k(that,)j(you)c(can)j(build)f(the)f(omniORBpy)g(distribution,)i
(accor)n(ding)g(to)e(the)g(instr)o(uc-)221 4172 y(tions)22
b(in)h(the)f(r)n(elease)g(notes.)221 4426 y Fj(1.2.1)99
b(Paths)221 4603 y Fq(W)-5 b(ith)26 b(an)g(Autoconf)f(build)i(\(the)e
(norm)g(on)h(Unix)g(platforms\),)g(omniORBpy)f(is)h(usually)g(in-)221
4716 y(stalled)d(into)f(a)h(location)g(that)g(Python)e(will)j(\002nd)e
(it.)362 4829 y(Otherwise,)d(you)g(must)g(tell)h(Python)e(wher)n(e)h
(to)g(\002nd)g(it.)27 b(Y)-8 b(ou)19 b(must)g(add)g(two)g(dir)n
(ectories)221 4942 y(to)31 b(the)f Fh(PYTHONPATH)d Fq(envir)n(onment)k
(variable.)55 b(The)31 b Fh(lib/python)c Fq(dir)n(ectory)j(contains)221
5055 y(platform-independent)17 b(Python)h(code;)h(the)g
Fh(lib/$FARCH)c Fq(dir)n(ectory)j(contains)h(platform-)221
5168 y(speci\002c)e(binaries,)i(wher)n(e)d Fh(FARCH)f
Fq(is)j(the)e(name)h(of)h(your)e(platform,)i(such)f(as)g
Fh(i586_linux_)221 5281 y(glibc)k Fq(or)h Fh(x86_win32)p
Fq(.)362 5394 y(On)h(Unix)g(platforms,)f(set)g Fh(PYTHONPATH)c
Fq(with)23 b(a)g(command)g(like:)p eop
%%Page: 3 9
3 8 bop 63 282 a Fi(1.2.)51 b(SETTING)21 b(UP)h(YOUR)h(ENVIRONMENT)1497
b Fq(3)226 539 y Fh(export)52 b(PYTHONPATH=$PYT)o(HO)o(NP)o(ATH)o(:$)o
(TO)o(P/)o(li)o(b/p)o(yt)o(ho)o(n:)o($T)o(OP/)o(li)o(b/)o($F)o(AR)o(CH)
204 751 y Fq(On)23 b(W)-5 b(indows,)21 b(use)226 964
y Fh(set)53 b(PYTHONPATH=\045PYTH)o(ON)o(PA)o(TH)o(\045;\045)o(TO)o
(P\045)o(\\l)o(ib)o(\\py)o(th)o(on)o(;\045)o(TO)o(P\045\\)o(li)o(b\\)o
(x8)o(6_)o(win)o(32)204 1176 y Fq(\(Wher)n(e)22 b(the)g
Fh(TOP)f Fq(envir)n(onment)h(variable)j(is)e(the)e(r)n(oot)h(of)h(your)
f(omniORB)g(tr)n(ee.\))204 1289 y(Y)-8 b(ou)37 b(should)g(also)i(add)f
(the)g Fh(bin/$FARCH)c Fq(dir)n(ectory)j(to)h(your)f
Fh(PATH)p Fq(,)k(so)c(you)h(can)63 1402 y(r)o(un)d(the)f(IDL)g
(compiler)-7 b(,)39 b(omniidl.)65 b(Finally)-10 b(,)39
b(add)34 b(the)g Fh(lib/$FARCH)d Fq(dir)n(ectory)j(to)g
Fh(LD_)63 1515 y(LIBRARY_PATH)p Fq(,)17 b(so)22 b(the)f(omniORB)i(cor)n
(e)g(library)g(can)h(be)e(found.)63 1770 y Fj(1.2.2)99
b(Con\002guration)25 b(\002le)199 1947 y Fn(\017)46 b
Fq(On)18 b(Unix)g(platforms,)h(the)e(omniORB)h(r)o(untime)g(looks)f
(for)h(the)f(envir)n(onment)h(variable)290 2060 y Fh(OMNIORB_CONFIG)p
Fq(.)i(If)f(this)g(variable)i(is)e(de\002ned,)f(it)h(contains)g(the)f
(pathname)h(of)g(the)290 2172 y(omniORB)25 b(con\002guration)g(\002le.)
35 b(If)26 b(the)e(variable)j(is)f(not)e(set,)g(omniORB)i(will)g(use)e
(the)290 2285 y(compiled-in)f(pathname)g(to)f(locate)h(the)e(\002le)i
(\(by)g(default)f Fh(/etc/omniORB.cfg)o Fq(\).)199 2473
y Fn(\017)46 b Fq(On)29 b(W)-5 b(in32)29 b(platforms)g(\(W)-5
b(indows)27 b(NT)-7 b(,)28 b(2000,)j(95,)g(98\),)g(omniORB)d(\002rst)g
(checks)f(the)290 2586 y(envir)n(onment)c(variable)i
Fh(OMNIORB_CONFIG)18 b Fq(to)k(obtain)i(the)f(pathname)g(of)h(the)e
(con-)290 2699 y(\002guration)i(\002le.)35 b(If)24 b(this)h(is)g(not)f
(set,)g(it)h(then)f(attempts)f(to)h(obtain)h(con\002guration)f(data)290
2812 y(in)i(the)f(system)f(r)n(egistry)-10 b(.)37 b(It)25
b(sear)n(ches)g(for)h(the)f(data)h(under)f(the)g(key)f
Fh(HKEY_LOCAL_)290 2925 y(MACHINE\\SOFTWAR)o(E\\)o(om)o(ni)o(OR)o(B)p
Fq(.)204 3137 y(omniORB)f(has)g(a)h(lar)n(ge)g(number)f(of)g
(parameters)f(than)h(can)h(be)f(con\002gur)n(ed.)29 b(See)22
b(chap-)63 3250 y(ter)h(4)h(for)g(full)h(details.)31
b(The)23 b(\002les)g Fh(sample.cfg)d Fq(and)k Fh(sample.reg)19
b Fq(contain)24 b(an)h(example)63 3363 y(con\002guration)d(\002le)g
(and)h(set)e(of)i(r)n(egistry)e(entries)h(r)n(espectively)-10
b(.)204 3476 y(T)i(o)24 b(get)g(all)i(the)e(omniORB)h(examples)f(r)o
(unning,)h(the)f(main)i(thing)f(you)f(need)f(to)i(con\002g-)63
3589 y(ur)n(e)17 b(is)h(the)f(Naming)h(service,)h(omniNames.)26
b(T)-8 b(o)17 b(do)g(that,)h(the)f(con\002guration)h(\002le)f(or)h(r)n
(egistry)63 3702 y(should)j(contain)i(an)g(entry)f(of)g(the)g(form)172
3914 y Fh(InitRef)51 b(=)j(NameService=cor)o(ba)o(nam)o(e:)o(:m)o(y.)o
(ho)o(st.)o(na)o(me)204 4127 y Fq(See)21 b(section)h(6.1.2)i(for)e
(full)i(details)e(of)h(corbaname)g(URIs.)p eop
%%Page: 4 10
4 9 bop 221 282 a Fq(4)1931 b Fi(CHAPTER)22 b(1.)51 b(INTRODUCTION)p
eop
%%Page: 5 11
5 10 bop 63 1168 a Fk(Chapter)44 b(2)63 1590 y Fm(The)52
b(Basics)63 2042 y Fq(In)31 b(this)h(chapter)-7 b(,)34
b(we)e(go)f(thr)n(ough)g(thr)n(ee)g(examples)g(to)h(illustrate)g(the)f
(practical)j(steps)c(to)63 2155 y(use)23 b(omniORBpy)-10
b(.)32 b(By)24 b(going)f(thr)n(ough)h(the)f(sour)n(ce)h(code)f(of)i
(each)f(example,)h(the)e(essential)63 2268 y(concepts)29
b(and)j(APIs)e(ar)n(e)h(intr)n(oduced.)52 b(If)31 b(you)g(have)g(no)g
(pr)n(evious)f(experience)g(with)h(us-)63 2381 y(ing)e(CORBA,)f(you)h
(should)f(study)f(this)h(chapter)h(in)g(detail.)48 b(Ther)n(e)28
b(ar)n(e)h(pointers)e(to)i(other)63 2494 y(essential)21
b(documents)g(you)h(should)g(be)g(familiar)k(with.)204
2614 y(If)c(you)f(have)h(experience)e(with)i(using)f(other)g(ORBs,)g
(you)g(should)g(still)h(go)f(thr)n(ough)g(this)63 2727
y(chapter)34 b(because)h(it)g(pr)n(ovides)f(important)h(information)g
(about)g(the)f(featur)n(es)h(and)g(APIs)63 2839 y(that)22
b(ar)n(e)h(necessarily)f(omniORB)h(speci\002c.)63 3181
y Fo(2.1)119 b(The)29 b(Echo)i(example)63 3406 y Fq(W)-8
b(e)24 b(use)h(an)g(example)h(which)g(is)f(similar)i(to)e(the)f(one)h
(used)f(in)i(the)e(omniORB)i(manual.)37 b(W)-8 b(e)63
3519 y(de\002ne)21 b(an)i(interface,)g(called)g Fh(Example::Echo)p
Fq(,)17 b(as)22 b(follows:)204 3682 y Fg(//)49 b(echo_example)n(.idl)
204 3782 y Ff(module)f(Example)h({)303 3881 y(interface)g(Echo)g({)403
3981 y(string)g(echoString)n(\(in)g(string)g(mesg)o(\);)303
4080 y(};)204 4180 y(};)204 4364 y Fq(The)31 b(important)h(dif)n(fer)n
(ence)g(fr)n(om)h(the)e(omniORB)h(Echo)g(example)g(is)g(that)g(our)f
Fh(Echo)63 4477 y Fq(interface)c(is)g(declar)n(ed)g(within)g(an)h(IDL)e
(module)h(named)f Fh(Example)p Fq(.)38 b(The)27 b(r)n(eason)f(for)h
(this)63 4589 y(will)d(become)e(clear)h(in)g(a)h(moment.)204
4709 y(If)18 b(you)f(ar)n(e)i(new)e(to)h(IDL,)g(you)f(can)i(learn)f
(about)h(its)e(syntax)h(in)g(Chapter)g(3)h(of)f(the)g(CORBA)63
4822 y(speci\002cation)27 b(2.6)h([OMG01a)s(].)42 b(For)27
b(the)f(moment,)i(you)e(only)h(need)f(to)h(know)f(that)h(the)g(in-)63
4935 y(terface)g(consists)g(of)g(a)h(single)g(operation,)f
Fh(echoString\(\))p Fq(,)d(which)k(takes)e(a)j(string)d(as)i(an)63
5048 y(ar)n(gument)22 b(and)g(r)n(eturns)g(a)h(copy)f(of)h(the)e(same)i
(string.)204 5168 y(The)k(interface)i(is)f(written)f(in)i(a)g(\002le,)g
(called)g Fh(example_echo.id)o(l)p Fq(.)38 b(It)28 b(is)g(part)g(of)g
(the)63 5281 y(CORBA)35 b(standar)n(d)h(that)f(all)i(IDL)f(\002les)f
(should)g(have)h(the)f(extension)f(`)p Fh(.idl)p Fq(',)j(although)63
5394 y(omniORB)22 b(does)f(not)h(enfor)n(ce)h(this.)1684
5622 y(5)p eop
%%Page: 6 12
6 11 bop 221 282 a Fq(6)2138 b Fi(CHAPTER)21 b(2.)51
b(THE)22 b(BASICS)221 539 y Fo(2.2)119 b(Generating)29
b(the)g(Python)i(stubs)221 753 y Fq(Fr)n(om)25 b(the)f(IDL)g(\002le,)h
(we)g(use)f(the)g(IDL)g(compiler)-7 b(,)26 b(omniidl,)g(to)e(pr)n
(oduce)g(the)g(Python)f(stubs)221 866 y(for)g(that)f(IDL.)g(The)g
(stubs)g(contain)h(Python)e(declarations)i(for)g(all)h(the)e
(interfaces)g(and)h(types)221 979 y(declar)n(ed)h(in)h(the)e(IDL,)h(as)
g(r)n(equir)n(ed)g(by)g(the)f(Python)g(mapping.)33 b(It)24
b(is)g(possible)f(to)h(generate)221 1092 y(stubs)c(dynamically)i(at)f
(r)o(un-time,)g(as)g(described)e(in)i(section)f(4.9,)i(but)f(it)f(is)h
(mor)n(e)g(ef)n(\002cient)g(to)221 1204 y(generate)g(them)h(statically)
-10 b(.)362 1319 y(T)i(o)22 b(generate)f(the)h(stubs,)f(we)h(use)g(a)h
(command)g(line)g(like)448 1539 y Fh(omniidl)52 b(-bpython)f
(example_echo.i)o(dl)221 1760 y Fq(As)20 b(r)n(equir)n(ed)h(by)g(the)f
(standar)n(d,)g(that)h(pr)n(oduces)e(two)i(Python)e(packages)h(derived)
g(fr)n(om)i(the)221 1873 y(module)32 b(name)g Fh(Example)p
Fq(.)54 b(Dir)n(ectory)32 b Fh(Example)d Fq(contains)j(the)f
(client-side)h(de\002nitions)221 1986 y(\(and)27 b(also)g(the)f(type)f
(declarations)i(if)g(ther)n(e)f(wer)n(e)g(any\);)j(dir)n(ectory)c
Fh(Example__POA)d Fq(con-)221 2099 y(tains)e(the)f(server)n(-side)f
(skeletons.)24 b(This)19 b(explains)h(the)f(dif)n(\002culty)h(with)f
(declarations)h(at)f(IDL)221 2212 y(global)24 b(scope;)d(section)h(2.7)
h(explains)g(how)f(to)g(access)g(global)i(declarations.)362
2326 y(If)19 b(you)g(look)f(at)h(the)g(Python)e(code)i(in)g(the)f(two)h
(packages,)f(you)h(will)h(see)e(that)g(they)g(ar)n(e)i(al-)221
2439 y(most)d(empty)-10 b(.)25 b(They)17 b(simply)h(import)f(the)g
Fh(example_echo_idl)o(.p)o(y)12 b Fq(\002le,)18 b(which)h(is)f(wher)n
(e)221 2552 y(both)29 b(the)f(client)i(and)g(server)e(side)g
(declarations)i(actually)g(live.)49 b(This)29 b(arrangement)f(is)i(so)
221 2665 y(that)e(omniidl)g(can)h(easily)f(extend)e(the)h(packages)g
(if)h(other)f(IDL)g(\002les)g(add)h(declarations)g(to)221
2778 y(the)22 b(same)h(IDL)f(modules.)221 3086 y Fo(2.3)119
b(Object)29 b(References)g(and)g(Servants)221 3301 y
Fq(W)-8 b(e)22 b(contact)h(a)g(CORBA)g(object)g(thr)n(ough)e(an)j
Fp(object)g(r)n(efer)n(ence)p Fq(.)31 b(The)22 b(actual)i
(implementation)221 3413 y(of)f(a)g(CORBA)g(object)f(is)h(termed)e(a)i
Fp(servant)p Fq(.)362 3528 y(Object)31 b(r)n(efer)n(ences)f(and)g
(servants)g(ar)n(e)h(quite)e(separate)h(entities,)h(and)f(it)h(is)f
(important)221 3641 y(not)19 b(to)f(confuse)h(the)f(two.)26
b(Client)20 b(code)e(deals)h(pur)n(ely)g(with)g(object)g(r)n(efer)n
(ences,)f(so)h(ther)n(e)f(can)221 3754 y(be)j(no)f(confusion;)g(object)
h(implementation)f(code)g(must)g(deal)g(with)h(both)f(object)g(r)n
(efer)n(ences)221 3867 y(and)30 b(servants.)48 b(Y)-8
b(ou)29 b(will)i(get)e(a)h(r)o(un-time)g(err)n(or)f(if)i(you)e(use)f(a)
j(servant)e(wher)n(e)g(an)h(object)221 3980 y(r)n(efer)n(ence)22
b(is)h(expected,)d(or)i(vice-versa.)221 4288 y Fo(2.4)119
b(Example)30 b(1)f(\227)h(Colocated)g(client)f(and)h(servant)221
4502 y Fq(In)k(the)g(\002rst)f(example,)k(both)d(the)f(client)i(and)f
(servant)g(ar)n(e)g(in)h(the)f(same)g(addr)n(ess)f(space.)221
4615 y(The)27 b(next)g(sections)f(show)h(how)g(the)f(client)i(and)g
(servant)f(can)h(be)g(split)f(between)f(dif)n(fer)n(ent)221
4728 y(addr)n(ess)21 b(spaces.)362 4843 y(First,)h(the)g(code:)254
4995 y Fe(1)83 b Fg(#!/usr)o(/bin)o(/env)49 b(python)254
5095 y Fe(2)254 5194 y(3)83 b Ff(import)49 b(sys)254
5294 y Fe(4)83 b Ff(from)49 b(omniORB)g(import)g(CORBA)o(,)g
(PortableServer)254 5394 y Fe(5)83 b Ff(import)49 b(Example)o(,)g
(Example__POA)p eop
%%Page: 7 13
7 12 bop 63 282 a Fi(2.4.)51 b(EXAMPLE)21 b(1)i(\227)f(COLOCA)-7
b(TED)24 b(CLIENT)d(AND)i(SER)-5 b(V)-10 b(ANT)798 b
Fq(7)96 539 y Fe(6)96 638 y(7)83 b Ff(class)49 b(Echo_i)f
(\(Example__POA)n(.Echo)o(\):)96 738 y Fe(8)282 b Ff(def)49
b(echoString)n(\(self,)g(mesg)o(\):)96 837 y Fe(9)481
b Ff(print)49 b("echoString)n(\(\))h(called)e(with)h(message)o(:",)g
(mesg)71 937 y Fe(10)481 b Ff(return)49 b(mesg)71 1037
y Fe(11)71 1136 y(12)83 b Ff(orb)49 b(=)h(CORBA)o(.ORB_init)n(\(sys)o
(.argv)o(,)g(CORBA)o(.ORB_ID)o(\))71 1236 y Fe(13)83
b Ff(poa)49 b(=)h(orb)o(.resolve_initial_references)-5
b(\("RootPOA)n("\))71 1336 y Fe(14)71 1435 y(15)83 b
Ff(ei)49 b(=)h(Echo_i)o(\(\))71 1535 y Fe(16)83 b Ff(eo)49
b(=)h(ei)o(._this)o(\(\))71 1634 y Fe(17)71 1734 y(18)83
b Ff(poaManager)48 b(=)h(poa._get_the_POAManager)l(\(\))71
1834 y Fe(19)83 b Ff(poaManager)n(.activate)n(\(\))71
1933 y Fe(20)71 2033 y(21)g Ff(message)48 b(=)i("Hello)o(")71
2133 y Fe(22)83 b Ff(result)98 b(=)50 b(eo.)o(echoString)o(\()o
(message)o(\))71 2232 y Fe(23)71 2332 y(24)83 b Ff(print)49
b(")o(I)h(said)f('\045s'.)g(The)g(object)g(said)g('\045s'.")g(\045)g
(\(message)o(,result)o(\))204 2501 y Fq(The)39 b(example)g(illustrates)
g(several)h(important)f(interactions)g(among)g(the)g(ORB,)g(the)63
2614 y(POA,)22 b(the)g(servant,)g(and)g(the)g(client.)29
b(Her)n(e)21 b(ar)n(e)i(the)f(details:)63 2881 y Fj(2.4.1)99
b(Imports)63 3062 y Fl(Line)22 b(3)290 3175 y Fq(Import)f(the)h
Fh(sys)g Fq(module)g(to)g(access)g Fh(sys.argv)p Fq(.)63
3371 y Fl(Line)g(4)290 3484 y Fq(Import)33 b(omniORB's)i
(implementations)f(of)h(the)f Fh(CORBA)e Fq(and)j Fh(PortableServer)290
3597 y Fq(modules.)j(The)25 b(standar)n(d)h(r)n(equir)n(es)g(that)g
(these)f(modules)g(ar)n(e)i(available)i(outside)c(of)290
3710 y(any)e(package,)f(so)f(you)h(can)i(also)e(do)290
3863 y Ff(import)49 b(CORBA)o(,)g(PortableServer)290
4072 y Fq(Explicitly)30 b(specifying)e(omniORB)i(is)f(useful)g(if)h
(you)e(have)i(mor)n(e)f(than)g(one)g(Python)290 4185
y(ORB)22 b(installed.)63 4381 y Fl(Line)g(5)290 4494
y Fq(Import)16 b(the)g(client-side)h(stubs)f(and)i(server)n(-side)d
(skeletons)g(generated)g(for)i(IDL)g(mod-)290 4606 y(ule)22
b Fh(Example)p Fq(.)63 4874 y Fj(2.4.2)99 b(Servant)24
b(class)i(de\002nition)63 5055 y Fl(Lines)d(7\22610)290
5168 y Fq(For)37 b(interface)h Fh(Example::Echo)p Fq(,)e(omniidl)j(pr)n
(oduces)e(a)h(skeleton)e(class)j(named)290 5281 y Fh(Example__POA.Ec)o
(ho)o Fq(.)47 b(Her)n(e)30 b(we)h(de\002ne)f(an)h(implementation)g
(class,)i Fh(Echo_i)p Fq(,)290 5394 y(which)23 b(derives)f(fr)n(om)h
(the)f(skeleton)e(class.)p eop
%%Page: 8 14
8 13 bop 221 282 a Fq(8)2138 b Fi(CHAPTER)21 b(2.)51
b(THE)22 b(BASICS)448 539 y Fq(Ther)n(e)28 b(is)g(little)h(constraint)f
(on)g(how)f(you)h(design)f(your)g(implementation)h(class,)i(ex-)448
652 y(cept)d(that)f(it)h(has)g(to)f(inherit)h(fr)n(om)h(the)e(skeleton)
f(class)i(and)g(must)f(implement)h(all)h(of)448 764 y(the)c(operations)
e(declar)n(ed)i(in)h(the)e(IDL.)g(Note)g(that)h(since)g(Python)e(is)j
(a)f(dynamic)h(lan-)448 877 y(guage,)k(err)n(ors)e(due)h(to)f(missing)i
(operations)d(and)j(operations)e(with)h(incorr)n(ect)h(type)448
990 y(signatur)n(es)22 b(ar)n(e)h(only)f(r)n(eported)f(when)g(someone)g
(tries)h(to)g(call)j(those)c(operations.)221 1263 y Fj(2.4.3)99
b(ORB)25 b(initialisation)221 1445 y Fl(Line)e(12)448
1558 y Fq(The)32 b(ORB)f(is)h(initialised)h(by)f(calling)i(the)d
Fh(CORBA.ORB_init\()o(\))26 b Fq(function.)56 b Fh(ORB_)448
1671 y(init\(\))34 b Fq(is)j(passed)d(a)j(list)g(of)f(command-line)i
(ar)n(guments,)h(and)d(an)h(ORB)f(identi-)448 1784 y(\002er)-7
b(.)44 b(The)28 b(ORB)g(identi\002er)f(should)g(be)h(`omniORB4',)i(but)
e(it)g(is)g(usually)g(best)g(to)f(use)448 1897 y Fh(CORBA.ORB_ID)p
Fq(,)20 b(which)26 b(is)g(initialised)h(to)e(a)h(suitable)g(string,)f
(or)g(leave)h(it)g(out)e(alto-)448 2010 y(gether)-7 b(,)21
b(and)i(r)n(ely)f(on)h(the)f(default.)448 2166 y Fh(ORB_init\(\))d
Fq(pr)n(ocesses)j(any)h(command-line)i(ar)n(guments)d(which)i(begin)f
(with)h(the)448 2279 y(string)32 b(`)p Fh(-ORB)p Fq(',)f(and)h(r)n
(emoves)g(them)f(fr)n(om)i(the)f(ar)n(gument)f(list.)57
b(See)32 b(section)f(4.1.1)448 2392 y(for)d(details.)44
b(If)28 b(any)h(ar)n(guments)e(ar)n(e)h(invalid,)j(or)d(other)f
(initialisation)j(err)n(ors)d(occur)448 2505 y(\(such)d(as)f(err)n(ors)
f(in)i(the)e(con\002guration)h(\002le\),)g(the)f Fh(CORBA.INITIALIZ)o
(E)17 b Fq(exception)448 2618 y(is)23 b(raised.)221 2890
y Fj(2.4.4)99 b(Obtaining)25 b(the)g(Root)h(POA)221 3073
y Fl(Line)d(13)448 3186 y Fq(T)-8 b(o)21 b(activate)i(our)e(servant)g
(object)h(and)f(make)h(it)g(available)i(to)e(clients,)f(we)g(must)g(r)n
(egis-)448 3298 y(ter)h(it)g(with)h(a)f(POA.)h(In)e(this)h(example,)g
(we)g(use)f(the)h Fp(Root)h(POA)p Fq(,)e(rather)g(than)i(cr)n(eating)
448 3411 y(any)34 b(child)g(POAs.)60 b(The)33 b(Root)g(POA)g(is)h
(found)f(with)g Fh(orb.resolve_ini)o(ti)o(al)o(_)448
3524 y(references\(\))p Fq(.)448 3680 y(A)f(POA)-7 b('s)31
b(behaviour)h(is)f(governed)f(by)h(its)g Fp(policies)p
Fq(.)56 b(The)31 b(Root)f(POA)h(has)h(suitable)448 3793
y(policies)24 b(for)g(many)f(simple)h(servers.)29 b(Chapter)23
b(11)i(of)e(the)g(CORBA)h(2.6)g(speci\002cation)448 3906
y([OMG01a)s(])f(has)g(details)f(of)h(all)h(the)d(POA)i(policies)g
(which)g(ar)n(e)g(available.)221 4178 y Fj(2.4.5)99 b(Object)25
b(initialisation)221 4361 y Fl(Line)e(15)448 4474 y Fq(An)g(instance)f
(of)h(the)f(Echo)g(servant)g(object)g(is)h(cr)n(eated.)221
4673 y Fl(Line)g(16)448 4786 y Fq(The)h(object)h(is)f(implicitly)j
(activated)e(in)g(the)f(Root)f(POA,)i(and)f(an)i(object)e(r)n(efer)n
(ence)g(is)448 4899 y(r)n(eturned,)d(using)h(the)g Fh(_this\(\))d
Fq(method.)448 5055 y(One)30 b(of)g(the)f(important)h(characteristics)g
(of)g(an)h(object)e(r)n(efer)n(ence)h(is)g(that)f(it)h(is)g(com-)448
5168 y(pletely)20 b(location)i(transpar)n(ent.)27 b(A)21
b(client)g(can)h(invoke)f(on)g(the)f(object)h(using)f(its)h(object)448
5281 y(r)n(efer)n(ence)26 b(without)f(any)g(need)g(to)g(know)g(whether)
f(the)h(servant)h(object)f(is)h(colocated)448 5394 y(in)e(the)d(same)i
(addr)n(ess)e(space)h(or)h(is)f(in)h(a)h(dif)n(fer)n(ent)e(addr)n(ess)f
(space.)p eop
%%Page: 9 15
9 14 bop 63 282 a Fi(2.5.)51 b(EXAMPLE)21 b(2)i(\227)f(DIFFERENT)e
(ADDRESS)i(SP)-8 b(ACES)1105 b Fq(9)290 539 y(In)27 b(the)g(case)h(of)f
(colocated)h(client)g(and)f(servant,)h(omniORB)g(is)g(able)g(to)f
(short-cir)n(cuit)290 652 y(the)35 b(client)i(calls)h(so)d(they)g(do)g
(not)h(involve)h(IIOP)-12 b(.)36 b(The)f(calls)j(still)f(go)e(thr)n
(ough)g(the)290 764 y(POA,)22 b(however)-7 b(,)20 b(so)h(the)g(various)
i(POA)f(policies)f(af)n(fect)i(local)h(calls)f(in)f(the)f(same)h(way)
290 877 y(as)k(r)n(emote)f(ones.)36 b(This)25 b(optimisation)h(is)g
(applicable)h(not)e(only)h(to)f(object)h(r)n(efer)n(ences)290
990 y(r)n(eturned)k(by)i Fh(_this\(\))p Fq(,)f(but)g(to)h(any)f(object)
h(r)n(efer)n(ences)f(that)g(ar)n(e)i(passed)d(ar)n(ound)290
1103 y(within)18 b(the)f(same)h(addr)n(ess)e(space)i(or)f(r)n(eceived)h
(fr)n(om)g(other)f(addr)n(ess)f(spaces)i(via)h(IIOP)290
1216 y(calls.)63 1488 y Fj(2.4.6)99 b(Activating)25 b(the)g(POA)63
1670 y Fl(Lines)e(18\22619)290 1783 y Fq(POAs)31 b(ar)n(e)i(initially)g
(in)f(the)f Fp(holding)j Fq(state,)f(meaning)f(that)f(incoming)i(r)n
(equests)c(ar)n(e)290 1896 y(blocked.)e(Lines)20 b(18)i(and)f(19)h
(acquir)n(e)g(a)f(r)n(efer)n(ence)g(to)f(the)g(POA)-7
b('s)22 b(POA)f(manager)-7 b(,)22 b(and)290 2009 y(use)e(it)i(to)f(put)
g(the)f(POA)i(into)f(the)g Fp(active)i Fq(state.)k(Incoming)21
b(r)n(equests)e(ar)n(e)j(now)f(served.)290 2122 y Fl(Failing)i(to)h
(activate)i(the)e(POA)e(is)j(one)e(of)g(the)h(most)g(common)e
(programming)h(mis-)290 2235 y(takes.)49 b(If)30 b(your)e(program)h
(appears)i(deadlocked,)f(make)g(sure)g(you)e(activated)j(the)290
2348 y(POA!)63 2619 y Fj(2.4.7)99 b(Performing)24 b(a)g(call)63
2802 y Fl(Line)e(22)290 2914 y Fq(At)e(long)h(last,)g(we)g(can)g(call)i
(the)d(object's)h Fh(echoString\(\))15 b Fq(operation.)27
b(Even)20 b(though)290 3027 y(the)37 b(object)h(is)h(local,)k(the)37
b(operation)g(goes)g(thr)n(ough)g(the)g(ORB)i(and)f(POA,)g(so)f(the)290
3140 y(types)25 b(of)j(the)e(ar)n(guments)h(can)h(be)f(checked,)g(and)h
(any)f(mutable)h(ar)n(guments)e(can)j(be)290 3253 y(copied.)52
b(This)31 b(ensur)n(es)f(that)h(the)f(semantics)h(of)g(local)i(and)e(r)
n(emote)f(calls)i(ar)n(e)g(iden-)290 3366 y(tical.)67
b(If)35 b(any)g(of)h(the)e(ar)n(guments)g(\(or)i(r)n(eturn)e(values\))i
(ar)n(e)f(of)h(the)e(wr)n(ong)g(type,)j(a)290 3479 y
Fh(CORBA.BAD_PARAM)16 b Fq(exception)21 b(is)i(raised.)63
3794 y Fo(2.5)119 b(Example)29 b(2)h(\227)f(Dif)n(ferent)e(Address)j
(Spaces)63 4011 y Fq(In)g(this)g(example,)j(the)c(client)i(and)g(the)f
(object)g(implementation)h(r)n(eside)f(in)h(two)f(dif)n(fer)n(ent)63
4124 y(addr)n(ess)19 b(spaces.)27 b(The)21 b(code)f(of)h(this)g
(example)g(is)h(almost)f(the)f(same)i(as)f(the)f(pr)n(evious)h(exam-)63
4237 y(ple.)26 b(The)20 b(only)g(dif)n(fer)n(ence)g(is)g(the)g(extra)f
(work)h(which)g(needs)f(to)g(be)h(done)f(to)h(pass)f(the)h(object)63
4350 y(r)n(efer)n(ence)i(fr)n(om)h(the)f(object)g(implementation)h(to)f
(the)f(client.)204 4465 y(The)e(simplest)g(\(and)h(quite)g(primitive\))
h(way)f(to)f(pass)g(an)i(object)f(r)n(efer)n(ence)f(between)f(two)63
4578 y(addr)n(ess)i(spaces)g(is)i(to)f(pr)n(oduce)f(a)i
Fp(stringi\002ed)i Fq(version)d(of)g(the)g(object)g(r)n(efer)n(ence)g
(and)g(to)g(pass)63 4691 y(this)i(string)g(to)h(the)f(client)i(as)f(a)g
(command-line)i(ar)n(gument.)31 b(The)24 b(string)f(is)h(then)f
(converted)63 4804 y(by)d(the)g(client)h(into)g(a)g(pr)n(oper)e(object)
i(r)n(efer)n(ence.)26 b(This)21 b(method)e(is)i(used)e(in)i(this)g
(example.)27 b(In)63 4917 y(the)g(next)g(example,)i(we)e(shall)i(intr)n
(oduce)e(a)i(better)d(way)i(of)g(passing)f(the)g(object)h(r)n(efer)n
(ence)63 5030 y(using)22 b(the)f(CORBA)i(Naming)g(Service.)63
5301 y Fj(2.5.1)99 b(Object)19 b(Implementation:)27 b(Generating)18
b(a)h(Stringi\002ed)g(Object)g(Reference)p eop
%%Page: 10 16
10 15 bop 221 282 a Fq(10)2093 b Fi(CHAPTER)21 b(2.)51
b(THE)22 b(BASICS)254 539 y Fe(1)83 b Fg(#!/usr)o(/bin)o(/env)49
b(python)254 638 y Fe(2)254 738 y(3)83 b Ff(import)49
b(sys)254 837 y Fe(4)83 b Ff(from)49 b(omniORB)g(import)g(CORBA)o(,)g
(PortableServer)254 937 y Fe(5)83 b Ff(import)49 b(Example)o(,)g
(Example__POA)254 1037 y Fe(6)254 1136 y(7)83 b Ff(class)49
b(Echo_i)g(\(Example__POA)m(.Echo\):)254 1236 y Fe(8)283
b Ff(def)49 b(echoString)n(\(self)o(,)h(mesg)o(\):)254
1336 y Fe(9)482 b Ff(print)49 b(")o(echoString)o(\(\))g(called)g(with)g
(message)o(:")o(,)h(mesg)229 1435 y Fe(10)482 b Ff(return)48
b(mesg)229 1535 y Fe(11)229 1634 y(12)83 b Ff(orb)50
b(=)f(CORBA)o(.ORB_init)o(\()o(sys.argv)o(,)h(CORBA)o(.)o(ORB_ID)o(\))
229 1734 y Fe(13)83 b Ff(poa)50 b(=)f(orb.)o
(resolve_initial_references)l(\()o("RootPOA)o("\))229
1834 y Fe(14)229 1933 y(15)83 b Ff(ei)50 b(=)f(Echo_i)o(\(\))229
2033 y Fe(16)83 b Ff(eo)50 b(=)f(ei._this)o(\(\))229
2133 y Fe(17)229 2232 y(18)83 b Ff(print)49 b(orb.)o(object_to_string)m
(\(eo\))229 2332 y Fe(19)229 2431 y(20)83 b Ff(poaManager)48
b(=)i(poa)o(._get_the_POAManager)m(\(\))229 2531 y Fe(21)83
b Ff(poaManager)n(.activate)o(\(\))229 2631 y Fe(22)229
2730 y(23)g Ff(orb.run)o(\(\))362 2900 y Fq(Up)24 b(until)h(line)g(18,)
h(this)e(example)g(is)h(identical)g(to)f(the)g(colocated)g(case.)33
b(On)25 b(line)g(18,)h(the)221 3013 y(ORB's)d Fh(object_to_stri)o(ng)o
(\(\))16 b Fq(operation)22 b(is)h(called.)29 b(This)23
b(r)n(esults)e(in)j(a)f(string)f(starting)221 3126 y(with)29
b(the)f(signatur)n(e)h(`IOR:')g(and)g(followed)f(by)h(some)f
(hexadecimal)i(digits.)46 b(All)30 b(CORBA)221 3239 y(2)e(compliant)g
(ORBs)e(ar)n(e)i(able)g(to)e(convert)h(the)f(string)h(into)f(its)h
(internal)h(r)n(epr)n(esentation)d(of)221 3352 y(a)36
b(so-called)g(Inter)n(operable)d(Object)j(Refer)n(ence)e(\(IOR\).)i
(The)e(IOR)i(contains)f(the)f(location)221 3465 y(information)c(and)g
(a)g(key)e(to)h(uniquely)g(identify)g(the)g(object)g(implementation)g
(in)h(its)g(own)221 3578 y(addr)n(ess)21 b(space)778
3545 y Fd(1)815 3578 y Fq(.)28 b(Fr)n(om)23 b(the)e(IOR,)i(an)g(object)
f(r)n(efer)n(ence)g(can)i(be)e(constr)o(ucted.)362 3693
y(After)34 b(the)f(POA)h(has)g(been)g(activated,)j Fh(orb.run\(\))30
b Fq(is)k(called.)64 b(Since)34 b(omniORB)g(is)221 3806
y(fully)27 b(multi-thr)n(eaded,)g(it)g(is)g(not)f(actually)h(necessary)
f(to)g(call)i Fh(orb.run\(\))23 b Fq(for)j(operation)221
3919 y(dispatch)e(to)h(happen\227if)f(the)g(main)i(pr)n(ogram)e(had)h
(some)f(other)f(work)h(to)g(do,)g(it)h(could)g(do)221
4032 y(so,)34 b(and)e(r)n(emote)f(invocations)i(would)f(be)g
(dispatched)f(in)i(separate)e(thr)n(eads.)55 b(However)-7
b(,)221 4145 y(in)32 b(the)f(absence)g(of)g(anything)g(else)g(to)f(do,)
j Fh(orb.run\(\))27 b Fq(is)32 b(called)g(so)f(the)f(thr)n(ead)h
(blocks)221 4258 y(rather)20 b(than)h(exiting)f(immediately)h(when)f
(the)g(end-of-\002le)g(is)h(r)n(eached.)27 b Fh(orb.run\(\))16
b Fq(stays)221 4371 y(blocked)22 b(until)h(the)f(ORB)h(is)f(shut)g
(down.)221 4602 y Fj(2.5.2)99 b(Client:)31 b(Using)25
b(a)g(Stringi\002ed)g(Object)g(Reference)254 4823 y Fe(1)83
b Fg(#!/usr)o(/bin)o(/env)49 b(python)254 4923 y Fe(2)254
5022 y(3)83 b Ff(import)49 b(sys)254 5122 y Fe(4)83 b
Ff(from)49 b(omniORB)g(import)g(CORBA)254 5222 y Fe(5)83
b Ff(import)49 b(Example)p 221 5306 1316 4 v 327 5362
a Fe(1)356 5394 y Fc(Notice)18 b(that)j(the)e(object)g(key)f(is)g(not)h
(globally)f(unique)h(acr)o(oss)e(addr)o(ess)g(spaces.)p
eop
%%Page: 11 17
11 16 bop 63 282 a Fi(2.5.)51 b(EXAMPLE)21 b(2)i(\227)f(DIFFERENT)e
(ADDRESS)i(SP)-8 b(ACES)1060 b Fq(11)96 539 y Fe(6)96
638 y(7)83 b Ff(orb)49 b(=)h(CORBA)o(.ORB_init)n(\(sys)o(.argv)o(,)g
(CORBA)o(.ORB_ID)o(\))96 738 y Fe(8)96 837 y(9)83 b Ff(ior)49
b(=)h(sys)o(.argv)o([1])71 937 y Fe(10)83 b Ff(obj)49
b(=)h(orb)o(.string_to_object)m(\(ior)o(\))71 1037 y
Fe(11)71 1136 y(12)83 b Ff(eo)49 b(=)h(obj)o(._narrow)o(\(Example)n
(.Echo)o(\))71 1236 y Fe(13)71 1336 y(14)83 b Ff(if)49
b(eo)h(is)f(None)o(:)71 1435 y Fe(15)282 b Ff(print)49
b("Object)f(reference)h(is)g(not)g(an)h(Example)n(::Echo)o(")71
1535 y Fe(16)282 b Ff(sys)o(.exit\(1\))71 1634 y Fe(17)71
1734 y(18)83 b Ff(message)48 b(=)i("Hello)f(from)g(Python)o(")71
1834 y Fe(19)83 b Ff(result)98 b(=)50 b(eo.)o(echoString)o(\()o
(message)o(\))71 1933 y Fe(20)71 2033 y(21)83 b Ff(print)49
b(")o(I)h(said)f('\045s'.)g(The)g(object)g(said)g('\045s'.")g(\045)g
(\(message)o(,result)o(\))204 2224 y Fq(The)23 b(stringi\002ed)f
(object)h(r)n(efer)n(ence)h(is)f(passed)f(to)h(the)g(client)h(as)g(a)g
(command-line)h(ar)n(gu-)63 2337 y(ment)270 2304 y Fd(2)306
2337 y Fq(.)38 b(The)25 b(client)h(uses)e(the)h(ORB's)h
Fh(string_to_obje)o(ct)o(\(\))19 b Fq(function)26 b(to)f(convert)g(the)
63 2450 y(string)c(into)i(a)g(generic)f(object)g(r)n(efer)n(ence)g(\()p
Fh(CORBA.Object)p Fq(\).)204 2572 y(On)31 b(line)g(12,)i(the)d
(object's)g Fh(_narrow\(\))c Fq(function)31 b(is)f(called)i(to)e
(convert)f(the)h Fh(CORBA.)63 2685 y(Object)18 b Fq(r)n(efer)n(ence)h
(into)i(an)f Fh(Example.Echo)c Fq(r)n(efer)n(ence.)26
b(If)21 b(the)e(IOR)i(was)f(not)g(actually)i(of)63 2798
y(type)f Fh(Example.Echo)p Fq(,)c(or)22 b(something)f(derived)h(fr)n
(om)h(it,)g Fh(_narrow\(\))18 b Fq(r)n(eturns)k Fh(None)p
Fq(.)204 2921 y(In)c(fact,)j(since)e(Python)e(is)i(a)h
(dynamically-typed)e(language,)i Fh(string_to_obje)o(ct)o(\(\))63
3034 y Fq(is)35 b(often)f(able)i(to)e(r)n(eturn)g(an)h(object)g(r)n
(efer)n(ence)g(of)g(a)g(mor)n(e)g(derived)f(type)f(than)i
Fh(CORBA.)63 3146 y(Object)p Fq(.)25 b(See)c(section)h(3.1)i(for)e
(details.)63 3385 y Fj(2.5.3)99 b(System)24 b(exceptions)63
3581 y Fq(The)d(keep)g(it)i(short,)e(the)g(client)i(code)f(shown)f
(above)i(performs)e(no)i(exception)e(handling.)28 b(A)63
3694 y(r)n(obust)19 b(client)i(\(and)f(server\))f(should)h(do,)f(since)
h(ther)n(e)g(ar)n(e)g(a)h(number)f(of)g(system)e(exceptions)63
3807 y(which)23 b(can)g(arise.)204 3929 y(As)17 b(alr)n(eady)i
(mentioned,)e Fh(ORB_init\(\))d Fq(can)19 b(raise)g(the)e
Fh(CORBA.INITIALIZ)o(E)12 b Fq(excep-)63 4042 y(tion)20
b(if)h(the)f(command)h(line)g(ar)n(guments)f(or)g(con\002guration)g
(\002le)g(ar)n(e)h(invalid.)29 b Fh(string_to_)63 4155
y(object\(\))g Fq(can)34 b(raise)g(two)e(exceptions:)47
b(if)34 b(the)f(string)f(is)h(not)g(an)h(IOR)f(\(or)g(a)h(valid)g(URI)
63 4268 y(with)21 b(omniORB)h(3\),)h(it)f(raises)f Fh(CORBA.BAD_PARAM)p
Fq(;)15 b(if)23 b(the)e(string)g(looks)g(like)h(an)g(IOR,)g(but)63
4381 y(contains)g(invalid)j(data,)d(is)h(raises)f Fh(CORBA.MARSHAL)p
Fq(.)204 4503 y(The)f(call)k(to)c Fh(echoString\(\))c
Fq(can)24 b(r)n(esult)d(in)i(any)g(of)f(the)g(CORBA)g(system)f
(exceptions,)63 4616 y(since)c(any)g(exceptions)f(not)g(caught)i(on)e
(the)h(server)f(side)h(ar)n(e)g(pr)n(opagated)f(back)i(to)f(the)f
(client.)63 4729 y(Even)29 b(if)h(the)f(implementation)h(of)g
Fh(echoString\(\))24 b Fq(does)k(not)h(raise)h(any)f(system)f(excep-)63
4842 y(tions)h(itself,)j(failur)n(es)f(in)g(invoking)f(the)g(operation)
f(can)i(cause)f(a)h(number)f(of)h(exceptions.)63 4955
y(First,)23 b(if)h(the)f(server)g(pr)n(ocess)f(cannot)i(be)g
(contacted,)f(a)h Fh(CORBA.TRANSIENT)17 b Fq(exception)22
b(is)63 5068 y(raised.)51 b(Second,)31 b(if)g(the)f(server)g(pr)n
(ocess)f Fp(can)h Fq(be)h(contacted,)g(but)g(the)f(object)g(in)h
(question)63 5181 y(does)21 b(not)h(exist)f(ther)n(e,)h(a)h
Fh(CORBA.OBJECT_NO)o(T_)o(EX)o(IS)o(T)17 b Fq(exception)k(is)i(raised.)
p 63 5306 1316 4 v 168 5362 a Fe(2)197 5394 y Fc(The)c(code)f(does)g
(not)h(check)g(that)h(ther)o(e)e(is)g(actually)h(an)h(IOR)e(on)h(the)h
(command)f(line!)p eop
%%Page: 12 18
12 17 bop 221 282 a Fq(12)2093 b Fi(CHAPTER)21 b(2.)51
b(THE)22 b(BASICS)362 539 y Fq(As)34 b(explained)f(later)h(in)h
(section)e(3.1,)k(the)d(call)i(to)d Fh(_narrow\(\))d
Fq(may)k(also)h(involve)f(a)221 652 y(call)e(to)e(the)g(object)g(to)g
(con\002rm)h(its)f(type.)50 b(This)30 b(means)g(that)h
Fh(_narrow\(\))26 b Fq(can)31 b(also)g(raise)221 764
y Fh(CORBA.COMM_FAIL)o(UR)o(E)p Fq(,)16 b Fh(CORBA.OBJECT_NO)o(T_)o(EX)
o(IS)o(T)p Fq(,)g(and)22 b Fh(CORBA.TRANSIENT)o Fq(.)362
887 y(Section)d(4.7)h(describes)e(how)h(exception)f(handlers)h(can)h
(be)g(installed)f(for)g(all)i(the)e(various)221 1000
y(system)i(exceptions,)g(to)h(avoid)h(surr)n(ounding)e(all)j(code)e
(with)g Fh(try)p Fq(.)14 b(.)g(.)g Fh(except)j Fq(blocks.)221
1312 y Fj(2.5.4)99 b(Lifetime)24 b(of)h(a)g(CORBA)g(object)221
1508 y Fq(CORBA)h(objects)e(ar)n(e)i(either)f Fp(transient)h
Fq(or)g Fp(persistent)p Fq(.)38 b(The)25 b(majority)h(ar)n(e)g
(transient,)e(mean-)221 1621 y(ing)19 b(that)g(the)f(lifetime)i(of)f
(the)f(CORBA)h(object)g(\(as)h(contacted)e(thr)n(ough)g(an)i(object)e
(r)n(efer)n(ence\))221 1734 y(is)27 b(the)f(same)g(as)h(the)f(lifetime)
h(of)g(its)f(servant)g(object.)40 b(Persistent)24 b(objects)i(can)i
(live)f(beyond)221 1847 y(the)33 b(destr)o(uction)f(of)i(their)g
(servant)f(object,)j(the)d(POA)h(they)f(wer)n(e)g(cr)n(eated)g(in,)k
(and)d(even)221 1960 y(their)24 b(pr)n(ocess.)33 b(Persistent)23
b(objects)h(ar)n(e,)h(of)g(course,)f(only)g(contactable)h(when)f(their)
h(associ-)221 2073 y(ated)19 b(servants)g(ar)n(e)i(active,)g(or)f(can)h
(be)e(activated)i(by)f(their)g(POA)g(with)g(a)g(servant)g(manager)3450
2040 y Fd(3)3487 2073 y Fq(.)221 2186 y(A)28 b(r)n(efer)n(ence)f(to)h
(a)g(persistent)e(object)i(can)h(be)f(published,)g(and)g(will)h(r)n
(emain)g(valid)h(even)d(if)221 2299 y(the)22 b(server)g(pr)n(ocess)f
(is)i(r)n(estarted.)362 2421 y(A)f(POA)-7 b('s)22 b(Lifespan)f(Policy)h
(determines)e(whether)g(objects)h(cr)n(eated)g(within)h(it)g(ar)n(e)g
(tran-)221 2534 y(sient)g(or)g(persistent.)k(The)21 b(Root)h(POA)h(has)
f(the)g Fh(TRANSIENT)d Fq(policy)-10 b(.)362 2656 y(An)33
b(alternative)g(to)e(cr)n(eating)i(persistent)d(objects)i(is)h(to)f(r)n
(egister)f(object)h(r)n(efer)n(ences)g(in)221 2769 y(a)26
b Fp(naming)g(service)i Fq(and)e(bind)g(them)f(to)g(\002xed)g
(pathnames.)37 b(Clients)26 b(can)g(bind)g(to)f(the)g(object)221
2882 y(implementations)17 b(at)h(r)o(untime)g(by)f(asking)g(the)g
(naming)h(service)g(to)f(r)n(esolve)g(the)g(pathnames)221
2995 y(to)33 b(the)g(object)h(r)n(efer)n(ences.)60 b(CORBA)34
b(de\002nes)d(a)k(standar)n(d)e(naming)h(service,)i(which)f(is)e(a)221
3108 y(component)26 b(of)g(the)h(Common)g(Object)g(Services)g(\(COS\))h
([OMG98)r(],)g(that)e(can)i(be)f(used)e(for)221 3221
y(this)17 b(purpose.)24 b(The)17 b(next)f(section)h(describes)f(an)i
(example)f(of)g(how)g(to)g(use)f(the)h(COS)h(Naming)221
3334 y(Service.)221 3690 y Fo(2.6)119 b(Example)30 b(3)f(\227)h(Using)g
(the)f(Naming)h(Service)221 3920 y Fq(In)e(this)g(example,)h(the)e
(object)h(implementation)g(uses)f(the)h(Naming)g(Service)g([OMG98)r(])h
(to)221 4033 y(pass)g(on)h(the)f(object)h(r)n(efer)n(ence)f(to)g(the)g
(client.)50 b(This)30 b(method)e(is)i(far)h(mor)n(e)e(practical)j(than)
221 4146 y(using)j(stringi\002ed)f(object)h(r)n(efer)n(ences.)66
b(The)34 b(full)j(listings)e(of)g(the)g(server)f(and)i(client)g(ar)n(e)
221 4259 y(below)-8 b(.)362 4381 y(The)30 b(names)g(used)f(by)h(the)f
(Naming)h(service)g(consist)g(of)g(a)h(sequence)d(of)i
Fp(name)h(compo-)221 4494 y(nents)p Fq(.)36 b(Each)26
b(name)g(component)e(has)h(an)h Fp(id)h Fq(and)e(a)h
Fp(kind)g Fq(\002eld,)g(both)f(of)g(which)h(ar)n(e)g(strings.)221
4607 y(All)f(name)g(components)d(except)h(the)g(last)i(one)e(ar)n(e)i
(bound)e(to)h Fp(naming)g(contexts)p Fq(.)34 b(A)24 b(naming)221
4720 y(context)i(is)i(analogous)f(to)g(a)h(dir)n(ectory)e(in)i(a)g
(\002ling)g(system:)36 b(it)28 b(can)g(contain)g(names)f(of)h(ob-)221
4833 y(ject)c(r)n(efer)n(ences)e(or)h(other)g(naming)h(contexts.)29
b(The)23 b(last)h(name)g(component)e(is)i(bound)f(to)g(an)221
4946 y(object)g(r)n(efer)n(ence.)362 5068 y(Sequences)g(of)j(name)f
(components)e(can)j(be)f(r)n(epr)n(esented)d(as)k(a)f(\003at)h(string,)
e(using)h(`.')36 b(to)221 5181 y(separate)29 b(the)h(id)g(and)g(kind)g
(\002elds,)h(and)f(`/')h(to)f(separate)f(name)h(components)f(fr)n(om)i
(each)p 221 5306 1316 4 v 327 5362 a Fe(3)356 5394 y
Fc(The)18 b(POA)h(itself)f(can)i(be)e(activated)i(on)f(demand)g(with)g
(an)h(adapter)e(activator)-6 b(.)p eop
%%Page: 13 19
13 18 bop 63 282 a Fi(2.6.)51 b(EXAMPLE)21 b(3)i(\227)f(USING)g(THE)g
(NAMING)f(SER)-5 b(VICE)1034 b Fq(13)63 539 y(other)276
506 y Fd(4)312 539 y Fq(.)34 b(In)24 b(our)h(example,)g(the)f(Echo)g
(object)h(r)n(efer)n(ence)f(is)h(bound)f(to)g(the)g(stringi\002ed)f
(name)63 652 y(`)p Fh(test.my_context)o(/E)o(xa)o(mp)o(le)o(Ech)o(o.)o
(Ob)o(je)o(ct)o Fq('.)204 765 y(The)j(kind)h(\002eld)g(is)g(intended)f
(to)g(describe)h(the)f(name)i(in)f(a)h(syntax-independent)c(way)-10
b(.)63 878 y(The)24 b(naming)j(service)e(does)f(not)h(interpr)n(et,)f
(assign,)i(or)f(manage)h(these)d(values.)37 b(However)-7
b(,)63 991 y(both)28 b(the)g(name)i(and)f(the)f(kind)g(attribute)h
(must)f(match)i(for)f(a)h(name)f(lookup)f(to)g(succeed.)63
1104 y(In)34 b(this)h(example,)j(the)c(kind)h(values)g(for)g
Fh(test)e Fq(and)j Fh(ExampleEcho)30 b Fq(ar)n(e)35 b(chosen)f(to)h(be)
63 1217 y(`)p Fh(my_context)p Fq(')17 b(and)22 b(`)p
Fh(Object)p Fq(')d(r)n(espectively)-10 b(.)26 b(This)21
b(is)h(an)g(arbitrary)g(choice)f(as)h(ther)n(e)e(is)i(no)63
1330 y(standar)n(dised)f(set)g(of)i(kind)f(values.)63
1588 y Fj(2.6.1)99 b(Obtaining)25 b(the)g(Root)g(Context)g(object)h
(reference)63 1767 y Fq(The)21 b(initial)j(contact)f(with)f(the)f
(Naming)i(Service)f(can)h(be)g(established)e(via)j(the)d
Fp(r)n(oot)j Fq(context.)63 1880 y(The)33 b(object)g(r)n(efer)n(ence)g
(to)g(the)g(r)n(oot)g(context)g(is)g(pr)n(ovided)g(by)h(the)f(ORB)g
(and)h(can)h(be)e(ob-)63 1993 y(tained)25 b(by)h(calling)i
Fh(resolve_initia)o(l_)o(re)o(fer)o(en)o(ce)o(s\()o(\))p
Fq(.)k(The)25 b(following)h(code)f(frag-)63 2105 y(ment)d(shows)f(how)h
(it)h(is)g(used:)204 2256 y Ff(import)48 b(CosNaming)204
2356 y(orb)h(=)h(CORBA)o(.ORB_init)n(\(sys)o(.argv)o(,)g(CORBA)o
(.ORB_ID)o(\))204 2455 y(obj)f(=)h(orb)o(.resolve_initial_references)-5
b(\("NameService)n(")o(\);)204 2555 y(cxt)49 b(=)h(obj)o(._narrow)o(\()
o(CosNaming)o(.NamingContext)m(\))204 2720 y Fq(Remember)-7
b(,)31 b(omniORB)e(constr)o(ucts)g(its)g(internal)h(list)g(of)g
(initial)i(r)n(efer)n(ences)c(at)i(initial-)63 2833 y(isation)j(time)g
(using)f(the)g(information)h(pr)n(ovided)f(in)i(the)e(con\002guration)g
(\002le)h Fh(omniORB.)63 2946 y(cfg)p Fq(,)k(or)f(given)f(on)h(the)f
(command)h(line.)67 b(If)36 b(this)g(\002le)f(is)h(not)f(pr)n(esent,)i
(the)e(internal)h(list)63 3058 y(will)21 b(be)g(empty)e(and)h
Fh(resolve_initial)o(_r)o(efe)o(re)o(nc)o(es)o(\(\))14
b Fq(will)22 b(raise)e(a)h Fh(CORBA.ORB.)63 3171 y(InvalidName)c
Fq(exception.)204 3285 y(Note)k(that,)h(like)g Fh(string_to_objec)o
(t\()o(\))p Fq(,)16 b Fh(resolve_initial)o(_r)o(efe)o(re)o(nc)o(es)o
(\(\))63 3398 y Fq(r)n(eturns)23 b(base)h Fh(CORBA.Object)p
Fq(,)19 b(so)k(we)h(should)f(narr)n(ow)i(it)f(to)g(the)f(interface)i
(we)e(want.)33 b(In)63 3511 y(this)22 b(case,)g(we)g(want)h
Fh(CosNaming.Namin)o(gC)o(on)o(te)o(xt)2075 3478 y Fd(5)2107
3511 y Fq(.)63 3770 y Fj(2.6.2)99 b(The)25 b(Naming)f(Service)h
(interface)63 3948 y Fq(It)h(is)h(beyond)e(the)h(scope)f(of)i(this)g
(chapter)f(to)g(describe)g(in)h(detail)g(the)f(Naming)h(Service)g(in-)
63 4061 y(terface.)49 b(Y)-8 b(ou)29 b(should)f(consult)i(the)f(CORBA)g
(services)h(speci\002cation)g([OMG98)r(])g(\(chapter)63
4174 y(3\).)63 4433 y Fj(2.6.3)99 b(Server)24 b(code)63
4611 y Fq(Hopefully)-10 b(,)21 b(the)h(server)f(code)h(is)h
(self-explanatory:)204 4762 y Fg(#!/)o(usr/)o(bin/env)49
b(python)204 4861 y Ff(import)f(sys)p 63 4938 1316 4
v 168 4994 a Fe(4)197 5026 y Fc(Ther)o(e)25 b(ar)o(e)h(escaping)f(r)o
(ules)h(to)g(cope)g(with)h(id)e(and)i(kind)e(\002elds)g(which)j
(contain)f(`.')45 b(and)26 b(`/')g(characters.)63 5117
y(See)20 b(chapter)h(6)g(of)f(this)g(manual,)i(and)f(chapter)g(3)g(of)f
(the)h(CORBA)f(services)f(speci\002cation,)i(as)f(updated)g(for)g(the)
63 5209 y(Inter)o(operable)e(Naming)g(Service)h([OMG00].)168
5271 y Fe(5)197 5302 y Fc(If)h(you)f(ar)o(e)g(on-the-ball,)h(you)g
(will)f(have)h(noticed)g(that)h(we)f(didn't)f(call)h
Fb(_narrow\(\))e Fc(when)j(r)o(esolving)d(the)63 5394
y(Root)g(POA.)h(The)f(r)o(eason)g(it)h(is)f(safe)h(to)f(miss)g(it)h
(out)g(is)f(given)g(in)h(section)g(3.1.)p eop
%%Page: 14 20
14 19 bop 221 282 a Fq(14)2093 b Fi(CHAPTER)21 b(2.)51
b(THE)22 b(BASICS)362 539 y Ff(from)49 b(omniORB)g(import)g(CORBA)o(,)g
(PortableServer)362 638 y(import)g(CosNaming)n(,)h(Example)o(,)f
(Example__POA)362 837 y Fg(#)h(Define)f(an)g(implementation)e(of)j(the)
f(Echo)g(interface)362 937 y Ff(class)g(Echo_i)g(\(Example__POA)m
(.Echo\):)562 1037 y(def)g(echoString)n(\(self)o(,)h(mesg)o(\):)761
1136 y(print)f(")o(echoString)o(\(\))g(called)g(with)g(message)o(:")o
(,)h(mesg)761 1236 y(return)e(mesg)362 1435 y Fg(#)i(Initialise)e(the)h
(ORB)g(and)h(find)f(the)g(root)g(POA)362 1535 y Ff(orb)h(=)f(CORBA)o
(.ORB_init)o(\()o(sys.argv)o(,)h(CORBA)o(.)o(ORB_ID)o(\))362
1634 y(poa)g(=)f(orb.)o(resolve_initial_references)l(\()o("RootPOA)o
("\))362 1834 y Fg(#)h(Create)f(an)g(instance)f(of)i(Echo_i)f(and)g(an)
g(Echo)g(object)g(reference)362 1933 y Ff(ei)h(=)f(Echo_i)o(\(\))362
2033 y(eo)h(=)f(ei._this)o(\(\))362 2232 y Fg(#)h(Obtain)f(a)g
(reference)f(to)i(the)f(root)g(naming)g(context)362 2332
y Ff(obj)448 b(=)50 b(orb)o(.resolve_initial_references)-5
b(\("NameService)n(")o(\))362 2431 y(rootContext)48 b(=)i(obj)o
(._narrow)o(\()o(CosNaming)o(.NamingContext)m(\))362
2631 y(if)g(rootContext)d(is)j(None)o(:)562 2730 y(print)e("Failed)h
(to)g(narrow)g(the)g(root)g(naming)g(context)o(")562
2830 y(sys)o(.exit)o(\(1\))362 3029 y Fg(#)h(Bind)f(a)h(context)e
(named)h("test)o(.my_context)n(")h(to)f(the)g(root)g(context)362
3129 y Ff(name)g(=)h([CosNaming)n(.NameComponent)n(\()o("test)o(",)g
("my_context)n("\)])362 3229 y(try:)562 3328 y(testContext)d(=)j
(rootContext)n(.bind_new_context)m(\(name)o(\))562 3428
y(print)e("New)h(test)h(context)e(bound)o(")362 3627
y(except)h(CosNaming)n(.NamingContext)n(.AlreadyBound)m(,)h(ex:)562
3727 y(print)e("Test)h(context)g(already)f(exists)o(")562
3826 y(obj)h(=)g(rootContext)n(.resolve)o(\(name)o(\))562
3926 y(testContext)e(=)j(obj)o(._narrow)o(\(CosNaming)n(.NamingContext)
m(\))562 4026 y(if)f(testContext)f(is)h(None)o(:)761
4125 y(print)g(")o(test.mycontext)f(exists)g(but)i(is)f(not)g(a)h
(NamingContext)n(")761 4225 y(sys)o(.exit)o(\(1\))362
4424 y Fg(#)g(Bind)f(the)g(Echo)g(object)g(to)g(the)h(test)f(context)
362 4524 y Ff(name)g(=)h([CosNaming)n(.NameComponent)n(\()o
("ExampleEcho)n(",)g(")o(Object)o("\)])362 4623 y(try:)562
4723 y(testContext)m(.bind\()o(name,)f(eo\))562 4823
y(print)f("New)h(ExampleEcho)f(object)h(bound)o(")362
5022 y(except)g(CosNaming)n(.NamingContext)n(.AlreadyBound)m(:)562
5121 y(testContext)m(.rebind)o(\(name)o(,)h(eo\))562
5221 y(print)e("ExampleEcho)g(binding)h(already)f(existed)h(--)g
(rebound)o(")p eop
%%Page: 15 21
15 20 bop 63 282 a Fi(2.6.)51 b(EXAMPLE)21 b(3)i(\227)f(USING)g(THE)g
(NAMING)f(SER)-5 b(VICE)1034 b Fq(15)204 539 y Fg(#)49
b(Activate)g(the)g(POA)204 638 y Ff(poaManager)f(=)h
(poa._get_the_POAManager)l(\(\))204 738 y(poaManager)n(.activate)n
(\(\))204 937 y Fg(#)g(Block)g(for)h(ever)f(\()o(or)h(until)f(the)g
(ORB)g(is)h(shut)f(down)o(\))204 1037 y Ff(orb)o(.run)o(\(\))63
1331 y Fj(2.6.4)99 b(Client)25 b(code)63 1508 y Fq(Hopefully)c(the)h
(client)h(code)f(is)h(self-explanatory)f(too:)204 1651
y Fg(#!/)o(usr/)o(bin/env)49 b(python)204 1751 y Ff(import)f(sys)204
1850 y(from)h(omniORB)f(import)h(CORBA)204 1950 y(import)f(CosNaming)o
(,)h(Example)204 2149 y Fg(#)g(Initialise)f(the)i(ORB)204
2249 y Ff(orb)f(=)h(CORBA)o(.ORB_init)n(\(sys)o(.argv)o(,)g(CORBA)o
(.ORB_ID)o(\))204 2448 y Fg(#)f(Obtain)g(a)h(reference)e(to)h(the)h
(root)f(naming)f(context)204 2548 y Ff(obj)448 b(=)49
b(orb.)o(resolve_initial_references)l(\()o("NameService)n("\))204
2647 y(rootContext)f(=)h(obj.)o(_narrow)o(\(CosNaming)n(.NamingContext)
n(\))204 2847 y(if)g(rootContext)f(is)h(None:)403 2946
y(print)g("Failed)f(to)i(narrow)f(the)g(root)g(naming)g(context)n(")403
3046 y(sys)o(.exit\(1\))204 3245 y Fg(#)g(Resolve)g(the)g(name)g("test)
o(.my_context)n(/ExampleEcho)n(.Object)o(")204 3345 y
Ff(name)g(=)g([CosNaming)o(.)o(NameComponent)n(\("test)o(",)g
("my_context)n("\),)602 3445 y(CosNaming)o(.)o(NameComponent)n
(\("ExampleEcho)n(")o(,)h("Object)o("\)])204 3544 y(try)o(:)403
3644 y(obj)f(=)h(rootContext)n(.resolve)n(\(name)o(\))204
3843 y(except)e(CosNaming)o(.NamingContext)m(.NotFound)o(,)h(ex:)403
3943 y(print)g("Name)g(not)g(found)o(")403 4042 y(sys)o(.exit\(1\))204
4242 y Fg(#)g(Narrow)g(the)g(object)g(to)h(an)f(Example)o(::)o(Echo)204
4341 y Ff(eo)g(=)h(obj)o(._narrow)o(\(Example)n(.Echo)o(\))204
4540 y(if)f(\(eo)g(is)h(None)o(\):)403 4640 y(print)f("Object)f
(reference)h(is)g(not)g(an)h(Example)n(::Echo)o(")403
4740 y(sys)o(.exit\(1\))204 4939 y Fg(#)f(Invoke)g(the)g(echoString)f
(operation)204 5039 y Ff(message)g(=)i("Hello)f(from)g(Python)o(")204
5138 y(result)98 b(=)50 b(eo.)o(echoString)o(\()o(message)o(\))204
5337 y(print)f(")o(I)h(said)f('\045s'.)g(The)g(object)g(said)g
('\045s'.")g(\045)g(\(message)o(,result)o(\))p eop
%%Page: 16 22
16 21 bop 221 282 a Fq(16)2093 b Fi(CHAPTER)21 b(2.)51
b(THE)22 b(BASICS)221 539 y Fo(2.7)119 b(Global)30 b(IDL)f
(de\002nitions)221 750 y Fq(As)18 b(we)f(have)h(seen,)g(the)f(Python)f
(mapping)i(maps)g(IDL)g(modules)f(to)g(Python)g(packages)g(with)221
862 y(the)23 b(same)h(name.)31 b(This)23 b(poses)f(a)i(pr)n(oblem)g
(for)f(IDL)h(declarations)f(at)h(global)h(scope.)k(Global)221
975 y(declarations)j(ar)n(e)g(generally)f(a)h(bad)h(idea)e(since)h
(they)e(make)i(name)g(clashes)g(mor)n(e)f(likely)-10
b(,)221 1088 y(but)23 b(they)e(must)h(be)h(supported.)362
1201 y(Since)35 b(Python)e(does)f(not)i(have)h(a)g(concept)e(of)h(a)h
(global)h(scope)d(\(only)h(a)h(per)n(-module)221 1314
y(global)26 b(scope,)f(which)h(is)f(danger)n(ous)f(to)g(modify\),)i
(global)g(declarations)g(ar)n(e)f(mapped)g(to)f(a)221
1427 y(specially)d(named)f(Python)f(package.)27 b(By)19
b(default,)h(this)g(package)g(is)h(named)f Fh(_GlobalIDL)p
Fq(,)221 1540 y(with)31 b(skeletons)d(in)j Fh(_GlobalIDL__POA)p
Fq(.)24 b(The)30 b(package)h(name)g(may)g(be)g(changed)f(with)221
1653 y(omniidl's)h Fh(-Wbglobal)26 b Fq(option,)k(described)f(in)h
(section)f(5.2.)51 b(The)29 b(omniORB)h(C++)g(Echo)221
1766 y(example,)22 b(with)h(IDL:)362 1915 y Ff(interface)48
b(Echo)h({)462 2015 y(string)g(echoString)n(\(in)g(string)g(mesg)o(\);)
362 2114 y(};)221 2277 y Fq(can)24 b(ther)n(efor)n(e)d(be)i(supported)c
(with)k(code)e(like)362 2427 y Fg(#!/usr)o(/bin)o(/env)49
b(python)362 2626 y Ff(import)g(sys)362 2725 y(from)g(omniORB)g(import)
g(CORBA)362 2825 y(import)g(_GlobalIDL)362 3024 y(orb)h(=)f(CORBA)o
(.ORB_init)o(\()o(sys.argv)o(,)h(CORBA)o(.)o(ORB_ID)o(\))362
3224 y(ior)g(=)f(sys.)o(argv[1])362 3323 y(obj)h(=)f(orb.)o
(string_to_object)m(\(ior\))362 3423 y(eo)100 b(=)49
b(obj.)o(_narrow)o(\(_GlobalIDL)n(.Echo)o(\))362 3622
y(message)g(=)g("Hello)g(from)g(Python)o(")362 3722 y(result)99
b(=)49 b(eo.echoString)n(\(message)o(\))362 3821 y(print)g("I)h(said)f
('\045)o(s'.)h(The)f(object)g(said)g('\045)o(s'")g(\045)h(\(message)o
(,)o(result)o(\))p eop
%%Page: 17 23
17 22 bop 63 1162 a Fk(Chapter)44 b(3)63 1578 y Fm(Python)51
b(language)i(mapping)f(issues)63 2038 y Fq(omniORBpy)30
b(adher)n(es)g(to)g(the)g(standar)n(d)h(Python)e(mapping)i([OMG01b)r
(],)j(so)c(ther)n(e)g(is)h(no)63 2151 y(need)18 b(to)h(describe)f(the)h
(mapping)g(her)n(e.)27 b(This)19 b(chapter)g(outlines)f(a)i(number)g
(of)f(issues)f(which)63 2264 y(ar)n(e)25 b(not)g(addr)n(essed)e(by)i
(the)g(standar)n(d)g(\(or)g(ar)n(e)h(optional\),)g(and)f(how)g(they)f
(ar)n(e)i(r)n(esolved)e(in)63 2377 y(omniORBpy)-10 b(.)63
2682 y Fo(3.1)119 b(Narrowing)28 b(object)i(references)63
2895 y Fq(As)20 b(explained)h(in)h(chapter)f(2,)h(whenever)e(you)g(r)n
(eceive)i(an)g(object)f(r)n(efer)n(ence)g(declar)n(ed)g(to)g(be)63
3008 y(base)34 b Fh(CORBA::Object)p Fq(,)e(such)i(as)h(fr)n(om)g
Fh(NamingContext::r)o(es)o(ol)o(ve)o(\(\))28 b Fq(or)35
b Fh(ORB::)63 3120 y(string_to_obje)o(ct)o(\(\))o Fq(,)16
b(you)21 b(should)f(narr)n(ow)i(the)e(r)n(efer)n(ence)h(to)g(the)f
(type)g(you)h(r)n(equir)n(e.)63 3233 y(Y)-8 b(ou)32 b(might)h(think)f
(that)h(since)g(Python)f(is)i(a)f(dynamically)i(typed)c(language,)36
b(narr)n(owing)63 3346 y(should)27 b(never)h(be)h(necessary)-10
b(.)44 b(Unfortunately)-10 b(,)28 b(although)g(omniORBpy)g(often)g
(generates)63 3459 y(object)22 b(r)n(efer)n(ences)g(with)g(the)g(right)
g(types,)f(it)h(cannot)h(do)f(so)g(in)h(all)h(cir)n(cumstances.)204
3573 y(The)h(r)o(ules)g(which)i(govern)e(when)g(narr)n(owing)h(is)g(r)n
(equir)n(ed)f(ar)n(e)h(quite)f(complex.)38 b(T)-8 b(o)25
b(be)63 3686 y(totally)d(safe,)h(you)f(can)h Fp(always)i
Fq(narr)n(ow)d(object)h(r)n(efer)n(ences)f(to)g(the)g(type)f(you)h(ar)n
(e)h(expecting.)63 3799 y(The)28 b(advantages)g(of)h(this)f(appr)n
(oach)h(ar)n(e)g(that)g(it)g(is)f(simple)h(and)g(that)f(it)h(is)g
(guaranteed)e(to)63 3912 y(work)21 b(with)i(all)h(Python)d(ORBs.)204
4026 y(The)26 b(disadvantage)g(with)g(calling)i(narr)n(ow)f(for)f(all)i
(r)n(eceived)e(object)h(r)n(efer)n(ences)e(is)i(that)63
4139 y(much)c(of)h(the)e(time)h(it)h(is)f(guaranteed)f(not)g(to)h(be)g
(necessary)-10 b(.)28 b(If)23 b(you)g(understand)e(the)h(situa-)63
4251 y(tions)g(in)h(which)g(narr)n(owing)f Fp(is)i Fq(necessary)-10
b(,)21 b(you)g(can)j(avoid)f(spurious)e(narr)n(owing.)63
4512 y Fj(3.1.1)99 b(The)25 b(gory)g(details)63 4691
y Fq(When)20 b(object)g(r)n(efer)n(ences)g(ar)n(e)h(transmitted)e(\(or)
i(stor)n(ed)e(in)i(stringi\002ed)e(IORs\),)i(they)e(contain)63
4804 y(a)24 b(single)g(type)f(identi\002er)g(string,)h(termed)f(the)g
Fp(r)n(epository)29 b(id)p Fq(.)k(Normally)-10 b(,)25
b(the)e(r)n(epository)f(id)63 4917 y(r)n(epr)n(esents)c(the)i(most)f
(derived)h(interface)h(of)g(the)e(object.)27 b(However)-7
b(,)20 b(it)h(is)f(also)h(permitted)e(to)63 5030 y(be)k(the)g(empty)f
(string,)h(or)g(to)g(r)n(efer)h(to)f(an)h(interface)g(higher)f(up)g
(the)g(inheritance)g(hierar)n(chy)-10 b(.)63 5143 y(T)i(o)21
b(give)i(a)g(concr)n(ete)f(example,)g(suppose)f(ther)n(e)g(ar)n(e)i
(two)f(IDL)g(\002les:)204 5294 y Fg(//)49 b(a.idl)204
5394 y Ff(module)f(M1)i({)1662 5622 y Fq(17)p eop
%%Page: 18 24
18 23 bop 221 282 a Fq(18)878 b Fi(CHAPTER)21 b(3.)51
b(PYTHON)22 b(LANGUAGE)f(MAPPING)h(ISSUES)462 539 y Ff(interface)48
b(A)i({)562 638 y(void)f(opA)o(\(\);)462 738 y(};)362
837 y(};)362 1024 y Fg(//)h(b.)o(idl)362 1123 y Ff(#include)f(")o
(a.idl)o(")362 1223 y(module)g(M2)g({)462 1323 y(interface)f(B)i(:)f
(M1::A)g({)562 1422 y(void)g(opB)o(\(\);)462 1522 y(};)362
1621 y(};)221 1778 y Fq(A)31 b(r)n(efer)n(ence)g(to)g(an)h(object)g
(with)f(interface)h Fh(B)f Fq(will)i(normally)f(contain)g(the)f(r)n
(epository)e(id)221 1891 y(`)p Fh(IDL:M2/B:1.0)p Fq(')931
1858 y Fd(1)964 1891 y Fq(.)47 b(It)28 b(is)h(also)g(permitted)f(to)g
(have)h(an)h(empty)e(r)n(epository)f(id,)j(or)f(the)f(id)221
2003 y(`)p Fh(IDL:M1/A:1.0)p Fq('.)h(`)p Fh(IDL:M1/A:1.0)p
Fq(')19 b(is)25 b(unlikely)f(unless)g(the)f(server)h(is)g(being)h
(deliber)n(-)221 2116 y(ately)e(obtuse.)362 2229 y(Whenever)32
b(omniORBpy)g(r)n(eceives)g(an)i(object)e(r)n(efer)n(ence)h(fr)n(om)g
(somewher)n(e\227either)221 2342 y(as)27 b(a)h(r)n(eturn)e(value)h(or)g
(as)g(an)g(operation)f(ar)n(gument\227it)h(has)g(a)g(particular)h
Fp(tar)n(get)i Fq(interface)221 2455 y(in)24 b(mind,)f(which)h(it)g
(compar)n(es)f(with)g(the)g(r)n(epository)e(id)j(it)f(has)g(r)n
(eceived.)30 b(A)23 b(tar)n(get)g(of)g(base)221 2568
y Fh(CORBA::Object)17 b Fq(is)23 b(just)f(one)g(\(common\))h(case.)28
b(For)21 b(example,)i(in)g(the)f(following)h(IDL:)362
2711 y Fg(//)50 b(c.)o(idl)362 2811 y Ff(#include)f(")o(a.idl)o(")362
2910 y(module)g(M3)g({)462 3010 y(interface)f(C)i({)562
3109 y(Object)e(getObj)o(\(\);)562 3209 y(M1)o(::A)99
b(getA)o(\(\);)462 3309 y(};)362 3408 y(};)221 3565 y
Fq(the)20 b(tar)n(get)g(interface)h(for)f Fh(getObj)p
Fq('s)e(r)n(eturn)i(value)h(is)g Fh(CORBA::Object)p Fq(;)15
b(the)20 b(tar)n(get)g(inter)n(-)221 3677 y(face)k(for)e
Fh(getA)p Fq('s)f(r)n(eturn)h(value)h(is)g Fh(M1::A)p
Fq(.)362 3790 y(omniORBpy)33 b(uses)f(the)h(r)n(esult)g(of)g(comparing)
h(the)f(r)n(eceived)g(and)g(tar)n(get)g(r)n(epository)221
3903 y(ids)22 b(to)g(determine)f(the)h(type)f(of)h(the)g(object)g(r)n
(efer)n(ence)g(it)h(cr)n(eates.)k(The)22 b(object)g(r)n(efer)n(ence)g
(has)221 4016 y(either)g(the)g(type)f(of)h(the)g(r)n(eceived)h(r)n
(efer)n(ence,)e(or)i(the)e(tar)n(get)h(type,)f(accor)n(ding)i(to)f
(this)h(table:)494 4209 y Fl(Case)p 2847 4243 4 113 v
2209 w(Objref)g(T)-8 b(ype)p 444 4246 2844 4 v 494 4325
a Fq(1.)99 b(The)22 b(r)n(eceived)h(id)f(is)h(the)f(same)h(as)f(the)g
(tar)n(get)g(id)p 2847 4359 4 113 v 536 w(r)n(eceived)p
444 4363 2844 4 v 494 4442 a(2.)99 b(The)31 b(r)n(eceived)h(id)f(is)h
(not)f(the)g(same)g(as)h(the)f(tar)n(get)g(id,)i(but)661
4555 y(the)26 b(ORB)g(knows)e(that)i(the)f(r)n(eceived)h(interface)g
(is)g(derived)661 4667 y(fr)n(om)e(the)d(tar)n(get)h(interface)p
2847 4701 4 339 v 2899 4442 a(r)n(eceived)p 444 4705
2844 4 v 494 4784 a(3.)99 b(The)22 b(r)n(eceived)h(id)f(is)h(unknown)e
(to)h(the)g(ORB)p 2847 4818 4 113 v 658 w(tar)n(get)p
444 4821 2844 4 v 494 4900 a(4.)99 b(The)30 b(r)n(eceived)f(id)h(is)g
(not)g(the)f(same)g(as)h(the)g(tar)n(get)f(id,)i(and)661
5013 y(the)f(ORB)f(knows)g(that)h(the)f(r)n(eceived)g(interface)i(is)f
Fp(not)g Fq(de-)661 5126 y(rived)23 b(fr)n(om)g(the)f(tar)n(get)g
(interface)p 2847 5160 4 339 v 2899 4900 a(tar)n(get)p
221 5215 1316 4 v 327 5271 a Fe(1)356 5302 y Fc(It)h(is)g(possible)f
(to)i(change)g(the)g(r)o(epository)c(id)j(strings)f(associated)h(with)h
(particular)f(interfaces)g(using)g(the)221 5394 y Fb(ID)p
Fc(,)18 b Fb(version)g Fc(and)h Fb(prefix)f Fc(pragmas.)p
eop
%%Page: 19 25
19 24 bop 63 282 a Fi(3.2.)51 b(SUPPOR)m(T)21 b(FOR)i(ANY)f(V)-10
b(ALUES)1782 b Fq(19)204 539 y(Cases)28 b(1)i(and)f(2)h(ar)n(e)f(the)f
(most)g(common.)47 b(Case)30 b(2)f(explains)g(why)g(it)g(is)g(not)f
(necessary)63 652 y(to)g(narr)n(ow)g(the)g(r)n(esult)g(of)h(calling)i
Fh(resolve_initia)o(l_)o(re)o(fe)o(ren)o(ce)o(s\()o("R)o(oo)o(tPO)o(A")
o(\))p Fq(:)63 764 y(the)23 b(r)n(eturn)h(is)g(always)h(of)f(the)f
(known)h(type)e Fh(PortableServer.P)o(OA)o Fq(,)c(which)25
b(is)g(derived)63 877 y(fr)n(om)e(the)f(tar)n(get)f(type)h(of)g
Fh(CORBA.Object)p Fq(.)204 990 y(Case)28 b(3)h(is)f(also)g(quite)g
(common.)45 b(Suppose)25 b(a)k(client)g(knows)d(about)i(IDL)g(modules)f
Fh(M1)63 1103 y Fq(and)h Fh(M3)g Fq(fr)n(om)h(above,)h(but)e(not)g
(module)g Fh(M2)p Fq(.)45 b(When)28 b(it)g(calls)i Fh(getA\(\))c
Fq(on)i(an)h(instance)g(of)63 1216 y Fh(M3::C)p Fq(,)18
b(the)h(r)n(eturn)h(value)h(may)g(validly)h(be)e(of)h(type)d
Fh(M2::B)p Fq(,)g(which)j(it)g(does)e(not)h(know)-8 b(.)25
b(By)63 1329 y(cr)n(eating)e(an)h(object)f(r)n(efer)n(ence)g(of)h(type)
d Fh(M1::A)h Fq(in)h(this)g(case,)h(the)e(client)i(is)g(still)g(able)g
(to)f(call)63 1442 y(the)e(object's)h Fh(opA\(\))d Fq(operation.)27
b(On)22 b(the)g(other)e(hand,)i(if)h Fh(getObj\(\))18
b Fq(r)n(eturns)j(an)i(object)f(of)63 1555 y(type)e Fh(M2::B)p
Fq(,)f(the)i(ORB)h(will)h(cr)n(eate)e(a)i(r)n(efer)n(ence)e(to)g(base)g
Fh(CORBA::Object)p Fq(,)16 b(since)22 b(that)f(is)63
1668 y(the)g(tar)n(get)h(type.)204 1781 y(Note)i(that)i(the)g(ORB)f
Fp(never)j Fq(r)n(ejects)d(an)i(object)f(r)n(efer)n(ence)f(due)g(to)h
(it)g(having)h(the)e(wr)n(ong)63 1894 y(type.)33 b(Even)25
b(if)h(it)f(knows)f(that)h(the)f(r)n(eceived)h(id)g(is)g(not)g(derived)
f(fr)n(om)i(the)e(tar)n(get)g(interface)63 2006 y(\(case)i(4\),)i(it)f
(might)f(be)g(the)g(case)g(that)g(the)g(object)g(actually)i(has)e(a)h
(mor)n(e)f(derived)g(interface,)63 2119 y(which)c(is)f(derived)f(fr)n
(om)i(both)f(the)g(type)e(it)j(is)f(claiming)j(to)d(be)g
Fp(and)h Fq(the)e(tar)n(get)h(type.)26 b(That)21 b(is,)63
2232 y(of)h(course,)g(extr)n(emely)f(unlikely)-10 b(.)204
2345 y(In)17 b(cases)g(3)h(and)g(4,)g(the)f(ORB)h(con\002rms)f(the)f
(type)g(of)i(the)f(object)g(by)g(calling)j Fh(_is_a\(\))14
b Fq(just)63 2458 y(befor)n(e)25 b(the)h(\002rst)f(invocation)i(on)e
(the)h(object.)38 b(If)26 b(it)g(turns)f(out)g(that)h(the)f(object)h
(is)g(not)f(of)h(the)63 2571 y(right)i(type)f(after)i(all,)i(the)d
Fh(CORBA.INV_OBJRE)o(F)22 b Fq(exception)28 b(is)h(raised.)45
b(The)28 b(alternative)63 2684 y(to)d(this)g(appr)n(oach)h(would)f(be)h
(to)f(check)g(the)g(types)e(of)j(object)f(r)n(efer)n(ences)g(when)g
(they)f(wer)n(e)63 2797 y(r)n(eceived,)j(rather)f(than)h(waiting)g
(until)g(the)f(\002rst)g(invocation.)42 b(That)26 b(would)h(be)f(inef)n
(\002cient,)63 2910 y(however)-7 b(,)35 b(since)f(it)g(is)g(quite)f
(possible)h(that)f(a)i(r)n(eceived)e(object)h(r)n(efer)n(ence)f(will)i
(never)f(be)63 3023 y(used.)26 b(It)c(may)h(also)g(cause)f(objects)g
(to)g(be)h(activated)g(earlier)g(than)g(expected.)204
3136 y(In)e(summary)-10 b(,)21 b(whenever)e(your)i(code)f(r)n(eceives)h
(an)g(object)g(r)n(efer)n(ence,)g(you)f(should)g(bear)63
3248 y(in)27 b(mind)h(what)f(omniORBpy's)f(idea)i(of)f(the)f(tar)n(get)
h(type)e(is.)42 b(Y)-8 b(ou)26 b(must)h(not)f(assume)h(that)63
3361 y(the)c(ORB)g(will)i(always)f(corr)n(ectly)g(\002gur)n(e)e(out)h
(a)i(mor)n(e)e(derived)g(type)f(than)i(the)e(tar)n(get.)31
b(One)63 3474 y(consequence)21 b(of)j(this)f(is)h(that)f(you)g(must)g
(always)h(narr)n(ow)g(a)g(plain)g Fh(CORBA::Object)18
b Fq(to)23 b(a)63 3587 y(mor)n(e)f(speci\002c)h(type)e(befor)n(e)h
(invoking)h(on)f(it)1655 3554 y Fd(2)1693 3587 y Fq(.)28
b(Y)-8 b(ou)22 b Fp(can)g Fq(assume)g(that)h(the)f(object)g(r)n(efer)n
(ence)63 3700 y(you)g(r)n(eceive)h(is)h(of)f(the)f(tar)n(get)h(type,)f
(or)g(something)g(derived)g(fr)n(om)i(it,)g(although)e(the)h(object)63
3813 y(it)36 b(r)n(efers)f(to)g(may)i(turn)e(out)g(to)g(be)h(invalid.)
70 b(The)35 b(fact)i(that)f(omniORBpy)f(often)g Fp(is)i
Fq(able)63 3926 y(\002gur)n(e)17 b(out)h(a)g(mor)n(e)g(derived)g(type)e
(than)j(the)e(tar)n(get)g(is)i(only)f(useful)f(when)h(using)f(the)h
(Python)63 4039 y(interactive)23 b(command)g(line.)63
4335 y Fo(3.2)119 b(Support)29 b(for)h(Any)g(values)63
4546 y Fq(In)h(statically)h(typed)e(languages,)i(such)f(as)h(C++,)i
(Anys)c(can)j(only)e(be)g(used)f(with)h(built-in)63 4659
y(types)15 b(and)j(IDL-declar)n(ed)f(types)f(for)i(which)g(stubs)f
(have)h(been)f(generated.)24 b(If,)18 b(for)g(example,)63
4772 y(a)h(C++)g(pr)n(ogram)f(r)n(eceives)h(an)g(Any)f(containing)g(a)i
(str)o(uct)d(for)i(which)g(it)g(does)e(not)g(have)i(static)63
4885 y(knowledge,)j(it)j(cannot)g(easily)g(extract)f(the)g(str)o(uct)g
(contents.)32 b(The)24 b(only)h(solution)f(is)g(to)h(use)63
4998 y(the)c(inconvenient)i(DynAny)f(interface.)204 5111
y(Since)k(Python)e(is)i(a)h(dynamically)g(typed)d(language,)i(it)g
(does)e(not)i(have)g(this)f(dif)n(\002culty)-10 b(.)63
5223 y(When)22 b(omniORBpy)g(r)n(eceives)h(an)g(Any)g(containing)g
(types)e(it)i(does)e(not)i(know)-8 b(,)21 b(it)i(is)g(able)h(to)p
63 5306 1316 4 v 168 5362 a Fe(2)197 5394 y Fc(Unless)18
b(you)g(ar)o(e)g(invoking)h(pseudo)e(operations)h(like)g
Fb(_is_a\(\))f Fc(and)j Fb(_non_existent\(\))p Fc(.)p
eop
%%Page: 20 26
20 25 bop 221 282 a Fq(20)878 b Fi(CHAPTER)21 b(3.)51
b(PYTHON)22 b(LANGUAGE)f(MAPPING)h(ISSUES)221 539 y Fq(cr)n(eate)f(new)
f(Python)g(types)f(which)i(behave)g(exactly)g(as)g(if)h(ther)n(e)e(wer)
n(e)g(statically)i(generated)221 652 y(stubs)27 b(available.)48
b(Note)27 b(that)h(this)f(behaviour)i(is)f(not)g(r)n(equir)n(ed)g(by)g
(the)f(Python)g(mapping)221 764 y(speci\002cation,)c(so)f(other)f
(Python)g(ORBs)h(may)h(not)f(be)h(so)e(accommodating.)362
877 y(The)32 b(equivalent)h(of)g(DynAny)f(cr)n(eation)h(can)h(be)f
(achieved)g(by)g(dynamically)h(writing)221 990 y(and)23
b(importing)f(new)g(IDL,)g(as)h(described)e(in)i(section)f(4.9.)362
1103 y(Ther)n(e)38 b(is,)43 b(however)-7 b(,)41 b(a)e(minor)g(\003y)g
(in)g(the)f(ointment)g(when)f(it)i(comes)f(to)g(r)n(eceiving)221
1216 y(Anys.)47 b(When)28 b(an)i(Any)e(is)i(transmitted,)f(it)g(is)h
(sent)e(as)h(a)h(T)-8 b(ypeCode)27 b(followed)h(by)h(the)g(ac-)221
1329 y(tual)23 b(value.)28 b(Normally)-10 b(,)22 b(the)f(T)-8
b(ypeCodes)19 b(for)j(entities)f(with)h(names\227members)f(of)g(str)o
(ucts,)221 1442 y(for)34 b(example\227contain)g(those)e(names)i(as)g
(strings.)60 b(That)33 b(permits)g(omniORBpy)g(to)g(cr)n(e-)221
1555 y(ate)g(types)f(with)i(the)e(corr)n(esponding)g(names.)61
b(Unfortunately)-10 b(,)34 b(the)f(GIOP)h(speci\002cation)221
1668 y(permits)f(T)-8 b(ypeCodes)32 b(to)h(be)i(sent)d(with)j(empty)e
(strings)f(wher)n(e)i(the)f(names)h(would)g(nor)n(-)221
1781 y(mally)20 b(be.)26 b(In)18 b(this)h(situation,)f(the)g(types)f
(which)i(omniORBpy)e(cr)n(eates)h(cannot)h(be)f(given)h(the)221
1894 y(corr)n(ect)29 b(names.)46 b(The)28 b(contents)f(of)i(all)h
(types)d(except)g(str)o(ucts)h(and)h(exceptions)e(can)i(be)g(ac-)221
2006 y(cessed)23 b(without)g(having)i(to)f(know)f(their)h(names,)h(thr)
n(ough)e(the)g(standar)n(d)h(interfaces.)33 b(Un-)221
2119 y(known)c(str)o(ucts)g(and)i(exceptions)d(r)n(eceived)i(by)h
(omniORBpy)e(have)i(an)f(attribute)g(named)221 2232 y(`)p
Fh(_values)p Fq(')35 b(which)k(contains)e(a)i(sequence)d(of)h(the)g
(member)h(values.)73 b(This)38 b(attribute)f(is)221 2345
y(omniORBpy)22 b(speci\002c.)362 2458 y(Similarly)-10
b(,)21 b(T)-8 b(ypeCodes)15 b(for)j(constr)o(ucted)f(types)f(such)i(as)
g(str)o(ucts)f(and)i(unions)e(normally)221 2571 y(contain)34
b(the)f(r)n(epository)e(ids)i(of)g(those)f(types.)58
b(This)33 b(means)g(that)g(omniORBpy)g(can)h(use)221
2684 y(types)g(statically)j(declar)n(ed)e(in)h(the)f(stubs)g(when)g
(they)f(ar)n(e)i(available.)70 b(Once)36 b(again,)k(the)221
2797 y(speci\002cation)25 b(permits)f(the)g(r)n(epository)f(id)h
(strings)g(to)g(be)h(empty)2559 2764 y Fd(3)2595 2797
y Fq(.)34 b(This)24 b(means)h(that)g(even)221 2910 y(if)j(stubs)f(for)g
(a)h(type)e(r)n(eceived)h(in)h(an)g(Any)f(ar)n(e)h(available,)j(it)d
(may)g(not)f(be)g(able)h(to)f(cr)n(eate)g(a)221 3023
y(Python)21 b(value)j(with)e(the)g(right)g(type.)27 b(For)21
b(example,)i(with)f(a)h(str)o(uct)f(de\002nition)g(such)g(as:)362
3162 y Ff(module)49 b(M)h({)462 3262 y(struct)f(S)g({)562
3361 y(string)f(str;)562 3461 y(long)148 b(l;)462 3561
y(};)362 3660 y(};)221 3813 y Fq(The)26 b(transmitted)f(T)-8
b(ypeCode)23 b(for)k Fh(M::S)d Fq(may)j(contain)f(only)g(the)g
(information)h(that)f(it)g(is)g(a)221 3926 y(str)o(uctur)n(e)f
(containing)i(a)g(string)e(followed)h(by)g(a)h(long,)f(not)g(that)g(it)
g(is)g(type)f Fh(M::S)p Fq(,)f(or)i(what)221 4039 y(the)c(member)h
(names)f(ar)n(e.)362 4152 y(T)-8 b(o)29 b(cope)g(with)h(this)f
(situation,)i(omniORBpy)e(has)h(an)g(extension)e(to)h(the)g(standar)n
(d)g(in-)221 4265 y(terface)38 b(which)g(allows)g(you)f(to)f
Fp(coer)n(ce)k Fq(an)e(Any)f(value)h(to)f(a)h(known)f(type.)71
b(Calling)40 b(an)221 4378 y(Any's)27 b Fh(value\(\))d
Fq(method)i(with)i(a)g(T)-8 b(ypeCode)25 b(ar)n(gument)i(r)n(eturns)f
(either)h(a)h(value)g(of)g(the)221 4491 y(r)n(equested)f(type,)i(or)g
Fh(None)e Fq(if)j(the)e(r)n(equested)f(T)-8 b(ypeCode)27
b(is)i(not)f Fp(equivalent)j Fq(to)e(the)f(Any's)221
4604 y(T)-8 b(ypeCode.)26 b(The)21 b(following)i(code)f(is)h
(guaranteed)e(to)h(be)g(safe,)h(but)f(is)h(not)f(standar)n(d:)362
4743 y Ff(a)50 b(=)g Fg(#)f(Acquire)g(an)g(Any)g(from)g(somewhere)362
4843 y Ff(v)h(=)g(a)o(.value)o(\(CORBA)o(.TypeCode)n(\(CORBA)o(.id\(M)o
(.S\)\)\))362 4942 y(if)g(v)f(is)h(not)f(None)o(:)562
5042 y(print)f(v.str)362 5142 y(else:)562 5241 y(print)g("The)h(Any)h
(does)f(not)g(contain)g(a)g(value)g(compatible)f(with)h(M::S)o(.")p
221 5306 1316 4 v 327 5362 a Fe(3)356 5394 y Fc(The)18
b(use)h(of)f(empty)g(r)o(epository)e(id)i(strings)g(is)g(depr)o(ecated)
f(as)i(of)f(GIOP)h(1.2.)p eop
%%Page: 21 27
21 26 bop 63 282 a Fi(3.3.)51 b(INTERF)-7 b(ACE)20 b(REPOSIT)n(OR)m(Y)i
(STUBS)1609 b Fq(21)63 539 y Fj(3.2.1)99 b(Any)24 b(helper)g(module)63
715 y Fq(omniORBpy)32 b(pr)n(ovides)g(an)i(alternative,)i(non-standar)n
(d)c(way)h(of)h(constr)o(ucting)e(and)h(de-)63 828 y(constr)o(ucting)18
b(Anys)g(that)i(is)f(often)g(mor)n(e)g(convenient)g(to)g(use)f(in)i
(Python)e(pr)n(ograms.)26 b(It)19 b(uses)63 941 y(Python's)25
b(own)h(dynamic)h(typing)e(to)h(infer)h(the)f(T)-8 b(ypeCodes)23
b(to)j(use.)39 b(The)25 b Fh(omniORB.any)63 1054 y Fq(module)d
(contains)g(two)g(functions,)g Fh(to_any\(\))d Fq(and)k
Fh(from_any\(\))p Fq(.)204 1167 y Fh(to_any\(\))18 b
Fq(takes)i(a)i(Python)e(object)h(and)g(tries)g(to)f(r)n(eturn)h(it)g
(inside)g(an)h(Any)-10 b(.)27 b(It)20 b(uses)g(the)63
1280 y(following)j(r)o(ules:)199 1481 y Fn(\017)46 b
Fq(Python)21 b(strings)g(ar)n(e)i(r)n(epr)n(esented)d(as)j(CORBA)g
(strings.)199 1664 y Fn(\017)46 b Fq(Python)21 b(unicode)h(objects)g
(ar)n(e)h(r)n(epr)n(esented)d(as)j(CORBA)f(wstrings.)199
1848 y Fn(\017)46 b Fq(Python)21 b(integers)g(ar)n(e)i(r)n(epr)n
(esented)d(as)i(CORBA)h(longs.)199 2032 y Fn(\017)46
b Fq(Python)30 b(long)g(integers)g(ar)n(e)h(r)n(epr)n(esented)d(as)k(a)
f(CORBA)g(integer)f(type)g(taken)g(fr)n(om)290 2144 y(long,)22
b(unsigned)f(long,)g(long)h(long,)g(unsigned)f(long,)h(depending)e(on)i
(what)h(size)f(type)290 2257 y(the)27 b(Python)f(long)i(integer)e(will)
j(\002t)f(in.)44 b(If)28 b(the)f(value)h(is)g(too)f(lar)n(ge)h(for)g
(any)g(of)g(these,)290 2370 y Fh(CORBA.BAD_PARAM)16 b
Fq(is)23 b(raised.)199 2554 y Fn(\017)46 b Fq(Python)18
b(lists)h(and)g(tuples)f(of)i(the)e(types)g(above)h(ar)n(e)h(r)n(epr)n
(esented)c(as)k(sequences)d(of)i(the)290 2667 y(corr)n(esponding)i
(CORBA)h(types.)199 2850 y Fn(\017)46 b Fq(Python)20
b(lists)h(and)g(tuples)f(of)i(mixed)f(types)e(ar)n(e)j(r)n(epr)n
(esented)c(as)k(sequences)d(of)i(Anys.)199 3034 y Fn(\017)46
b Fq(Python)16 b(dictionaries)i(with)g(string)f(keys)f(ar)n(e)j(r)n
(epr)n(esented)c(as)j(CORBA)g(str)o(ucts,)f(using)290
3147 y(the)32 b(dictionary)h(keys)e(as)h(the)g(member)h(names,)i(and)d
(the)g(types)f(of)i(the)f(dictionary)290 3260 y(values)23
b(as)g(the)e(member)i(types.)199 3444 y Fn(\017)46 b
Fq(Instances)32 b(of)h(CORBA)f(types)f(\(str)o(ucts,)k(unions,)g
(enums,)f(etc.\))59 b(generated)30 b(by)j(the)290 3556
y(IDL)22 b(compiler)h(ar)n(e)g(r)n(epr)n(esented)d(as)j(themselves.)204
3757 y(All)g(other)f(Python)f(types)f(r)n(esult)i(in)h(a)h
Fh(CORBA.BAD_PARA)o(M)17 b Fq(exception.)204 3870 y(The)27
b Fh(from_any\(\))d Fq(function)29 b(works)e(in)i(r)n(everse.)44
b(It)28 b(takes)f(an)i(Any)e(as)i(its)f(ar)n(gument)63
3983 y(and)g(extracts)f(its)h(contents)e(using)i(the)f(same)h(r)o(ules)
g(as)g Fh(to_any\(\))p Fq(.)41 b(By)27 b(default,)j(CORBA)63
4096 y(str)o(ucts)18 b(ar)n(e)i(extracted)e(to)g(dictionaries;)i(if)h
(the)d(optional)h Fh(keep_structs)14 b Fq(ar)n(gument)19
b(is)h(set)63 4209 y(tr)o(ue,)h(they)h(ar)n(e)h(instead)e(left)i(as)g
(instances)f(of)h(the)e(CORBA)i(str)o(uct)f(classes.)63
4505 y Fo(3.3)119 b(Interface)27 b(Repository)k(stubs)63
4716 y Fq(The)23 b(Interface)g(Repository)e(interfaces)j(ar)n(e)g
(declar)n(ed)g(in)h(IDL)e(module)g Fh(CORBA)f Fq(so,)i(accor)n(d-)63
4829 y(ing)c(to)g(the)g(Python)f(mapping,)i(the)e(stubs)h(for)g(them)g
(should)g(appear)g(in)h(the)f(Python)f Fh(CORBA)63 4942
y Fq(module,)i(along)i(with)g(all)h(the)e(other)f(CORBA)i
(de\002nitions.)k(However)-7 b(,)21 b(since)i(the)f(stubs)f(ar)n(e)63
5055 y(extr)n(emely)28 b(lar)n(ge,)j(omniORBpy)e(does)f(not)h(include)h
(them)f(by)g(default.)49 b(T)-8 b(o)28 b(do)h(so)g(would)63
5168 y(unnecessarily)21 b(incr)n(ease)i(the)f(memory)g(footprint)f(and)
i(start-up)f(time.)204 5281 y(The)36 b(Interface)h(Repository)e(stubs)h
(ar)n(e)i(automatically)h(included)e(if)h(you)e(de\002ne)g(the)63
5394 y Fh(OMNIORBPY_IMPO)o(RT)o(_I)o(R_S)o(TU)o(BS)30
b Fq(envir)n(onment)36 b(variable.)72 b(Alternatively)-10
b(,)40 b(you)c(can)p eop
%%Page: 22 28
22 27 bop 221 282 a Fq(22)878 b Fi(CHAPTER)21 b(3.)51
b(PYTHON)22 b(LANGUAGE)f(MAPPING)h(ISSUES)221 539 y Fq(import)32
b(the)f(stubs)f(at)i(r)o(un-time)g(by)g(calling)i(the)d
Fh(omniORB.import)o(IRS)o(tu)o(bs)o(\(\))25 b Fq(func-)221
652 y(tion.)j(In)22 b(both)g(cases,)g(the)g(stubs)f(become)i(available)
i(in)e(the)f(Python)g Fh(CORBA)e Fq(module.)p eop
%%Page: 23 29
23 28 bop 63 1166 a Fk(Chapter)44 b(4)63 1585 y Fm(omniORB)51
b(con\002guration)h(and)g(API)63 2048 y Fq(omniORB)23
b(4.0,)g(and)g(thus)e(omniORBpy)h(2,)h(has)g(a)h(wide)e(range)g(of)h
(parameters)f(that)g(can)i(be)63 2161 y(con\002gur)n(ed.)37
b(They)26 b(can)h(be)f(set)f(in)i(the)f(con\002guration)g(\002le)g(/)h
(W)-5 b(indows)25 b(r)n(egistry)-10 b(,)25 b(as)i(envi-)63
2274 y(r)n(onment)e(variables,)j(or)e(on)f(the)h(command)g(line.)38
b(A)26 b(few)g(parameters)f(can)i(be)f(con\002gur)n(ed)63
2387 y(at)g(r)o(un)g(time.)39 b(This)26 b(chapter)g(lists)g(all)i(the)d
(con\002guration)h(parameters,)g(and)g(how)g(they)f(ar)n(e)63
2500 y(used.)63 2825 y Fo(4.1)119 b(Setting)29 b(parameters)63
3044 y Fq(When)20 b Fh(CORBA::ORB_init)o(\(\))15 b Fq(is)21
b(called,)h(the)f(value)h(for)f(each)g(con\002guration)g(parameter)63
3157 y(is)h(sear)n(ched)g(for)h(in)g(the)f(following)h(or)n(der:)176
3391 y(1.)46 b(Command)23 b(line)g(ar)n(guments)176 3596
y(2.)46 b(Envir)n(onment)22 b(variables)176 3801 y(3.)46
b(Con\002guration)22 b(\002le)h(/)g(W)-5 b(indows)21
b(r)n(egistry)176 4005 y(4.)46 b(Built-in)23 b(defaults)63
4286 y Fj(4.1.1)99 b(Command)23 b(line)i(arguments)63
4472 y Fq(Command)k(line)g(ar)n(guments)f(take)h(the)f(form)h(`)p
Fh(-ORB)p Fp(parameter)p Fq(',)i(and)e(usually)g(expect)f(an-)63
4585 y(other)21 b(ar)n(gument.)27 b(An)c(example)f(is)h(`)p
Fh(-ORBtraceLevel)48 b(10)p Fq('.)63 4866 y Fj(4.1.2)99
b(Environment)24 b(variables)63 5051 y Fq(Envir)n(onment)j(variables)j
(consist)e(of)g(the)f(parameter)h(name)g(pr)n(e\002xed)f(with)h(`)p
Fh(ORB)p Fq('.)f(Using)63 5164 y(bash,)22 b(for)h(example)204
5322 y Ff(export)48 b(ORBtraceLevel)n(=10)1662 5622 y
Fq(23)p eop
%%Page: 24 30
24 29 bop 221 282 a Fq(24)936 b Fi(CHAPTER)22 b(4.)51
b(OMNIORB)22 b(CONFIGURA)-7 b(TION)21 b(AND)i(API)221
539 y Fj(4.1.3)99 b(Con\002guration)25 b(\002le)221 716
y Fq(The)30 b(best)g(way)h(to)g(understand)d(the)j(format)g(of)g(the)f
(con\002guration)g(\002le)h(is)g(to)f(look)h(at)g(the)221
828 y Fh(sample.cfg)23 b Fq(\002le)28 b(in)f(the)g(omniORB)h
(distribution.)41 b(Each)28 b(parameter)f(is)g(set)f(on)i(a)f(single)
221 941 y(line)c(like)221 1154 y Fh(traceLevel)50 b(=)k(10)362
1367 y Fq(Some)27 b(parameters)f(can)h(have)h(mor)n(e)f(than)g(one)f
(value,)i(in)g(which)f(case)g(the)g(parameter)221 1480
y(name)c(may)g(be)g(speci\002ed)e(mor)n(e)h(than)h(once,)f(or)g(you)g
(can)h(leave)g(it)g(out:)221 1693 y Fh(InitRef)52 b(=)i(NameService=co)
o(rb)o(an)o(ame)o(::)o(ho)o(st)o(1.)o(exa)o(mp)o(le)o(.c)o(om)658
1806 y(=)g(InterfaceRepos)o(it)o(or)o(y=c)o(or)o(ba)o(lo)o(c:)o(:ho)o
(st)o(2.)o(ex)o(am)o(ple)o(.c)o(om)o(:1)o(23)o(4/I)o(fR)p
221 2001 3289 17 v 358 2142 a Fq(Note)26 b(how)i(command)h(line)g(ar)n
(guments)e(and)i(envir)n(onment)f(variables)h(pr)n(e\002x)f(pa-)358
2255 y(rameter)j(names)i(with)f(`-ORB')h(and)g(`ORB')g(r)n(espectively)
-10 b(,)33 b(but)g(the)e(con\002guration)358 2368 y(\002le)22
b(and)h(the)f(extra)g(ar)n(gument)g(to)g Fh(ORB_init\(\))c
Fq(do)k(not)g(use)g(a)h(pr)n(e\002x.)p 221 2453 V 221
2728 a Fj(4.1.4)99 b(W)l(indows)25 b(registry)221 2905
y Fq(On)20 b(W)-5 b(indows,)19 b(con\002guration)g(parameters)f(can)i
(be)g(stor)n(ed)e(in)h(the)g(r)n(egistry)-10 b(,)18 b(under)h(the)f
(key)221 3018 y Fh(HKEY_LOCAL_MACH)o(IN)o(E\\S)o(OF)o(TW)o(AR)o(E\\)o
(omn)o(iO)o(RB)o Fq(.)362 3131 y(The)i(\002le)h Fh(sample.reg)16
b Fq(shows)j(the)g(settings)g(that)h(can)h(be)g(made.)27
b(It)19 b(can)j(be)e(edited)f(and)221 3244 y(then)j(imported)f(into)i
(r)n(egedit.)221 3543 y Fo(4.2)119 b(T)-13 b(racing)29
b(options)221 3754 y Fq(The)22 b(following)h(options)e(contr)n(ol)i
(debugging)e(trace)h(output.)221 3980 y Fh(traceLevel)87
b Fp(default)24 b Fq(=)f Fh(1)221 4163 y Fq(omniORB)18
b(can)g(output)e(tracing)i(and)f(diagnostic)g(messages)f(to)h(the)g
(standar)n(d)g(err)n(or)f(str)n(eam.)221 4276 y(The)22
b(following)h(levels)g(ar)n(e)g(de\002ned:)412 4502 y(level)g(0)146
b(critical)25 b(err)n(ors)c(only)412 4615 y(level)i(1)146
b(informational)24 b(messages)d(only)412 4728 y(level)i(2)146
b(con\002guration)22 b(information)h(and)g(warnings)412
4841 y(level)g(5)146 b(noti\002cations)22 b(when)f(server)g(thr)n(eads)
g(ar)n(e)i(cr)n(eated)e(and)817 4954 y(communication)j(endpoints)c(ar)n
(e)j(shutdown)412 5067 y(level)g(10)101 b(execution)21
b(and)i(exception)e(traces)412 5180 y(level)i(25)101
b(trace)22 b(each)h(send)f(or)g(r)n(eceive)h(of)f(a)i(giop)e(message)
412 5293 y(level)h(30)101 b(dump)22 b(up)g(to)g(128)i(bytes)d(of)i
(each)g(giop)f(message)412 5406 y(level)h(40)101 b(dump)22
b(complete)g(contents)e(of)j(each)g(giop)f(message)p
eop
%%Page: 25 31
25 30 bop 63 282 a Fi(4.3.)51 b(MISCELLANEOUS)20 b(GLOBAL)i(OPTIONS)
1392 b Fq(25)63 539 y(The)22 b(trace)g(level)h(is)g(cumulative,)h(so)e
(at)g(level)h(40,)h(all)g(trace)f(messages)d(ar)n(e)j(output.)63
764 y Fh(traceException)o(s)85 b Fp(default)24 b Fq(=)f
Fh(0)63 948 y Fq(If)k(the)f Fh(traceExceptions)21 b Fq(parameter)26
b(is)i(set)e(tr)o(ue,)h(all)i(system)c(exceptions)h(ar)n(e)h(logged)63
1061 y(as)f(they)f(ar)n(e)h(thr)n(own,)g(along)g(with)g(details)g
(about)g(wher)n(e)f(the)g(exception)g(is)h(thr)n(own)f(fr)n(om.)63
1173 y(This)d(parameter)g(is)h(enabled)f(by)h(default)f(if)i(the)e
(traceLevel)g(is)g(set)g(to)g(10)h(or)g(mor)n(e.)63 1399
y Fh(traceInvocatio)o(ns)84 b Fp(default)25 b Fq(=)d
Fh(0)63 1582 y Fq(If)39 b(the)f Fh(traceInvocatio)o(ns)33
b Fq(parameter)38 b(is)h(set)f(tr)o(ue,)k(all)f(local)f(and)f(r)n
(emote)f(invoca-)63 1695 y(tions)e(ar)n(e)i(logged,)h(in)f(addition)f
(to)f(any)i(logging)e(that)h(may)h(have)f(been)g(selected)f(with)63
1808 y Fh(traceLevel)p Fq(.)63 2034 y Fh(traceThreadId)85
b Fp(default)24 b Fq(=)f Fh(0)63 2217 y Fq(If)30 b Fh(traceThreadId)25
b Fq(is)30 b(set)f(tr)o(ue,)i(all)h(trace)f(messages)d(ar)n(e)j(pr)n
(e\002xed)e(with)h(the)g(id)g(of)g(the)63 2330 y(thr)n(ead)c
(outputting)f(the)h(message.)40 b(This)27 b(can)g(be)g(handy)g(for)g
(tracking)g(down)f(race)h(condi-)63 2443 y(tions,)22
b(but)h(it)g(adds)f(signi\002cant)i(over)n(head)e(to)h(the)f(logging)g
(function)h(so)g(it)g(is)g(turned)f(of)n(f)i(by)63 2556
y(default.)63 2807 y Fj(4.2.1)99 b(T)-11 b(racing)25
b(API)63 2984 y Fq(The)34 b(thr)n(ee)g(tracing)h(parameters)f(can)i(be)
f(inspected)e(or)h(modi\002ed)h(at)g(r)o(untime)f(with)h(the)63
3097 y Fh(traceLevel\(\))p Fq(,)j Fh(traceInvocatio)o(ns\()o(\))33
b Fq(and)40 b Fh(traceThreadId\(\))33 b Fq(functions)39
b(in)63 3209 y(the)34 b Fh(omniORB)e Fq(module.)66 b(Calling)37
b(one)d(of)i(the)e(functions)h(with)g(no)g(ar)n(guments)g(r)n(eturns)63
3322 y(the)21 b(curr)n(ent)i(value;)g(calling)h(it)f(with)f(a)i(single)
e(integer)f(ar)n(gument)h(sets)f(the)h(value.)63 3617
y Fo(4.3)119 b(Miscellaneous)29 b(global)h(options)63
3828 y Fq(These)21 b(options)g(contr)n(ol)h(miscellaneous)h(featur)n
(es)f(that)g(af)n(fect)i(the)e(whole)g(ORB)g(r)o(untime.)63
4054 y Fh(dumpConfigurat)o(io)o(n)85 b Fp(default)24
b Fq(=)f Fh(0)63 4237 y Fq(If)f(set)g(tr)o(ue,)f(the)h(ORB)h(dumps)e
(the)h(values)h(of)g(all)h(con\002guration)e(parameters)f(at)i
(start-up.)63 4463 y Fh(scanGranularit)o(y)85 b Fp(default)24
b Fq(=)f Fh(5)63 4646 y Fq(As)i(explained)g(in)h(chapter)f(7,)h
(omniORB)g(r)n(egularly)f(scans)h(incoming)g(and)f(outgoing)f(con-)63
4759 y(nections,)29 b(so)g(it)g(can)h(close)f(unused)e(ones.)46
b(This)29 b(value)h(is)f(the)f(granularity)h(in)h(seconds)d(at)63
4872 y(which)33 b(the)g(ORB)g(performs)f(its)g(scans.)60
b(A)32 b(value)i(of)f(zer)n(o)h(turns)e(of)n(f)h(the)g(scanning)g
(alto-)63 4985 y(gether)-7 b(.)63 5211 y Fh(nativeCharCode)o(Se)o(t)85
b Fp(default)24 b Fq(=)f Fh(ISO-8859-1)63 5394 y Fq(The)f(native)h
(code)e(set)h(the)g(application)i(is)e(using)g(for)h
Fh(char)e Fq(and)h Fh(string)p Fq(.)k(See)21 b(chapter)h(8.)p
eop
%%Page: 26 32
26 31 bop 221 282 a Fq(26)936 b Fi(CHAPTER)22 b(4.)51
b(OMNIORB)22 b(CONFIGURA)-7 b(TION)21 b(AND)i(API)221
539 y Fh(omniORB_27_Comp)o(at)o(ibl)o(eA)o(ny)o(Ex)o(tr)o(act)o(io)o(n)
85 b Fp(default)24 b Fq(=)f Fh(0)221 729 y Fq(In)33 b(omniORB)h(2.7)g
(and)g(earlier)-7 b(,)37 b(the)32 b(Any)h(extraction)g(operators)f(for)
h(strings)g(and)g(object)221 842 y(r)n(efer)n(ences)25
b(r)n(eturned)f(a)i(copy/duplicate)f(of)h(the)f(value)i(stor)n(ed)d(in)
i(the)f(Any)-10 b(,)26 b(meaning)g(the)221 955 y(caller)j(had)f(to)e(r)
n(elease)h(the)g(extracted)f(value.)44 b(The)27 b(C++)h(mapping)f(was)h
(clari\002ed)g(to)f(state)221 1068 y(that)20 b(the)f(Any)g(r)n(etains)h
(ownership)f(of)h(the)f(r)n(eturned)f(value,)j(so)f(the)f(caller)i
(does)e(not)g(need)g(to)221 1180 y(r)n(elease)25 b(it.)35
b(T)-8 b(o)24 b(aid)h(the)f(transition)h(for)g(ancient)g(pr)n(ograms)g
(fr)n(om)g(omniORB)g(2.7)h(or)f(earlier)-7 b(,)221 1293
y(setting)21 b(this)h(\003ag)h(to)f(tr)o(ue)g(selects)g(the)f(old)i
(copying)f(behaviour)-7 b(.)221 1526 y Fh(abortOnInternal)o(Er)o(ror)84
b Fp(default)24 b Fq(=)f Fh(0)221 1716 y Fq(If)31 b(this)f(is)h(set)f
(tr)o(ue,)i(internal)f(fatal)h(err)n(ors)e(will)i(abort)f(immediately)
-10 b(,)32 b(rather)f(than)f(thr)n(ow-)221 1829 y(ing)24
b(the)f Fh(omniORB::fatalEx)o(ce)o(pt)o(io)o(n)18 b Fq(exception.)31
b(This)23 b(can)i(be)f(helpful)g(for)g(tracking)221 1942
y(down)e(bugs,)f(since)i(it)g(leaves)f(the)g(call)j(stack)d(intact.)221
2284 y Fo(4.4)119 b(Client)30 b(side)f(options)221 2509
y Fq(These)21 b(options)g(contr)n(ol)i(aspects)e(of)i(client-side)f
(behaviour)-7 b(.)221 2742 y Fh(InitRef)88 b Fp(default)24
b Fq(=)f Fa(none)221 2932 y Fq(Specify)17 b(the)f(objects)h(available)j
(fr)n(om)e Fh(ORB::resolve_i)o(ni)o(tia)o(l_)o(re)o(fe)o(re)o(nce)o
(s\()o(\))p Fq(.)i(The)221 3045 y(ar)n(guments)c(take)h(the)f(form)i(<)
p Fp(key)p Fq(>=<)p Fp(uri)p Fq(>,)h(wher)n(e)e(the)f
Fp(key)j Fq(is)e(the)f(name)i(given)f(to)f Fh(resolve_)221
3158 y(initial_referen)o(ce)o(s\(\))k Fq(and)27 b Fp(uri)g
Fq(is)f(a)i(valid)g(CORBA)e(object)h(r)n(efer)n(ence)f(URI,)g(as)h(de-)
221 3271 y(tailed)c(in)g(chapter)f(6.)221 3504 y Fh(DefaultInitRef)85
b Fp(default)24 b Fq(=)f Fa(none)221 3694 y Fq(Specify)39
b(the)f(default)h(URI)f(pr)n(e\002x)g(for)h Fh(resolve_initial)o(_r)o
(ef)o(er)o(enc)o(es)o(\(\))o Fq(,)e(as)i(ex-)221 3807
y(plained)23 b(in)g(chapter)f(6.)221 4040 y Fh(clientTransport)o(Ru)o
(le)84 b Fp(default)25 b Fq(=)e Fh(*)54 b(unix,tcp,ssl)221
4230 y Fq(Used)33 b(to)h(specify)g(the)g(way)g(the)g(client)h(contacts)
f(a)h(server)-7 b(,)36 b(depending)d(on)h(the)g(server)7
b('s)221 4343 y(addr)n(ess.)27 b(See)21 b(section)h(7.7.1)h(for)g
(details.)221 4576 y Fh(clientCallTimeO)o(ut)o(Per)o(io)o(d)85
b Fp(default)24 b Fq(=)f Fh(0)221 4766 y Fq(Call)i(timeout)d(in)i
(milliseconds)f(for)g(the)f(client)i(side.)k(If)23 b(a)g(call)i(takes)d
(longer)g(than)h(the)g(spec-)221 4879 y(i\002ed)30 b(number)g(of)h
(milliseconds,)h(the)d(ORB)h(closes)g(the)f(connection)h(and)g(raises)g
(a)h Fh(COMM_)221 4992 y(FAILURE)c Fq(exception.)48 b(A)30
b(value)g(of)g(zer)n(o)g(means)f(no)h(timeout;)i(calls)f(can)g(block)f
(for)g(ever)-7 b(.)221 5104 y(See)22 b(section)g(7.3.1)h(for)g(mor)n(e)
f(information)h(about)g(timeouts.)221 5281 y Fl(Note)p
Fq(:)37 b(omniORB)27 b(3)h(had)f(timeouts)f(speci\002ed)g(in)h
(seconds;)g(omniORB)h(4.0)f(uses)f(millisec-)221 5394
y(onds)c(for)g(timeouts.)p eop
%%Page: 27 33
27 32 bop 63 282 a Fi(4.4.)51 b(CLIENT)21 b(SIDE)h(OPTIONS)2016
b Fq(27)63 539 y Fh(supportPerThre)o(ad)o(Ti)o(meO)o(ut)84
b Fp(default)24 b Fq(=)f Fh(0)63 727 y Fq(If)29 b(this)g(parameter)f
(is)i(set)e(tr)o(ue,)h(timeouts)f(can)i(be)f(set)f(on)h(a)h(per)e(thr)n
(ead)h(basis,)i(as)e(well)g(as)63 840 y(globally)21 b(and)g(per)f
(object.)27 b(Checking)21 b(per)n(-thr)n(ead)f(storage)f(has)i(a)g
(noticeable)g(performance)63 953 y(impact,)i(so)f(it)h(is)f(turned)f
(of)n(f)j(by)e(default.)63 1185 y Fh(outConScanPeri)o(od)84
b Fp(default)25 b Fq(=)d Fh(120)63 1373 y Fq(Idle)h(timeout)f(in)i
(seconds)e(for)i(outgoing)e(\(i.e.)h(client)h(initiated\))h
(connections.)30 b(If)23 b(a)h(connec-)63 1486 y(tion)e(has)h(been)f
(idle)g(for)h(this)f(amount)h(of)f(time,)h(the)e(ORB)i(closes)f(it.)28
b(See)21 b(section)h(7.5.)63 1718 y Fh(maxGIOPConnect)o(io)o(nP)o(erS)o
(er)o(ve)o(r)85 b Fp(default)24 b Fq(=)f Fh(5)63 1906
y Fq(The)32 b(maximum)j(number)e(of)h(concurr)n(ent)f(connections)f
(the)h(ORB)g(will)h(open)f(to)f(a)i Fp(single)63 2019
y Fq(server)-7 b(.)35 b(If)25 b(multiple)h(thr)n(eads)f(on)g(the)f
(client)i(call)i(the)c(same)h(server)-7 b(,)26 b(the)e(ORB)h(opens)f
(addi-)63 2132 y(tional)e(connections)e(to)h(the)f(server)-7
b(,)20 b(up)h(to)g(the)f(maximum)j(speci\002ed)d(by)i(this)e(parameter)
-7 b(.)28 b(If)63 2245 y(the)d(maximum)j(is)e(r)n(eached,)h(thr)n(eads)
e(ar)n(e)i(blocked)f(until)g(a)h(connection)f(becomes)g(fr)n(ee)g(for)
63 2358 y(them)c(to)g(use.)63 2589 y Fh(oneCallPerConn)o(ec)o(ti)o(on)
84 b Fp(default)25 b Fq(=)e Fh(1)63 2778 y Fq(When)18
b(this)h(parameter)g(is)g(set)f(to)h(tr)o(ue)g(\(the)f(default\),)i
(the)f(ORB)g(will)h(only)f(send)f(a)i(single)f(call)63
2891 y(on)f(a)h(connection)f(at)h(a)g(time.)26 b(If)19
b(multiple)g(client)g(thr)n(eads)f(invoke)g(on)g(the)g(same)g(server)-7
b(,)19 b(mul-)63 3004 y(tiple)29 b(connections)f(ar)n(e)i(opened,)e(up)
h(to)g(the)f(limit)j(speci\002ed)d(by)h Fh(maxGIOPConnecti)o(on)63
3117 y(PerServer)p Fq(.)i(W)-5 b(ith)26 b(this)f(parameter)f(set)g(to)h
(false,)h(the)f(ORB)g(will)h(allow)g(concurr)n(ent)f(calls)63
3230 y(on)c(a)g(single)g(connection.)27 b(This)21 b(saves)g(connection)
f(r)n(esour)n(ces,)g(but)h(r)n(equir)n(es)g(slightly)g(mor)n(e)63
3343 y(management)28 b(work)g(for)h(both)g(client)h(and)f(server)-7
b(.)46 b(Some)29 b(server)n(-side)e(ORBs)i(\(including)63
3456 y(omniORB)22 b(versions)g(befor)n(e)g(4.0\))i(serialise)f(all)h
(calls)g(on)e(a)h(single)f(connection.)63 3687 y Fh(offerBiDirecti)o
(on)o(al)o(GIO)o(P)85 b Fp(default)24 b Fq(=)f Fh(0)63
3876 y Fq(If)g(set)g(tr)o(ue,)f(the)h(client)h(will)h(indicate)f(to)f
(servers)f(that)h(it)h(is)g(willing)h(to)e(accept)g(callbacks)j(on)63
3989 y(client-initiated)k(connections)e(using)h(bidir)n(ectional)i
(GIOP)-12 b(,)30 b(pr)n(ovided)f(the)g(r)n(elevant)g(POA)63
4102 y(policies)22 b(ar)n(e)h(set.)k(See)22 b(section)f(7.8.)63
4333 y Fh(diiThrowsSysEx)o(ce)o(pt)o(ion)o(s)85 b Fp(default)24
b Fq(=)f Fh(0)63 4522 y Fq(If)18 b(this)f(is)i(tr)o(ue,)f(DII)f
(functions)h(thr)n(ow)g(system)e(exceptions;)i(if)g(it)h(is)f(false,)h
(system)d(exceptions)63 4635 y(that)22 b(occur)h(ar)n(e)g(passed)e(thr)
n(ough)g(the)h Fh(Environment)c Fq(object.)63 4866 y
Fh(verifyObjectEx)o(is)o(ts)o(And)o(Ty)o(pe)84 b Fp(default)24
b Fq(=)f Fh(1)63 5055 y Fq(By)h(default,)i(omniORB)f(uses)f(the)h(GIOP)
h Fh(LOCATE_REQUEST)19 b Fq(message)24 b(to)h(verify)g(the)g(ex-)63
5168 y(istence)30 b(of)i(an)g(object)f(prior)g(to)g(the)g(\002rst)f
(invocation.)56 b(In)31 b(the)g(case)g(that)g(the)g(full)i(type)d(of)63
5281 y(the)g(object)h(is)h(not)e(known,)i(it)g(instead)e(calls)j(the)e
Fh(_is_a\(\))d Fq(operation)i(to)h(check)g(the)f(ob-)63
5394 y(ject's)25 b(type.)34 b(Some)24 b(ORBs)h(have)g(bugs)g(that)g
(mean)g(one)g(or)g(other)f(of)h(these)e(operations)h(fail.)p
eop
%%Page: 28 34
28 33 bop 221 282 a Fq(28)936 b Fi(CHAPTER)22 b(4.)51
b(OMNIORB)22 b(CONFIGURA)-7 b(TION)21 b(AND)i(API)221
539 y Fq(Setting)e(this)i(parameter)f(false)h(pr)n(events)e(omniORB)i
(fr)n(om)g(making)g(these)e(calls.)221 768 y Fh(giopTargetAddre)o(ss)o
(Mod)o(e)85 b Fp(default)24 b Fq(=)f Fh(0)221 955 y Fq(GIOP)j(1.2)f
(supports)e(thr)n(ee)h(addr)n(essing)g(modes)f(for)i(contacting)g
(objects.)35 b(This)25 b(parameter)221 1068 y(selects)34
b(the)h(mode)g(that)g(omniORB)g(uses.)65 b(A)36 b(value)g(of)f(0)h
(means)g Fh(GIOP::KeyAddr)p Fq(;)f(1)221 1181 y(means)23
b Fh(GIOP::ProfileA)o(dd)o(r)p Fq(;)16 b(2)24 b(means)e
Fh(GIOP::Reference)o(Ad)o(dr)o Fq(.)221 1411 y Fh(bootstrapAgentH)o(os)
o(tna)o(me)84 b Fp(default)24 b Fq(=)f Fa(none)221 1598
y Fq(If)f(set,)f(this)g(parameter)h(indicates)g(the)f(hostname)g(to)g
(use)g(for)h(look-ups)e(using)i(the)f(obsolete)221 1711
y(Sun)k(bootstrap)g(agent.)36 b(This)25 b(mechanism)i(is)f(superseded)c
(by)j(the)g(inter)n(operable)g(naming)221 1823 y(service.)221
2053 y Fh(bootstrapAgentP)o(or)o(t)85 b Fp(default)24
b Fq(=)f Fh(900)221 2240 y Fq(The)f(port)g(number)g(for)h(the)e
(obsolete)g(Sun)i(bootstrap)e(agent.)221 2470 y Fh(principal)87
b Fp(default)24 b Fq(=)f Fa(none)221 2657 y Fq(GIOP)33
b(1.0)g(and)f(1.1)h(have)g(a)g(r)n(equest)d(header)i(\002eld)g(named)g
(`principal',)k(which)d(contains)221 2770 y(a)i(sequence)e(of)i
(octets.)63 b(It)34 b(was)g(never)g(de\002ned)f(what)i(it)g(should)e
(mean,)38 b(and)d(its)f(use)g(is)221 2883 y(now)27 b(depr)n(ecated;)g
(GIOP)h(1.2)g(has)f(no)g(such)g(\002eld.)42 b(Some)26
b(systems)f(\(e.g.)h(Gnome\))i(use)e(the)221 2995 y(principal)h
(\002eld)f(as)g(a)h(primitive)f(authentication)g(scheme.)37
b(This)26 b(parameter)f(sets)g(the)g(data)221 3108 y(omniORB)e(uses)e
(in)i(the)f(principal)i(\002eld.)j(The)22 b(default)h(is)f(an)i(empty)d
(sequence.)221 3430 y Fo(4.5)119 b(Server)29 b(side)h(options)221
3649 y Fq(These)21 b(parameters)h(af)n(fect)h(server)n(-side)f
(operations.)221 3879 y Fh(endPoint)578 b Fp(default)25
b Fq(=)d Fh(giop:tcp::)221 3992 y(endPointNoListe)o(n)221
4105 y(endPointNoPubli)o(sh)221 4217 y(endPointPublish)o(Al)o(lIF)o(s)
221 4451 y Fq(These)h(options)h(determine)f(the)i(end-points)e(the)h
(ORB)h(should)f(listen)g(on,)h(and)g(the)f(details)221
4564 y(that)f(should)e(be)i(published)f(in)h(IORs.)k(See)21
b(chapter)i(7)g(for)f(details.)221 4794 y Fh(serverTransport)o(Ru)o(le)
84 b Fp(default)25 b Fq(=)e Fh(*)54 b(unix,tcp,ssl)221
4981 y Fq(Con\002gur)n(e)22 b(the)g(r)o(ules)h(about)g(whether)e(a)i
(server)f(should)g(accept)h(an)g(incoming)h(connection)221
5094 y(fr)n(om)f(a)h(client.)k(See)21 b(section)h(7.7.2)i(for)e
(details.)221 5323 y Fh(serverCallTimeO)o(ut)o(Per)o(io)o(d)85
b Fp(default)24 b Fq(=)f Fh(0)p eop
%%Page: 29 35
29 34 bop 63 282 a Fi(4.5.)51 b(SER)-5 b(VER)21 b(SIDE)h(OPTIONS)2012
b Fq(29)63 539 y(This)20 b(timeout)g(is)h(used)e(to)i(catch)g(the)f
(situation)h(that)f(the)g(server)g(starts)g(r)n(eceiving)h(a)g(r)n
(equest,)63 652 y(but)29 b(the)f(end)g(of)h(the)g(r)n(equest)e(never)i
(comes.)47 b(If)29 b(a)h(calls)g(takes)e(longer)g(than)h(the)g
(speci\002ed)63 764 y(number)f(of)g(milliseconds)g(to)g(arrive,)i(the)d
(ORB)h(shuts)f(the)g(connection.)44 b(A)28 b(value)g(of)h(zer)n(o)63
877 y(means)22 b(never)g(timeout.)63 1111 y Fh(inConScanPerio)o(d)85
b Fp(default)24 b Fq(=)f Fh(180)63 1302 y Fq(Idle)d(timeout)g(in)i
(seconds)d(for)i(incoming.)28 b(If)21 b(a)g(connection)g(has)g(been)f
(idle)h(for)g(this)g(amount)63 1415 y(of)h(time,)h(the)e(ORB)i(closes)f
(it.)28 b(See)21 b(section)h(7.5.)63 1648 y Fh(threadPerConne)o(ct)o
(io)o(nPo)o(li)o(cy)84 b Fp(default)24 b Fq(=)f Fh(1)63
1839 y Fq(If)d(tr)o(ue)g(\(the)g(default\),)h(the)f(ORB)g(dedicates)g
(one)g(server)f(thr)n(ead)h(to)g(each)h(incoming)g(connec-)63
1952 y(tion.)27 b(Setting)21 b(it)i(false)g(means)g(the)e(server)h
(should)g(use)f(a)i(thr)n(ead)g(pool.)63 2185 y Fh(maxServerThrea)o(dP)
o(er)o(Con)o(ne)o(ct)o(io)o(n)85 b Fp(default)24 b Fq(=)f
Fh(100)63 2376 y Fq(If)h(the)g(client)h(multiplexes)f(several)g
(concurr)n(ent)g(r)n(equests)e(on)j(a)g(single)f(connection,)g(omni-)63
2489 y(ORB)31 b(uses)e(extra)i(thr)n(eads)f(to)h(service)g(them.)53
b(This)31 b(parameter)g(speci\002es)f(the)g(maximum)63
2602 y(number)22 b(of)h(thr)n(eads)e(that)i(ar)n(e)g(allowed)f(to)g
(service)h(a)g(single)f(connection)g(at)h(any)g(one)f(time.)63
2836 y Fh(maxServerThrea)o(dP)o(oo)o(lSi)o(ze)84 b Fp(default)24
b Fq(=)f Fh(100)63 3026 y Fq(The)k(maximum)i(number)f(of)g(thr)n(eads)f
(the)g(server)g(will)i(allocate)g(to)f(do)f(various)h(tasks,)g(in-)63
3139 y(cluding)e(dispatching)f(calls)i(in)f(the)f(thr)n(ead)g(pool)g
(mode.)36 b(This)26 b(number)f(does)f(not)h(include)63
3252 y(thr)n(eads)c(dispatched)h(under)f(the)h(thr)n(ead)g(per)g
(connection)g(server)f(mode.)63 3486 y Fh(threadPerConne)o(ct)o(io)o
(nUp)o(pe)o(rL)o(im)o(it)84 b Fp(default)25 b Fq(=)d
Fh(10000)63 3677 y Fq(If)j(the)f Fh(threadPerConnect)o(io)o(nP)o(ol)o
(ic)o(y)19 b Fq(parameter)25 b(is)g(tr)o(ue,)g(the)g(ORB)g(can)h
(automati-)63 3790 y(cally)19 b(transition)e(to)g(thr)n(ead)g(pool)g
(mode)g(if)h(too)e(many)i(connections)f(arrive.)27 b(This)17
b(parameter)63 3902 y(sets)25 b(the)g(number)i(of)f(connections)g(at)g
(which)h(thr)n(ead)f(pooling)g(is)h(started.)37 b(The)26
b(default)h(of)63 4015 y(10000)e(is)d(designed)f(to)h(mean)h(that)f(it)
h(never)f(happens.)63 4249 y Fh(threadPerConne)o(ct)o(io)o(nLo)o(we)o
(rL)o(im)o(it)84 b Fp(default)25 b Fq(=)d Fh(9000)63
4440 y Fq(If)35 b(thr)n(ead)f(pooling)h(was)g(started)e(because)i(the)f
(number)h(of)g(connections)f(hit)i(the)e(upper)63 4553
y(limit,)23 b(this)g(parameter)f(determines)e(when)i(thr)n(ead)g(per)g
(connection)g(should)g(start)g(again.)63 4786 y Fh(threadPoolWatc)o(hC)
o(on)o(nec)o(ti)o(on)84 b Fp(default)24 b Fq(=)f Fh(1)63
4977 y Fq(If)j(tr)o(ue,)g(thr)n(eads)f(fr)n(om)i(the)e(pool)h
(temporarily)g(behave)g(a)h(bit)g(like)f(thr)n(ead)g(per)f(connection)
63 5090 y(after)d(dispatching)g(a)i(call.)29 b(See)22
b(section)g(7.4.2)h(for)g(details.)63 5323 y Fh(acceptBiDirect)o(io)o
(na)o(lGI)o(OP)84 b Fp(default)24 b Fq(=)f Fh(0)p eop
%%Page: 30 36
30 35 bop 221 282 a Fq(30)936 b Fi(CHAPTER)22 b(4.)51
b(OMNIORB)22 b(CONFIGURA)-7 b(TION)21 b(AND)i(API)221
539 y Fq(Determines)i(whether)g(a)h(server)f(will)j(ever)d(accept)i
(clients')f(of)n(fers)g(of)g(bidir)n(ectional)i(GIOP)221
652 y(connections.)f(See)22 b(section)f(7.8.)221 878
y Fh(unixTransportDi)o(re)o(cto)o(ry)84 b Fp(default)24
b Fq(=)f Fh(/tmp/omni-\045u)221 1062 y Fq(\(Unix)g(platforms)f(only\).)
28 b(Selects)21 b(the)h(location)h(used)e(to)h(stor)n(e)f(Unix)h
(domain)h(sockets.)j(The)221 1175 y(`)p Fh(\045u)p Fq(')d(is)f
(expanded)f(to)h(the)g(user)f(name.)221 1401 y Fh(unixTransportPe)o(rm)
o(iss)o(io)o(n)85 b Fp(default)24 b Fq(=)f Fh(0777)221
1585 y Fq(\(Unix)e(platforms)f(only\).)27 b(Determines)19
b(the)h(octal)h(permission)e(bits)h(for)g(Unix)h(domain)g(sock-)221
1698 y(ets.)27 b(By)22 b(default,)g(all)i(users)d(can)i(connect)f(to)g
(a)i(server)-7 b(,)21 b(just)h(as)h(with)f(TCP)-12 b(.)221
1925 y Fh(supportCurrent)85 b Fp(default)24 b Fq(=)f
Fh(1)221 2108 y Fq(omniORB)j(4.0)h(supports)c(the)i Fh(PortableServer:)
o(:C)o(ur)o(re)o(nt)19 b Fq(interface)26 b(that)g(pr)n(ovides)221
2221 y(thr)n(ead)31 b(context)e(information)j(to)e(a)i(servant.)52
b(Supporting)29 b(curr)n(ent)i(has)g(a)g(small)h(but)f(no-)221
2334 y(ticeable)25 b(r)o(un-time)g(over)n(head)e(due)h(to)f(accessing)i
(thr)n(ead)e(speci\002c)i(storage,)d(so)i(this)g(option)221
2447 y(allows)f(it)g(to)f(be)h(turned)e(of)n(f.)221 2674
y Fh(objectTableSize)84 b Fp(default)25 b Fq(=)d Fh(0)221
2858 y Fq(Hash)27 b(table)g(size)g(of)g(the)f(Active)i(Object)f(Map.)41
b(If)27 b(this)g(is)g(zer)n(o,)h(the)e(ORB)g(uses)g(a)h(dynami-)221
2971 y(cally)g(r)n(esized)e(open)f(hash)i(table.)37 b(This)25
b(is)h(normally)g(the)f(best)g(option,)g(but)g(it)h(leads)f(to)g(less)
221 3083 y(pr)n(edictable)f(performance)g(since)g(any)g(operation)e
(which)j(adds)e(or)g(r)n(emoves)h(a)g(table)g(entry)221
3196 y(may)33 b(trigger)d(a)j(r)n(esize.)55 b(If)32 b(set)f(to)h(a)g
(non-zer)n(o)g(value,)j(the)c(hash)h(table)g(has)g(the)f(speci\002ed)
221 3309 y(number)e(of)f(entries,)h(and)f(is)h(never)f(r)n(esized.)45
b(Note)27 b(that)h(the)g(hash)g(table)h(is)g(open,)g(so)e(this)221
3422 y(does)18 b(not)i(limit)h(the)e(number)h(of)g(active)h(objects,)e
(just)h(how)f(ef)n(\002ciently)h(they)f(can)i(be)f(located.)221
3649 y Fh(poaHoldRequestT)o(im)o(eou)o(t)85 b Fp(default)24
b Fq(=)f Fh(0)221 3833 y Fq(If)28 b(a)h(POA)f(is)g(put)g(in)g(the)f
Fh(HOLDING)e Fq(state,)j(calls)i(to)d(it)i(will)g(be)f(timed)g(out)f
(after)h(the)f(speci-)221 3945 y(\002ed)h(number)g(of)h(milliseconds,)h
(by)e(raising)h(a)g Fh(TRANSIENT)c Fq(exception.)44 b(Zer)n(o)28
b(means)g(no)221 4058 y(timeout.)221 4285 y Fh(supportBootstra)o(pA)o
(gen)o(t)85 b Fp(default)24 b Fq(=)f Fh(0)221 4469 y
Fq(If)g(set)e(tr)o(ue,)h(servers)f(support)f(the)i(Sun)g(bootstrap)g
(agent)f(pr)n(otocol.)221 4772 y Fo(4.6)119 b(GIOP)29
b(and)h(interoperability)e(options)221 4984 y Fq(These)21
b(options)g(contr)n(ol)i(omniORB's)f(use)g(of)g(GIOP)-12
b(,)23 b(and)g(cover)f(some)g(ar)n(eas)h(wher)n(e)e(omni-)221
5097 y(ORB)i(can)g(work)f(ar)n(ound)g(buggy)g(behaviour)h(by)f(other)f
(ORBs.)221 5323 y Fh(maxGIOPVerson)85 b Fp(default)24
b Fq(=)f Fh(1.2)p eop
%%Page: 31 37
31 36 bop 63 282 a Fi(4.6.)51 b(GIOP)23 b(AND)f(INTEROPERABILITY)c
(OPTIONS)1212 b Fq(31)63 539 y(Choose)20 b(the)g(maximum)j(GIOP)e
(version)g(the)f(ORB)h(should)f(support.)26 b(V)-8 b(alid)21
b(values)h(ar)n(e)f(1.0,)63 652 y(1.1)i(and)g(1.2.)63
915 y Fh(giopMaxMsgSize)84 b Fp(default)24 b Fq(=)f Fh(2097152)63
1137 y Fq(The)g(lar)n(gest)g(message,)f(in)j(bytes,)d(that)i(the)f(ORB)
g(will)i(send)e(or)g(r)n(eceive,)h(to)f(avoid)h(r)n(esour)n(ce)63
1249 y(starvation.)29 b(If)24 b(the)e(limit)j(is)e(exceeded,)e(a)j
Fh(MARSHAL)c Fq(exception)i(is)h(thr)n(own.)29 b(The)23
b(size)g(must)63 1362 y(be)f(>=)h(8192.)63 1626 y Fh(strictIIOP)86
b Fp(default)24 b Fq(=)f Fh(1)63 1847 y Fq(If)f(tr)o(ue,)g(be)h(strict)
f(about)h(interpr)n(etation)f(of)g(the)g(IIOP)h(speci\002cation;)g(if)g
(false,)g(permit)f(some)63 1960 y(buggy)f(behaviour)i(to)f(pass.)63
2224 y Fh(lcdMode)87 b Fp(default)25 b Fq(=)d Fh(0)63
2445 y Fq(If)29 b(tr)o(ue,)h(select)f(`Lowest)e(Common)j(Denominator)7
b(')29 b(mode.)48 b(This)29 b(disables)g(various)h(IIOP)63
2558 y(and)22 b(GIOP)h(featur)n(es)f(that)h(ar)n(e)g(known)e(to)h
(cause)h(pr)n(oblems)f(with)g(some)g(ORBs.)63 2822 y
Fh(tcAliasExpand)85 b Fp(default)24 b Fq(=)f Fh(0)63
3043 y Fq(This)d(\003ag)g(is)g(used)f(to)g(indicate)i(whether)d(T)-8
b(ypeCodes)18 b(associated)h(with)h(Anys)f(should)g(have)63
3156 y(aliases)j(r)n(emoved.)k(This)21 b(functionality)h(is)g(included)
f(because)g(some)g(ORBs)f(will)j(not)e(r)n(ecog-)63 3269
y(nise)k(an)h(Any)f(containing)h(a)g(T)-8 b(ypeCode)23
b(with)j(aliases)g(to)f(be)g(the)g(same)h(as)f(the)g(actual)i(type)63
3382 y(contained)j(in)i(the)e(Any)-10 b(.)52 b(Note)29
b(that)i(omniORB)g(will)i(always)e(r)n(emove)g(top-level)f(aliases,)63
3495 y(but)21 b(will)j(not)d(r)n(emove)g(aliases)i(fr)n(om)f(T)-8
b(ypeCodes)19 b(that)j(ar)n(e)g(members)g(of)g(other)e(T)-8
b(ypeCodes)63 3608 y(\(e.g.)28 b(T)-8 b(ypeCodes)27 b(for)j(members)f
(of)g(str)o(ucts)g(etc.\),)i(unless)d Fh(tcAliasExpand)c
Fq(is)30 b(set)e(to)h(1.)63 3721 y(Ther)n(e)23 b(is)h(a)g(performance)g
(penalty)f(when)g(inserting)g(into)h(an)g(Any)g(if)g
Fh(tcAliasExpand)18 b Fq(is)63 3834 y(set)j(to)h(1.)63
4097 y Fh(useTypeCodeInd)o(ir)o(ec)o(tio)o(ns)84 b Fp(default)24
b Fq(=)f Fh(1)63 4319 y Fq(T)-8 b(ypeCode)19 b(Indir)n(ections)j(r)n
(educe)f(the)g(size)i(of)f(marshalled)h(T)-8 b(ypeCodes,)19
b(and)j(ar)n(e)g(essential)63 4431 y(for)j(r)n(ecursive)g(types,)e(but)
i(some)f(ORBs)h(do)f(not)h(support)e(them.)35 b(Setting)23
b(this)i(\003ag)h(to)e(false)63 4544 y(pr)n(events)d(the)h(use)f(of)i
(indir)n(ections)f(\(and,)h(ther)n(efor)n(e,)e(r)n(ecursive)i(T)-8
b(ypeCodes\).)63 4808 y Fh(acceptMisalign)o(ed)o(Tc)o(Ind)o(ir)o(ec)o
(ti)o(on)o(s)85 b Fp(default)24 b Fq(=)f Fh(0)63 5029
y Fq(If)34 b(tr)o(ue,)i(try)e(to)f(\002x)i(a)f(mis-aligned)h(indir)n
(ection)g(in)g(a)f(typecode.)61 b(This)34 b(is)g(used)f(to)h(work)63
5142 y(ar)n(ound)22 b(a)h(bug)g(in)g(some)e(versions)h(of)h(V)-5
b(isibr)n(oker)7 b('s)21 b(Java)j(ORB.)p eop
%%Page: 32 38
32 37 bop 221 282 a Fq(32)936 b Fi(CHAPTER)22 b(4.)51
b(OMNIORB)22 b(CONFIGURA)-7 b(TION)21 b(AND)i(API)221
539 y Fo(4.7)119 b(System)30 b(Exception)g(Handlers)221
751 y Fq(By)f(default,)j(all)f(system)d(exceptions)g(that)i(ar)n(e)g
(raised)g(during)f(an)i(operation)d(invocation,)221 864
y(with)21 b(the)f(exception)f(of)i(some)e(cases)h(of)h
Fh(CORBA.TRANSIENT)o Fq(,)15 b(ar)n(e)21 b(pr)n(opagated)e(to)h(the)g
(ap-)221 977 y(plication)29 b(code.)43 b(Some)28 b(applications)g(may)h
(pr)n(efer)e(to)g(trap)h(these)e(exceptions)h(within)h(the)221
1090 y(pr)n(oxy)20 b(objects)h(so)f(that)g(the)h(application)h(logic)f
(does)f(not)g(have)h(to)f(deal)h(with)g(the)f(err)n(or)h(con-)221
1203 y(dition.)50 b(For)30 b(example,)h(when)f(a)g Fh(CORBA.COMM_FAILU)
o(RE)23 b Fq(is)31 b(r)n(eceived,)g(an)g(application)221
1316 y(may)i(just)e(want)h(to)g(r)n(etry)f(the)g(invocation)i(until)g
(it)f(\002nally)h(succeeds.)55 b(This)31 b(appr)n(oach)i(is)221
1429 y(useful)22 b(for)h(objects)f(that)g(ar)n(e)h(persistent)d(and)j
(have)g(idempotent)d(operations.)362 1542 y(omniORBpy)e(pr)n(ovides)f
(a)h(set)f(of)h(functions)f(to)h(install)h(exception)d(handlers.)26
b(Once)18 b(they)221 1655 y(ar)n(e)36 b(installed,)i(pr)n(oxy)c
(objects)g(will)i(call)h(these)d(handlers)g(when)g(the)h(associated)f
(system)221 1768 y(exceptions)25 b(ar)n(e)j(raised)e(by)h(the)f(ORB)h
(r)o(untime.)41 b(Handlers)26 b(can)i(be)f(installed)g(for)g
Fh(CORBA.)221 1881 y(TRANSIENT)p Fq(,)d Fh(CORBA.COMM_FAIL)o(UR)o(E)e
Fq(and)28 b Fh(CORBA.SystemExc)o(ep)o(tio)o(n)p Fq(.)38
b(This)28 b(last)221 1994 y(handler)h(covers)f(all)j(system)c
(exceptions)g(other)h(than)h(the)f(two)g(cover)n(ed)h(by)g(the)f
(\002rst)g(two)221 2107 y(handlers.)k(An)24 b(exception)g(handler)g
(can)h(be)f(installed)h(for)f(individual)i(pr)n(oxy)d(objects,)h(or)g
(it)221 2220 y(can)g(be)e(installed)h(for)f(all)j(pr)n(oxy)c(objects)h
(in)h(the)f(addr)n(ess)f(space.)221 2479 y Fj(4.7.1)99
b(Minor)25 b(codes)221 2657 y Fq(A)33 b(new)g(featur)n(e)g(in)g
(omniORB)h(4.0)g(is)f(extensive)f(use)g(of)h(exception)f(minor)i(codes)
e(to)g(in-)221 2770 y(dicate)i(the)e(speci\002c)i(cir)n(cumstances)g
(surr)n(ounding)e(a)i(system)d(exception.)59 b(The)33
b(C++)h(\002le)221 2883 y Fh(include/omniORB)o(4/)o(min)o(or)o(Co)o(de)
o(.h)25 b Fq(contains)31 b(de\002nitions)e(of)i(all)i(the)d(minor)h
(codes)221 2996 y(used)23 b(in)h(omniORB,)g(covering)f(codes)g
(allocated)h(in)h(the)e(CORBA)g(speci\002cation,)h(and)g(ones)221
3109 y(speci\002c)k(to)f(omniORB.)h(In)f(compilers)h(with)f(namespace)h
(support,)f(the)g(minor)h(code)f(con-)221 3222 y(stants)22
b(appear)g(in)h(namespace)g Fh(omni)p Fq(;)d(otherwise)h(they)g(ar)n(e)
i(in)g(the)f(global)i(scope.)362 3335 y(Applications)33
b(can)g(use)f(minor)h(codes)e(to)h(adjust)g(their)g(behaviour)h(accor)n
(ding)g(to)f(the)221 3448 y(condition.)26 b(Y)-8 b(ou)17
b(can)i(r)n(eceive)f(a)g(string)g(format)g(of)g(a)g(minor)h(code)e(by)h
(calling)h(the)f Fh(omniORB.)221 3561 y(minorCodeToStri)o(ng)o(\(\))e
Fq(function,)23 b(passing)f(an)h(exception)e(object)h(as)h(its)f(ar)n
(gument.)221 3821 y Fj(4.7.2)99 b(CORBA::TRANSIENT)24
b(handlers)221 3999 y Fh(TRANSIENT)e Fq(exceptions)i(can)j(occur)f(in)g
(many)g(cir)n(cumstances.)38 b(One)26 b(cir)n(cumstance)h(is)f(as)221
4112 y(follows:)335 4328 y(1.)45 b(The)22 b(client)h(invokes)f(on)g(an)
i(object)e(r)n(efer)n(ence.)335 4519 y(2.)45 b(The)22
b(object)h(r)n(eplies)f(with)h(a)g Fh(LOCATION_FORWA)o(RD)16
b Fq(message.)335 4709 y(3.)45 b(The)22 b(client)h(caches)g(the)f(new)g
(location)h(and)g(r)n(etries)f(to)g(the)f(new)h(location.)335
4900 y(4.)45 b(T)-5 b(ime)23 b(passes...)335 5090 y(5.)45
b(The)31 b(client)g(tries)g(to)f(invoke)h(on)g(the)f(object)h(again,)j
(using)c(the)h(cached,)i(forwar)n(ded)448 5203 y(location.)335
5394 y(6.)45 b(The)22 b(attempt)g(to)g(contact)h(the)e(object)i(fails.)
p eop
%%Page: 33 39
33 38 bop 63 282 a Fi(4.8.)51 b(LOCA)-7 b(TION)22 b(FOR)m(W)-8
b(ARDING)1859 b Fq(33)176 539 y(7.)46 b(The)24 b(ORB)g(r)o(untime)h(r)n
(esets)d(the)i(location)h(cache)h(and)e(thr)n(ows)g(a)h
Fh(TRANSIENT)20 b Fq(excep-)290 652 y(tion)i(with)h(minor)g(code)f
Fh(TRANSIENT_Fail)o(ed)o(On)o(Fo)o(rwa)o(rd)o(ed)o Fq(.)204
887 y(In)i(this)h(situation,)f(the)g(default)h Fh(TRANSIENT)20
b Fq(exception)k(handler)g(r)n(etries)g(the)g(call,)j(us-)63
1000 y(ing)17 b(the)f(object's)h(original)h(location.)27
b(If)17 b(the)f(r)n(etry)g(r)n(esults)h(in)g(another)f
Fh(LOCATION_FORWARD)o Fq(,)63 1113 y(to)26 b(the)f(same)i(or)f(a)h(dif)
n(fer)n(ent)g(location,)h(and)f Fp(that)h Fq(forwar)n(ded)d(location)j
(fails)g(immediately)-10 b(,)63 1226 y(the)27 b Fh(TRANSIENT)e
Fq(exception)i(will)j(occur)e(again,)j(and)d(the)g(pattern)f(will)j(r)n
(epeat.)44 b(W)-5 b(ith)28 b(r)n(e-)63 1339 y(peated)16
b(exceptions,)h(the)g(handler)g(starts)g(adding)h(delays)f(befor)n(e)g
(r)n(etries,)h(with)f(exponential)63 1452 y(back-of)n(f.)204
1569 y(In)27 b(all)h(other)e(cir)n(cumstances,)i(the)f(default)g
Fh(TRANSIENT)c Fq(handler)k(just)f(passes)f(the)i(ex-)63
1682 y(ception)22 b(on)g(to)g(the)g(caller)-7 b(.)204
1800 y(Y)f(ou)23 b(can)j(override)e(the)g(default)g(behaviour)h(by)g
(installing)h(your)d(own)h(exception)g(han-)63 1912 y(dler)-7
b(.)27 b(The)22 b(function)h(to)f(call)i(has)f(signatur)n(e:)204
2071 y Ff(omniORB)n(.installTransientExceptionHandler)-6
b(\(cookie)o(,)50 b(function)e([,)h(object)o(]\))204
2248 y Fq(The)27 b(ar)n(guments)h(ar)n(e)g(a)h(cookie,)g(which)f(is)h
(any)f(Python)f(object,)i(a)g(call-back)i(function,)63
2361 y(and)25 b(optionally)g(an)h(object)f(r)n(efer)n(ence.)34
b(If)26 b(the)e(object)h(r)n(efer)n(ence)f(is)i(pr)n(esent,)d(the)i
(exception)63 2473 y(handler)32 b(is)h(installed)g(for)g(just)f(that)g
(object;)37 b(otherwise)31 b(the)h(handler)h(is)g(installed)f(for)h
(all)63 2586 y(objects)22 b(with)g(no)g(handler)h(of)g(their)f(own.)204
2704 y(The)g(call-back)j(function)e(must)f(have)h(the)f(signatur)n(e)
204 2863 y Ff(function)n(\(cookie)o(,)50 b(retries)n(,)g(exc)o(\))g(->)
f(boolean)204 3039 y Fq(When)19 b(a)h Fh(TRANSIENT)c
Fq(exception)i(occurs,)i(the)f(function)h(is)g(called,)g(passing)f(the)
g(cookie)63 3152 y(object,)24 b(a)h(count)g(of)f(how)g(many)h(times)f
(the)g(operation)g(has)g(been)g(r)n(etried,)g(and)h(the)e(TRAN-)63
3265 y(SIENT)g(exception)h(object)h(itself.)35 b(If)25
b(the)f(function)i(r)n(eturns)e(tr)o(ue,)g(the)h(operation)f(is)h(r)n
(etried;)63 3378 y(if)e(it)g(r)n(eturns)e(false,)i(the)f(TRANSIENT)d
(exception)j(is)h(raised)f(in)h(the)f(application.)63
3661 y Fj(4.7.3)99 b(CORBA.COMM_F)-5 b(AILURE)21 b(and)k
(CORBA.SystemException)63 3847 y Fq(Ther)n(e)g(ar)n(e)h(two)f(other)f
(functions)i(for)g(r)n(egistering)e(exception)h(handlers:)33
b(one)25 b(for)h Fh(CORBA.)63 3960 y(COMM_FAILURE)p Fq(,)16
b(and)22 b(one)f(for)g(all)j(other)c(exceptions.)26 b(For)21
b(both)g(these)f(cases,)i(the)f(default)63 4073 y(is)h(for)h(ther)n(e)f
(to)g(be)g(no)g(handler)-7 b(,)23 b(so)f(exceptions)f(ar)n(e)i(pr)n
(opagated)e(to)h(the)g(application.)204 4232 y Ff(omniORB)n
(.installCommFailureExceptionHandler)-6 b(\(cookie)o(,)49
b(function)g([,)g(object)o(]\))204 4331 y(omniORB)n
(.installSystemExceptionHandler)-5 b(\(cookie)o(,)49
b(function)g([,)g(object)o(]\))63 4508 y Fq(In)35 b(both)h(cases,)j
(the)c(call-back)k(function)d(has)g(the)f(same)h(signatur)n(e)f(as)i
(for)f Fh(TRANSIENT)63 4621 y Fq(handlers.)63 4948 y
Fo(4.8)119 b(Location)30 b(forwarding)63 5168 y Fq(Any)d(CORBA)h
(operation)e(invocation)j(can)g(r)n(eturn)e(a)h Fh(LOCATION_FORWAR)o(D)
22 b Fq(message)k(to)63 5281 y(the)38 b(caller)-7 b(,)45
b(indicating)39 b(that)g(it)h(should)e(r)n(etry)g(the)g(invocation)i
(on)f(a)h(new)e(object)h(r)n(efer)n(-)63 5394 y(ence.)44
b(The)28 b(standar)n(d)g(allows)h(ServantManagers)e(to)h(trigger)f
Fh(LOCATION_FORWA)o(RD)p Fq(s)22 b(by)p eop
%%Page: 34 40
34 39 bop 221 282 a Fq(34)936 b Fi(CHAPTER)22 b(4.)51
b(OMNIORB)22 b(CONFIGURA)-7 b(TION)21 b(AND)i(API)221
539 y Fq(raising)k(the)f Fh(PortableServer.)o(Fo)o(rw)o(ard)o(Re)o(qu)o
(es)o(t)21 b Fq(exception,)26 b(but)g(it)h(does)e(not)h(pr)n(o-)221
652 y(vide)e(a)g(similar)i(mechanism)f(for)e(normal)i(servants.)31
b(omniORB)24 b(pr)n(ovides)f(the)g Fh(omniORB.)221 764
y(LOCATION_FORWAR)o(D)e Fq(exception)26 b(for)h(this)g(purpose.)39
b(It)26 b(can)i(be)f(thr)n(own)f(by)h(any)g(opera-)221
877 y(tion)c(implementation.)221 1174 y Fo(4.9)119 b(Dynamic)30
b(importing)g(of)g(IDL)221 1385 y Fq(omniORBpy)24 b(is)h(usually)h
(used)d(with)i(pr)n(e-generated)d(stubs.)34 b(Since)25
b(Python)f(is)h(a)g(dynamic)221 1498 y(language,)d(however)-7
b(,)22 b(it)h(is)f(possible)g(to)g(compile)h(and)g(import)f(new)g
(stubs)g(at)g(r)o(un-time.)362 1611 y(Dynamic)g(importing)d(is)h
(achieved)g(with)g Fh(omniORB.import)o(ID)o(L\()o(\))14
b Fq(and)20 b Fh(omniORB.)221 1724 y(importIDLString)o(\(\))o
Fq(.)i(Their)h(signatur)n(es)e(ar)n(e:)362 1869 y Ff(importIDL)o(\()o
(filename)49 b([,)g(args)g(]\))h(->)f(tuple)362 1969
y(importIDLString)m(\(string)g([,)g(args)h(]\))f(->)g(tuple)362
2128 y Fq(The)37 b(\002rst)g(function)h(compiles)g(and)g(imports)f(the)
g(speci\002ed)g(\002le;)45 b(the)37 b(second)f(takes)221
2241 y(a)e(string)e(containing)h(the)g(IDL)g(de\002nitions.)57
b(The)33 b(functions)g(work)f(by)h(forking)f(omniidl)221
2354 y(and)g(importing)g(its)g(output;)j(they)30 b(both)i(take)f(an)i
(optional)f(ar)n(gument)g(containing)g(a)h(list)221 2467
y(of)d(strings)f(which)i(ar)n(e)g(used)e(as)h(ar)n(guments)g(for)g
(omniidl.)52 b(For)29 b(example,)j(the)e(following)221
2580 y(command)23 b(r)o(uns)g(omniidl)g(with)g(an)g(include)f(path)h
(set:)362 2725 y Ff(m)50 b(=)g(omniORB)n(.importIDL)n(\("test)o(.idl")o
(,)g(["-)o(I/my/)o(include)o(/path)o("]\))221 2884 y
Fq(Instead)33 b(of)i(specifying)f(omniidl)h(ar)n(guments)f(on)g(each)h
(import,)i(you)d(can)h(set)f(the)g(ar)n(gu-)221 2997
y(ments)c(to)g(be)h(used)f(for)h(all)h(calls)h(using)d(the)g
Fh(omniORB.omniidl)o(Ar)o(gu)o(men)o(ts)o(\(\))24 b Fq(func-)221
3110 y(tion.)362 3223 y(Both)e(import)h(functions)f(r)n(eturn)g(a)i
(tuple)e(containing)h(the)f(names)h(of)g(the)f(Python)f(mod-)221
3336 y(ules)28 b(that)h(have)g(been)f(imported.)44 b(The)28
b(modules)g(themselves)f(can)i(be)g(accessed)e(thr)n(ough)221
3449 y Fh(sys.modules)p Fq(.)c(For)f(example:)362 3595
y Fg(//)50 b(test)o(.idl)362 3694 y Ff(const)f(string)g(s)g(=)h("Hello)
o(";)362 3794 y(module)f(M1)g({)462 3894 y(module)g(M2)g({)562
3993 y(const)f(long)h(l)h(=)g(42;)462 4093 y(};)362 4192
y(};)362 4292 y(module)f(M3)g({)462 4392 y(const)g(short)g(s)g(=)h(5;)
362 4491 y(};)221 4650 y Fq(Fr)n(om)23 b(Python:)362
4796 y Ff(>>>)50 b(import)e(sys,)h(omniORB)362 4896 y(>>>)h(omniORB)n
(.importIDL)n(\("test)o(.idl")o(\))362 4995 y(\('M1')o(,)g('M1)o(.M2',)
f('M3',)g('_GlobalIDL)n('\))362 5095 y(>>>)h(sys)o(.modules)n(["M1.M2)o
("].l)362 5194 y(42)362 5294 y(>>>)g(sys)o(.modules)n(["M3"].)o(s)362
5394 y(5)p eop
%%Page: 35 41
35 40 bop 63 282 a Fi(4.10.)51 b(C++)24 b(API)2611 b
Fq(35)204 539 y Ff(>>>)49 b(sys)o(.modules)o(["_GlobalIDL)n("].)o(s)204
638 y('Hello)o(')204 801 y Fq(Note)19 b(that)h(each)h(time)g
Fh(importIDL\(\))16 b Fq(or)k Fh(importIDLString\()o(\))14
b Fq(is)21 b(called,)h(the)e(IDL)63 914 y(de\002nitions)35
b(ar)n(e)h(compiled)h(and)f(imported)f(into)h(the)f(associated)h
(Python)f(declarations.)63 1027 y(The)j(new)g(declarations)g(overwrite)
g(any)h(old)f(ones)f(with)i(the)f(same)h(names.)75 b(This)39
b(can)63 1140 y(cause)22 b(confusing)g(situations)g(wher)n(e)g(dif)n
(fer)n(ent)g(modules)g(see)f(dif)n(fer)n(ent)h(de\002nitions)g(of)g
(the)63 1253 y(same)d(objects.)27 b(Although)18 b(the)h(objects)g
(appear)h(identical,)h(they)e(ar)n(e)h(not,)f(and)h(comparisons)63
1365 y(within)h(applications)g(and)g(within)g(omniORBpy)g(unexpectedly)
d(fail.)29 b(Y)-8 b(ou)20 b(should)f(not)i(use)63 1478
y(these)g(functions)h(in)h(mor)n(e)f(than)h(one)f(module)g(to)g(import)
g(the)g(same)g(IDL)h(\002les.)63 1777 y Fo(4.10)118 b(C++)32
b(API)63 1988 y Fq(omniORBpy)27 b(has)i(a)g(C++)g(API)f(that)g(can)h
(be)g(used)e(by)h(pr)n(ograms)g(that)g(embed)g(Python)f(in)63
2101 y(C++,)k(or)e(by)g(C++)h(extension)d(modules)h(to)h(Python.)46
b(The)29 b(API)f(has)i(functions)e(to)h(convert)63 2214
y(object)i(r)n(efer)n(ences)f(between)g(their)h(Python)f(r)n(epr)n
(esentation)g(and)i(their)f(C++)h(r)n(epr)n(esenta-)63
2327 y(tion.)43 b(For)27 b(extensions)e(to)i(omniORBpy)g(itself,)i(it)f
(has)g(a)g(mechanism)h(for)e(adding)h(pseudo)63 2440
y(object)22 b(types)f(to)h(omniORBpy)-10 b(.)204 2553
y(The)35 b(de\002nitions)g(used)g(by)h(the)g(C++)h(API)f(ar)n(e)g(in)h
(the)e Fh(omniORBpy.h)d Fq(header)-7 b(.)68 b(An)63 2666
y(example)22 b(of)h(its)f(use)g(is)h(in)g Fh(examples/embed)o(/)p
Fq(.)204 2778 y(The)d(API)g(is)h(accessed)f(thr)n(ough)f(a)i(singleton)
f(str)o(uctur)n(e)g(containing)h(function)f(pointers.)63
2891 y(A)g(pointer)g(to)h(the)f(API)g(str)o(uct)h(is)g(stor)n(ed)e(as)i
(a)h Fh(PyCObject)17 b Fq(in)k(the)f Fh(_omnipy)e Fq(module)j(with)63
3004 y(the)g(name)i Fh(API)p Fq(.)e(It)h(can)i(be)e(accessed)g(with)h
(code)e(like:)204 3154 y Ff(PyObject)n(*)249 b(omnipy)49
b(=)h(PyImport_ImportModule)l(\(\()o(char)o(*\)"_omnipy)o(")o(\);)204
3253 y(PyObject)n(*)249 b(pyapi)99 b(=)50 b(PyObject_GetAttrString)-5
b(\(omnipy)o(,)50 b(\(char)o(*\))o("API")o(\);)204 3353
y(omniORBpyAPI)n(*)f(api)199 b(=)50 b(\()o(omniORBpyAPI)n
(*\)PyCObject_AsVoidPtr)l(\(pyapi)o(\);)204 3453 y(Py_DECREF)n(\(pyapi)
o(\);)63 3615 y Fq(The)22 b(str)o(uctur)n(e)f(has)i(this)f
(de\002nition:)204 3765 y Ff(struct)48 b(omniORBpyAPI)g({)303
3964 y(PyObject)o(*)i(\(*)o(cxxObjRefToPyObjRef)m(\)\()o(const)f(CORBA)
o(::Object_ptr)f(cxx_obj)n(,)1947 4064 y(CORBA)o(::Boolean)g(hold_lock)
o(\);)303 4163 y Fg(//)i(Convert)e(a)i(C++)f(object)g(reference)f(to)i
(a)f(Python)g(object)g(reference)n(.)303 4263 y(//)h(If)f(<hold_lock)n
(>)h(is)g(true)o(,)f(caller)g(holds)g(the)g(Python)g(interpreter)f
(lock)o(.)303 4462 y Ff(CORBA)o(::Object_ptr)g(\(*pyObjRefToCxxObjRef)l
(\)\(PyObject)n(*)i(py_obj)o(,)2346 4562 y(CORBA)o(::)o(Boolean)f
(hold_lock)n(\);)303 4661 y Fg(//)h(Convert)e(a)i(Python)f(object)f
(reference)h(to)g(a)h(C)o(++)g(object)f(reference)n(.)303
4761 y(//)h(Raises)f(BAD_PARAM)f(if)h(the)g(Python)g(object)g(is)g(not)
g(an)h(object)f(reference)n(.)303 4861 y(//)h(If)f(<hold_lock)n(>)h(is)
g(true)o(,)f(caller)g(holds)g(the)g(Python)g(interpreter)f(lock)o(.)p
eop
%%Page: 36 42
36 41 bop 221 282 a Fq(36)936 b Fi(CHAPTER)22 b(4.)51
b(OMNIORB)22 b(CONFIGURA)-7 b(TION)21 b(AND)i(API)p eop
%%Page: 37 43
37 42 bop 63 1164 a Fk(Chapter)44 b(5)63 1581 y Fm(The)52
b(IDL)g(compiler)63 2042 y Fq(omniORBpy's)32 b(IDL)h(compiler)g(is)h
(called)g(omniidl.)60 b(It)33 b(consists)f(of)h(a)h(generic)e(fr)n
(ont-end)63 2155 y(parser)27 b(written)h(in)h(C++,)h(and)f(a)g(number)f
(of)h(back-ends)f(written)f(in)i(Python.)44 b(omniidl)29
b(is)63 2268 y(very)c(strict)h(about)f(IDL)h(validity)-10
b(,)27 b(so)f(you)f(may)h(\002nd)f(that)h(it)g(r)n(eports)e(err)n(ors)h
(in)h(IDL)g(which)63 2381 y(compiles)c(\002ne)g(with)h(other)e(IDL)i
(compilers.)204 2496 y(The)f(general)g(form)h(of)f(an)h(omniidl)h
(command)f(line)g(is:)290 2720 y Fh(omniidl)51 b Fq([)p
Fp(options)p Fq(])57 b Fh(-b)p Fq(<)p Fp(back-end)p Fq(>)e([)p
Fp(back-end)19 b(options)p Fq(])57 b(<)p Fp(\002le)18
b(1)p Fq(>)55 b(<)p Fp(\002le)18 b(2)p Fq(>)55 b(.)14
b(.)g(.)63 3033 y Fo(5.1)119 b(Common)31 b(options)63
3248 y Fq(The)22 b(following)g(options)g(ar)n(e)h(common)f(to)g(all)j
(back-ends:)63 3474 y Fh(-b)p Fp(back-end)256 b Fq(Run)22
b(the)g(speci\002ed)f(back-end.)28 b(For)22 b(omniORBpy)-10
b(,)22 b(use)f Fh(-bpython)p Fq(.)63 3587 y Fh(-D)p Fp(name)p
Fq([)p Fh(=)p Fp(value)p Fq(])68 b(De\002ne)22 b Fp(name)h
Fq(for)f(the)g(pr)n(epr)n(ocessor)-7 b(.)63 3700 y Fh(-U)p
Fp(name)379 b Fq(Unde\002ne)21 b Fp(name)i Fq(for)f(the)g(pr)n(epr)n
(ocessor)-7 b(.)63 3813 y Fh(-I)p Fp(dir)471 b Fq(Include)22
b Fp(dir)i Fq(in)f(the)f(pr)n(epr)n(ocessor)e(sear)n(ch)j(path.)63
3926 y Fh(-E)576 b Fq(Only)23 b(r)o(un)g(the)f(pr)n(epr)n(ocessor)-7
b(,)20 b(sending)h(its)h(output)f(to)h(stdout.)63 4039
y Fh(-Y)p Fp(cmd)423 b Fq(Use)22 b Fp(cmd)g Fq(as)h(the)f(pr)n(epr)n
(ocessor)-7 b(,)20 b(rather)i(than)h(the)f(normal)h(C)g(pr)n(epr)n
(ocessor)-7 b(.)63 4152 y Fh(-N)576 b Fq(Do)23 b(not)f(r)o(un)g(the)g
(pr)n(epr)n(ocessor)-7 b(.)63 4265 y Fh(-T)576 b Fq(Use)22
b(a)h(temporary)e(\002le,)h(not)g(a)i(pipe,)d(for)i(pr)n(epr)n(ocessor)
d(output.)63 4378 y Fh(-Wp)p Fp(ar)n(g)p Fq([,)p Fp(ar)n(g)p
Fq(.)14 b(.)g(.)g(])91 b(Send)21 b(ar)n(guments)h(to)g(the)g(pr)n(epr)n
(ocessor)-7 b(.)63 4490 y Fh(-Wb)p Fp(ar)n(g)p Fq([,)p
Fp(ar)n(g)p Fq(.)14 b(.)g(.)g(])91 b(Send)21 b(ar)n(guments)h(to)g(the)
g(back-end.)63 4603 y Fh(-nf)521 b Fq(Do)23 b(not)f(warn)g(about)h(unr)
n(esolved)e(forwar)n(d)i(declarations.)63 4716 y Fh(-k)576
b Fq(Keep)21 b(comments)h(after)h(declarations,)f(to)g(be)h(used)e(by)i
(some)e(back-ends.)63 4829 y Fh(-K)576 b Fq(Keep)21 b(comments)h(befor)
n(e)h(declarations,)f(to)g(be)h(used)e(by)h(some)g(back-ends.)63
4942 y Fh(-C)p Fp(dir)471 b Fq(Change)23 b(dir)n(ectory)e(to)h
Fp(dir)i Fq(befor)n(e)e(writing)h(output)e(\002les.)63
5055 y Fh(-d)576 b Fq(Dump)23 b(the)f(parsed)f(IDL)h(then)g(exit,)g
(without)g(r)o(unning)g(a)h(back-end.)63 5168 y Fh(-p)p
Fp(dir)471 b Fq(Use)22 b Fp(dir)h Fq(as)g(a)g(path)g(to)f(\002nd)g
(omniidl)h(back-ends.)63 5281 y Fh(-V)576 b Fq(Print)23
b(version)f(information)h(then)f(exit.)63 5394 y Fh(-u)576
b Fq(Print)23 b(usage)e(information.)1662 5622 y(37)p
eop
%%Page: 38 44
38 43 bop 221 282 a Fq(38)1751 b Fi(CHAPTER)22 b(5.)51
b(THE)21 b(IDL)i(COMPILER)221 539 y Fh(-v)577 b Fq(V)-10
b(erbose:)25 b(trace)e(compilation)h(stages.)221 874
y(Most)e(of)g(these)f(options)g(ar)n(e)i(self)g(explanatory)-10
b(,)21 b(but)i(some)f(ar)n(e)h(not)e(so)h(obvious.)221
1140 y Fj(5.1.1)99 b(Preprocessor)25 b(interactions)221
1321 y Fq(IDL)18 b(is)h(pr)n(ocessed)d(by)j(the)f(C)h(pr)n(epr)n
(ocessor)d(befor)n(e)i(omniidl)i(parses)d(it.)27 b(Unlike)18
b(the)g(old)g(IDL)221 1434 y(compiler)-7 b(,)40 b(which)c(used)f(dif)n
(fer)n(ent)g(C)i(pr)n(epr)n(ocessors)c(on)j(dif)n(fer)n(ent)f
(platforms,)k(omniidl)221 1547 y(always)32 b(uses)d(the)i(GNU)g(C)g(pr)
n(epr)n(ocessor)e(\(which)j(it)g(builds)f(with)g(the)g(name)g
(omnicpp\).)221 1660 y(The)23 b Fh(-D)p Fq(,)g Fh(-U)p
Fq(,)f(and)i Fh(-I)f Fq(options)f(ar)n(e)i(just)f(sent)f(to)h(the)g(pr)
n(epr)n(ocessor)-7 b(.)29 b(Note)22 b(that)i(the)e(curr)n(ent)221
1773 y(dir)n(ectory)j(is)h(not)f(on)g(the)g(include)h(sear)n(ch)g(path)
f(by)h(default\227use)e(`)p Fh(-I.)p Fq(')h(for)h(that.)37
b(The)25 b Fh(-Y)221 1886 y Fq(option)19 b(can)h(be)g(used)e(to)h
(specify)g(a)h(dif)n(fer)n(ent)f(pr)n(epr)n(ocessor)f(to)h(omnicpp.)26
b(Bewar)n(e)19 b(that)h(line)221 1998 y(dir)n(ectives)j(inserted)d(by)j
(other)e(pr)n(epr)n(ocessors)f(ar)n(e)j(likely)g(to)f(confuse)g
(omniidl.)221 2262 y Fl(5.1.1.1)92 b(W)m(indows)21 b(9x)221
2443 y Fq(The)h(output)f(fr)n(om)j(the)d(C)j(pr)n(epr)n(ocessor)c(is)j
(normally)h(fed)e(to)g(the)g(omniidl)h(parser)f(thr)n(ough)221
2555 y(a)j(pipe.)32 b(On)25 b(some)e(W)-5 b(indows)24
b(98)h(machines)g(\(but)f(not)g(all!\))35 b(the)24 b(pipe)f(does)g(not)
h(work,)f(and)221 2668 y(the)k(pr)n(epr)n(ocessor)d(output)i(is)h
(echoed)f(to)h(the)f(scr)n(een.)41 b(When)26 b(this)h(happens,)g(the)f
(omniidl)221 2781 y(parser)20 b(sees)g(an)h(empty)f(\002le,)h(and)g(pr)
n(oduces)f(useless)f(stub)h(\002les)h(with)g(strange)f(long)g(names.)
221 2894 y(T)-8 b(o)28 b(avoid)i(the)f(pr)n(oblem,)i(use)d(the)g(`)p
Fh(-T)p Fq(')h(option)f(to)h(cr)n(eate)g(a)h(temporary)e(\002le)h
(between)f(the)221 3007 y(two)22 b(stages.)221 3274 y
Fj(5.1.2)99 b(Forward-declared)24 b(interfaces)221 3454
y Fq(If)f(you)f(have)h(an)g(IDL)f(\002le)h(like:)362
3608 y Ff(interface)48 b(I;)362 3707 y(interface)g(J)i({)462
3807 y(attribute)e(I)i(the_I)o(;)362 3907 y(};)221 4075
y Fq(then)22 b(omniidl)h(will)h(normally)g(issue)d(a)i(warning:)321
4286 y Ff(test.idl:1:)48 b(Warning:)g(Forward)g(declared)h(interface)f
(`::I')h(was)g(never)321 4385 y(fully)g(defined)221 4608
y Fq(It)24 b(is)h(illegal)h(to)e(declar)n(e)h(such)f(IDL)g(in)h
(isolation,)h(but)e(it)h Fp(is)g Fq(valid)h(to)e(de\002ne)f(interface)i
Fh(I)f Fq(in)h(a)221 4721 y(separate)i(\002le.)44 b(If)29
b(you)e(have)h(a)h(lot)f(of)g(IDL)g(with)g(this)g(sort)f(of)h(constr)o
(uct,)g(you)f(will)j(dr)n(own)221 4833 y(under)22 b(the)f(warning)i
(messages.)j(Use)c(the)f Fh(-nf)h Fq(option)f(to)h(suppr)n(ess)f(them.)
221 5100 y Fj(5.1.3)99 b(Comments)221 5281 y Fq(By)17
b(default,)i(omniidl)g(discar)n(ds)f(comments)f(in)i(the)e(input)h
(IDL.)f(However)-7 b(,)18 b(with)g(the)f Fh(-k)g Fq(and)221
5394 y Fh(-K)i Fq(options,)g(it)h(pr)n(eserves)e(the)h(comments)h(for)g
(use)f(by)g(the)h(back-ends.)26 b(The)19 b(C++)i(back-end)p
eop
%%Page: 39 45
39 44 bop 63 282 a Fi(5.2.)51 b(PYTHON)22 b(BACK-END)g(OPTIONS)1675
b Fq(39)63 539 y(ignor)n(es)24 b(this)g(information,)i(but)f(it)g(is)g
(r)n(elatively)h(easy)e(to)h(write)f(new)h(back-ends)f(which)i
Fp(do)63 652 y Fq(make)c(use)g(of)g(comments.)204 765
y(The)h(two)g(dif)n(fer)n(ent)h(options)e(r)n(elate)i(to)f(how)g
(comments)h(ar)n(e)g(attached)f(to)h(declarations)63
878 y(within)f(the)e(IDL.)h(Given)i(IDL)e(like:)204 1029
y Ff(interface)48 b(I)i({)303 1129 y(void)f(op1\(\);)303
1229 y Fg(//)h(A)f(comment)303 1328 y Ff(void)g(op2\(\);)204
1428 y(};)63 1593 y Fq(the)21 b Fh(-k)h Fq(\003ag)h(will)h(attach)f
(the)f(comment)h(to)f Fh(op1\(\))p Fq(;)e(the)i Fh(-K)f
Fq(\003ag)i(will)h(attach)f(it)g(to)f Fh(op2\(\))p Fq(.)63
1897 y Fo(5.2)119 b(Python)30 b(back-end)g(options)63
2110 y Fq(When)d(you)f(specify)i(the)e(Python)h(back-end)g(\(with)h
Fh(-bpython)p Fq(\),)e(the)h(following)g Fh(-Wb)g Fq(op-)63
2223 y(tions)18 b(ar)n(e)h(available.)29 b(Note)18 b(that)g(the)g
Fh(-Wb)g Fq(options)f(must)h(be)h(speci\002ed)f Fp(after)i
Fq(the)e Fh(-bpython)63 2336 y Fq(option,)j(so)h(omniidl)h(knows)f
(which)h(back-end)f(to)g(give)h(the)f(ar)n(guments)g(to.)63
2553 y Fh(-Wbstdout)218 b Fq(Send)22 b(the)g(generated)e(stubs)h(to)h
(standar)n(d)h(output,)d(rather)i(than)h(to)f(a)h(\002le.)63
2666 y Fh(-Wbinline)218 b Fq(Output)22 b(stubs)g(for)g(#included)h
(\002les)f(in)h(line)g(with)g(the)f(main)i(\002le.)63
2779 y Fh(-Wbglobal=)p Fp(g)118 b Fq(Use)22 b Fp(g)h
Fq(as)g(the)f(name)g(for)h(the)f(global)h(IDL)g(scope)e(\(default)i
Fh(_GlobalIDL)p Fq(\).)63 2892 y Fh(-Wbpackage=)p Fp(p)63
b Fq(Put)22 b(both)h(Python)e(modules)g(and)i(stub)f(\002les)g(in)h
(package)g Fp(p)p Fq(.)63 3005 y Fh(-Wbmodules=)p Fp(p)63
b Fq(Put)22 b(Python)g(modules)f(in)i(package)g Fp(p)p
Fq(.)63 3118 y Fh(-Wbstubs=)p Fp(p)173 b Fq(Put)22 b(stub)g(\002les)h
(in)g(package)f Fp(p)p Fq(.)204 3447 y(The)27 b Fh(-Wbstdout)d
Fq(option)j(is)h(not)f(r)n(eally)i(useful)e(if)i(you)e(ar)n(e)h
(invoking)g(omniidl)h(your)n(-)63 3560 y(self.)e(It)22
b(is)h(used)e(by)i Fh(omniORB.import)o(IDL)o(\(\))o Fq(,)17
b(described)k(in)i(section)f(4.9.)204 3674 y(When)30
b(you)h(compile)h(an)f(IDL)g(\002le)h(which)g(#includes)f(other)f(IDL)h
(\002les,)i(omniidl)f(nor)n(-)63 3787 y(mally)e(only)f(generates)e
(code)h(for)h(the)f(main)i(\002le,)h(assuming)e(that)f(code)h(for)g
(the)f(included)63 3900 y(\002les)e(will)j(be)d(generated)f(separately)
-10 b(.)40 b(Instead,)26 b(you)g(can)i(use)e(the)g Fh(-Wbinline)d
Fq(option)j(to)63 4013 y(generate)20 b(code)i(for)h(the)f(main)h(IDL)g
(\002le)f Fp(and)i Fq(all)g(included)e(\002les)g(in)h(a)h(single)e
(stub)g(\002le.)204 4127 y(De\002nitions)f(declar)n(ed)h(at)g(IDL)f
(global)i(scope)d(ar)n(e)i(normally)h(placed)f(in)g(a)g(Python)f(mod-)
63 4240 y(ule)h(named)h(`)p Fh(_GlobalIDL)p Fq('.)18
b(The)k Fh(-Wbglobal)d Fq(allows)k(you)e(to)h(change)h(that.)204
4353 y(As)f(explained)g(in)h(section)f(2.2,)h(when)f(you)g(compile)h
(an)g(IDL)f(\002le)h(like:)204 4504 y Fg(//)49 b(example_echo)n(.idl)
204 4604 y Ff(module)f(Example)h({)303 4704 y(interface)g(Echo)g({)403
4803 y(string)g(echoString)n(\(in)g(string)g(mesg)o(\);)303
4903 y(};)204 5003 y(};)63 5168 y Fq(omniidl)32 b(generates)d(dir)n
(ectories)i(named)g Fh(Example)e Fq(and)i Fh(Example__POA)p
Fq(,)e(which)j(pr)n(o-)63 5281 y(vide)g(the)g(standar)n(d)f(Python)g
(mapping)i(modules,)g(and)g(also)f(the)g(\002le)g Fh(example_echo_)63
5394 y(idl.py)23 b Fq(which)j(contains)f(the)g(actual)i(de\002nitions.)
36 b(The)25 b(latter)g(\002le)h(contains)f(code)g(which)p
eop
%%Page: 40 46
40 45 bop 221 282 a Fq(40)1751 b Fi(CHAPTER)22 b(5.)51
b(THE)21 b(IDL)i(COMPILER)221 539 y Fq(inserts)g(the)h(de\002nitions)f
(in)i(the)e(standar)n(d)h(modules.)32 b(This)24 b(arrangement)g(means)g
(that)g(it)h(is)221 652 y(not)30 b(possible)f(to)h(move)h(all)h(of)e
(the)g(generated)e(code)h(into)i(a)g(Python)e(package)h(by)g(simply)221
764 y(placing)f(the)e(\002les)g(in)h(a)g(suitably)g(named)g(dir)n
(ectory)-10 b(.)42 b(Y)-8 b(ou)26 b(may)i(wish)g(to)f(do)g(this)g(to)g
(avoid)221 877 y(clashes)c(with)f(names)h(in)g(use)e(elsewher)n(e)g(in)
i(your)f(softwar)n(e.)362 990 y(Y)-8 b(ou)33 b(can)h(place)g(all)h
(generated)c(code)i(in)h(a)g(package)f(using)g(the)f
Fh(-Wbpackage)d Fq(com-)221 1103 y(mand)23 b(line)g(option.)k(For)22
b(example,)448 1316 y Fh(omniidl)52 b(-bpython)f(-Wbpackage=gen)o(er)o
(ate)o(d)d(echo_example.id)o(l)221 1528 y Fq(cr)n(eates)25
b(a)h(dir)n(ectory)f(named)g(`)p Fh(generated)p Fq(',)e(containing)j
(the)f(generated)e(code.)36 b(The)25 b(stub)221 1641
y(module)f(is)h(now)f(called)h(`)p Fh(generated.Exampl)o(e)p
Fq(',)19 b(and)25 b(the)f(actual)h(stub)f(de\002nitions)g(ar)n(e)221
1754 y(in)29 b(`)p Fh(generated.examp)o(le)o(_e)o(ch)o(o_i)o(dl)o
Fq('.)39 b(If)28 b(you)f(wish)h(to)g(split)f(the)h(modules)f(and)h(the)
221 1867 y(stub)21 b(de\002nitions)g(into)h(dif)n(fer)n(ent)g(Python)e
(packages,)h(you)h(can)g(use)f(the)h Fh(-Wbmodules)17
b Fq(and)221 1980 y Fh(-Wbstubs)i Fq(options.)362 2093
y(Note)j(that)h(if)h(you)f(use)f(these)g(options)f(to)i(change)g(the)g
(module)f(package,)h(the)g(interface)221 2206 y(to)e(the)g(generated)f
(code)h(is)h(not)f(strictly-speaking)f(CORBA)i(compliant.)29
b(Y)-8 b(ou)20 b(may)i(have)h(to)221 2319 y(change)g(your)e(code)h(if)i
(you)d(ever)h(use)g(a)h(Python)e(ORB)i(other)e(than)i(omniORBpy)-10
b(.)221 2617 y Fo(5.3)119 b(Examples)221 2828 y Fq(Generate)22
b(the)g(Python)f(stubs)g(for)i(a)g(\002le)g Fh(a.idl)p
Fq(:)448 3041 y Fh(omniidl)52 b(-bpython)f(a.idl)221
3253 y Fq(As)22 b(above,)h(but)f(put)g(the)g(stubs)f(in)j(a)f(package)f
(called)i(`)p Fh(stubs)p Fq(':)448 3466 y Fh(omniidl)52
b(-bpython)f(-Wbstubs=stubs)d(a.idl)221 3678 y Fq(Generate)22
b(both)g(Python)f(and)i(C++)g(stubs)f(for)g(two)g(IDL)g(\002les:)448
3891 y Fh(omniidl)52 b(-bpython)f(-bcxx)h(a.idl)g(b.idl)221
4103 y Fq(Just)22 b(check)h(the)e(IDL)i(\002les)f(for)h(validity)-10
b(,)23 b(generating)e(no)h(output:)448 4316 y Fh(omniidl)52
b(a.idl)g(b.idl)p eop
%%Page: 41 47
41 46 bop 63 1166 a Fk(Chapter)44 b(6)63 1587 y Fm(Interoperable)53
b(Naming)f(Service)63 2051 y Fq(omniORB)27 b(3)h(supports)d(the)i
(Inter)n(operable)f(Naming)i(Service)f(\(INS\),)g(which)h(will)g(be)g
(part)63 2164 y(of)f(CORBA)h(2.4.)44 b(The)27 b(following)h(is)g(a)g
(summary)g(of)g(the)f(new)g(facilities)j(described)c(in)i(the)63
2276 y(INS)h(edited)f(chapters)h(document)g([OMG00)r(].)51
b(These)28 b(facilities)k(ar)n(e)f(not)e(available)k(when)63
2389 y(using)22 b(omniORBpy)g(with)g(omniORB)h(2.8.)63
2719 y Fo(6.1)119 b(Object)29 b(URIs)63 2940 y Fq(As)22
b(well)i(as)f(accepting)g(IOR-format)h(strings,)e Fh(ORB::string_to)o
(_ob)o(je)o(ct)o(\(\))17 b Fq(now)22 b(also)63 3053 y(supports)29
b(two)h(new)h(Uniform)h(Resour)n(ce)e(Identi\002er)g(\(URI\))h
([BLFIM98])h(formats,)h(which)63 3166 y(can)25 b(be)g(used)f(to)g
(specify)h(objects)f(in)i(a)f(convenient)g(human-r)n(eadable)h(form.)35
b(The)24 b(existing)63 3279 y(IOR-format)f(strings)e(ar)n(e)i(now)f
(also)h(consider)n(ed)e(URIs.)63 3565 y Fj(6.1.1)99 b(corbaloc)63
3752 y Fh(corbaloc)21 b Fq(URIs)j(allow)i(you)e(to)g(specify)h(object)f
(r)n(efer)n(ences)g(which)i(can)g(be)e(contacted)h(by)63
3865 y(IIOP)-12 b(,)33 b(or)h(found)f(thr)n(ough)g Fh(ORB::resolve_in)o
(it)o(ia)o(l_)o(ref)o(er)o(en)o(ce)o(s\()o(\))p Fq(.)56
b(T)-8 b(o)33 b(specify)63 3978 y(an)23 b(IIOP)f(object)h(r)n(efer)n
(ence,)e(you)h(use)g(a)h(URI)f(of)g(the)g(form:)290 4216
y Fh(corbaloc:iiop:)p Fq(<)p Fp(host)p Fq(>)p Fh(:)p
Fq(<)p Fp(port)p Fq(>)p Fh(/)p Fq(<)p Fp(object)e(key)p
Fq(>)63 4454 y(for)i(example:)290 4692 y Fh(corbaloc:iiop:m)o(yh)o(os)o
(t.)o(ex)o(amp)o(le)o(.c)o(om)o(:1)o(234)o(/M)o(yO)o(bj)o(ec)o(tKe)o(y)
63 4930 y Fq(which)36 b(speci\002es)f(an)h(object)g(with)g(key)e
(`MyObjectKey')i(within)g(a)h(pr)n(ocess)d(r)o(unning)i(on)63
5043 y(myhost.example.com)d(listening)h(on)h(port)e(1234.)67
b(Object)35 b(keys)e(containing)j(non-ASCII)63 5156 y(characters)22
b(can)i(use)e(the)f(standar)n(d)h(URI)g(\045)h(escapes:)290
5394 y Fh(corbaloc:iiop:m)o(yh)o(os)o(t.)o(ex)o(amp)o(le)o(.c)o(om)o
(:1)o(234)o(/M)o(y\045)o(ef)o(Ob)o(jec)o(tK)o(ey)1662
5622 y Fq(41)p eop
%%Page: 42 48
42 47 bop 221 282 a Fq(42)1033 b Fi(CHAPTER)21 b(6.)51
b(INTEROPERABLE)19 b(NAMING)j(SER)-5 b(VICE)221 539 y
Fq(denotes)20 b(an)j(object)g(key)e(with)i(the)e(value)j(239)g(\(hex)e
(ef\))h(in)g(the)f(thir)n(d)h(octet.)362 652 y(The)g(pr)n(otocol)g
(name)h(`)p Fh(iiop)p Fq(')e(can)j(be)e(abbr)n(eviated)i(to)d(the)h
(empty)f(string,)h(so)g(the)g(origi-)221 764 y(nal)h(URI)e(can)h(be)g
(written:)448 962 y Fh(corbaloc::myhost)o(.e)o(xa)o(mp)o(le.)o(co)o(m:)
o(12)o(34)o(/My)o(Ob)o(je)o(ct)o(Ke)o(y)221 1160 y Fq(The)c(IANA)f(has)
i(assigned)e(port)h(number)g(2809)1895 1127 y Fd(1)1954
1160 y Fq(for)h(use)e(by)i Fh(corbaloc)p Fq(,)c(so)j(if)i(the)d(server)
h(is)221 1273 y(listening)j(on)g(that)g(port,)f(you)g(can)i(leave)g
(the)e(port)g(number)h(out.)27 b(The)21 b(following)i(two)e(URIs)221
1386 y(r)n(efer)h(to)g(the)g(same)h(object:)448 1584
y Fh(corbaloc::myhost)o(.e)o(xa)o(mp)o(le.)o(co)o(m:)o(28)o(09)o(/My)o
(Ob)o(je)o(ct)o(Ke)o(y)448 1697 y(corbaloc::myhost)o(.e)o(xa)o(mp)o
(le.)o(co)o(m/)o(My)o(Ob)o(jec)o(tK)o(ey)221 1895 y Fq(Y)-8
b(ou)17 b(can)h(specify)f(an)h(object)f(which)h(is)g(available)j(at)c
(mor)n(e)h(than)f(one)g(location)h(by)g(separating)221
2008 y(the)k(locations)h(with)f(commas:)448 2206 y Fh(corbaloc::myhost)
o(.e)o(xa)o(mp)o(le.)o(co)o(m,)s(:l)o(oca)o(lh)o(os)o(t:)o(12)o(34/)o
(My)o(Ob)o(je)o(ct)o(Key)221 2404 y Fq(Note)37 b(that)h(you)f(must)g(r)
n(estate)g(the)h(pr)n(otocol)f(for)h(each)h(addr)n(ess,)h(hence)e(the)f
(`)p Fh(:)p Fq(')h(befor)n(e)221 2517 y(`)p Fh(localhost)p
Fq('.)25 b(It)d(could)g(equally)h(have)g(been)f(written)g(`)p
Fh(iiop:localhost)o Fq('.)362 2629 y(Y)-8 b(ou)17 b(can)h(also)g
(specify)f(an)g(IIOP)h(version)f(number)-7 b(,)18 b(although)f(omniORB)
g(only)h(supports)221 2742 y(IIOP)23 b(1.0)g(at)g(pr)n(esent:)448
2940 y Fh(corbaloc::1.2@my)o(ho)o(st)o(.e)o(xam)o(pl)o(e.)o(co)o(m/)o
(MyO)o(bj)o(ec)o(tK)o(ey)221 3251 y Fq(Alternatively)-10
b(,)31 b(to)e(use)g Fh(resolve_initia)o(l_r)o(ef)o(er)o(en)o(ce)o
(s\(\))o Fq(,)c(you)k(use)g(a)h(URI)f(of)h(the)221 3364
y(form:)448 3562 y Fh(corbaloc:rir:/Na)o(me)o(Se)o(rv)o(ice)221
3814 y Fj(6.1.2)99 b(corbaname)221 3991 y Fh(corbaname)24
b Fq(URIs)j(cause)h Fh(string_to_objec)o(t\()o(\))22
b Fq(to)28 b(look-up)f(a)h(name)h(in)f(a)h(CORBA)221
4104 y(Naming)23 b(service.)28 b(They)21 b(ar)n(e)i(an)g(extension)e
(of)i(the)e Fh(corbaloc)f Fq(syntax:)448 4302 y Fh(corbaname:)p
Fq(<)p Fp(corbaloc)h(location)p Fq(>)p Fh(/)p Fq(<)p
Fp(object)k(key)p Fq(>)p Fh(#)p Fq(<)p Fp(stringi\002ed)h(name)p
Fq(>)221 4500 y(for)d(example:)448 4698 y Fh(corbaname::myhos)o(t/)o
(Na)o(me)o(Ser)o(vi)o(ce)o(#p)o(ro)o(jec)o(t/)o(ex)o(am)o(pl)o(e/e)o
(ch)o(o.)o(ob)o(j)448 4811 y(corbaname:rir:/N)o(am)o(eS)o(er)o(vic)o
(e#)o(pr)o(oj)o(ec)o(t/e)o(xa)o(mp)o(le)o(/e)o(cho)o(.o)o(bj)221
5009 y Fq(The)e(object)g(found)g(with)h(the)e Fh(corbaloc)p
Fq(-style)d(portion)k(must)g(be)g(of)h(type)e Fh(CosNaming::)221
5121 y(NamingContext)p Fq(,)d(or)22 b(something)f(derived)g(fr)n(om)i
(it.)28 b(If)22 b(the)g(object)g(key)f(\(or)i Fh(rir)e
Fq(name\))i(is)221 5234 y(`)p Fh(NameService)p Fq(',)18
b(it)23 b(can)g(be)g(left)g(out:)p 221 5306 1316 4 v
327 5362 a Fe(1)356 5394 y Fc(Not)c(2089)h(as)e(printed)h(in)f
([OMG00]!)p eop
%%Page: 43 49
43 48 bop 63 282 a Fi(6.2.)51 b(CONFIGURING)22 b(RESOL)-8
b(VE_INITIAL_REFERE)o(NCES)887 b Fq(43)290 539 y Fh(corbaname::myho)o
(st)o(#p)o(ro)o(je)o(ct/)o(ex)o(am)o(pl)o(e/)o(ech)o(o.)o(ob)o(j)290
652 y(corbaname:rir:#)o(pr)o(oj)o(ec)o(t/)o(exa)o(mp)o(le)o(/e)o(ch)o
(o.o)o(bj)63 835 y Fq(The)19 b(stringi\002ed)f(name)i(portion)f(can)h
(also)g(be)g(left)g(out,)f(in)h(which)g(case)g(the)f(URI)g(denotes)e
(the)63 948 y Fh(CosNaming::Nam)o(in)o(gC)o(ont)o(ex)o(t)f
Fq(which)24 b(would)e(have)h(been)f(used)f(for)h(a)i(look-up:)290
1131 y Fh(corbaname::myho)o(st)o(.e)o(xa)o(mp)o(le.)o(co)o(m)290
1244 y(corbaname:rir:)63 1427 y Fq(The)19 b(\002rst)h(of)g(these)f
(examples)h(is)g(the)g(easiest)f(way)h(of)g(specifying)g(the)g
(location)h(of)f(a)h(naming)63 1540 y(service.)63 1833
y Fo(6.2)119 b(Con\002guring)31 b(resolve_initial_references)63
2044 y Fq(The)20 b(INS)h(adds)f(two)h(new)g(command)h(line)g(ar)n
(guments)e(which)i(pr)n(ovide)f(a)h(portable)f(way)h(of)63
2157 y(con\002guring)f Fh(ORB::resolve_ini)o(ti)o(al)o(_r)o(efe)o(re)o
(nc)o(es)o(\(\))o Fq(:)63 2407 y Fj(6.2.1)99 b(ORBInitRef)63
2584 y Fh(-ORBInitRef)28 b Fq(takes)33 b(an)h(ar)n(gument)g(of)f(the)g
(form)h(<)p Fp(ObjectId)p Fq(>)p Fh(=)p Fq(<)p Fp(ObjectURI)r
Fq(>.)63 b(So,)36 b(for)63 2697 y(example,)22 b(with)g(command)i(line)f
(ar)n(guments)e(of:)290 2880 y Fh(-ORBInitRef)49 b(NameService=corb)o
(an)o(am)o(e:)o(:my)o(ho)o(st)o(.e)o(xa)o(mpl)o(e.)o(co)o(m)63
3063 y(resolve_initia)o(l_)o(re)o(fer)o(en)o(ce)o(s\()o("N)o(ame)o(Se)o
(rv)o(ic)o(e")o(\))25 b Fq(will)32 b(r)n(eturn)e(a)i(r)n(efer)n(ence)e
(to)63 3176 y(the)h(object)i(with)f(key)f(`NameService')i(available)j
(on)c(myhost.example.com,)h(port)e(2809.)63 3289 y(Since)22
b(IOR-format)h(strings)f(ar)n(e)h(consider)n(ed)e(URIs,)g(you)h(can)h
(also)g(say)f(things)g(like:)290 3472 y Fh(-ORBInitRef)49
b(NameService=IOR:)o(00)o(ff)o(..)o(.)63 3722 y Fj(6.2.2)99
b(ORBDefaultInitRef)63 3898 y Fh(-ORBDefaultIni)o(tR)o(ef)26
b Fq(pr)n(ovides)32 b(a)h(pr)n(e\002x)f(string)f(which)j(is)e(used)f
(to)h(r)n(esolve)g(other)n(-)63 4011 y(wise)f(unknown)f(names.)55
b(When)31 b Fh(resolve_initial)o(_r)o(ef)o(ere)o(nc)o(es)o(\(\))25
b Fq(is)32 b(unable)g(to)63 4124 y(r)n(esolve)i(a)h(name)g(which)g(has)
f(been)g(speci\002cally)i(con\002gur)n(ed)d(\(with)i
Fh(-ORBInitRef)p Fq(\),)d(it)63 4237 y(constr)o(ucts)d(a)j(string)e
(consisting)g(of)g(the)h(default)f(pr)n(e\002x,)i(a)g(`)p
Fh(/)p Fq(')f(character)-7 b(,)33 b(and)e(the)f(name)63
4350 y(r)n(equested.)24 b(The)c(string)g(is)h(then)f(fed)g(to)h
Fh(string_to_obje)o(ct)o(\(\))o Fq(.)h(So,)e(for)h(example,)g(with)63
4463 y(a)i(command)g(line)g(of:)290 4646 y Fh(-ORBDefaultInit)o(Re)o(f)
48 b(corbaloc::myhos)o(t.e)o(xa)o(mp)o(le)o(.c)o(om)63
4829 y Fq(a)19 b(call)h(to)e Fh(resolve_initial)o(_re)o(fe)o(re)o(nc)o
(es)o(\("M)o(yS)o(er)o(vi)o(ce)o("\))12 b Fq(will)20
b(r)n(eturn)e(the)g(object)63 4942 y(r)n(efer)n(ence)k(denoted)e(by)i
(`)p Fh(corbaloc::myhost)o(.e)o(xa)o(mpl)o(e.)o(co)o(m/)o(My)o(Ser)o
(vi)o(ce)o Fq('.)204 5055 y(Similarly)-10 b(,)37 b(a)d
Fh(corbaname)29 b Fq(pr)n(e\002x)k(can)h(be)f(used)f(to)h(cause)g
(look-ups)f(in)h(the)g(naming)63 5168 y(service.)40 b(Note,)26
b(however)-7 b(,)27 b(that)g(since)g(a)g(`)p Fh(/)p Fq(')g(character)h
(is)f(always)g(added)f(to)g(the)g(pr)n(e\002x,)h(it)63
5281 y(is)h(impossible)f(to)g(specify)h(a)g(look-up)f(in)h(the)f(r)n
(oot)g(context)g(of)g(the)g(naming)i(service\227you)63
5394 y(have)23 b(to)f(use)f(a)i(sub-context,)e(like:)p
eop
%%Page: 44 50
44 49 bop 221 282 a Fq(44)1033 b Fi(CHAPTER)21 b(6.)51
b(INTEROPERABLE)19 b(NAMING)j(SER)-5 b(VICE)448 539 y
Fh(-ORBDefaultInitR)o(ef)48 b(corbaname::myh)o(ost)o(.e)o(xa)o(mp)o(le)
o(.co)o(m#)o(se)o(rv)o(ic)o(es)221 798 y Fj(6.2.3)99
b(omniORB)25 b(con\002guration)h(\002le)221 977 y Fq(As)h(an)h
(extension)e(to)h(the)f(standar)n(d)h(facilities)i(of)f(the)f(INS,)f
(omniORB)h(supports)e(con\002gu-)221 1090 y(ration)h(\002le)g(entries)e
(named)i Fh(ORBInitRef)21 b Fq(and)26 b Fh(ORBDefaultInitR)o(ef)o
Fq(.)32 b(The)25 b(syntax)g(is)221 1203 y(identical)f(to)e(the)g
(command)h(line)g(ar)n(guments.)k Fh(omniORB.cfg)17 b
Fq(might)23 b(contain:)448 1419 y Fh(ORBInitRef)50 b(NameService=corb)o
(an)o(am)o(e:)o(:my)o(ho)o(st)o(.e)o(xa)o(mpl)o(e.)o(co)o(m)448
1532 y(ORBDefaultInitRe)o(f)e(corbaname:rir:#)o(ser)o(vi)o(ce)o(s)221
1792 y Fj(6.2.4)99 b(Resolution)26 b(order)221 1970 y
Fq(W)-5 b(ith)21 b(all)i(these)d(options)f(for)i(specifying)g(object)g
(r)n(efer)n(ences)f(to)h(be)g(r)n(eturned)e(by)j Fh(resolve_)221
2083 y(initial_referen)o(ce)o(s\(\))o Fq(,)k(it)31 b(is)f(important)g
(to)g(understand)e(the)i(or)n(der)f(in)i(which)g(the)221
2196 y(options)20 b(ar)n(e)i(tried.)27 b(The)21 b(r)n(esolution)f(or)n
(der)-7 b(,)21 b(as)h(r)n(equir)n(ed)f(by)g(the)g(CORBA)h
(speci\002cation,)f(is:)335 2412 y(1.)45 b(Check)23 b(for)g(special)g
(names)f(such)h(as)f(`)p Fh(RootPOA)p Fq(')2194 2379
y Fd(2)2229 2412 y Fq(.)335 2603 y(2.)45 b(Resolve)22
b(with)h(an)g Fh(-ORBInitRef)17 b Fq(ar)n(gument.)335
2794 y(3.)45 b(Resolve)22 b(with)h(the)e Fh(-ORBDefaultInitR)o(ef)16
b Fq(pr)n(e\002x,)22 b(if)h(pr)n(esent.)335 2985 y(4.)45
b(Resolve)22 b(with)h(an)h Fh(ORBInitRef)18 b Fq(\(or)23
b(old-style)f Fh(NAMESERVICE)p Fq(\))c(entry)k(in)i(the)e(con-)448
3098 y(\002guration)h(\002le.)335 3289 y(5.)45 b(Resolve)37
b(with)h(the)e Fh(ORBDefaultInitRe)o(f)c Fq(entry)k(in)i(the)f
(con\002guration)g(\002le,)k(if)448 3401 y(pr)n(esent.)335
3592 y(6.)k(Resolve)22 b(with)h(the)e(depr)n(ecated)g
Fh(ORBInitialHost)16 b Fq(boot)22 b(agent.)221 3809 y(This)17
b(or)n(der)f(mostly)h(has)g(the)g(expected)e(consequences\227in)g
(particular)k(that)e(command)h(line)221 3922 y(ar)n(guments)h(override)
h(entries)f(in)h(the)g(con\002guration)f(\002le.)27 b(However)-7
b(,)20 b(you)f(must)h(be)g(car)n(eful)221 4035 y(with)h(the)f(default)g
(pr)n(e\002xes.)26 b(Suppose)19 b(you)h(have)h(con\002gur)n(ed)e(a)j(`)
p Fh(NameService)p Fq(')16 b(entry)k(in)221 4147 y(the)i
(con\002guration)g(\002le,)g(and)h(you)f(specify)g(a)h(default)f(pr)n
(e\002x)h(on)f(the)g(command)h(line)g(with:)448 4364
y Fh(-ORBDefaultInitR)o(ef)48 b(corbaname:rir:)o(#se)o(rv)o(ic)o(es)221
4580 y Fq(expecting)33 b(unknown)h(services)g(to)f(be)i(looked)e(up)h
(in)h(the)f(con\002gur)n(ed)f(naming)i(service.)221 4693
y(Now)-8 b(,)17 b(step)f(3)h(above)h(means)f(that)g Fh(resolve_initia)o
(l_)o(ref)o(er)o(en)o(ce)o(s\()o("My)o(Se)o(rv)o(ic)o(e")o(\))221
4806 y Fq(should)22 b(be)g(pr)n(ocessed)f(with)h(the)g(steps:)335
5023 y(1.)45 b(Constr)o(uct)24 b(the)f(URI)h(`)p Fh(corbaname:rir:#)o
(se)o(rv)o(ic)o(es)o(/My)o(Se)o(rv)o(ic)o(e)p Fq(')18
b(and)25 b(give)f(it)448 5136 y(to)e Fh(string_to_object)o(\(\))o
Fq(.)p 221 5215 1316 4 v 327 5271 a Fe(2)356 5302 y Fc(In)e(fact,)g(a)g
(strict)g(r)o(eading)e(of)h(the)h(speci\002cation)g(says)f(that)j(it)d
(should)g(be)h(possible)e(to)i(override)e(`)p Fb(RootPOA)p
Fc(')221 5394 y(etc.)h(with)g Fb(-ORBInitRef)p Fc(,)e(but)i(since)g
(POAs)f(ar)o(e)g(locality)g(constrained)h(that)h(is)e(ridiculous.)p
eop
%%Page: 45 51
45 50 bop 63 282 a Fi(6.3.)51 b(OMNINAMES)2410 b Fq(45)176
539 y(2.)46 b(Resolve)21 b(the)h(\002rst)g(part)g(of)h(the)f
Fh(corbaname)d Fq(URI)i(by)i(calling)290 652 y Fh(resolve_initial)o(_r)
o(ef)o(er)o(en)o(ces)o(\(")o(Na)o(me)o(Se)o(rvi)o(ce)o("\))o
Fq(.)176 857 y(3.)46 b(Constr)o(uct)18 b(the)f(URI)h(`)p
Fh(corbaname:rir:#)o(se)o(rvi)o(ce)o(s/)o(Na)o(me)o(Ser)o(vi)o(ce)o
Fq(')13 b(and)19 b(give)290 970 y(it)k(to)f Fh(string_to_obje)o(ct)o
(\(\))p Fq(.)176 1175 y(4.)46 b(Resolve)21 b(the)h(\002rst)g(part)g(of)
h(the)f Fh(corbaname)d Fq(URI)i(by)i(calling)290 1288
y Fh(resolve_initial)o(_r)o(ef)o(er)o(en)o(ces)o(\(")o(Na)o(me)o(Se)o
(rvi)o(ce)o("\))o Fq(.)176 1493 y(5.)46 b(.)14 b(.)g(.)35
b(and)22 b(so)g(on)h(for)f(ever.)14 b(.)g(.)63 1728 y(omniORB)25
b(detects)e(loops)i(like)g(this)g(and)g(thr)n(ows)f(either)h
Fh(CORBA.ORB.Inva)o(lid)o(Na)o(me)19 b Fq(if)63 1841
y(the)31 b(loop)h(started)e(with)i(a)h(call)h(to)e Fh(resolve_initia)o
(l_)o(re)o(fer)o(en)o(ce)o(s\()o(\))p Fq(,)c(or)k Fh(CORBA.)63
1954 y(BAD_PARAM)19 b Fq(if)k(it)h(started)d(with)i(a)g(call)i(to)e
Fh(string_to_obje)o(ct)o(\(\))p Fq(.)g(T)-8 b(o)22 b(avoid)h(the)f(pr)n
(ob-)63 2067 y(lem)h(you)g(must)f(either)h(specify)f(the)h
Fh(NameService)18 b Fq(r)n(efer)n(ence)23 b(on)g(the)f(command)i(line,)
g(or)63 2179 y(put)d(the)h Fh(DefaultInitRef)17 b Fq(in)23
b(the)f(con\002guration)g(\002le.)63 2505 y Fo(6.3)119
b(omniNames)63 2728 y Fj(6.3.1)99 b(NamingContextExt)63
2914 y Fq(omniNames)22 b(now)g(supports)e(the)i Fh(CosNaming::Nami)o
(ng)o(Co)o(nt)o(ext)o(Ex)o(t)16 b Fq(interface:)204 3072
y Ff(module)48 b(CosNaming)h({)303 3172 y(interface)g(NamingContextExt)
d(:)k(NamingContext)d({)403 3272 y(typedef)i(string)f(StringName)n(;)
403 3371 y(typedef)h(string)f(Address)o(;)403 3471 y(typedef)h(string)f
(URLString)o(;)403 3670 y(StringName)98 b(to_string)n(\(in)49
b(Name)g(n\))399 b(raises)n(\(InvalidName)n(\);)403 3770
y(Name)f(to_name)98 b(\(in)49 b(StringName)f(sn\))i(raises)n
(\(InvalidName)n(\);)403 3969 y(exception)e(InvalidAddress)f({};)403
4168 y(URLString)148 b(to_url)o(\(in)49 b(Address)f(addr,)h(in)h
(StringName)e(sn)o(\))503 4268 y(raises)o(\()o(InvalidAddress)n(,)h
(InvalidName)n(\);)403 4467 y(Object)298 b(resolve_str)n(\(in)49
b(StringName)f(n\))503 4567 y(raises)o(\()o(NotFound)o(,)i
(CannotProceed)m(,)g(InvalidName)n(,)f(AlreadyBound)n(\);)303
4666 y(};)204 4766 y(};)204 4942 y Fh(to_string\(\))25
b Fq(and)30 b Fh(to_name\(\))c Fq(convert)j(fr)n(om)i
Fh(CosNaming::Nam)o(e)24 b Fq(sequences)63 5055 y(to)h(\003attened)g
(strings)f(and)i(vice-versa.)39 b(Calling)27 b(these)e(operations)f
(involves)i(r)n(emote)f(calls)63 5168 y(to)31 b(the)h(naming)h
(service,)h(so)e(they)f(ar)n(e)i(not)f(particularly)h(ef)n(\002cient.)
58 b(The)31 b Fh(omniORB.URI)63 5281 y Fq(module)22 b(contains)h
(equivalent)g Fh(nameToString\(\))17 b Fq(and)23 b Fh(stringToName\(\))
16 b Fq(functions,)63 5394 y(which)23 b(do)f(not)g(involve)h(r)n(emote)
f(calls.)p eop
%%Page: 46 52
46 51 bop 221 282 a Fq(46)1033 b Fi(CHAPTER)21 b(6.)51
b(INTEROPERABLE)19 b(NAMING)j(SER)-5 b(VICE)362 539 y
Fq(A)28 b Fh(CosNaming::Name)21 b Fq(is)28 b(stringi\002ed)e(by)i
(separating)f(name)h(components)e(with)i(`)p Fh(/)p Fq(')221
652 y(characters.)39 b(The)25 b Fh(kind)f Fq(and)i Fh(id)g
Fq(\002elds)f(of)h(each)g(component)f(ar)n(e)i(separated)d(by)i(`)p
Fh(.)p Fq(')39 b(char)n(-)221 764 y(acters.)45 b(If)29
b(the)f Fh(kind)f Fq(\002eld)h(is)h(empty)-10 b(,)28
b(the)g(r)n(epr)n(esentation)f(has)h(no)h(trailing)g(`)p
Fh(.)p Fq(';)j(if)d(the)f Fh(id)221 877 y Fq(is)j(empty)-10
b(,)31 b(the)f(r)n(epr)n(esentation)f(starts)g(with)i(a)g(`)p
Fh(.)p Fq(')52 b(character;)35 b(if)d(both)e Fh(id)g
Fq(and)h Fh(kind)e Fq(ar)n(e)221 990 y(empty)-10 b(,)19
b(the)f(r)n(epr)n(esentation)g(is)i(just)f(a)h(`)p Fh(.)p
Fq('.)27 b(The)18 b(backslash)j(`)p Fh(\\)p Fq(')e(is)h(used)e(to)h
(escape)g(the)f(mean-)221 1103 y(ing)23 b(of)f(`)p Fh(/)p
Fq(',)h(`)p Fh(.)p Fq(')28 b(and)23 b(`)p Fh(\\)p Fq(')g(itself.)362
1216 y Fh(to_url\(\))31 b Fq(takes)i(a)i Fh(corbaloc)c
Fq(style)i(addr)n(ess)g(and)h(key)g(string)f(\(but)h(without)g(the)221
1329 y Fh(corbaloc:)24 b Fq(part\),)30 b(and)e(a)h(stringi\002ed)e
(name,)i(and)f(r)n(eturns)f(a)i Fh(corbaname)24 b Fq(URI)k(\(incor)n(-)
221 1442 y(r)n(ectly)h(called)h(a)f(URL\))g(string,)g(having)h(pr)n
(operly)d(escaped)h(any)h(invalid)i(characters.)47 b(The)221
1555 y(speci\002cation)26 b(does)e(not)h(make)h(it)g(clear)h(whether)d
(or)i(not)f(the)g(addr)n(ess)f(string)h(should)g(also)221
1668 y(be)c(escaped)e(by)i(the)f(operation;)g(omniORB)h(does)e(not)h
(escape)g(it.)27 b(For)20 b(this)h(r)n(eason,)f(it)h(is)g(best)221
1781 y(to)26 b(avoid)i(calling)g Fh(to_url\(\))23 b Fq(if)28
b(the)e(addr)n(ess)f(part)i(contains)f(escapable)h(characters.)41
b(The)221 1894 y(local)24 b(function)f Fh(omniORB.URI.add)o(rA)o(nd)o
(Na)o(meT)o(oU)o(RI)o(\(\))16 b Fq(is)23 b(equivalent.)362
2006 y Fh(resolve_str\(\))12 b Fq(is)18 b(equivalent)f(to)g(calling)i
Fh(to_name\(\))14 b Fq(followed)j(by)g(the)g(inherited)221
2119 y Fh(resolve\(\))22 b Fq(operation.)38 b(Ther)n(e)26
b(ar)n(e)g(no)g(string-based)f(equivalents)h(of)h(the)e(various)i(bind)
221 2232 y(operations.)221 2486 y Fj(6.3.2)99 b(Use)24
b(with)i(corbaname)221 2663 y Fq(T)-8 b(o)25 b(make)h(it)g(easy)g(to)f
(use)g(omniNames)h(with)g Fh(corbaname)c Fq(URIs,)j(it)i(now)e(starts)g
(with)h(the)221 2776 y(default)36 b(port)f(of)h(2809,)41
b(and)36 b(an)h(object)e(key)g(of)h(`)p Fh(NameService)p
Fq(')c(for)k(the)f(r)n(oot)g(naming)221 2889 y(context.)40
b(This)27 b(is)g(only)g(possible)f(when)h(it)g(is)g(started)f(`fr)n
(esh',)i(rather)e(than)h(with)g(a)h(log)f(\002le)221
3002 y(fr)n(om)c(an)g(older)f(omniNames)h(version.)362
3115 y(If)k(you)f(have)i(a)f(pr)n(evious)g(omniNames)g(log,)g
(con\002gur)n(ed)f(to)g(r)o(un)h(on)g(a)g(dif)n(fer)n(ent)g(port,)221
3228 y(and)18 b(with)h(a)g(dif)n(fer)n(ent)f(object)g(key)f(for)h(its)g
(r)n(oot)g(context,)g(all)h(is)g(not)e(lost.)26 b(If)18
b(the)g(r)n(oot)f(context's)221 3341 y(object)h(key)f(is)i(not)f(`)p
Fh(NameService)p Fq(',)c(omniNames)k(cr)n(eates)g(a)h(forwar)n(ding)f
(agent)g(with)g(that)221 3453 y(key)-10 b(.)45 b(Ef)n(fectively)-10
b(,)30 b(this)e(means)h(that)f(ther)n(e)g(ar)n(e)h(two)f(object)g(keys)
f(which)j(r)n(efer)e(to)g(the)g(r)n(oot)221 3566 y(context\227`)p
Fh(NameService)p Fq(')17 b(and)23 b(whatever)e(the)h(original)i(key)d
(was.)362 3679 y(For)f(the)g(port)g(number)-7 b(,)21
b(ther)n(e)f(ar)n(e)h(two)f(options.)26 b(The)20 b(\002rst)g(is)h(to)f
(r)o(un)h(omniNames)f(with)221 3792 y(a)j(command)h(line)f(ar)n(gument)
f(like:)448 4000 y Fh(omniNames)51 b(-logdir)g(/the/log/dir)e
(-ORBpoa_iiop_por)o(t)f(2809)221 4207 y Fq(This)28 b(causes)g(it)h(to)f
(listen)g(on)h(both)f(port)f(2809)k Fp(and)e Fq(whatever)f(port)f(it)i
(listened)e(on)i(befor)n(e.)221 4320 y(The)18 b(disadvantage)h(with)f
(this)h(is)g(that)g(the)f(IORs)g(to)g(all)j(naming)e(contexts)e(now)i
(contain)g(two)221 4433 y(IIOP)24 b(pr)n(o\002les,)f(one)g(for)h(each)g
(port,)f(which,)h(amongst)f(other)g(things,)f(incr)n(eases)i(the)f
(size)h(of)221 4546 y(the)e(omniNames)g(log.)362 4659
y(The)g(second)f(option)h(is)h(to)f(use)f(omniMapper)-7
b(,)23 b(as)f(described)g(below)-8 b(.)221 4957 y Fo(6.4)119
b(omniMapper)221 5168 y Fq(omniMapper)30 b(is)g(a)h(simple)f(daemon)g
(which)g(listens)g(on)g(port)f(2809)j(\(or)e(any)g(other)f(port\),)221
5281 y(and)17 b(r)n(edir)n(ects)g(IIOP)g(r)n(equests)e(for)i
(con\002gur)n(ed)f(object)h(keys)e(to)i(associated)f(persistent)f
(IORs.)221 5394 y(It)30 b(can)h(be)f(used)f(to)h(make)g(a)h(naming)g
(service)f(\(even)g(an)h(old)f(non-INS)f(awar)n(e)i(version)f(of)p
eop
%%Page: 47 53
47 52 bop 63 282 a Fi(6.5.)51 b(CREA)-7 b(TING)22 b(OBJECTS)g(WITH)g
(SIMPLE)f(OBJECT)i(KEYS)893 b Fq(47)63 539 y(omniNames)28
b(or)h(other)f(ORB's)g(naming)i(service\))f(appear)g(on)g(port)f(2809)j
(with)e(the)f(object)63 652 y(key)19 b(`)p Fh(NameService)p
Fq('.)j(The)e(same)g(goes)f(for)h(any)g(other)f(service)h(you)f(may)i
(wish)f(to)f(specify)-10 b(,)63 764 y(such)22 b(as)h(an)g(interface)g
(r)n(epository)-10 b(.)25 b(omniMapper)d(is)h(started)e(with)i(a)g
(command)g(line)g(of:)290 977 y Fh(omniMapper)50 b([-port)i
Fq(<)p Fp(port)p Fq(>)p Fh(])j([-config)c Fq(<)p Fp(con\002g)24
b(\002le)p Fq(>)p Fh(])54 b([-v])63 1189 y Fq(The)26
b Fh(-port)g Fq(option)g(allows)i(you)f(to)f(choose)h(a)h(port)e(other)
g(than)i(2809)h(to)e(listen)g(on)3097 1156 y Fd(3)3134
1189 y Fq(.)42 b(The)63 1302 y Fh(-config)19 b Fq(option)j(speci\002es)
f(a)j(location)f(for)g(the)f(con\002guration)g(\002le.)28
b(The)22 b(default)g(name)h(is)63 1415 y Fh(/etc/omniMappe)o(r.)o(cf)o
(g)p Fq(,)k(or)j Fh(C:\\omniMapper.)o(cfg)24 b Fq(on)30
b(W)-5 b(indows.)51 b(omniMapper)63 1528 y(does)22 b(not)h(normally)i
(print)e(anything;)h(the)f Fh(-v)g Fq(option)g(makes)h(it)g(verbose)f
(so)g(it)h(prints)f(con-)63 1641 y(\002guration)k(information)h(and)f
(a)h(r)n(ecor)n(d)g(of)f(the)g(r)n(edir)n(ections)g(it)g(makes,)h(to)f
(standar)n(d)g(out-)63 1754 y(put.)204 1867 y(The)e(con\002guration)h
(\002le)g(is)g(very)g(simple.)38 b(Each)27 b(line)f(contains)g(a)h
(string)e(to)h(be)g(used)e(as)63 1980 y(an)e(object)h(key)-10
b(,)20 b(some)i(white)g(space,)f(and)i(an)f(IOR)h(\(or)f(any)g(valid)i
(URI\))e(that)g(it)g(will)i(r)n(edir)n(ect)63 2093 y(that)c(object)h
(key)e(to.)27 b(Comments)20 b(should)g(be)g(pr)n(e\002xed)g(with)h(a)g
(`)p Fh(#)p Fq(')g(character)-7 b(.)28 b(For)20 b(example:)290
2305 y Fh(#)54 b(Example)d(omniMapper.cfg)290 2418 y(NameService)486
b(IOR:000f...)290 2531 y(InterfaceReposi)o(to)o(ry)48
b(IOR:0100...)204 2744 y Fq(omniMapper)25 b(can)i(either)d(be)i(r)o(un)
g(on)f(a)h(single)g(machine,)h(in)f(much)g(the)f(same)h(way)f(as)63
2857 y(omniNames,)f(or)g(it)g(can)h(be)g(r)o(un)f(on)g
Fp(every)i Fq(machine,)g(with)e(a)h(common)f(con\002guration)g(\002le.)
63 2969 y(That)e(way)-10 b(,)22 b(each)h(machine's)h(omniORB)e
(con\002guration)g(\002le)h(could)g(contain)g(the)f(line:)290
3182 y Fh(ORBDefaultInitR)o(ef)48 b(corbaloc::loca)o(lh)o(ost)63
3481 y Fo(6.5)119 b(Creating)29 b(objects)h(with)f(simple)h(object)g
(keys)63 3692 y Fq(In)k(normal)g(use,)i(omniORB)f(cr)n(eates)e(object)h
(keys)f(containing)h(various)h(information)g(in-)63 3805
y(cluding)24 b(POA)h(names)f(and)g(various)g(non-ASCII)g(characters.)33
b(Since)24 b(object)g(keys)f(ar)n(e)h(sup-)63 3917 y(posed)c(to)h(be)h
(opaque,)f(this)g(is)h(not)f(usually)h(a)h(pr)n(oblem.)28
b(The)21 b(INS)g(br)n(eaks)g(this)h(opacity)g(and)63
4030 y(r)n(equir)n(es)g(servers)f(to)h(cr)n(eate)g(objects)g(with)h
(human-friendly)g(keys.)204 4143 y(If)33 b(you)e(wish)i(to)f(make)h
(your)e(objects)h(available)k(with)d(human-friendly)g(URIs,)h(ther)n(e)
63 4256 y(ar)n(e)c(two)e(options.)47 b(The)29 b(\002rst)g(is)g(to)g
(use)g(omniMapper)g(as)g(described)g(above,)i(in)f(conjunc-)63
4369 y(tion)g(with)g(a)g Fh(PERSISTENT)c Fq(POA.)k(The)g(second)e(is)j
(to)e(cr)n(eate)h(objects)g(with)g(the)f(r)n(equir)n(ed)63
4482 y(keys)c(yourself.)41 b(Y)-8 b(ou)27 b(do)f(this)h(with)h(a)g
(special)g(POA)f(with)h(the)e(name)i(`)p Fh(omniINSPOA)p
Fq(',)23 b(ac-)63 4595 y(quir)n(ed)33 b(fr)n(om)h Fh(resolve_initial)o
(_r)o(ef)o(er)o(enc)o(es)o(\(\))o Fq(.)55 b(This)33 b(POA)h(has)g(the)f
Fh(USER_ID)63 4708 y Fq(and)26 b Fh(PERSISTENT)c Fq(policies,)27
b(and)g(the)e(special)i(pr)n(operty)e(that)h(the)g(object)g(keys)e(it)j
(cr)n(eates)63 4821 y(contain)20 b(only)h(the)e(object)h(ids)g(given)h
(to)e(the)h(POA,)g(and)h(no)f(other)f(data.)27 b(It)20
b(is)g(a)h(normal)g(POA)63 4934 y(in)27 b(all)i(other)c(r)n(espects,)h
(so)h(you)f(can)i(activate/deactivate)g(it,)g(cr)n(eate)f(childr)n(en,)
h(and)f(so)f(on,)63 5047 y(in)d(the)f(usual)g(way)-10
b(.)p 63 5306 1316 4 v 168 5362 a Fe(3)197 5394 y Fc(Y)j(ou)19
b(can)g(also)g(play)f(the)h Fb(-ORBpoa_iiop_port)d Fc(trick)i(to)h
(make)f(it)h(listen)f(on)h(mor)o(e)f(than)i(one)f(port.)p
eop
%%Page: 48 54
48 53 bop 221 282 a Fq(48)1033 b Fi(CHAPTER)21 b(6.)51
b(INTEROPERABLE)19 b(NAMING)j(SER)-5 b(VICE)p eop
%%Page: 49 55
49 54 bop 63 1164 a Fk(Chapter)44 b(7)63 1582 y Fm(Connection)51
b(and)i(Thread)63 1831 y(Management)63 2293 y Fq(This)22
b(chapter)g(describes)g(how)g(omniORB)g(manages)h(thr)n(eads)f(and)g
(network)f(connections.)63 2610 y Fo(7.1)119 b(Background)63
2827 y Fq(In)20 b(CORBA,)h(the)f(ORB)g(is)h(the)f(`middlewar)n(e')h
(that)g(allows)g(a)h(client)f(to)f(invoke)g(an)i(operation)63
2940 y(on)27 b(an)g(object)g(without)f(r)n(egar)n(d)h(to)g(its)g
(implementation)g(or)g(location.)42 b(In)27 b(or)n(der)f(to)h(invoke)63
3053 y(an)34 b(operation)f(on)g(an)h(object,)i(a)f(client)f(needs)e(to)
h(`bind')i(to)e(the)g(object)g(by)h(acquiring)h(its)63
3166 y(object)22 b(r)n(efer)n(ence.)28 b(Such)23 b(a)h(r)n(efer)n(ence)
e(may)h(be)g(obtained)f(as)h(the)g(r)n(esult)f(of)h(an)g(operation)f
(on)63 3279 y(another)f(object)h(\(such)g(as)g(a)g(naming)h(service)f
(or)f(factory)h(object\))g(or)g(by)g(conversion)f(fr)n(om)i(a)63
3392 y(stringi\002ed)h(r)n(epr)n(esentation.)34 b(If)26
b(the)e(object)h(is)h(in)g(a)g(dif)n(fer)n(ent)f(addr)n(ess)f(space,)i
(the)e(binding)63 3505 y(pr)n(ocess)19 b(involves)i(the)f(ORB)h
(building)g(a)g(pr)n(oxy)f(object)h(in)g(the)f(client's)h(addr)n(ess)e
(space.)27 b(The)63 3617 y(ORB)h(arranges)h(for)f(invocations)i(on)e
(the)g(pr)n(oxy)g(object)h(to)f(be)h(transpar)n(ently)f(mapped)g(to)63
3730 y(equivalent)22 b(invocations)i(on)e(the)g(implementation)g
(object.)204 3846 y(For)17 b(the)g(sake)f(of)i(inter)n(operability)-10
b(,)18 b(CORBA)g(mandates)f(that)h(all)h(ORBs)e(should)g(support)63
3959 y(IIOP)23 b(as)h(the)e(means)i(to)f(communicate)h(r)n(emote)f
(invocations)h(over)f(a)h(TCP/IP)f(connection.)63 4072
y(IIOP)f(is)g(usually)657 4039 y Fd(1)717 4072 y Fq(asymmetric)g(with)h
(r)n(espect)e(to)g(the)h(r)n(oles)g(of)g(the)g(parties)f(at)i(the)e
(two)h(ends)63 4185 y(of)d(a)h(connection.)26 b(At)19
b(one)f(end)h(is)g(the)f(client)i(which)g(can)g(only)f(initiate)h(r)n
(emote)e(invocations.)63 4298 y(At)k(the)g(other)f(end)h(is)g(the)g
(server)g(which)h(can)g(only)g(r)n(eceive)f(r)n(emote)g(invocations.)
204 4414 y(Notice)34 b(that)h(in)h(CORBA,)f(as)g(in)h(most)e
(distributed)g(systems,)i(r)n(emote)e(bindings)h(ar)n(e)63
4527 y(established)23 b(implicitly)j(without)e(application)i
(intervention.)32 b(This)24 b(pr)n(ovides)g(the)g(illusion)63
4640 y(that)34 b(all)j(objects)d(ar)n(e)i(local,)j(a)d(pr)n(operty)d
(known)h(as)h(`location)h(transpar)n(ency'.)65 b(CORBA)63
4752 y(does)20 b(not)h(specify)g(when)g(such)h(bindings)f(should)g(be)h
(established)f(or)g(how)g(they)g(should)g(be)63 4865
y(multiplexed)28 b(over)g(the)g(underlying)f(network)g(connections.)45
b(Instead,)29 b(ORBs)f(ar)n(e)h(fr)n(ee)f(to)63 4978
y(implement)22 b(implicit)j(binding)d(by)h(a)g(variety)g(of)f(means.)
204 5094 y(The)d(r)n(est)g(of)h(this)f(chapter)h(describes)f(how)g
(omniORB)h(manages)g(network)e(connections)63 5207 y(and)k(the)g(pr)n
(ogramming)h(interface)g(to)f(\002ne)g(tune)f(the)h(management)g
(policy)-10 b(.)p 63 5306 1316 4 v 168 5362 a Fe(1)197
5394 y Fc(GIOP)19 b(1.2)g(supports)f(`bidir)o(ectional)f(GIOP',)h
(which)i(permits)e(the)h(r\364les)e(to)i(be)g(r)o(eversed.)1662
5622 y Fq(49)p eop
%%Page: 50 56
50 55 bop 221 282 a Fq(50)605 b Fi(CHAPTER)21 b(7.)51
b(CONNECTION)22 b(AND)h(THREAD)e(MANAGEMENT)221 539 y
Fo(7.2)119 b(The)30 b(model)221 808 y Fq(omniORB)e(is)g(designed)e(fr)n
(om)i(the)f(gr)n(ound)g(up)h(to)f(be)h(fully)g(multi-thr)n(eaded.)43
b(The)28 b(objec-)221 921 y(tive)e(is)h(to)e(maximise)i(the)e(degr)n
(ee)g(of)h(concurr)n(ency)f(and)h(at)h(the)e(same)h(time)g(eliminate)h
(any)221 1034 y(unnecessary)k(thr)n(ead)h(over)n(head.)56
b(Another)31 b(objective)i(is)f(to)g(minimise)h(the)f(interfer)n(ence)
221 1147 y(by)27 b(the)f(activities)i(of)f(other)e(thr)n(eads)h(on)g
(the)g(pr)n(ogr)n(ess)f(of)i(a)h(r)n(emote)d(invocation.)42
b(In)26 b(other)221 1260 y(wor)n(ds,)i(thr)n(ead)e(`cr)n(oss-talk')i
(should)f(be)g(minimised)h(within)g(the)f(ORB.)g(T)-8
b(o)27 b(achieve)h(these)221 1372 y(objectives,)g(the)e(degr)n(ee)g(of)
h(multiplexing)h(at)f(every)f(level)i(is)f(kept)f(to)h(a)h(minimum)g
(by)g(de-)221 1485 y(fault.)362 1627 y(Minimising)21
b(multiplexing)e(works)f(well)i(when)f(the)g(ORB)g(is)g(r)n(elatively)i
(lightly)e(loaded.)221 1740 y(However)-7 b(,)33 b(when)f(the)f(ORB)h
(is)g(under)f(heavy)i(load,)h(it)e(can)i(sometimes)c(be)i(bene\002cial)
i(to)221 1853 y(conserve)24 b(operating)f(system)f(r)n(esour)n(ces)i
(such)g(as)g(thr)n(eads)g(and)g(network)f(connections)g(by)221
1966 y(multiplexing)i(at)f(the)g(ORB)g(level.)33 b(omniORB)25
b(has)f(various)h(options)e(that)h(contr)n(ol)g(its)g(mul-)221
2079 y(tiplexing)e(behaviour)-7 b(.)221 2554 y Fo(7.3)119
b(Client)30 b(side)f(behaviour)221 2823 y Fq(On)23 b(the)f(client)h
(side)f(of)g(a)i(connection,)d(the)h(thr)n(ead)g(that)g(invokes)g(on)g
(a)h(pr)n(oxy)f(object)h(drives)221 2936 y(the)j(GIOP)g(pr)n(otocol)g
(dir)n(ectly)g(and)h(blocks)f(on)g(the)f(connection)h(to)g(r)n(eceive)g
(the)g(r)n(eply)-10 b(.)38 b(The)221 3049 y(\002rst)32
b(time)g(the)f(client)i(makes)e(a)i(call)h(to)e(a)g(particular)i(addr)n
(ess)d(space,)j(the)d(ORB)h(opens)e(a)221 3162 y(suitable)23
b(connection)f(to)g(the)f(r)n(emote)h(addr)n(ess)f(space)h(\(based)g
(on)g(the)g(client)h(transport)e(r)o(ule)221 3275 y(as)30
b(described)f(in)h(section)f(7.7.1\).)51 b(After)29 b(the)g(r)n(eply)g
(has)h(been)f(r)n(eceived,)i(the)e(ORB)h(caches)221 3388
y(the)22 b(open)f(network)g(connection,)h(r)n(eady)g(for)h(use)e(by)i
(another)e(call.)362 3530 y(If)j(two)f(\(or)h(mor)n(e\))g(thr)n(eads)f
(in)h(a)h(multi-thr)n(eaded)e(client)h(attempt)f(to)g(contact)h(the)f
(same)221 3642 y(addr)n(ess)31 b(space)h(simultaneously)-10
b(,)33 b(ther)n(e)e(ar)n(e)i(two)e(dif)n(fer)n(ent)h(ways)g(to)f(pr)n
(oceed.)55 b(The)32 b(de-)221 3755 y(fault)h(way)e(is)h(to)f(open)g
(another)f(network)g(connection)h(to)g(the)g(server)-7
b(.)54 b(This)32 b(means)f(that)221 3868 y(neither)26
b(the)h(client)h(or)e(server)h(ORB)g(has)g(to)f(perform)h(any)g
(multiplexing)h(on)f(the)f(network)221 3981 y
(connections\227multiplexing)35 b(is)g(performed)f(by)i(the)e
(operating)g(system,)j(which)f(has)g(to)221 4094 y(deal)19
b(with)g(multiplexing)g(anyway)-10 b(.)26 b(The)18 b(second)g
(possibility)g(is)h(for)g(the)f(client)i(to)e(multiplex)221
4207 y(the)24 b(concurr)n(ent)f(r)n(equests)f(on)i(a)h(single)f
(network)e(connection.)33 b(This)24 b(conserves)e(operating)221
4320 y(system)f(r)n(esour)n(ces)g(\(network)g(connections\),)g(but)i
(means)f(that)g(both)g(the)g(client)h(and)f(server)221
4433 y(have)h(to)f(deal)h(with)f(multiplexing)h(issues)e(themselves.)
362 4575 y(In)36 b(the)g(default)h(one)e(call)k(per)c(connection)h
(mode,)j(ther)n(e)d(is)h(a)g(limit)h(to)d(the)h(number)221
4687 y(of)i(concurr)n(ent)f(connections)g(that)g(ar)n(e)h(opened,)i
(set)c(with)i(the)f Fh(maxGIOPConnect)o(io)o(n)221 4800
y(PerServer)23 b Fq(parameter)-7 b(.)40 b(T)-8 b(o)26
b(tell)h(the)f(ORB)h(to)f(multiplex)h(calls)i(on)d(a)h(single)g
(connection,)221 4913 y(set)22 b(the)f Fh(oneCallPerConnec)o(ti)o(on)16
b Fq(parameter)22 b(to)g(zer)n(o.)362 5055 y(Note)h(that)h(some)f
(server)n(-side)g(ORBs,)h(including)g(omniORB)h(versions)e(befor)n(e)h
(version)221 5168 y(4.0,)f(ar)n(e)f(unable)g(to)f(deal)h(with)g
(concurr)n(ent)f(calls)i(multiplexed)e(on)h(a)g(single)g(connection,)f
(so)221 5281 y(they)29 b(serialise)h(the)g(calls.)51
b(It)30 b(is)g(usually)h(best)e(to)g(keep)g(to)g(the)h(default)g(mode)f
(of)h(opening)221 5394 y(multiple)23 b(connections.)p
eop
%%Page: 51 57
51 56 bop 63 282 a Fi(7.4.)51 b(SER)-5 b(VER)21 b(SIDE)h(BEHA)-10
b(VIOUR)1871 b Fq(51)63 539 y Fj(7.3.1)99 b(Client)25
b(side)g(timeouts)63 720 y Fq(omniORB)19 b(can)i(associate)e(a)h
(timeout)f(with)h(a)g(call,)i(meaning)e(that)f(if)h(the)f(call)j(takes)
c(too)h(long)63 833 y(a)25 b Fh(TRANSIENT)c Fq(exception)j(is)h(thr)n
(own.)34 b(T)-5 b(imeouts)23 b(can)j(be)f(set)f(for)g(the)g(whole)h(pr)
n(ocess,)f(for)63 946 y(a)f(speci\002c)f(thr)n(ead,)g(or)h(for)f(a)h
(speci\002c)g(object)f(r)n(efer)n(ence.)204 1061 y(T)-5
b(imeouts)21 b(ar)n(e)i(set)f(using)g(functions)g(in)h(the)f
Fh(omniORB)d Fq(module:)204 1215 y Ff(omniORB)n(.setClientCallTimeout)m
(\()o(millisecs)o(\))204 1315 y(omniORB)n(.setClientCallTimeout)m(\()o
(objref)o(,)50 b(millisecs)n(\))204 1415 y(omniORB)n
(.setClientThreadCallTimeout)-5 b(\(millisecs)o(\))204
1584 y Fh(setClientCallT)o(ime)o(ou)o(t\()o(\))20 b Fq(sets)k(either)h
(the)h(global)h(timeout)e(or)g(the)h(timeout)f(for)63
1697 y(a)i(speci\002c)g(object)g(r)n(efer)n(ence.)40
b Fh(setClientThrea)o(dCa)o(ll)o(Ti)o(me)o(ou)o(t\(\))20
b Fq(sets)25 b(the)h(timeout)63 1810 y(for)c(the)g(calling)i(thr)n
(ead.)k(Setting)21 b(any)h(timeout)g(value)i(to)e(zer)n(o)g(disables)h
(it.)204 1925 y(Accessing)34 b(per)n(-thr)n(ead)f(state)h(is)h(a)g(r)n
(elatively)h(expensive)d(operation,)j(so)e(per)g(thr)n(ead)63
2038 y(timeouts)29 b(ar)n(e)j(disabled)f(by)g(default.)53
b(The)30 b Fh(supportPerThread)o(Ti)o(me)o(Ou)o(t)25
b Fq(parameter)63 2151 y(must)d(be)g(set)g(tr)o(ue)g(to)g(enable)g
(them.)204 2267 y(T)-8 b(o)24 b(choose)f(the)h(timeout)g(value)h(to)f
(use)g(for)h(a)g(call,)i(the)c(ORB)i(\002rst)f(looks)f(to)i(see)e(if)j
(ther)n(e)63 2379 y(is)j(a)h(timeout)f(for)g(the)f(object)i(r)n(efer)n
(ence,)g(then)e(to)h(the)g(calling)i(thr)n(ead,)f(and)f(\002nally)i(to)
d(the)63 2492 y(global)23 b(timeout.)63 2805 y Fo(7.4)119
b(Server)29 b(side)g(behaviour)63 3021 y Fq(The)f(server)f(side)h(has)h
(two)f(primary)h(modes)e(of)i(operation:)38 b(thr)n(ead)29
b(per)e(connection)i(and)63 3134 y(thr)n(ead)f(pooling.)47
b(It)29 b(is)g(able)h(to)f(dynamically)h(transition)f(between)f(the)g
(two)g(modes,)i(and)63 3247 y(it)e(supports)d(a)j(hybrid)f(scheme)g
(that)h(behaves)f(mostly)g(like)h(thr)n(ead)f(pooling,)h(but)g(has)f
(the)63 3360 y(same)22 b(fast)h(turn-ar)n(ound)f(for)g(sequences)f(of)h
(calls)i(as)f(thr)n(ead)f(per)g(connection.)63 3629 y
Fj(7.4.1)99 b(Thread)24 b(per)g(connection)i(mode)63
3811 y Fq(In)e(thr)n(ead)g(per)f(connection)h(mode)g(\(the)g(default,)g
(and)g(the)g(only)g(option)g(in)g(omniORB)h(ver)n(-)63
3924 y(sions)j(befor)n(e)g(4.0\),)j(each)e(connection)f(has)h(a)g
(single)g(thr)n(ead)f(dedicated)g(to)g(it.)46 b(The)28
b(thr)n(ead)63 4036 y(blocks)f(waiting)i(for)f(a)g(r)n(equest.)42
b(When)27 b(it)h(r)n(eceives)g(one,)g(it)g(unmarshals)h(the)e(ar)n
(guments,)63 4149 y(makes)33 b(the)f(up-call)j(to)e(the)g(application)i
(code,)g(marshals)f(the)f(r)n(eply)-10 b(,)35 b(and)f(goes)e(back)i(to)
63 4262 y(watching)29 b(the)f(connection.)47 b(Ther)n(e)28
b(is)h(thus)f(no)h(thr)n(ead)f(switching)h(along)g(the)g(call)i(chain,)
63 4375 y(meaning)22 b(the)g(call)j(is)d(very)h(ef)n(\002cient.)204
4490 y(As)h(explained)h(above,)h(a)g(client)g(can)g(choose)e(to)g
(multiplex)i(multiple)f(concurr)n(ent)g(calls)63 4603
y(on)31 b(a)h(single)g(connection,)h(so)e(once)g(the)g(server)f(has)i
(r)n(eceived)g(the)e(r)n(equest,)j(and)e(just)g(be-)63
4716 y(for)n(e)23 b(it)i(makes)e(the)g(call)j(into)e(application)h
(code,)e(it)h(marks)g(the)f(connection)g(as)h(`selectable',)63
4829 y(meaning)g(that)g(another)g(thr)n(ead)g(should)f(watch)i(it)f(to)
g(see)f(if)i(any)f(other)g(r)n(equests)e(arrive.)34 b(If)63
4942 y(they)18 b(do,)h(extra)f(thr)n(eads)h(ar)n(e)g(dispatched)f(to)h
(handle)g(the)f(concurr)n(ent)h(calls.)28 b(GIOP)20 b(1.2)g(actu-)63
5055 y(ally)25 b(allows)f(the)f(ar)n(gument)g(data)i(for)e(multiple)i
(calls)g(to)e(be)h(interleaved)f(on)h(a)g(connection,)63
5168 y(so)d(the)h(unmarshalling)i(code)d(has)i(to)f(handle)g(that)g
(too.)27 b(As)22 b(soon)f(as)i(any)f(multiplexing)h(oc-)63
5281 y(curs)i(on)g(the)f(connection,)i(the)e(aim)j(of)e(r)n(emoving)h
(thr)n(ead)e(switching)i(cannot)f(be)g(met,)h(and)63
5394 y(ther)n(e)21 b(is)i(inevitable)h(inef)n(\002ciency)f(due)f(to)g
(thr)n(ead)g(switching.)p eop
%%Page: 52 58
52 57 bop 221 282 a Fq(52)605 b Fi(CHAPTER)21 b(7.)51
b(CONNECTION)22 b(AND)h(THREAD)e(MANAGEMENT)362 539 y
Fq(The)39 b Fh(maxServerThrea)o(dPe)o(rC)o(on)o(ne)o(ct)o(ion)32
b Fq(parameter)39 b(can)h(be)f(set)g(to)f(limit)j(the)221
652 y(number)25 b(of)h(thr)n(eads)e(that)i(can)g(be)f(allocated)i(to)d
(a)i(single)g(connection)e(containing)i(concur)n(-)221
764 y(r)n(ent)h(calls.)42 b(Setting)26 b(the)g(parameter)h(to)f(1)i
(mimics)g(the)e(behaviour)i(of)f(omniORB)g(versions)221
877 y(befor)n(e)22 b(4.0,)i(that)e(did)g(not)g(support)f(multiplexed)h
(calls.)221 1144 y Fj(7.4.2)99 b(Thread)25 b(pool)g(mode)221
1325 y Fq(In)d(thr)n(ead)f(pool)h(mode,)e(selected)h(by)g(setting)g
(the)g Fh(threadPerConnec)o(ti)o(on)o(Po)o(li)o(cy)16
b Fq(pa-)221 1438 y(rameter)33 b(to)f(zer)n(o,)j(a)f(single)e(thr)n
(ead)h(watches)f(all)j(incoming)e(connections.)58 b(When)33
b(a)g(call)221 1551 y(arrives)25 b(on)g(one)f(of)h(them,)f(a)h(thr)n
(ead)g(is)g(chosen)e(fr)n(om)j(a)f(pool)f(of)h(thr)n(eads,)f(and)h(set)
f(to)g(work)221 1664 y(unmarshalling)35 b(the)f(ar)n(guments)f(and)h
(performing)f(the)h(up-call.)64 b(Ther)n(e)33 b(is)h(ther)n(efor)n(e)f
(at)221 1777 y(least)23 b(one)e(thr)n(ead)h(switch)h(for)f(each)h
(call.)362 1892 y(The)i(thr)n(ead)g(pool)g(is)h(not)f(pr)n
(e-initialised.)37 b(Instead,)24 b(thr)n(eads)h(ar)n(e)h(started)e(on)h
(demand,)221 2004 y(and)e(idle)g(thr)n(eads)e(ar)n(e)i(stopped)d(after)
j(a)g(period)f(of)g(inactivity)-10 b(.)29 b(The)22 b(maximum)j(number)d
(of)221 2117 y(thr)n(eads)16 b(that)h(can)h(be)f(started)f(in)i(the)e
(pool)g(is)i(selected)d(with)i(the)g Fh(maxServerThrea)o(dP)o(oo)o(l)
221 2230 y(Size)k Fq(parameter)-7 b(.)28 b(The)22 b(default)g(is)h
(100.)362 2345 y(A)j(common)f(pattern)g(in)g(CORBA)h(applications)g(is)
g(for)f(a)h(client)g(to)f(make)g(several)h(calls)221
2458 y(to)e(a)i(single)e(object)g(in)i(quick)f(succession.)33
b(T)-8 b(o)23 b(handle)i(this)f(situation)h(most)f(ef)n(\002ciently)-10
b(,)25 b(the)221 2571 y(default)35 b(behaviour)h(is)f(to)g(not)g(r)n
(eturn)f(a)i(thr)n(ead)f(to)f(the)h(pool)g(immediately)g(after)g(a)h
(call)221 2684 y(is)28 b(\002nished.)42 b(Instead,)27
b(it)h(is)g(set)f(to)g(watch)h(the)f(connection)g(it)h(has)g(just)f
(served)f(for)i(a)g(short)221 2797 y(while,)18 b(mimicking)h(the)e
(behaviour)g(in)h(thr)n(ead)f(per)f(connection)h(mode.)25
b(If)17 b(a)h(new)f(call)i(comes)221 2910 y(in)29 b(during)g(the)f
(watching)h(period,)g(the)f(call)i(is)f(dispatched)f(without)g(any)h
(thr)n(ead)f(switch-)221 3023 y(ing,)h(just)e(as)i(in)f(thr)n(ead)f
(per)g(connection)h(mode.)43 b(Of)28 b(course,)g(if)h(the)e(server)g
(is)h(supporting)221 3136 y(a)k(very)f(lar)n(ge)g(number)g(of)g
(connections)f(\(mor)n(e)i(than)f(the)f(size)h(of)h(the)e(thr)n(ead)h
(pool\),)h(this)221 3248 y(policy)20 b(can)h(delay)e(a)h(call)i(coming)
e(fr)n(om)g(another)f(connection.)26 b(If)20 b(the)f
Fh(threadPoolWatc)o(h)221 3361 y(Connection)14 b Fq(parameter)k(is)g
(set)g(to)f(zer)n(o,)i(connection)f(watching)h(is)f(disabled)h(and)f
(thr)n(eads)221 3474 y(r)n(eturn)k(to)g(the)g(pool)g(immediately)h
(after)f(\002nishing)h(a)g(single)f(r)n(equest.)221 3741
y Fj(7.4.3)99 b(Policy)26 b(transition)221 3922 y Fq(If)32
b(the)e(server)h(is)h(dealing)f(with)h(a)g(r)n(elatively)g(small)h
(number)e(of)h(connections,)g(it)g(is)g(most)221 4035
y(ef)n(\002cient)21 b(to)g(use)f(thr)n(ead)g(per)g(connection)h(mode.)
26 b(If)21 b(the)f(number)h(of)g(connections)f(becomes)221
4148 y(too)28 b(lar)n(ge,)i(however)-7 b(,)28 b(operating)g(system)e
(limits)k(on)e(the)f(number)i(of)f(thr)n(eads)f(may)i(cause)221
4261 y(a)g(signi\002cant)g(slowdown,)g(or)f(even)g(pr)n(event)g(the)g
(acceptance)h(of)g(new)f(connections)f(alto-)221 4374
y(gether)-7 b(.)362 4488 y(T)f(o)36 b(give)h(the)f(most)f(ef)n
(\002cient)i(r)n(esponse)e(in)i(all)h(cir)n(cumstances,)j(omniORB)36
b(allows)h(a)221 4601 y(server)d(to)g(start)h(in)g(thr)n(ead)g(per)f
(connection)g(mode,)j(and)e(transition)g(to)f(thr)n(ead)h(pooling)221
4714 y(if)29 b(many)f(connections)g(arrive.)45 b(This)27
b(is)i(contr)n(olled)e(with)h(the)g Fh(threadPerConne)o(ct)o(io)o(n)221
4827 y(UpperLimit)15 b Fq(and)k Fh(threadPerConnec)o(ti)o(on)o(Low)o
(er)o(Li)o(mi)o(t)13 b Fq(parameters.)26 b(The)18 b(former)221
4940 y(must)23 b(always)i(be)f(lar)n(ger)g(than)g(the)f(latter)-7
b(.)32 b(The)23 b(upper)f(limit)k(chooses)c(the)h(number)h(of)g(con-)
221 5053 y(nections)29 b(at)h(which)g(time)g(the)f(ORB)h(transitions)f
(to)g(thr)n(ead)g(pool)g(mode;)j(the)d(lower)h(limit)221
5166 y(selects)22 b(the)f(point)h(at)h(which)g(the)f(transition)g(back)
i(to)e(thr)n(ead)g(per)g(connection)g(is)g(made.)362
5281 y(For)d(example,)g(setting)f(the)h(upper)f(limit)i(to)f(50)i(and)e
(the)f(lower)h(limit)i(to)e(30)h(would)f(mean)221 5394
y(that)29 b(the)g(\002rst)f(49)i(connections)f(would)f(r)n(eceive)i
(dedicated)e(thr)n(eads.)46 b(The)29 b(50th)h(to)e(arrive)p
eop
%%Page: 53 59
53 58 bop 63 282 a Fi(7.5.)51 b(IDLE)22 b(CONNECTION)g(SHUTDOWN)1554
b Fq(53)63 539 y(would)23 b(trigger)f(thr)n(ead)i(pooling.)30
b(All)25 b(futur)n(e)e(connections)g(to)g(arrive)i(would)e(make)h(use)f
(of)63 652 y(thr)n(eads)d(fr)n(om)i(the)e(pool.)27 b(Note)20
b(that)h(the)g(existing)f(dedicated)g(thr)n(eads)g(continue)h(to)g
(service)63 764 y(their)31 b(connections)f(until)i(the)e(connections)g
(ar)n(e)i(closed.)53 b(If)32 b(the)e(number)h(of)h(connections)63
877 y(falls)f(below)f(30,)i(thr)n(ead)d(per)h(connection)f(is)h(r)n
(eactivated)g(and)g(new)f(connections)g(r)n(eceive)63
990 y(their)34 b(own)f(dedicated)h(thr)n(eads)f(\(up)h(to)g(the)g
(limit)h(of)g(50)g(again\).)65 b(Once)34 b(again,)k(existing)63
1103 y(connections)21 b(in)i(thr)n(ead)f(pool)h(mode)e(stay)h(in)h
(that)g(mode)e(until)i(they)f(ar)n(e)h(closed.)63 1459
y Fo(7.5)119 b(Idle)29 b(connection)h(shutdown)63 1688
y Fq(It)e(is)i(wasteful)f(to)g(leave)h(a)f(connection)g(open)g(when)f
(it)i(has)f(been)g(left)g(unused)f(for)h(a)h(con-)63
1801 y(siderable)23 b(time.)29 b(T)-8 b(oo)22 b(many)i(idle)f
(connections)f(could)h(block)h(out)e(new)h(connections)f(when)63
1914 y(it)28 b(r)o(uns)g(out)f(of)i(spar)n(e)f(communication)h
(channels.)45 b(For)27 b(example,)j(most)d(Unix)i(platforms)63
2027 y(have)d(a)h(limit)g(on)f(the)f(number)g(of)h(\002le)h(handles)e
(a)i(pr)n(ocess)d(can)j(open.)37 b(64)27 b(is)f(the)f(usual)h(de-)63
2140 y(fault)k(limit.)50 b(The)29 b(value)h(can)h(be)e(incr)n(eased)h
(to)f(a)h(maximum)h(of)f(a)g(thousand)e(or)h(mor)n(e)h(by)63
2253 y(changing)22 b(the)g(`ulimit')j(in)e(the)f(shell.)204
2375 y(Every)k(so)g(often,)g(a)i(thr)n(ead)e(scans)h(all)h(open)e
(connections)g(to)g(see)f(which)j(ar)n(e)f(idle.)40 b(The)63
2488 y(scanning)29 b(period)g(\(in)h(seconds\))e(is)i(set)e(with)h(the)
g Fh(scanGranularity)23 b Fq(parameter)-7 b(.)48 b(The)63
2601 y(default)22 b(is)h(5)g(seconds.)204 2723 y(Outgoing)18
b(connections)g(\(initiated)h(by)g(clients\))g(and)g(incoming)h
(connections)e(\(initiated)63 2836 y(by)f(servers\))f(have)h(separate)f
(idle)i(timeouts.)24 b(The)17 b(timeouts)f(ar)n(e)h(set)f(with)i(the)e
Fh(outConScan)63 2949 y(Period)25 b Fq(and)k Fh(inConScanPerio)o(d)22
b Fq(parameters)28 b(r)n(espectively)-10 b(.)44 b(The)27
b(values)i(ar)n(e)g(in)g(sec-)63 3062 y(onds,)21 b(and)h(must)g(be)h(a)
g(multiple)g(of)g(the)f(scan)h(granularity)-10 b(.)63
3373 y Fj(7.5.1)99 b(Interoperability)24 b(Considerations)63
3569 y Fq(The)d(IIOP)g(speci\002cation)h(allows)g(both)f(the)g(client)h
(and)f(the)g(server)g(to)g(shutdown)e(a)j(connec-)63
3682 y(tion)g(unilaterally)-10 b(.)29 b(When)22 b(one)g(end)f(is)i
(about)f(to)g(shutdown)f(a)i(connection,)f(it)g(should)g(send)63
3795 y(a)33 b(CloseConnection)f(message)f(to)h(the)g(other)g(end.)57
b(It)32 b(should)g(also)h(make)g(sur)n(e)f(that)g(the)63
3907 y(message)21 b(will)j(r)n(each)f(the)f(other)f(end)h(befor)n(e)g
(it)h(pr)n(oceeds)e(to)h(shutdown)e(the)i(connection.)204
4030 y(The)35 b(client)i(should)e(distinguish)g(between)g(an)i(or)n
(derly)e(and)h(an)h(abnormal)g(connec-)63 4142 y(tion)21
b(shutdown.)26 b(When)21 b(a)i(client)f(r)n(eceives)g(a)h
(CloseConnection)e(message)f(befor)n(e)i(the)f(con-)63
4255 y(nection)28 b(is)g(closed,)h(the)e(condition)h(is)h(an)g(or)n
(derly)e(shutdown.)43 b(If)29 b(the)e(message)g(is)i(not)e(r)n(e-)63
4368 y(ceived,)34 b(the)e(condition)g(is)g(an)h(abnormal)h(shutdown.)54
b(In)32 b(an)h(abnormal)h(shutdown,)e(the)63 4481 y(ORB)e(should)f
(raise)i(a)g Fh(COMM_FAILURE)25 b Fq(exception)k(wher)n(eas)h(in)h(an)f
(or)n(derly)g(shutdown,)63 4594 y(the)19 b(ORB)h(should)f
Fp(not)i Fq(raise)f(an)h(exception)e(and)h(should)g(try)f(to)h(r)n
(e-establish)g(a)h(new)e(connec-)63 4707 y(tion)j(transpar)n(ently)-10
b(.)204 4829 y(omniORB)27 b(implements)g(these)e(semantics)i
(completely)-10 b(.)40 b(However)-7 b(,)27 b(it)h(is)f(known)f(that)63
4942 y(some)34 b(ORBs)h(ar)n(e)h(not)f(\(yet\))g(able)i(to)e
(distinguish)f(between)g(an)i(or)n(derly)f(and)h(an)g(abnor)n(-)63
5055 y(mal)g(shutdown.)63 b(Usually)35 b(this)g(is)g(manifested)g(as)g
(the)f(client)i(in)f(these)f(ORBs)g(seeing)g(a)63 5168
y Fh(COMM_FAILURE)23 b Fq(occasionally)30 b(when)d(connected)g(to)h(an)
h(omniORB)g(server)-7 b(.)44 b(The)28 b(work-)63 5281
y(ar)n(ound)23 b(is)g(either)g(to)f(catch)j(the)d(exception)g(in)i(the)
f(application)h(code)f(and)g(r)n(etry)-10 b(,)22 b(or)h(to)g(turn)63
5394 y(of)n(f)g(the)f(idle)g(connection)h(shutdown)d(inside)i(the)g
(omniORB)h(server)-7 b(.)p eop
%%Page: 54 60
54 59 bop 221 282 a Fq(54)605 b Fi(CHAPTER)21 b(7.)51
b(CONNECTION)22 b(AND)h(THREAD)e(MANAGEMENT)221 539 y
Fo(7.6)119 b(T)-13 b(ransports)29 b(and)h(endpoints)221
754 y Fq(omniORB)21 b(can)g(support)d(multiple)i(network)f(transports.)
25 b(All)c(platforms)f(\(usually\))h(have)f(a)221 867
y(TCP)25 b(transport)d(available.)36 b(Unix)24 b(platforms)g(support)f
(a)h(Unix)h(domain)f(socket)f(transport.)221 980 y(Platforms)g(with)g
(the)e(OpenSSL)h(library)h(available)j(can)d(support)e(an)i(SSL)f
(transport.)362 1096 y(Servers)27 b(must)h(be)g(con\002gur)n(ed)f(in)i
(two)f(ways)f(with)i(r)n(egar)n(d)f(to)g(transports:)37
b(the)27 b(trans-)221 1209 y(ports)17 b(and)i(interfaces)f(on)g(which)h
(they)e(listen,)i(and)g(the)e(details)i(that)f(ar)n(e)h(published)f(in)
h(IORs)221 1321 y(for)h(clients)g(to)g(see.)25 b(Usually)c(the)e
(published)g(details)h(will)h(be)f(the)g(same)g(as)g(the)f(listening)h
(de-)221 1434 y(tails,)j(but)g(ther)n(e)e(ar)n(e)i(times)f(when)g(it)h
(is)g(useful)f(to)g(publish)h(dif)n(fer)n(ent)f(information.)362
1550 y(Details)27 b(ar)n(e)g(selected)e(with)h(the)g
Fh(endPoint)d Fq(family)28 b(of)e(parameters.)39 b(The)25
b(simplest)h(is)221 1663 y(plain)32 b Fh(endPoint)p Fq(,)d(which)j
(chooses)d(a)i(transport)e(and)i(interface)g(details,)i(and)e
(publishes)221 1776 y(the)h(information)i(in)f(IORs.)58
b(End)32 b(point)h(parameters)f(ar)n(e)h(in)g(the)g(form)g(of)g(URIs,)h
(with)e(a)221 1888 y(scheme)h(name)h(of)g(`)p Fh(giop:)p
Fq(',)h(followed)e(by)h(the)f(transport)f(name.)62 b(Dif)n(fer)n(ent)34
b(transports)221 2001 y(have)23 b(dif)n(fer)n(ent)g(parameters)e
(following)i(the)f(transport.)362 2117 y(TCP)h(end)f(points)f(have)i
(the)f(format:)448 2341 y Fh(giop:tcp:)p Fp(<host>)p
Fh(:)p Fp(<port>)221 2566 y Fq(The)35 b(host)g(must)g(be)h(a)g(valid)h
(host)e(name)h(for)f(the)g(server)g(machine.)68 b(It)35
b(determines)f(the)221 2679 y(network)e(interface)i(on)f(which)h(the)f
(server)f(listens.)60 b(The)33 b(port)f(selects)h(the)f(TCP)i(port)f
(to)221 2792 y(listen)c(on,)g(which)h(must)e(be)h(unoccupied.)45
b(Either)28 b(the)g(host)g(or)h(port,)g(or)f(both)h(can)g(be)g(left)221
2905 y(empty)-10 b(.)59 b(If)33 b(the)g(host)f(is)i(empty)-10
b(,)34 b(the)f(ORB)g(published)g(the)g(IP)g(addr)n(ess)f(of)h(the)g
(\002rst)f(non-)221 3018 y(loopback)20 b(network)e(interface)j(it)f
(can)h(\002nd)f(\(or)g(the)f(loopback)h(if)h(that)f(is)g(the)f(only)h
(interface\),)221 3131 y(but)34 b(listens)e(on)i Fp(all)g
Fq(network)e(interfaces.)60 b(If)34 b(the)f(port)f(is)i(empty)-10
b(,)35 b(the)d(operating)h(system)221 3244 y(chooses)21
b(a)i(port.)362 3359 y(Multiple)f(TCP)f(end)g(points)f(can)j(be)e
(selected,)f(either)g(to)h(specify)g(multiple)h(network)d(in-)221
3472 y(terfaces)j(on)g(which)h(to)e(listen,)h(or)g(\(less)g(usefully\))
g(to)g(select)f(multiple)i(TCP)g(ports)e(on)g(which)221
3585 y(to)h(listen.)362 3700 y(If)34 b(no)f Fh(endPoint)d
Fq(parameters)i(ar)n(e)i(set,)h(the)d(ORB)i(assumes)e(a)i(single)f
(parameter)g(of)221 3813 y Fh(giop:tcp::)p Fq(,)14 b(meaning)k(IORs)e
(contain)i(the)f(addr)n(ess)f(of)h(the)g(\002rst)g(non-loopback)g
(network)221 3926 y(interface,)23 b(the)f(ORB)g(listens)g(on)g(all)i
(interfaces,)e(and)h(the)f(OS)h(chooses)d(a)k(port)d(number)-7
b(.)362 4041 y(SSL)18 b(end)g(points)f(have)i(the)f(same)g(format)h(as)
f(TCP)h(ones,)f(except)f(`)p Fh(tcp)p Fq(')h(is)h(r)n(eplaced)f(with)
221 4154 y(`)p Fh(ssl)p Fq('.)27 b(Unix)c(domain)g(socket)e(end)h
(points)f(have)i(the)f(format:)448 4379 y Fh(giop:unix:)p
Fp(<\002lename>)221 4603 y Fq(wher)n(e)h(the)g(\002lename)h(is)g(the)f
(name)h(of)f(the)g(socket)f(within)i(the)f(\002lesystem.)29
b(If)24 b(the)f(\002lename)221 4716 y(is)g(left)g(blank,)g(the)e(ORB)i
(chooses)e(a)i(name)g(based)f(on)g(the)g(pr)n(ocess)f(id)i(and)g(a)g
(timestamp.)221 4986 y Fj(7.6.1)99 b(End)25 b(point)g(publishing)221
5168 y Fq(T)-8 b(o)25 b(publish)h(an)g(end)e(point)h(in)h(IORs,)g
(without)e(actually)j(listening)e(on)g(that)h(end)e(point,)i(the)221
5281 y Fh(endPointNoListe)o(n)i Fq(parameter)34 b(can)h(be)f(set.)61
b(This)34 b(can)h(be)f(useful)f(in)i(fault-tolerant)221
5394 y(applications)26 b(wher)n(e)f(r)n(eplicas)h(of)f(an)h(object)f
(can)i(be)e(contacted)f(at)i(mor)n(e)f(than)h(one)e(server)-7
b(.)p eop
%%Page: 55 61
55 60 bop 63 282 a Fi(7.7.)51 b(CONNECTION)22 b(SELECTION)f(AND)h
(ACCEPT)-7 b(ANCE)948 b Fq(55)63 539 y Fh(endPointNoList)o(en)14
b Fq(does)19 b(not)h(check)g(that)h(the)f(transport)f(speci\002ed)g(is)
i(sensible)f(for)g(the)63 652 y(curr)n(ent)i(machine,)h(so)f(it)h
(allows)g(the)f(addr)n(ess)f(of)i(a)g(dif)n(fer)n(ent)f(machine)i(to)e
(be)h(speci\002ed.)204 764 y(Similarly)-10 b(,)25 b(but)f(less)f
(likely)h(to)f(be)g(useful,)h(it)g(is)f(possible)g(to)g(ask)h(the)f
(server)f(to)i(listen)f(on)63 877 y(an)f(end)e(point,)h(but)g(not)g
(publish)h(the)f(details)g(in)h(IORs,)f(using)f(the)h
Fh(endPointNoPubli)o(sh)63 990 y Fq(parameter)-7 b(.)27
b(This)c(should)e Fp(not)i Fq(be)g(used)e(for)h(security)g(by)g
(obscurity!)204 1103 y(If)34 b(a)i(machine)f(has)g(multiple)g(TCP)f
(network)f(interfaces,)k(it)e(may)g(be)f(useful)g(to)g(pub-)63
1216 y(lish)h(all)i(interfaces,)h(instead)c(of)h(just)g(the)f(\002rst)g
(one.)65 b(This)35 b(is)g(necessary)f(if)i(dif)n(fer)n(ent)f(in-)63
1329 y(terfaces)29 b(ar)n(e)h(on)f(separate)g(non-gatewayed)e(subnets,)
j(for)f(example.)49 b(Publishing)30 b(all)h(ad-)63 1442
y(dr)n(esses)23 b(could)i(be)g(achieved)h(with)f(lots)g(of)g
Fh(endPoint)d Fq(parameters,)j(but)g(a)h(short-hand)e(is)63
1555 y(to)29 b(set)f(the)h Fh(endPointPublis)o(hA)o(ll)o(IF)o(s)24
b Fq(parameter)29 b(to)g(1.)49 b(That)29 b(\(in)h(conjunction)g(with)63
1668 y(a)k(`)p Fh(giop:tcp::)p Fq(')45 b(transport)32
b(selection)h(without)f(a)i(speci\002c)g(hostname\))f(causes)f(all)j
(the)63 1781 y(machine's)23 b(non-loopback)g(interfaces)f(to)g(be)g
(published)g(in)h(IORs.)63 2073 y Fo(7.7)119 b(Connection)30
b(selection)g(and)g(acceptance)63 2284 y Fq(In)e(the)f(face)j(of)e
(IORs)g(containing)h(details)f(about)g(multiple)h(dif)n(fer)n(ent)f
(end)g(points,)h(clients)63 2397 y(have)d(to)f(know)g(how)g(to)h
(choose)e(the)h(one)g(to)g(use)g(to)h(connect)f(a)h(server)-7
b(.)37 b(Similarly)-10 b(,)28 b(servers)63 2509 y(may)36
b(wish)f(to)g(r)n(estrict)g(which)h(clients)g(can)g(connect)g(to)f
(particular)h(transports.)65 b(This)35 b(is)63 2622 y(achieved)23
b(with)f Fp(transport)j(rules)p Fq(.)63 2870 y Fj(7.7.1)99
b(Client)25 b(transport)g(rules)63 3047 y Fq(The)j Fh(clientTransport)o
(Ru)o(le)23 b Fq(parameter)28 b(is)i(used)d(to)i(\002lter)g(and)g
(prioritise)f(the)h(or)n(der)63 3160 y(in)23 b(which)g(transports)d
(speci\002ed)i(in)h(an)g(IOR)g(ar)n(e)g(tried.)k(Each)c(r)o(ule)f(has)h
(the)f(form:)290 3334 y Fp(<addr)n(ess)k(mask>)d([action]+)63
3508 y Fq(The)f(addr)n(ess)f(mask)h(can)i(be)e(one)g(of)254
3710 y(1.)99 b Fh(localhost)449 b Fq(The)22 b(addr)n(ess)f(of)i(this)f
(machine)254 3823 y(2.)99 b Fp(w)-5 b(.x.y)m(.z)p Fh(/)p
Fp(m1.m2.m3.m4)99 b Fq(An)21 b(IPv4)h(addr)n(ess)e(with)h(the)f(bits)h
(selected)f(by)1365 3936 y(the)i(mask,)g(e.g.)g
(172.16.0.0/255.240.0.0.)254 4049 y(3.)99 b Fh(*)889
b Fq(W)-5 b(ildcar)n(d)24 b(that)e(matches)h(any)f(addr)n(ess)63
4270 y(The)g(action)h(is)f(one)g(or)h(mor)n(e)f(of)h(the)e(following:)
254 4495 y(1.)99 b Fh(none)153 b Fq(Do)22 b(not)g(use)g(this)g(addr)n
(ess)254 4608 y(2.)99 b Fh(tcp)208 b Fq(Use)21 b(a)i(TCP)g(transport)
254 4721 y(3.)99 b Fh(ssl)208 b Fq(Use)21 b(an)i(SSL)f(transport)254
4834 y(4.)99 b Fh(unix)153 b Fq(Use)21 b(a)i(Unix)g(socket)e(transport)
254 4947 y(5.)99 b Fh(bidir)f Fq(Any)19 b(connection)h(to)g(this)f
(addr)n(ess)g(should)g(be)794 5060 y(used)i(bidir)n(ectionally)j(\(see)
e(section)g(7.8\))63 5281 y(The)16 b(transport-selecting)f(actions)i
(form)h(a)f(prioritised)f(list,)i(so)f(an)h(action)f(of)g(`)p
Fh(unix,tcp,ssl)p Fq(')63 5394 y(means)27 b(to)f(use)h(a)g(Unix)h
(transport)d(if)j(ther)n(e)f(is)g(one,)g(failing)i(that)e(a)h(TCP)f
(transport,)g(failing)p eop
%%Page: 56 62
56 61 bop 221 282 a Fq(56)605 b Fi(CHAPTER)21 b(7.)51
b(CONNECTION)22 b(AND)h(THREAD)e(MANAGEMENT)221 539 y
Fp(that)30 b Fq(an)f(SSL)e(transport.)44 b(In)28 b(the)f(absence)h(of)h
(any)f(explicit)h(r)o(ules,)g(the)f(client)g(uses)f(the)h(im-)221
652 y(plicit)c(r)o(ule)f(of)f(`)p Fh(*)55 b(unix,tcp,ssl)p
Fq('.)362 764 y(If)36 b(mor)n(e)f(than)g(one)g(r)o(ule)g(is)h
(speci\002ed,)h(they)d(ar)n(e)i(prioritised)e(in)i(the)e(or)n(der)h
(they)f(ar)n(e)221 877 y(speci\002ed.)27 b(For)22 b(example,)g(the)g
(con\002guration)g(\002le)g(might)h(contain:)330 1053
y Fh(clientTransport)o(Rul)o(e)48 b(=)54 b(192.168.1.0/255)o(.25)o(5.)o
(25)o(5.)o(0)103 b(unix,tcp)330 1166 y(clientTransport)o(Rul)o(e)48
b(=)54 b(172.16.0.0/255.)o(240)o(.0)o(.0)266 b(unix,tcp)1421
1279 y(=)382 b(*)1090 b(none)221 1454 y Fq(This)25 b(would)f(be)h
(useful)g(if)h(ther)n(e)e(is)h(a)h(fast)f(network)e(\(192.168.1.0\))29
b(which)c(should)f(be)h(used)221 1567 y(in)30 b(pr)n(efer)n(ence)e(to)g
(another)g(network)g(\(172.16.0.0\),)33 b(and)c(connections)f(to)h
(other)e(networks)221 1680 y(ar)n(e)c(not)f(permitted)f(at)i(all.)362
1793 y(In)f(general,)f(the)g(r)n(esult)g(of)g(\002ltering)g(the)g(end)g
(point)g(speci\002cations)g(in)i(an)f(IOR)f(with)h(the)221
1906 y(client)32 b(transport)e(r)o(ule)i(will)h(be)f(a)g(prioritised)f
(list)h(of)g(transports)d(and)j(networks.)53 b(\(If)32
b(the)221 2019 y(transport)23 b(r)o(ules)i(ar)n(e)g(do)f(not)g
(prioritise)g(one)g(end)g(point)g(over)h(another)-7 b(,)24
b(the)g(or)n(der)g(the)g(end)221 2132 y(points)30 b(ar)n(e)i(listed)e
(in)h(the)g(IOR)g(is)g(used.\))52 b(When)30 b(trying)g(to)h(contact)g
(an)g(object,)i(the)d(ORB)221 2245 y(tries)23 b(its)g(possible)f(end)h
(points)f(in)i(turn,)f(until)h(it)f(\002nds)g(one)f(with)i(which)g(it)f
(can)h(contact)g(the)221 2358 y(object.)31 b(Only)25
b(after)e(it)h(has)g(unsuccessfully)f(tried)g(all)j(permissible)d
(transports)f(will)j(it)f(raise)221 2471 y(a)f Fh(TRANSIENT)c
Fq(exception)i(to)h(indicate)h(that)g(the)f(connect)g(failed.)221
2719 y Fj(7.7.2)99 b(Server)24 b(transport)h(rules)221
2896 y Fq(The)j(server)f(transport)f(r)o(ules)i(gave)g(the)g(same)g
(format)g(as)g(client)h(transport)e(r)o(ules.)44 b(Rather)221
3009 y(than)20 b(being)g(used)f(to)h(select)f(which)i(of)f(a)g(set)f
(of)i(ways)e(to)h(contact)g(a)h(machine,)g(they)e(ar)n(e)h(used)221
3122 y(to)26 b(determine)f(whether)g(or)i(not)f(to)g(accept)g
(connections)g(fr)n(om)h(particular)h(clients.)40 b(In)26
b(this)221 3235 y(example,)c(we)h(only)f(allow)h(connections)f(fr)n(om)
h(our)f(intranet:)330 3410 y Fh(serverTransport)o(Rul)o(e)48
b(=)54 b(localhost)978 b(unix,tcp,ssl)1421 3523 y(=)54
b(172.16.0.0/255.)o(240)o(.0)o(.0)266 b(tcp,ssl)1421
3636 y(=)54 b(*)1418 b(none)221 3812 y Fq(And)22 b(in)h(this)f(one,)g
(we)g(only)g(accept)h(SSL)f(connections)f(if)j(the)e(client)h(is)f(not)
g(on)h(the)e(intranet:)330 3987 y Fh(serverTransport)o(Rul)o(e)48
b(=)54 b(localhost)978 b(unix,tcp,ssl)1421 4100 y(=)54
b(172.16.0.0/255.)o(240)o(.0)o(.0)266 b(tcp,ssl)1421
4213 y(=)54 b(*)1418 b(ssl,bidir)221 4505 y Fo(7.8)119
b(Bidirectional)29 b(GIOP)221 4716 y Fq(omniORB)23 b(supports)d(bidir)n
(ectional)k(GIOP)-12 b(,)23 b(which)g(allows)g(callbacks)i(to)d(be)g
(made)h(using)e(a)221 4829 y(connection)j(opened)e(by)j(the)e(original)
j(client,)f(rather)f(than)g(the)g(normal)h(model)f(wher)n(e)g(the)221
4942 y(server)i(opens)f(a)j(new)e(connection)g(for)h(the)f(callback.)43
b(This)27 b(is)g(important)f(for)h(negotiating)221 5055
y(\002r)n(ewalls,)c(since)g(they)e(tend)g(not)h(to)g(allow)i
(connections)d(back)j(on)e(arbitrary)h(ports.)362 5168
y(Ther)n(e)f(ar)n(e)g(several)g(steps)f(r)n(equir)n(ed)g(for)i(bidir)n
(ectional)g(GIOP)g(to)f(be)g(enabled)g(for)g(a)h(call-)221
5281 y(back.)43 b(Both)27 b(the)g(client)h(and)f(server)g(must)f(be)i
(con\002gur)n(ed)e(corr)n(ectly)-10 b(.)42 b(On)28 b(the)f(client)h
(side,)221 5394 y(these)21 b(conditions)h(must)g(be)g(met:)p
eop
%%Page: 57 63
57 62 bop 63 282 a Fi(7.9.)51 b(SSL)22 b(TRANSPOR)m(T)2285
b Fq(57)199 539 y Fn(\017)46 b Fq(The)22 b Fh(offerBiDirecti)o(ona)o
(lG)o(IO)o(P)17 b Fq(parameter)22 b(must)g(be)g(set)g(to)g(tr)o(ue.)199
726 y Fn(\017)46 b Fq(The)21 b(client)i(transport)e(r)o(ule)h(for)g
(the)f(tar)n(get)h(server)f(must)g(contain)i(the)e Fh(bidir)f
Fq(action.)199 914 y Fn(\017)46 b Fq(The)26 b(POA)i(containing)f(the)g
(callback)i(object)e(\(or)h(objects\))e(must)h(have)h(been)e(cr)n
(eated)290 1027 y(with)c(a)i Fh(BidirectionalP)o(ol)o(ic)o(y)17
b Fq(value)23 b(of)g Fh(BOTH)p Fq(.)63 1239 y(On)g(the)f(server)f
(side,)h(these)f(conditions)g(must)h(be)h(met:)199 1452
y Fn(\017)46 b Fq(The)22 b Fh(acceptBiDirect)o(ion)o(al)o(GI)o(OP)16
b Fq(parameter)22 b(must)g(be)h(set)e(to)h(tr)o(ue.)199
1639 y Fn(\017)46 b Fq(The)30 b(server)g(transport)g(r)o(ule)h(for)g
(the)f(r)n(equesting)f(client)j(must)e(contain)i(the)e
Fh(bidir)290 1752 y Fq(action.)199 1940 y Fn(\017)46
b Fq(The)27 b(POA)i(hosting)d(the)i(object)g(contacted)f(by)h(the)f
(client)i(must)e(have)i(been)e(cr)n(eated)290 2053 y(with)22
b(a)i Fh(BidirectionalP)o(ol)o(ic)o(y)17 b Fq(value)23
b(of)g Fh(BOTH)p Fq(.)63 2352 y Fo(7.9)119 b(SSL)30 b(transport)63
2563 y Fq(omniORB)18 b(4.0)g(supports)e(an)i(SSL)f(transport,)g(using)g
(OpenSSL.)g(It)g(is)h(only)g(built)g(if)h(OpenSSL)63
2675 y(is)k(available.)32 b(On)23 b(platforms)g(using)f(Autoconf,)g(it)
h(is)g(autodetected)d(in)k(many)f(locations,)g(or)63
2788 y(its)30 b(location)g(can)h(be)f(given)h(with)f(the)f
Fh(--with-openssl=)24 b Fq(ar)n(gument)29 b(to)h Fh(configure)p
Fq(.)63 2901 y(On)g(other)e(platforms,)j(the)e Fh(OPEN_SSL_ROOT)24
b Fq(make)29 b(variable)j(must)d(be)h(set)e(in)i(the)f(plat-)63
3014 y(form)22 b(\002le.)204 3127 y(T)-8 b(o)25 b(use)h(the)g(SSL)f
(transport)g(fr)n(om)j(Python)d(you)g(must)h(import)h(and)f(set)g
(parameters)f(in)63 3240 y(the)18 b Fh(omniORB.sslTP)13
b Fq(module)19 b(befor)n(e)g(calling)i Fh(CORBA.ORB_init)o(\(\))p
Fq(.)f(T)-8 b(o)19 b(initialise)h(the)63 3353 y(module,)41
b(you)c(must)h(call)i(the)d Fh(certificate_au)o(tho)o(ri)o(ty)o(_f)o
(il)o(e\(\))o Fq(,)f Fh(key_file\(\))63 3466 y Fq(and)21
b Fh(key_file_passw)o(or)o(d\(\))14 b Fq(functions,)21
b(pr)n(oviding)g(the)f(\002le)h(names)g(of)g(the)g(certi\002cate)63
3579 y(authority)g(and)i(encryption)e(keys,)g(and)i(the)e(key)h(\002le)
g(passwor)n(d.)p eop
%%Page: 58 64
58 63 bop 221 282 a Fq(58)605 b Fi(CHAPTER)21 b(7.)51
b(CONNECTION)22 b(AND)h(THREAD)e(MANAGEMENT)p eop
%%Page: 59 65
59 64 bop 63 1187 a Fk(Chapter)44 b(8)63 1628 y Fm(Code)52
b(set)f(conversion)63 2098 y Fq(omniORB)31 b(4.0)i(supports)c(full)k
(code)e(set)f(negotiation,)j(used)d(to)h(select)g(and)h(translate)f
(be-)63 2211 y(tween)26 b(dif)n(fer)n(ent)i(character)g(code)f(sets,)g
(for)g(the)g(transmission)g(of)h(chars,)h(strings,)e(wchars)63
2324 y(and)c(wstrings.)28 b(The)22 b(support)f(is)i(mostly)g(transpar)n
(ent)f(to)g(application)j(code,)d(but)h(ther)n(e)f(ar)n(e)63
2437 y(a)g(number)f(of)h(options)e(that)h(can)i(be)e(selected.)26
b(This)c(chapter)f(covers)g(the)g(options,)f(and)h(also)63
2550 y(gives)h(some)g(pointers)f(about)i(how)f(to)g(implement)h(your)f
(own)g(code)g(sets,)f(in)i(case)g(the)f(ones)63 2663
y(that)g(come)h(with)f(omniORB)h(ar)n(e)g(not)f(suf)n(\002cient.)63
3119 y Fo(8.1)119 b(Native)29 b(code)h(set)63 3382 y
Fq(For)24 b(the)g(ORB)h(to)f(know)g(how)h(to)f(handle)h(strings)f
(given)h(to)f(it)h(by)g(the)f(application,)j(it)e(must)63
3495 y(know)d(what)i(code)e(set)h(they)f(ar)n(e)i(r)n(epr)n(esented)c
(with,)k(so)e(it)i(can)g(pr)n(operly)f(translate)g(them)g(if)63
3607 y(need)f(be.)29 b(The)23 b(default)g(is)g(ISO)g(8859-1)j(\(Latin)e
(1\).)30 b(A)24 b(dif)n(fer)n(ent)f(code)f(sets)g(can)i(be)f(chosen)f
(at)63 3720 y(initialisation)h(time)f(with)f(the)g Fh(nativeCharCodeS)o
(et)15 b Fq(parameter)-7 b(.)27 b(The)21 b(supported)d(code)63
3833 y(sets)j(ar)n(e)i(printed)e(out)h(at)h(initialisation)h(time)f(if)
g(the)f(ORB)h(traceLevel)f(is)g(15)i(or)e(gr)n(eater)-7
b(.)204 3972 y(For)28 b(most)h(applications,)i(the)e(default)g(is)h
(\002ne.)47 b(Some)29 b(applications)h(may)g(need)e(to)h(set)63
4085 y(the)21 b(native)h(char)h(code)e(set)f(to)i(UTF-8,)f(allowing)i
(the)e(full)i(Unicode)e(range)g(to)h(be)g(supported)63
4198 y(in)h(strings.)204 4336 y(In)g(omniORBpy)-10 b(,)22
b(wchar)i(and)f(wstring)g(ar)n(e)g(always)h(r)n(epr)n(esented)c(by)k
(the)e(Python)g(Uni-)63 4449 y(code)f(type,)g(so)h(ther)n(e)g(is)h(no)f
(need)f(to)h(select)g(a)h(native)g(code)f(set)f(for)i(wchar)-7
b(.)63 4905 y Fo(8.2)119 b(Code)30 b(set)g(library)63
5168 y Fq(T)-8 b(o)24 b(save)h(space)g(in)h(the)e(main)j(ORB)e(cor)n(e)
g(library)-10 b(,)27 b(most)d(of)h(the)g(code)f(set)g(implementations)
63 5281 y(ar)n(e)i(in)h(a)g(separate)f(library)-10 b(.)40
b(T)-8 b(o)25 b(load)i(it)f(fr)n(om)h(Python,)f(you)g(must)f(import)h
(the)g Fh(omniORB.)63 5394 y(codesets)19 b Fq(module)j(befor)n(e)g
(calling)i Fh(CORBA.ORB_init\(\))o Fq(.)1662 5622 y(59)p
eop
%%Page: 60 66
60 65 bop 221 282 a Fq(60)1534 b Fi(CHAPTER)22 b(8.)51
b(CODE)23 b(SET)f(CONVERSION)221 539 y Fo(8.3)119 b(Implementing)30
b(new)f(code)h(sets)221 750 y Fq(Code)23 b(sets)g(must)g(curr)n(ently)h
(be)g(implemented)f(in)h(C++.)33 b(See)23 b(the)g(omniORB)h(for)g(C++)h
(doc-)221 862 y(umentation)d(for)h(details.)p eop
%%Page: 61 67
61 66 bop 63 1203 a Fm(Bibliography)63 1662 y Fq([BLFIM98])45
b(T)-7 b(.)28 b(Berners-Lee,)e(R.)h(Fielding,)i(U.C.)e(Irvine,)i(and)f
(L.)g(Masinter)-7 b(.)49 b Fp(Uniform)28 b(Re-)538 1775
y(sour)n(ce)c(Identi\002ers)h(\(URI\):)e(Generic)g(Syntax)p
Fq(.)33 b(RFC)22 b(2396,)j(August)20 b(1998.)63 1962
y([OMG98])99 b(Object)32 b(Management)f(Gr)n(oup.)60
b Fp(CORBAServices:)45 b(Common)31 b(Object)h(Services)538
2075 y(Speci\002cation)p Fq(,)24 b(December)e(1998.)63
2263 y([OMG00])99 b(Object)31 b(Management)e(Gr)n(oup.)57
b Fp(Inter)n(operable)34 b(Naming)d(Service)h(r)n(evised)h(chap-)538
2376 y(ters)p Fq(,)51 b(August)42 b(2000.)104 b(Fr)n(om)44
b Fh(http://cgi.omg.o)o(rg)o(/c)o(gi)o(-)t(bi)o(n/)o(do)o(c?)538
2489 y(ptc/00-)t(08-)t(07)p Fq(.)63 2676 y([OMG01a])54
b(Object)36 b(Management)g(Gr)n(oup.)75 b Fp(The)36 b(Common)f(Object)i
(Request)g(Br)n(oker:)56 b(Ar-)538 2789 y(chitectur)n(e)36
b(and)e(Speci\002cation)p Fq(,)j(2.6)e(edition,)g(December)e(2001.)69
b(Fr)n(om)34 b Fh(http:)538 2902 y(//www.omg.org/)o(cgi)o(-)t(b)o(in)o
(/do)o(c?)o(fo)o(rm)o(al)o(/01)o(-)t(1)o(2-)s(01)p Fq(.)63
3090 y([OMG01b])49 b(Object)40 b(Management)g(Gr)n(oup.)87
b Fp(Python)41 b(Language)g(Mapping)g(Speci\002cation)p
Fq(,)538 3203 y(Febr)o(uary)23 b(2001.)39 b Fh(http://www.omg)o(.o)o
(rg)o(/te)o(ch)o(no)o(lo)o(gy)o(/do)o(cu)o(me)o(nt)o(s/)538
3316 y(formal/python_)o(lan)o(gu)o(ag)o(e_)o(ma)o(ppi)o(ng)o(.h)o(tm)o
Fq(.)1662 5622 y(61)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
